function toastApp(e){function o(o){this.message=o,e.show({controller:"toastController",controllerAs:"vm",templateUrl:"views/pages/dsctoast.html",action:"OK",highlightAction:!0,position:"top left",hideDelay:5e3})}var t={message:"",errorMessage:o};return t}function chatDSC(e,o,t,r,a,n){var i=this;i.newmsg="",i.messages=[],i.replay=!1,i.nickname="",i.close=function(){t("chat").close().then(function(){r.debug("close chat")})},i.initHistoryChat=function(){i.idProblem=n.localStorage.getItem("problemid"),i.nickname=n.localStorage.getItem("nickname"),a.gethistorychat(i.idProblem).success(function(e){if(e.success)for(var o=0;o<e.historychat.length;o++){var t=new Date(e.historychat[o].time),r={nickname:e.historychat[o].nickname,msg:e.historychat[o].msg,time:t.getDate()+"/"+(t.getMonth()+1)+"/"+t.getFullYear()+" ["+t.getHours()+":"+t.getMinutes()+"] "};i.messages.push(r)}})},i.showReplay=function(){i.replay=i.replay?!1:!0},o.on("onBroadcastChat",function(e){var o=new Date(e[e.length-1].time);i.messages.push({nickname:e[e.length-1].nickname,msg:e[e.length-1].msg,time:o.getDate()+"/"+(o.getMonth()+1)+"/"+o.getFullYear()+" ["+o.getHours()+":"+o.getMinutes()+"] "})}),i.sendMessage=function(e){o.emit("broadcastChat",e),i.newmsg=""}}function dscReportController(){function e(e){var o=document.getElementById("projectResport"),t=new jsPDF("l","px");t.addHTML(o,0,0,{pagesplit:!0},function(e){t.save("test.pdf")})}var o=this;o.idproblem="ajflajfljalfjaljf",o.buidReport=e}function evaluationframeworkController(e,o,t,r){function a(){n.idproblem=e.localStorage.getItem("problemid"),o.getevaluation(n.idproblem).success(function(e){e.success?n.evaluationframeworkList=e.evaluationframework:toastApp.errorMessage(e.message)})}var n=this;n.evaluationframeworkList=[],n.initEvaluation=a,t.on("onBroadcastFrameSave",function(e){angular.forEach(n.evaluationframeworkList,function(o){o.onionlayer==e.onionlayer&&angular.forEach(o.stakeholders,function(o){o._id==e._id&&(o.name=e.name,o.onionlayer=e.onionlayer,o.description=e.description,o.openEdit=e.openEdit,o.problems=e.problems,o.solutions=e.solutions)})})}),r.saveDiscution=function(e){t.emit("broadcastFrameSave",e)},t.on("onUpdateStakeholder",function(e){console.log(e)}),r.setOpenEditDiscution=function(e){e.openEdit=!0}}function semioticframeworkController(e,o,t){function r(){u.idproblem=o.localStorage.getItem("problemid"),t.getsemiotic(u.idproblem).success(function(e){e.success?u.semioticframework=e.semioticframework:toastApp.errorMessage(e.message)})}function a(o,t){var r={text:o,update:t};e.emit("updateSocialWorld",r)}function n(o,t){var r={text:o,update:t};e.emit("updatePragmatic",r)}function i(o,t){var r={text:o,update:t};e.emit("updateSemantic",r)}function s(o,t){var r={text:o,update:t};e.emit("updateSyntatic",r)}function l(o,t){var r={text:o,update:t};e.emit("updateEmpirical",r)}function c(o,t){var r={text:o,update:t};e.emit("updatePhysical",r)}var u=this;u.idproblem="",u.saveSocialWorld=a,u.savePragmatic=n,u.saveSemantic=i,u.saveSyntatic=s,u.saveEmpirical=l,u.savePhysical=c,u.semioticframework="",u.initSemioticFramework=r,e.on("onUpdateSocialWorld",function(e){u.semioticframework.socialworld=e}),e.on("onUpdatePragmatic",function(e){u.semioticframework.pragmatic=e}),e.on("onUpdateSemantic",function(e){u.semioticframework.semioticramework=e}),e.on("onUpdateSyntatic",function(e,o){u.semioticframework.syntatic=e}),e.on("onUpdateEmpirical",function(e){u.semioticframework.empirical=e}),e.on("onUpdatePhysical",function(e){u.semioticframework.physical=e})}function stakeholderController(e,o,t,r){function a(){n.idproblem=t.localStorage.getItem("problemid"),r.getonion(n.idproblem).success(function(e){e.success?n.stakeholderList=e.stakeholders:toastApp.errorMessage(e.message)}),n.inProcessing=!1}var n=this;n.idproblem="",n.stakeholderList=[],n.stakeholder="",n.intitOnion=a,n.move=!1,n.inProcessing=!0,e.on("onBroadcastOnionSave",function(e){angular.forEach(n.stakeholderList,function(o){o._id==e._id&&(o.stakeholder=e.stakeholder,o.name=e.name,o.description=e.description,o.openEdit=e.dadaopenEdit,o.x=e.x,o.y=e.y)})}),o.saveStakeholder=function(o){e.emit("broadcastOnionSave",o)},e.on("onBroadcastOnionEdit",function(e){angular.forEach(n.stakeholderList,function(o){o._id==e&&(o.openEdit=!0)})}),o.setOpenEdit=function(o){e.emit("broadcastOnionEdit",o)},e.on("onBroadcastOnionRemove",function(e){var o=document.getElementById("stakeholder"+n.stakeholderList[e]._id);o.style.display="none",n.stakeholderList.splice(e,1)}),o.delPostIt=function(o,t){var r={index:o,stakeholder:t};e.emit("broadcastOnionRemove",r)},e.on("onBroadcastOnionAdd",function(e){n.stakeholderList.push(e)}),o.addPostIt=function(o,t){var r={onionlayer:t,name:"",description:"",openEdit:!0,x:o.pageX+"px",y:o.pageY+"px"};e.emit("broadcastOnionAdd",r)},n.acende=function(e){e.target.setAttribute("opacity","0.8")},n.apaga=function(e){e.target.setAttribute("opacity","1.0")}}function valueIdentificationFrameController(e,o,t,r){var a=this;a.inProcessing=!0,a.idProblem="",a.useremail="",a.newvalues="",a.stakeholderList=[{onionlayer:"Community",stakeholders:[]},{onionlayer:"Market",stakeholders:[]},{onionlayer:"Source",stakeholders:[]},{onionlayer:"Contruibuition",stakeholders:[]},{onionlayer:"Technico",stakeholders:[]}],a.sugestionValues="",a.sugestionValuesArray=["Acessibilidade","Adaptabilidade","Est�tica","Autonomia","Disponibilidade","Consci�ncia","Colabora��o","Conversa��o","Emo��o e Afeto","Grupos","Identidade","Consentimento informado","Meta-comunica��o","Normas","Objeto","Portabilidade","Presen�a","Privacidade","Propriedade","Reciprocidade, Relacionamento, Reputa��o,Escalabilidade","Seguran�a","Compartilhamento","Confian�a","Usabilidade","Visibilidade"],a.initValueIdentificationFrame=function(){a.idproblem=e.localStorage.getItem("problemid"),o.getonion(a.idproblem).success(function(e){if(e.success){if(e.stakeholders.length>0){for(var o=1;o<a.sugestionValuesArray.length;o++)a.sugestionValues+=a.sugestionValuesArray[o]+", ";a.sugestionValues[a.sugestionValuesArray[a.sugestionValuesArray.length-1]]+".";for(var r=0;r<e.stakeholders.length;r++)for(var n=0;n<a.stakeholderList.length;n++){var i={_id:e.stakeholders[r]._id,onionlayer:e.stakeholders[r].onionlayer,values:e.stakeholders[r].values,name:e.stakeholders[r].name,description:e.stakeholders[r].description,openEdit:e.stakeholders[r].openEdit,newValues:[]};e.stakeholders[r].onionlayer!=a.stakeholderList[n].onionlayer||a.stakeholderList[n].stakeholders.push(i)}}a.inProcessing=!1}else t.errorMessage(e.message)})},r.on("onBroadcastOnionSave",function(e){angular.forEach(a.stakeholderList,function(o){o._id==e._id&&(o.onionlayer=e.onionlayer,o.values=e.values,o.name=e.name,o.description=e.description,o.openEdit=e.openEdit,o.newValues=[])})}),a.setSuggestionShow=function(e){e.openEdit=!0},a.leaveSuggestionShow=function(e){e.openEdit=!1},a.removeValueIdentication=function(e,o){for(var t=[],a=0;a<o.values.length;a++)o.values[a]!=e&&t.push(o.values[a]);o.values=t,r.emit("broadcastOnionSave",o)},a.setValueIdentication=function(e){if(console.log(e.newValues),""===e.newValues||void 0===e.newValues)t.errorMessage("Valor n�o especificado.");else{for(var o=e.newValues.split(","),a=0;a<o.length;a++)e.values.push(o[a]);console.log(e.values),e.newValues="",e.openEdit=!1,r.emit("broadcastOnionSave",e)}}}!function(){"use strict";angular.module("app",["toastService","textAngular","luegg.directives","DropDSC","authService","ui.router","ngMaterial","ngMdIcons","ngCookies","pascalprecht.translate"]).config(["$httpProvider",function(e){e.interceptors.push("AuthInterceptor")}])}(),angular.module("toastService",[]).controller("toastController",["$mdToast","toastApp",function(e,o){var t=this;t.message=o.message,t.closeToast=function(){e.hide()}}]).factory("toastApp",toastApp),toastApp.$inject=["$mdToast"],function(){"use strict";function e(e,o){e.state("init",{url:"/",templateUrl:"views/pages/initpage.html",controller:"loginController as vm"}).state("init.login",{url:"login",views:{"content-tab":{templateUrl:"views/pages/userlogin.html",controller:"loginController as vm"}}}).state("init.signup",{url:"signup",views:{"content-tab":{templateUrl:"views/pages/signup.html",controller:"signupController as vm"}}}).state("init.rescuepassword",{url:"rescuepassword",views:{"content-tab":{templateUrl:"views/pages/rescuepassword.html",controller:"signupController as vm"}}}).state("startproblem",{url:"/startproblem",templateUrl:"views/pages/startproblem.html",controller:"startProblemController as vm"}).state("newpassword",{url:"/newpassword/:mytoken",templateUrl:"views/pages/newpassword.html",controller:"signupController as vm"}).state("problem",{url:"/problem",templateUrl:"views/pages/problem.html",controller:"menuProblemController as vm"}).state("problem.dscreport",{url:"/dscreport",views:{"problem-description":{templateUrl:"views/pages/dscreport.html",controller:"dscReportController as vm"}}}).state("problem.description",{url:"/description",views:{"problem-description":{templateUrl:"views/pages/problemdescription.html",controller:"editProblemController as vm"}}}).state("problem.collaborators",{url:"/collaborators",views:{"problem-description":{templateUrl:"views/pages/collaborators.html",controller:"controllerCollaborators as vm"}}}).state("problem.stakeholders",{url:"stakeholders",views:{"dsc-artifact":{templateUrl:"views/pages/stakeholders.html",controller:"stakeholderController as vm"}}}).state("problem.evaluationframework",{url:"evaluationframework",views:{"dsc-artifact":{templateUrl:"views/pages/evaluationframework.html",controller:"evaluationframeworkController as vm"}}}).state("problem.semioticframework",{url:"semioticframework",views:{"dsc-artifact":{templateUrl:"views/pages/semioticframework.html",controller:"semioticframeworkController as vm"}}}).state("problem.carf",{url:"carf",views:{"dsc-artifact":{templateUrl:"views/pages/carf.html",controller:"carfController as vm"}}}).state("problem.vif",{url:"vif",views:{"dsc-artifact":{templateUrl:"views/pages/vif.html",controller:"valueIdentificationFrameController as vm"}}}),o.otherwise("/login")}angular.module("app").config(e),e.$inject=["$stateProvider","$urlRouterProvider"]}(),function(){"use strict";function e(e,o,t,r){function a(){i.idProblem=e.localStorage.getItem("problemid"),t.getcarf(i.idProblem).success(function(e){e.success&&(i.localStakeholders=e.stakeholders,i.stakeholderList=i.localStakeholders,i.carfList=e.carf,i.carfPriorityList=i.localPriorityList)}),i.inProcessing=!1}function n(){i.carf={_id:"",pms:"",values:[],priority:"",requirement:"",stakeholders:[]},i.valueList=[]}var i=this;i.idProblem="",i.inProcessing=!0,i.valueList=[],i.stakeholderList=[],i.localStakeholders=[],i.carf={pms:"",values:[],priority:"",requirement:"",stakeholders:[]},i.initCarf=a,i.carfList=[],i.carfPriorityList=[],o.on("onBroadcastCARFadd",function(e){i.carfList.push(e),n(),i.stakeholderList=i.localStakeholders,i.carfPriorityList=i.localPriorityList}),i.addpmsvalue=function(e){""==e.pms?r.errorMessage("Select PMS"):e.values.length<1?r.errorMessage("Select one or more Value"):e.stakeholders.length<1?r.errorMessage("Select one or more Stakeholder(s)"):""==e.priority?r.errorMessage("Select priority [Low, Medium or High]"):(o.emit("broadcastCARFadd",e),i.stakeholderList=[],i.carfPriorityList=[])},o.on("onBroadcastCARFremove",function(e){i.carfList.splice(e,1)}),i.removeCARF=function(e,t){var r={index:e,carf:t};o.emit("broadcastCARFremove",r)},i.selectPMSValue=function(e){void 0!=e&&angular.forEach(i.carfPMSValue,function(o){return o.pms==e?(i.carf.values=[],void(i.valueList=o.values)):void 0})},i.setPriotity=function(e){i.carf.priority=e},i.addListValue=function(e){if(0==i.carf.values.length)i.carf.values.push(e);else{for(var o=0;o<i.carf.values.length;o++)if(e==i.carf.values[o])return void i.carf.values.splice(o,1);i.carf.values.push(e)}},i.addStakeholder=function(e){if(0==i.carf.stakeholders.length)i.carf.stakeholders.push(e);else{for(var o=0;o<i.carf.stakeholders.length;o++)if(e==i.carf.stakeholders[o])return void i.carf.stakeholders.splice(o,1);i.carf.stakeholders.push(e)}},i.localPriorityList=["Low","Medium","High"],i.carfPMSValue=[{pms:"Interaction",values:["Identity","Norms"]},{pms:"Association",values:["Conversation","Groups","Relationship","Trust"]},{pms:"Learning",values:["Meta-communication"]},{pms:"Play",values:["Aesthetics","Emotion and Affection"]},{pms:"Protection",values:["Informed consert","Reputation","Security"]},{pms:"Exploitation",values:["Accessibility","Object","Property (ownership)","Usability"]},{pms:"Teporality",values:["Availability","Awareness","Presence"]},{pms:"Territoriality",values:["Portability","Privacy","Scalability","Visibility"]},{pms:"Classification",values:["Autonomy","Collaboration","Sharing","Adaptability"]},{pms:"Subsistence",values:["Reciprocity"]}]}angular.module("app").controller("carfController",e),e.$inject=["$window","Socket","problemService","toastApp"]}(),angular.module("app").controller("chatDSC",chatDSC),chatDSC.$inject=["$timeout","Socket","$mdSidenav","$log","problemService","$window"],function(){"use strict";function e(e,o,t){function r(e){for(var o=0;o<a.collaborators.length;o++)if(e==a.collaborators[o].email)return!0;return!1}var a=this;a.idProblem="",a.collaborators=[],a.useremail="",a.initCollaborators=function(){a.idProblem=e.localStorage.getItem("problemid"),a.useremail=e.localStorage.getItem("useremail"),o.getcollaborators(a.idProblem).success(function(e){e.success?a.collaborators=e.collaborators:t.errorMessage(e.message)})},a.addCollaborator=function(e){if(a.useremail==e)t.errorMessage(a.useremail+" is email of owner.");else if(r(e))t.errorMessage("Usuario Cadastrado.");else{var n={idproblem:a.idProblem,email:e};o.invite(n).success(function(e){e.success?a.collaborators=e.collaborators:t.errorMessage(e.message)})}},a.removeCollaborator=function(e){var r={idproblem:a.idProblem,email:e.email};o.removecollaborators(r).success(function(e){e.success?(t.errorMessage("Colaborador foi removido do projeto."),a.collaborators=e.collaborators):t.errorMessage(e.message)})}}angular.module("app").controller("controllerCollaborators",e),e.$inject=["$window","problemService","toastApp"]}(),angular.module("app").controller("dscReportController",dscReportController),angular.module("app").controller("evaluationframeworkController",evaluationframeworkController),evaluationframeworkController.$inject=["$window","problemService","Socket","$scope"],function(){"use strict";function e(e,o,t,r,a,n){function i(e){var o=a.debounce(function(){r(e).toggle().then(function(){n.debug("toggle "+e+" is done")})},300);return o}var s=this;s.openChat=i("chat"),s.formAddCollaborators=function(){t.go("problem.collaborators")},s.openReport=function(){t.go("problem.dscreport")},s.editDescriptionProblem=function(){t.go("problem.description")},s.doLogout=function(){e.logout(),t.go("init.login")}}angular.module("app").controller("menuProblemController",e),e.$inject=["Auth","$timeout","$state","$mdSidenav","$mdUtil","$log"]}(),function(){"use strict";function e(e,o,t,r,a,n){var i=this,s=!0;i.problem="",i.tabsdsc=['<md-tab data-ui-sref="problem.stakeholders" md-active="$state.is(\'problem.stakeholders\')" label="{{\'LABEL_ARTIFACT_STAKEHOLDER\' | translate }}"></md-tab>','<md-tab data-ui-sref="problem.evaluationframework" md-active="$state.is(\'problem.evaluationframework\')" label="{{\'LABEL_ARTIFACT_EVALUATION_FRAMEWORK\' | translate }}"></md-tab>','<md-tab data-ui-sref="problem.semioticframework" md-active="$state.is(\'problem.semioticframework\')" label="{{\'LABEL_ARTIFACT_SEMIOTIC_FRAMEWORK\' | translate }}"></md-tab>','<md-tab data-ui-sref="problem.carf" md-active="$state.is(\'problem.carf\')" label="CARF"></md-tab></md-tabs>'],i.getCurrentProblem=function(){i.idProblem=a.localStorage.getItem("problemid"),n.getproblem(i.idProblem).success(function(e){e.success?i.problem=e.problem:r.errorMessage(e.message)})};var l=function(){s=!0};o.on("onAtualizarProblema",function(e){console.log("=========================================================================retorno...."+e),i.problem.description=e.description,i.problem.update=s}),e.problemUpdate=function(e){e.update=s,o.emit("atualizarProblema",e),s&&(s=!1,t(l,2e3))},e.saveDescription=function(e){console.log("============================================================================="),e.update=s,o.emit("atualizarProblema",e)}}angular.module("app").controller("editProblemController",e),e.$injectre=["$scope","Socket"],e.$inject=["$scope","Socket","$timeout","toastApp","$window","problemService"]}(),function(){"use strict";function e(e,o){function t(o){return e.post(v,o)}function r(o){return e.get(h+"?idproblem="+o)}function a(o){return e.get(f+"?email="+o)}function n(o){return e.get(k+"?idproblem="+o)}function i(o){return e.post(w,o)}function s(o){return e.get(S+"?idproblem="+o)}function l(o){return e.get(y+"?idproblem="+o)}function c(o){return e.get(P+"?idproblem="+o)}function u(o){return e.get(C+"?idproblem="+o)}function m(o){return e.get($+"?idproblem="+o)}function p(o){return e.get(b+"?email="+o)}function d(o){return e.get(L+"?idproblem="+o.idproblem+"&email="+o.email)}function g(o){return e.get(A+"?idproblem="+o)}var f="/api/problem/getproblems",b="/api/problem/getproblemscollaborator",v="/api/problem/newproblem",h="/api/problem/getproblem",k="/api/problem/getcollaborators",w="/api/problem/invite",S="/api/problem/getonion",y="/api/problem/getevaluation",P="/api/problem/getsemiotic",C="/api/problem/getcarf",$="/api/problem/removeproblem",L="/api/problem/removecollaborator",A="/api/problem/historychat",E={newproblem:t,getuserproblems:a,getproblem:r,getcollaborators:n,invite:i,getonion:s,getevaluation:l,getsemiotic:c,getcarf:u,removeproblem:m,getproblemscollaborator:p,removecollaborators:d,gethistorychat:g};return E}angular.module("app").factory("problemService",e),e.$inject=["$http","$location"]}(),angular.module("app").controller("semioticframeworkController",semioticframeworkController),semioticframeworkController.$inject=["Socket","$window","problemService"],angular.module("app").controller("stakeholderController",stakeholderController),stakeholderController.$inject=["Socket","$scope","$window","problemService"],function(){"use strict";function e(e,o,t,r,a,n,i){function s(e){n.removeproblem(e).success(function(o){if(o.success){for(var t=0;t<c.problemList.length;t++)if(c.problemList[t]._id==e){c.problemList.splice(t,1);break}}else i.errorMessage(o.message)})}function l(e,o){e.hide=function(){o.hide()},e.cancel=function(){o.cancel()},e.addNewProblem=function(e){c.startNewProblem(e),o.cancel()}}var c=this;c.nickname="",c.userid="",c.useremail="",c.problemList=[],c.problemCollaboratorList=[],c.loginInProgress=!0,c.getProblems=function(){c.userid=a.localStorage.getItem("userid"),c.nickname=a.localStorage.getItem("nickname"),c.useremail=a.localStorage.getItem("useremail"),n.getuserproblems(c.useremail).success(function(e){if(e.success){for(var o=0;o<e.problems.length;o++)e.problems[o].description=e.problems[o].description.replace(/(<([^>]+)>)/gi,"").substring(0,460);c.problemList=e.problems}else i.errorMessage(e.message)}),n.getproblemscollaborator(c.useremail).success(function(e){if(e.success){for(var o=0;o<e.problems.length;o++)e.problems[o].description=e.problems[o].description.replace(/(<([^>]+)>)/gi,"").substring(0,460);c.problemCollaboratorList=e.problems}else i.errorMessage(e.message)}),c.loginInProgress=!1},c.revomveProblem=function(o,t){var r=e.confirm().parent(angular.element(document.body)).title("Detete Problem?").content("Title: "+t.title).ariaLabel("Remove Problem").ok("Desejo remover!").cancel("Cancel").targetEvent(o);e.show(r).then(function(){s(t._id)})},c.startNewProblem=function(e){e.userid=c.userid,n.newproblem(e).success(function(e){e.success?c.editProblem(e.problem):i.errorMessage(e.message)})},c.editProblem=function(e){a.localStorage.setItem("problemid",e._id);var t={idproblem:e._id,nickname:c.nickname};r.emit("initProblem",t),o.go("problem.stakeholders")},c.doLogout=function(){t.logout(),o.go("init.login")},c.newProblem=function(o){e.show({controller:l,templateUrl:"views/pages/newproblem.html",parent:angular.element(document.body),targetEvent:o})},l.$inject=["$scope","$mdDialog"]}angular.module("app").controller("startProblemController",e),e.$inject=["$mdDialog","$state","Auth","Socket","$window","problemService","toastApp"]}(),angular.module("app").controller("valueIdentificationFrameController",valueIdentificationFrameController),valueIdentificationFrameController.$inject=["$window","problemService","toastApp","Socket"],function(){"use strict";function e(e){e.useStaticFilesLoader({prefix:"app/language/lang-",suffix:".json"}),e.preferredLanguage("en"),e.useSanitizeValueStrategy("escaped"),e.useLocalStorage()}function o(e){this.setLang=function(o){e.use(o)}}function t(){return{templateUrl:"app/language/changeLanguage.html",restrict:"E"}}angular.module("app").config(e).controller("languageController",o).directive("changeLanguage",t),e.$inject=["$translateProvider"],o.$inject=["$translate"]}(),function(){"use strict";function e(e,o,t,r,a,n,i,s,l){function c(e){t.create(e).success(function(t){t.success?(n.setToken(t.token),i.getUser().then(function(t){d.user=t.data,d.loginInProgress=!1,o.localStorage.setItem("useremail",e.email),o.localStorage.setItem("userid",e.id),o.localStorage.setItem("nickname",e.nickname),d.setLang(e.language),a.errorMessage(s("translate")("WELCOME_SYSTEM")+": "+d.user.nickname),r.go("startproblem")})):a.errorMessage("Email Já cadastrado")})}function u(o){e.use(o)}function m(e){t.rescuePassword(e).success(function(e){console.log(e),a.errorMessage(e.success?"Email com instruções enviado":"Error")})}function p(e){t.changePassword(e).success(function(e){e.success?(a.errorMessage("Senha alterada com sucesso. Faça login com a nova senha."),r.go("init")):a.errorMessage("Error")})}var d=this;d.message="",d.save=c,d.rescuePassword=m,d.changePassword=p,d.setLang=u,d.loginInProgress=!1}angular.module("app").controller("signupController",e),e.$inject=["$translate","$window","signupService","$state","toastApp","AuthToken","Auth","$filter","$stateParams"]}(),function(){"use strict";function e(e,o){function t(o){return e.post(n,o)}function r(o){return e.post(i,o)}function a(t){var r=o.search();return e.get(s+"?mytoken="+r.mytoken+"&password="+t.password)}var n="/api/signup/",i="/api/rescuepasswd/",s="/api/rescuepasswd/newpasswd/",l={create:t,rescuePassword:r,changePassword:a};return l}angular.module("app").factory("signupService",e),e.$inject=["$http","$location"]}(),function(){"use strict";function e(e,o){var t=e.extendPalette("teal",{contrastDefaultColor:"light",contrastDarkColors:["50"],50:"E0F2F1"});e.definePalette("customGreen",t),e.theme("default").primaryPalette("customGreen",{"default":"500","hue-1":"50"}).accentPalette("teal"),e.theme("input","default").primaryPalette("green")}angular.module("app").config(e),e.$inject=["$mdThemingProvider","$locationProvider"]}(),function(){"use strict";angular.module("authService",[]).factory("Auth",["$http","$q","AuthToken",function(e,o,t){var r={};return r.login=function(o,r){return e.post("/api/login",{email:o,password:r}).success(function(e){return t.setToken(e.token),e})},r.logout=function(){t.setToken()},r.isLoggedIn=function(){return t.getToken()?!0:!1},r.getUser=function(){return t.getToken()?e.get("/api/me"):o.reject({message:"User has no token"})},r}]).factory("AuthToken",["$window",function(e){var o={};return o.getToken=function(){return e.localStorage.getItem("token")},o.setToken=function(o){o?e.localStorage.setItem("token",o):e.localStorage.removeItem("token")},o}]).factory("AuthInterceptor",["$q","$location","AuthToken",function(e,o,t){var r={};return r.request=function(e){var o=t.getToken();return o&&(e.headers["x-access-token"]=o),e},r}])}(),angular.module("DropDSC",[]).directive("draggable",["$document","Socket",function(e,o){return{restrict:"A",replace:!0,link:function(o,t,r){function a(e){var r=e.target.id;"svg"==r&&(r=""),o.stakeholder.onionlayer=r,y=e.pageY,x=e.pageX,t.css({top:y+"px",left:x+"px"}),o.stakeholder.x=x+"px",o.stakeholder.y=y+"px"}function n(){e.unbind("mousemove",a),e.unbind("mouseup",n)}t.on("mousedown",function(o){"stakeholder"==o.target.id.substring(0,11)&&(o.preventDefault(),e.bind("mousemove",a),e.bind("mouseup",n))})}}}]),function(){"use strict";function e(e,o,t,r,a,n,i){var s=this;s.inProgress=!1,s.setLang=function(o){e.use(o)},s.loggedIn=r.isLoggedIn(),o.$on("$routeChangeStart",function(){s.loggedIn=r.isLoggedIn(),r.getUser().then(function(e){s.user=e.data})}),s.doLogin=function(e){s.inProgress=!0,s.error="",r.login(e.email,e.password).success(function(e){a.localStorage.setItem("useremail",e.email),a.localStorage.setItem("userid",e.id),a.localStorage.setItem("nickname",e.nickname),s.setLang(e.language),s.inProgress=!1,r.getUser().then(function(e){s.user=e.data,i.errorMessage(n("translate")("WELCOME_SYSTEM")+": "+s.user.nickname)}),e.success?t.go("startproblem"):s.error=e.message})},s.doLogout=function(){r.logout(),t("init")}}angular.module("app").controller("loginController",e),e.$inject=["$translate","$rootScope","$state","Auth","$window","$filter","toastApp"]}(),angular.module("app").service("Socket",["$location","$timeout",function(e,o){this.socket=io(),this.on=function(e,t){this.socket&&this.socket.on(e,function(e){o(function(){t(e)})})},this.emit=function(e,o){this.socket&&this.socket.emit(e,o)},this.removeListener=function(e){this.socket&&this.socket.removeListener(e)}}]);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInRvYXN0LnNlcnZpY2UuanMiLCJwcm9ibGVtL2NoYXQuY29udHJvbGxlci5qcyIsInByb2JsZW0vZHNjcmVzcG9ydC5jb250cm9sbGVyLmpzIiwicHJvYmxlbS9ldmFsdWF0aW9uZnJhbWV3b3JrLmNvbnRyb2xsZXIuanMiLCJwcm9ibGVtL3NlbWlvdGljZnJhbWV3b3JrLmVkaXQuY29udHJvbGxlci5qcyIsInByb2JsZW0vc3Rha2Vob2xkZXIuZWRpdC5jb250cm9sbGVyLmpzIiwicHJvYmxlbS92YWx1ZWRlbnRpZmljYXRpb25mcmFtZS5jb250cm9sbGVyLmpzIiwiZHNjLmFwcC5qcyIsInJvdXRlci5hcHAuanMiLCJhcHAuZHNjLm1pbi5qcyIsInByb2JsZW0vY2FyZi5jb250cm9sbGVyLmpzIiwicHJvYmxlbS9jb2xsYWJvcmF0b3JzLmNvbnRyb2xsZXIuanMiLCJwcm9ibGVtL21lbnUucHJvYmxlbS5jb250cm9sbGVyLmpzIiwicHJvYmxlbS9wcm9ibGVtLmVkaXQuY29udHJvbGxlci5qcyIsInByb2JsZW0vcHJvYmxlbS5zZXJ2aWNlLmpzIiwicHJvYmxlbS9zdGFydC5wcm9ibGVtLmNvbnRyb2xsZXIuanMiLCJsYW5ndWFnZS90cmFuc2xhdGUuY29udHJvbGxlci5qcyIsInVzZXIvc2lnbnVwLmNvbnRyb2xsZXIuanMiLCJ1c2VyL3NpZ251cC5zZXJ2aWNlLmpzIiwiYXBwLmNvbmZpZy5qcyIsImF1dGguc2VydmljZS5qcyIsImRyYWcuZHNjLmpzIiwibG9naW4uY29udHJvbGxlci5qcyIsInNvY2tldC5zZXJ2aWNlLmpzIl0sIm5hbWVzIjpbInRvYXN0QXBwIiwiJG1kVG9hc3QiLCJlcnJvck1lc3NhZ2UiLCJ0aGlzIiwibWVzc2FnZSIsInNob3ciLCJjb250cm9sbGVyIiwiY29udHJvbGxlckFzIiwidGVtcGxhdGVVcmwiLCJhY3Rpb24iLCJoaWdobGlnaHRBY3Rpb24iLCJwb3NpdGlvbiIsImhpZGVEZWxheSIsInNlcnZpY2UiLCJjaGF0RFNDIiwiJHRpbWVvdXQiLCJTb2NrZXQiLCIkbWRTaWRlbmF2IiwiJGxvZyIsInByb2JsZW1TZXJ2aWNlIiwiJHdpbmRvdyIsInZtIiwibmV3bXNnIiwibWVzc2FnZXMiLCJyZXBsYXkiLCJuaWNrbmFtZSIsImNsb3NlIiwidGhlbiIsImRlYnVnIiwiaW5pdEhpc3RvcnlDaGF0IiwiaWRQcm9ibGVtIiwibG9jYWxTdG9yYWdlIiwiZ2V0SXRlbSIsImdldGhpc3RvcnljaGF0Iiwic3VjY2VzcyIsImRhdGEiLCJpIiwiaGlzdG9yeWNoYXQiLCJsZW5ndGgiLCJ0bXAiLCJEYXRlIiwidGltZSIsIm1zbiIsIm1zZyIsImdldERhdGUiLCJnZXRNb250aCIsImdldEZ1bGxZZWFyIiwiZ2V0SG91cnMiLCJnZXRNaW51dGVzIiwicHVzaCIsInNob3dSZXBsYXkiLCJvbiIsIm9iaiIsInNlbmRNZXNzYWdlIiwiY2hhdG1zZyIsImVtaXQiLCJkc2NSZXBvcnRDb250cm9sbGVyIiwiYnVpZFJlcG9ydCIsImVsZW1lbnQiLCJodG1sIiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsInBkZiIsImpzUERGIiwiYWRkSFRNTCIsInBhZ2VzcGxpdCIsImRpc3Bvc2UiLCJzYXZlIiwiaWRwcm9ibGVtIiwiZXZhbHVhdGlvbmZyYW1ld29ya0NvbnRyb2xsZXIiLCIkc2NvcGUiLCJpbml0RXZhbHVhdGlvbiIsImdldGV2YWx1YXRpb24iLCJldmFsdWF0aW9uZnJhbWV3b3JrTGlzdCIsImV2YWx1YXRpb25mcmFtZXdvcmsiLCJhbmd1bGFyIiwiZm9yRWFjaCIsIm9uaW9ubGF5ZXIiLCJzdGFrZWhvbGRlcnMiLCJzdGFrZWhvbGRlciIsIl9pZCIsIm5hbWUiLCJkZXNjcmlwdGlvbiIsIm9wZW5FZGl0IiwicHJvYmxlbXMiLCJzb2x1dGlvbnMiLCJzYXZlRGlzY3V0aW9uIiwic3Rha2Vob2xkZXJPbmlvbiIsImNvbnNvbGUiLCJsb2ciLCJzZXRPcGVuRWRpdERpc2N1dGlvbiIsImN1cnJlbnRTdGFrZWhvbGRlciIsInNlbWlvdGljZnJhbWV3b3JrQ29udHJvbGxlciIsImluaXRTZW1pb3RpY0ZyYW1ld29yayIsImdldHNlbWlvdGljIiwic2VtaW90aWNmcmFtZXdvcmsiLCJzYXZlU29jaWFsV29ybGQiLCJ0ZXh0IiwiZmxhZ1NhdmUiLCJ1cGRhdGUiLCJzYXZlUHJhZ21hdGljIiwic2F2ZVNlbWFudGljIiwic2F2ZVN5bnRhdGljIiwic2F2ZUVtcGlyaWNhbCIsInNhdmVQaHlzaWNhbCIsInNvY2lhbHdvcmxkIiwicHJhZ21hdGljIiwic2VtaW90aWNyYW1ld29yayIsInN5bnRhdGljIiwiZW1waXJpY2FsIiwicGh5c2ljYWwiLCJzdGFrZWhvbGRlckNvbnRyb2xsZXIiLCJpbnRpdE9uaW9uIiwiZ2V0b25pb24iLCJzdGFrZWhvbGRlckxpc3QiLCJpblByb2Nlc3NpbmciLCJtb3ZlIiwiZGFkYW9wZW5FZGl0IiwieCIsInkiLCJzYXZlU3Rha2Vob2xkZXIiLCJpZCIsInNldE9wZW5FZGl0Iiwic3R5bGUiLCJkaXNwbGF5Iiwic3BsaWNlIiwiZGVsUG9zdEl0IiwiaW5kZXgiLCJyZXRvcm5vIiwiYWRkUG9zdEl0IiwiZSIsImNhbWFkYSIsIm5ld1N0YWtlaG9sZGVyIiwicGFnZVgiLCJwYWdlWSIsImFjZW5kZSIsImV2dCIsInRhcmdldCIsInNldEF0dHJpYnV0ZSIsImFwYWdhIiwidmFsdWVJZGVudGlmaWNhdGlvbkZyYW1lQ29udHJvbGxlciIsInNlbGYiLCJ1c2VyZW1haWwiLCJuZXd2YWx1ZXMiLCJzdWdlc3Rpb25WYWx1ZXMiLCJzdWdlc3Rpb25WYWx1ZXNBcnJheSIsImluaXRWYWx1ZUlkZW50aWZpY2F0aW9uRnJhbWUiLCJrIiwiaiIsInZhbHVlcyIsIm5ld1ZhbHVlcyIsInNldFN1Z2dlc3Rpb25TaG93IiwibGVhdmVTdWdnZXN0aW9uU2hvdyIsInJlbW92ZVZhbHVlSWRlbnRpY2F0aW9uIiwidmFsdWUiLCJuZXdMaXN0Iiwic2V0VmFsdWVJZGVudGljYXRpb24iLCJ1bmRlZmluZWQiLCJ2YWx1ZXNMaXN0Iiwic3BsaXQiLCJtb2R1bGUiLCJjb25maWciLCIkaHR0cFByb3ZpZGVyIiwiaW50ZXJjZXB0b3JzIiwiY2xvc2VUb2FzdCIsImhpZGUiLCJmYWN0b3J5IiwiJGluamVjdCIsInJvdXRlcyIsIiRzdGF0ZVByb3ZpZGVyIiwiJHVybFJvdXRlclByb3ZpZGVyIiwic3RhdGUiLCJ1cmwiLCJ2aWV3cyIsImNvbnRlbnQtdGFiIiwicHJvYmxlbS1kZXNjcmlwdGlvbiIsImRzYy1hcnRpZmFjdCIsIm90aGVyd2lzZSIsImNhcmZDb250cm9sbGVyIiwiaW5pdENhcmYiLCJnZXRjYXJmIiwibG9jYWxTdGFrZWhvbGRlcnMiLCJjYXJmTGlzdCIsImNhcmYiLCJjYXJmUHJpb3JpdHlMaXN0IiwibG9jYWxQcmlvcml0eUxpc3QiLCJyZXNldENhcmYiLCJwbXMiLCJwcmlvcml0eSIsInJlcXVpcmVtZW50IiwidmFsdWVMaXN0IiwiYWRkcG1zdmFsdWUiLCJyZW1vdmVDQVJGIiwic2VsZWN0UE1TVmFsdWUiLCJjYXJmUE1TVmFsdWUiLCJwbXNfdmFsdWUiLCJzZXRQcmlvdGl0eSIsImFkZExpc3RWYWx1ZSIsIm5ld3ZhbHVlIiwiYWRkU3Rha2Vob2xkZXIiLCJjb250cm9sbGVyQ29sbGFib3JhdG9ycyIsInNlYXJjaENhbGxhYm9yYXRpb24iLCJlbWFpbCIsImNvbGxhYm9yYXRvcnMiLCJpbml0Q29sbGFib3JhdG9ycyIsImdldGNvbGxhYm9yYXRvcnMiLCJhZGRDb2xsYWJvcmF0b3IiLCJpbnZpdGUiLCJyZW1vdmVDb2xsYWJvcmF0b3IiLCJwZW9wbGUiLCJyZW1vdmVjb2xsYWJvcmF0b3JzIiwibWVudVByb2JsZW1hQ29udHJvbGxlciIsIkF1dGgiLCIkc3RhdGUiLCIkbWRVdGlsIiwiYnVpbGRUb2dnbGVyIiwibmF2SUQiLCJkZWJvdW5jZUZuIiwiZGVib3VuY2UiLCJ0b2dnbGUiLCJvcGVuQ2hhdCIsImZvcm1BZGRDb2xsYWJvcmF0b3JzIiwiZ28iLCJvcGVuUmVwb3J0IiwiZWRpdERlc2NyaXB0aW9uUHJvYmxlbSIsImRvTG9nb3V0IiwibG9nb3V0IiwiZWRpdFByb2JsZW1hQ29udHJvbGxlciIsInVwZGF0ZVRydWUiLCJwcm9ibGVtIiwidGFic2RzYyIsImdldEN1cnJlbnRQcm9ibGVtIiwiZ2V0cHJvYmxlbSIsInNldFVwZGF0ZSIsInByb2JsZW1VcGRhdGUiLCJzYXZlRGVzY3JpcHRpb24iLCIkaW5qZWN0cmUiLCIkaHR0cCIsIiRsb2NhdGlvbiIsIm5ld3Byb2JsZW0iLCJwb3N0IiwiQVBJX1JPVVRFX05FV1BST0JMRU0iLCJnZXQiLCJBUElfUk9VVEVfR0VUUFJPQkxFTSIsImdldHVzZXJwcm9ibGVtcyIsIkFQSV9ST1VURV9HRVRVU0VSUFJPQkxFTVMiLCJBUElfUk9VVEVfR0VUQ09MTEFCT1JBVE9SUyIsIkFQSV9ST1VURV9JTlZJVEUiLCJBUElfUk9VVEVfR0VUT05JT04iLCJBUElfUk9VVEVfR0VURVZBTFVBVElPTiIsIkFQSV9ST1VURV9HRVRTRU1JT1RJQ0ZSQU1FV09SSyIsIkFQSV9ST1VURV9HRVRDQVJGIiwicmVtb3ZlcHJvYmxlbSIsIkFQSV9ST1VURV9SRU1PVkVQUk9CTEVNIiwiZ2V0cHJvYmxlbXNjb2xsYWJvcmF0b3IiLCJBUElfUk9VVEVfR0VUVVNFUlBST0JMRU1TQ09MTEFCT1JBVE9SIiwiQVBJX1JPVVRFX1JFTU9WRUNPTExBQk9SQVRPUiIsIkFQSV9ST1VURV9HRVRISVNUT1JZQ0hBVCIsInN0YXJ0UHJvYmxlbUNvbnRyb2xsZXIiLCIkbWREaWFsb2ciLCJyZW1vdmVQcm9ibGVtIiwicHJvYmxlbWlkIiwicHJvYmxlbUxpc3QiLCJEaWFsb2dDb250cm9sbGVyIiwiY2FuY2VsIiwiYWRkTmV3UHJvYmxlbSIsInN0YXJ0TmV3UHJvYmxlbSIsInVzZXJpZCIsInByb2JsZW1Db2xsYWJvcmF0b3JMaXN0IiwibG9naW5JblByb2dyZXNzIiwiZ2V0UHJvYmxlbXMiLCJyZXBsYWNlIiwic3Vic3RyaW5nIiwicmV2b212ZVByb2JsZW0iLCJldiIsImNvbmZpcm0iLCJwYXJlbnQiLCJib2R5IiwidGl0bGUiLCJjb250ZW50IiwiYXJpYUxhYmVsIiwib2siLCJ0YXJnZXRFdmVudCIsImVkaXRQcm9ibGVtIiwic2V0SXRlbSIsImluaXRzb2NrZXRwcm9ibGVtIiwibmV3UHJvYmxlbSIsImluaXRMYW5ndWFnZSIsIiR0cmFuc2xhdGVQcm92aWRlciIsInVzZVN0YXRpY0ZpbGVzTG9hZGVyIiwicHJlZml4Iiwic3VmZml4IiwicHJlZmVycmVkTGFuZ3VhZ2UiLCJ1c2VTYW5pdGl6ZVZhbHVlU3RyYXRlZ3kiLCJ1c2VMb2NhbFN0b3JhZ2UiLCJsYW5ndWFnZUNvbnRyb2xsZXIiLCIkdHJhbnNsYXRlIiwic2V0TGFuZyIsImxhbmdLZXkiLCJ1c2UiLCJjaGFuZ2VMYW5ndWFnZSIsInJlc3RyaWN0IiwiZGlyZWN0aXZlIiwic2lnbnVwQ29udHJvbGxlciIsInNpZ251cFNlcnZpY2UiLCJBdXRoVG9rZW4iLCIkZmlsdGVyIiwiJHN0YXRlUGFyYW1zIiwic2F2ZVVzZXIiLCJ1c2VyIiwiY3JlYXRlIiwic2V0VG9rZW4iLCJ0b2tlbiIsImdldFVzZXIiLCJsYW5ndWFnZSIsInJlc2N1ZVBhc3N3b3JkIiwidXNlckVtYWlsIiwiY2hhbmdlUGFzc3dvcmQiLCJBUElfUk9VVEVfVVNFUiIsIkFQSV9ST1VURV9SRVNDVUVQQVNTV09SRCIsIm15dG9rZW5VUkwiLCJzZWFyY2giLCJBUElfUk9VVEVfU0VUTkVXUEFTU1dPUkQiLCJteXRva2VuIiwicGFzc3dvcmQiLCJhcHBDb25maWciLCIkbWRUaGVtaW5nUHJvdmlkZXIiLCIkbG9jYXRpb25Qcm92aWRlciIsImN1c3RvbUdyZWVuTWFwIiwiZXh0ZW5kUGFsZXR0ZSIsImNvbnRyYXN0RGVmYXVsdENvbG9yIiwiY29udHJhc3REYXJrQ29sb3JzIiwiNTAiLCJkZWZpbmVQYWxldHRlIiwidGhlbWUiLCJwcmltYXJ5UGFsZXR0ZSIsImRlZmF1bHQiLCJodWUtMSIsImFjY2VudFBhbGV0dGUiLCIkcSIsImF1dGhGYWN0b3J5IiwibG9naW4iLCJpc0xvZ2dlZEluIiwiZ2V0VG9rZW4iLCJyZWplY3QiLCJhdXRoVG9rZW5GYWN0b3J5IiwicmVtb3ZlSXRlbSIsImludGVyY2VwdG9yRmFjdG9yeSIsInJlcXVlc3QiLCJoZWFkZXJzIiwiJGRvY3VtZW50IiwibGluayIsInNjb3BlIiwiYXR0ciIsIm1vdXNlbW92ZSIsImV2ZW50IiwiaWRfZGl2IiwiY3NzIiwidG9wIiwibGVmdCIsIm1vdXNldXAiLCJ1bmJpbmQiLCJwcmV2ZW50RGVmYXVsdCIsImJpbmQiLCJsb2dpbkNvbnRyb2xsZXIiLCIkcm9vdFNjb3BlIiwiaW5Qcm9ncmVzcyIsImxvZ2dlZEluIiwiJG9uIiwiZG9Mb2dpbiIsImVycm9yIiwic29ja2V0IiwiaW8iLCJldmVudE5hbWUiLCJjYWxsYmFjayIsInJlbW92ZUxpc3RlbmVyIl0sIm1hcHBpbmdzIjoiQUFtQkEsUUFBQUEsVUFBQUMsR0FVQSxRQUFBQyxHQUFBQSxHQUNBQyxLQUFBQyxRQUFBRixFQUNBRCxFQUFBSSxNQUVBQyxXQUFBLGtCQUNBQyxhQUFBLEtBQ0FDLFlBQUEsNEJBQ0FDLE9BQUEsS0FDQUMsaUJBQUEsRUFDQUMsU0FBQSxXQUNBQyxVQUFBLE1BakJBLEdBQUFDLElBQ0FULFFBQUEsR0FDQUYsYUFBQUEsRUFHQSxPQUFBVyxHQ2xCQSxRQUFBQyxTQUFBQyxFQUFBQyxFQUFBQyxFQUFBQyxFQUFBQyxFQUFBQyxHQUNBLEdBQUFDLEdBQUFsQixJQUNBa0IsR0FBQUMsT0FBQSxHQUNBRCxFQUFBRSxZQUNBRixFQUFBRyxRQUFBLEVBQ0FILEVBQUFJLFNBQUEsR0FDQUosRUFBQUssTUFBQSxXQUNBVCxFQUFBLFFBQUFTLFFBQ0FDLEtBQUEsV0FDQVQsRUFBQVUsTUFBQSxpQkFJQVAsRUFBQVEsZ0JBQUEsV0FDQVIsRUFBQVMsVUFBQVYsRUFBQVcsYUFBQUMsUUFBQSxhQUNBWCxFQUFBSSxTQUFBTCxFQUFBVyxhQUFBQyxRQUFBLFlBQ0FiLEVBQUFjLGVBQUFaLEVBQUFTLFdBQ0FJLFFBQUEsU0FBQUMsR0FDQSxHQUFBQSxFQUFBRCxRQUNBLElBQUEsR0FBQUUs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LFdBQUF6UCxFQUFBVixVQUNBSixFQUFBb1IsUUFBQXRRLEVBQUF1UixVQUNBclMsRUFBQXlWLFlBQUEsRUFDQTFKLEVBQUFxRyxVQUNBOVIsS0FBQSxTQUFBUSxHQUNBZCxFQUFBZ1MsS0FBQWxSLEVBQUFBLEtBQ0FuQyxFQUFBRSxhQUFBZ1QsRUFBQSxhQUFBLGtCQUFBLEtBQUE3UixFQUFBZ1MsS0FBQTVSLFlBRUFVLEVBQUFELFFBQ0FtTCxFQUFBUyxHQUFBLGdCQUlBek0sRUFBQTZWLE1BQUEvVSxFQUFBL0IsV0FLQWlCLEVBQUE0TSxTQUFBLFdBRUFiLEVBQUFjLFNBQ0FiLEVBQUEsU0FqREExSSxRQUFBcUYsT0FBQSxPQUNBMUosV0FBQSxrQkFBQXNXLEdiZ3ZEUUEsRUFBZ0JyTSxTQUFXLGFBQWMsYUFBYyxTQUFVLE9BQVEsVUFBVyxVQUFXLGVjcHZEdkc1RixRQUFBcUYsT0FBQSxPQUNBbkosUUFBQSxVQUNBLFlBQUEsV0FDQSxTQUFBaU8sRUFBQS9OLEdBRUFaLEtBQUFnWCxPQUFBQyxLQUlBalgsS0FBQWdELEdBQUEsU0FBQWtVLEVBQUFDLEdBQ0FuWCxLQUFBZ1gsUUFDQWhYLEtBQUFnWCxPQUFBaFUsR0FBQWtVLEVBQUEsU0FBQWxWLEdBQ0FwQixFQUFBLFdBQ0F1VyxFQUFBblYsUUFLQWhDLEtBQUFvRCxLQUFBLFNBQUE4VCxFQUFBbFYsR0FDQWhDLEtBQUFnWCxRQUNBaFgsS0FBQWdYLE9BQUE1VCxLQUFBOFQsRUFBQWxWLElBSUFoQyxLQUFBb1gsZUFBQSxTQUFBRixHQUNBbFgsS0FBQWdYLFFBQ0FoWCxLQUFBZ1gsT0FBQUksZUFBQUYiLCJmaWxlIjoiYXBwLmRzYy5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcclxuICogQ3JlYXRlZCBieSBKT1NFVkFMREVSTEVJIG9uIDI3LzA2LzIwMTUuXHJcbiAqL1xyXG4ndXNlIHN0cmljdCc7XHJcblxyXG5hbmd1bGFyLm1vZHVsZSgndG9hc3RTZXJ2aWNlJyxbXSlcclxuICAgIC5jb250cm9sbGVyKCd0b2FzdENvbnRyb2xsZXInLCBmdW5jdGlvbigkbWRUb2FzdCx0b2FzdEFwcCkge1xyXG5cclxuICAgICAgICB2YXIgdm0gPSB0aGlzO1xyXG4gICAgICAgIHZtLm1lc3NhZ2UgPSAgdG9hc3RBcHAubWVzc2FnZTtcclxuICAgICAgICB2bS5jbG9zZVRvYXN0ID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICRtZFRvYXN0LmhpZGUoKTtcclxuICAgICAgICB9O1xyXG5cclxuICAgIH0pXHJcbiAgICAuZmFjdG9yeSggJ3RvYXN0QXBwJywgdG9hc3RBcHAgKTtcclxuXHJcbiAgICB0b2FzdEFwcC4kaW5qZWN0ID0gWyAnJG1kVG9hc3QnIF07XHJcblxyXG4gICAgZnVuY3Rpb24gdG9hc3RBcHAgKCRtZFRvYXN0KSB7XHJcblxyXG5cclxuICAgIHZhciBzZXJ2aWNlID0ge1xyXG4gICAgICAgIG1lc3NhZ2U6ICcnLFxyXG4gICAgICAgIGVycm9yTWVzc2FnZTogZXJyb3JNZXNzYWdlXHJcbiAgICB9O1xyXG5cclxuICAgIHJldHVybiBzZXJ2aWNlO1xyXG5cclxuICAgICAgICBmdW5jdGlvbiBlcnJvck1lc3NhZ2UoZXJyb3JNZXNzYWdlKSB7XHJcbiAgICAgICAgICAgIHRoaXMubWVzc2FnZSA9IGVycm9yTWVzc2FnZTtcclxuICAgICAgICAgICAgJG1kVG9hc3Quc2hvdyhcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBjb250cm9sbGVyOiAndG9hc3RDb250cm9sbGVyJyxcclxuICAgICAgICAgICAgICAgICAgICBjb250cm9sbGVyQXM6ICd2bScsXHJcbiAgICAgICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICd2aWV3cy9wYWdlcy9kc2N0b2FzdC5odG1sJyxcclxuICAgICAgICAgICAgICAgICAgICBhY3Rpb246IFwiT0tcIixcclxuICAgICAgICAgICAgICAgICAgICBoaWdobGlnaHRBY3Rpb246IHRydWUsXHJcbiAgICAgICAgICAgICAgICAgICAgcG9zaXRpb246IFwidG9wIGxlZnRcIixcclxuICAgICAgICAgICAgICAgICAgICBoaWRlRGVsYXk6IDUwMDBcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgKTtcclxuICAgICAgICB9XHJcblxyXG5cclxuXHJcblxyXG5cclxuICAgIC8qZnVuY3Rpb24gZXJyb3JNZXNzYWdlKGVycm9yTWVzc2FnZSkge1xyXG4gICAgICAgIHRoaXMubWVzc2FnZSA9IGVycm9yTWVzc2FnZTtcclxuICAgICAgICAkbWRUb2FzdC5zaG93KFxyXG4gICAgICAgICAgICAkbWRUb2FzdC5zaW1wbGUoKVxyXG4gICAgICAgICAgICAgICAgLmNvbnRlbnQodGhpcy5tZXNzYWdlKSxcclxuICAgICAgICAgICAgICAgIC5hY3Rpb24oJ09LJylcclxuICAgICAgICAgICAgICAgIC5oaWdobGlnaHRBY3Rpb24odHJ1ZSlcclxuICAgICAgICAgICAgICAgIC5wb3NpdGlvbigndG9wIHJpZ2h0JylcclxuICAgICAgICAgICAgICAgIC5oaWRlRGVsYXkoOTAwMClcclxuICAgICAgICApO1xyXG4gICAgfSovXHJcbn1cclxuXHJcblxyXG5cclxuXHJcblxyXG4iLCIvKipcclxuICogQ3JlYXRlZCBieSBKT1NFVkFMREVSTEVJIG9uIDE1LzA3LzIwMTUuXHJcbiAqL1xyXG4ndXNlIHN0cmljdCc7XHJcblxyXG5hbmd1bGFyXHJcbiAgICAubW9kdWxlKCdhcHAnKVxyXG4gICAgLmNvbnRyb2xsZXIoJ2NoYXREU0MnLGNoYXREU0MpO1xyXG5cclxuICAgIGZ1bmN0aW9uIGNoYXREU0MoJHRpbWVvdXQsIFNvY2tldCwgJG1kU2lkZW5hdiwgJGxvZyxwcm9ibGVtU2VydmljZSwkd2luZG93KSB7XHJcbiAgICAgICAgdmFyIHZtID0gdGhpcztcclxuICAgICAgICB2bS5uZXdtc2cgPSBcIlwiO1xyXG4gICAgICAgIHZtLm1lc3NhZ2VzID0gW107XHJcbiAgICAgICAgdm0ucmVwbGF5ID0gZmFsc2U7XHJcbiAgICAgICAgdm0ubmlja25hbWUgPSBcIlwiLFxyXG4gICAgICAgIHZtLmNsb3NlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAkbWRTaWRlbmF2KCdjaGF0JykuY2xvc2UoKVxyXG4gICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICRsb2cuZGVidWcoXCJjbG9zZSBjaGF0XCIpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgdm0uaW5pdEhpc3RvcnlDaGF0ID0gZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgdm0uaWRQcm9ibGVtID0gJHdpbmRvdy5sb2NhbFN0b3JhZ2UuZ2V0SXRlbSgncHJvYmxlbWlkJyk7XHJcbiAgICAgICAgICAgIHZtLm5pY2tuYW1lID0gJHdpbmRvdy5sb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnbmlja25hbWUnKTtcclxuICAgICAgICAgICAgcHJvYmxlbVNlcnZpY2UuZ2V0aGlzdG9yeWNoYXQodm0uaWRQcm9ibGVtKVxyXG4gICAgICAgICAgICAgICAgLnN1Y2Nlc3MoZnVuY3Rpb24oZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKGRhdGEuc3VjY2Vzcykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGRhdGEuaGlzdG9yeWNoYXQubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0bXAgPSBuZXcgRGF0ZShkYXRhLmhpc3RvcnljaGF0W2ldLnRpbWUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG1zbiA9IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuaWNrbmFtZTogZGF0YS5oaXN0b3J5Y2hhdFtpXS5uaWNrbmFtZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtc2c6IGRhdGEuaGlzdG9yeWNoYXRbaV0ubXNnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpbWU6IHRtcC5nZXREYXRlKCkgKyBcIi9cIiArICh0bXAuZ2V0TW9udGgoKSArIDEgKSsgXCIvXCIgKyB0bXAuZ2V0RnVsbFllYXIoKSArIFwiIFtcIiArIHRtcC5nZXRIb3VycygpICsgXCI6XCIgKyB0bXAuZ2V0TWludXRlcygpICsgXCJdIFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2bS5tZXNzYWdlcy5wdXNoKG1zbik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdm0uc2hvd1JlcGxheSA9IGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgIGlmKHZtLnJlcGxheSl7XHJcbiAgICAgICAgICAgICAgICB2bS5yZXBsYXkgPSBmYWxzZTtcclxuICAgICAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgICAgICB2bS5yZXBsYXkgPSB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgIH1cclxuICAgICAgICBTb2NrZXQub24oJ29uQnJvYWRjYXN0Q2hhdCcsIGZ1bmN0aW9uIChvYmopIHtcclxuICAgICAgICAgICAgICAgIHZhciB0bXAgPSBuZXcgRGF0ZShvYmpbb2JqLmxlbmd0aCAtMV0udGltZSk7XHJcbiAgICAgICAgICAgICAgICB2bS5tZXNzYWdlcy5wdXNoKHtcclxuICAgICAgICAgICAgICAgICAgICBuaWNrbmFtZTogb2JqW29iai5sZW5ndGggLTFdLm5pY2tuYW1lLFxyXG4gICAgICAgICAgICAgICAgICAgIG1zZzogb2JqW29iai5sZW5ndGggLTFdLm1zZyxcclxuICAgICAgICAgICAgICAgICAgICB0aW1lOiB0bXAuZ2V0RGF0ZSgpICsgXCIvXCIgKyAodG1wLmdldE1vbnRoKCkgKyAxKSArIFwiL1wiICsgdG1wLmdldEZ1bGxZZWFyKCkgKyBcIiBbXCIgKyB0bXAuZ2V0SG91cnMoKSArIFwiOlwiICsgdG1wLmdldE1pbnV0ZXMoKSArIFwiXSBcIlxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHZtLnNlbmRNZXNzYWdlID0gZnVuY3Rpb24oY2hhdG1zZyl7XHJcbiAgICAgICAgICAgICBTb2NrZXQuZW1pdCgnYnJvYWRjYXN0Q2hhdCcsIGNoYXRtc2cpO1xyXG4gICAgICAgICAgICB2bS5uZXdtc2cgPSBcIlwiO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICB9O1xyXG5cclxuIiwiLyoqXHJcbiAqIENyZWF0ZWQgYnkgSk9TRVZBTERFUkxFSSBvbiAyMi8wNy8yMDE1LlxyXG4gKi9cclxuXHJcblxyXG5hbmd1bGFyLm1vZHVsZSgnYXBwJylcclxuICAgIC5jb250cm9sbGVyKCdkc2NSZXBvcnRDb250cm9sbGVyJyxkc2NSZXBvcnRDb250cm9sbGVyKTtcclxuXHJcblxyXG5mdW5jdGlvbiBkc2NSZXBvcnRDb250cm9sbGVyKCkge1xyXG5cclxuICAgIHZhciB2bSA9IHRoaXM7XHJcblxyXG4gICAgdm0uaWRwcm9ibGVtID0gJ2FqZmxhamZsamFsZmphbGpmJztcclxuXHJcbiAgICB2bS5idWlkUmVwb3J0ID0gYnVpZFJlcG9ydDtcclxuXHJcbiAgICBmdW5jdGlvbiBidWlkUmVwb3J0KGVsZW1lbnQpIHtcclxuXHJcblxyXG4gICAgICAgIHZhciBodG1sID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Byb2plY3RSZXNwb3J0Jyk7XHJcblxyXG4gICAgICAgIHZhciBwZGYgPSBuZXcganNQREYoJ2wnLCdweCcpO1xyXG5cclxuICAgICAgICBwZGYuYWRkSFRNTChcclxuICAgICAgICAgICAgaHRtbCwgMCwgMCwge1xyXG4gICAgICAgICAgICAgICAgcGFnZXNwbGl0OiB0cnVlXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uKGRpc3Bvc2Upe1xyXG4gICAgICAgICAgICAgICAgcGRmLnNhdmUoJ3Rlc3QucGRmJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICApO1xyXG5cclxuICAgIH1cclxufVxyXG5cclxuIiwiLyoqXHJcbiAqIENyZWF0ZWQgYnkgSk9TRVZBTERFUkxFSSBvbiAyOS8wNi8yMDE1LlxyXG4gKi9cclxuXHJcbid1c2Ugc3RyaWN0JztcclxuXHJcbmFuZ3VsYXIubW9kdWxlKCdhcHAnKVxyXG4gICAgLmNvbnRyb2xsZXIoJ2V2YWx1YXRpb25mcmFtZXdvcmtDb250cm9sbGVyJyxldmFsdWF0aW9uZnJhbWV3b3JrQ29udHJvbGxlcik7XHJcblxyXG5cclxuXHJcblxyXG4gIGZ1bmN0aW9uIGV2YWx1YXRpb25mcmFtZXdvcmtDb250cm9sbGVyICgkd2luZG93LHByb2JsZW1TZXJ2aWNlLFNvY2tldCwkc2NvcGUpe1xyXG5cclxuICAgICAgdmFyIHZtID0gdGhpcztcclxuICAgICAgdm0uZXZhbHVhdGlvbmZyYW1ld29ya0xpc3QgPVtdO1xyXG4gICAgICB2bS5pbml0RXZhbHVhdGlvbiA9IGluaXRFdmFsdWF0aW9uO1xyXG5cclxuICAgICAgZnVuY3Rpb24gaW5pdEV2YWx1YXRpb24oKXtcclxuICAgICAgICAgIHZtLmlkcHJvYmxlbSA9ICR3aW5kb3cubG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3Byb2JsZW1pZCcpO1xyXG4gICAgICAgICBwcm9ibGVtU2VydmljZS5nZXRldmFsdWF0aW9uKHZtLmlkcHJvYmxlbSlcclxuICAgICAgICAgICAgICAuc3VjY2VzcyhmdW5jdGlvbihkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAgIGlmKGRhdGEuc3VjY2Vzcykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgdm0uZXZhbHVhdGlvbmZyYW1ld29ya0xpc3QgPSBkYXRhLmV2YWx1YXRpb25mcmFtZXdvcms7XHJcbiAgICAgICAgICAgICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICAgICAgICAgICAgdG9hc3RBcHAuZXJyb3JNZXNzYWdlKGRhdGEubWVzc2FnZSk7XHJcbiAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICB9KVxyXG4gICAgICB9O1xyXG5cclxuXHJcblxyXG5cclxuXHJcbiAgICAgIFNvY2tldC5vbignb25Ccm9hZGNhc3RGcmFtZVNhdmUnLCBmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgICAgYW5ndWxhci5mb3JFYWNoKHZtLmV2YWx1YXRpb25mcmFtZXdvcmtMaXN0LGZ1bmN0aW9uKGV2YWx1YXRpb25mcmFtZXdvcmspe1xyXG4gICAgICAgICAgICAgaWYoIGV2YWx1YXRpb25mcmFtZXdvcmsub25pb25sYXllciA9PSBkYXRhLm9uaW9ubGF5ZXIpe1xyXG4gICAgICAgICAgICAgICAgIGFuZ3VsYXIuZm9yRWFjaChldmFsdWF0aW9uZnJhbWV3b3JrLnN0YWtlaG9sZGVycyxmdW5jdGlvbihzdGFrZWhvbGRlcil7XHJcbiAgICAgICAgICAgICAgICAgICAgIGlmIChzdGFrZWhvbGRlci5faWQgPT0gZGF0YS5faWQpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgc3Rha2Vob2xkZXIubmFtZSA9IGRhdGEubmFtZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgIHN0YWtlaG9sZGVyLm9uaW9ubGF5ZXIgPSBkYXRhLm9uaW9ubGF5ZXI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICBzdGFrZWhvbGRlci5kZXNjcmlwdGlvbiA9IGRhdGEuZGVzY3JpcHRpb247XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICBzdGFrZWhvbGRlci5vcGVuRWRpdCA9IGRhdGEub3BlbkVkaXQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICBzdGFrZWhvbGRlci5wcm9ibGVtcyA9IGRhdGEucHJvYmxlbXM7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICBzdGFrZWhvbGRlci5zb2x1dGlvbnMgPSBkYXRhLnNvbHV0aW9ucztcclxuICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfSk7XHJcbiAgICAgIH0pO1xyXG5cclxuXHJcbiAgICAgICRzY29wZS5zYXZlRGlzY3V0aW9uID0gZnVuY3Rpb24oc3Rha2Vob2xkZXIpIHtcclxuICAgICAgICAgIFNvY2tldC5lbWl0KCdicm9hZGNhc3RGcmFtZVNhdmUnLCBzdGFrZWhvbGRlcik7XHJcbiAgICAgIH07XHJcblxyXG5cclxuICAgICAgU29ja2V0Lm9uKCdvblVwZGF0ZVN0YWtlaG9sZGVyJywgZnVuY3Rpb24gKHN0YWtlaG9sZGVyT25pb24pIHtcclxuICAgICAgICAgY29uc29sZS5sb2coc3Rha2Vob2xkZXJPbmlvbik7XHJcblxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgICRzY29wZS5zZXRPcGVuRWRpdERpc2N1dGlvbiA9IGZ1bmN0aW9uKGN1cnJlbnRTdGFrZWhvbGRlcil7XHJcbiAgICAgICAgICBjdXJyZW50U3Rha2Vob2xkZXIub3BlbkVkaXQgPSB0cnVlO1xyXG4gICAgICB9O1xyXG4gIH1cclxuXHJcbiIsIi8qKlxyXG4gKiBDcmVhdGVkIGJ5IEpPU0VWQUxERVJMRUkgb24gMjkvMDYvMjAxNS5cclxuICovXHJcblxyXG5cclxuJ3VzZSBzdHJpY3QnO1xyXG5cclxuYW5ndWxhci5tb2R1bGUoJ2FwcCcpXHJcbiAgICAuY29udHJvbGxlcignc2VtaW90aWNmcmFtZXdvcmtDb250cm9sbGVyJyxzZW1pb3RpY2ZyYW1ld29ya0NvbnRyb2xsZXIpO1xyXG5cclxuXHJcbmZ1bmN0aW9uIHNlbWlvdGljZnJhbWV3b3JrQ29udHJvbGxlcihTb2NrZXQsJHdpbmRvdywgcHJvYmxlbVNlcnZpY2Upe1xyXG4gICAgdmFyIHZtID0gdGhpcztcclxuICAgIHZtLmlkcHJvYmxlbSA9IFwiXCI7XHJcbiAgICB2bS5zYXZlU29jaWFsV29ybGQgPSBzYXZlU29jaWFsV29ybGQ7XHJcbiAgICB2bS5zYXZlUHJhZ21hdGljID0gc2F2ZVByYWdtYXRpYztcclxuICAgIHZtLnNhdmVTZW1hbnRpYyA9IHNhdmVTZW1hbnRpYztcclxuICAgIHZtLnNhdmVTeW50YXRpYyA9IHNhdmVTeW50YXRpYztcclxuICAgIHZtLnNhdmVFbXBpcmljYWwgPSBzYXZlRW1waXJpY2FsO1xyXG4gICAgdm0uc2F2ZVBoeXNpY2FsID0gc2F2ZVBoeXNpY2FsO1xyXG4gICAgdm0uc2VtaW90aWNmcmFtZXdvcmsgPSBcIlwiO1xyXG4gICAgdm0uaW5pdFNlbWlvdGljRnJhbWV3b3JrID0gaW5pdFNlbWlvdGljRnJhbWV3b3JrO1xyXG5cclxuICAgIGZ1bmN0aW9uIGluaXRTZW1pb3RpY0ZyYW1ld29yaygpe1xyXG4gICAgICAgIHZtLmlkcHJvYmxlbSA9ICR3aW5kb3cubG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3Byb2JsZW1pZCcpO1xyXG5cclxuICAgICAgICBwcm9ibGVtU2VydmljZS5nZXRzZW1pb3RpYyh2bS5pZHByb2JsZW0pXHJcbiAgICAgICAgICAgIC5zdWNjZXNzKGZ1bmN0aW9uKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgIGlmKGRhdGEuc3VjY2Vzcykge1xyXG4gICAgICAgICAgICAgICAgICAgIHZtLnNlbWlvdGljZnJhbWV3b3JrID0gZGF0YS5zZW1pb3RpY2ZyYW1ld29yaztcclxuICAgICAgICAgICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICAgICAgICAgIHRvYXN0QXBwLmVycm9yTWVzc2FnZShkYXRhLm1lc3NhZ2UpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBTb2NrZXQub24oJ29uVXBkYXRlU29jaWFsV29ybGQnLCBmdW5jdGlvbiAodGV4dCkge1xyXG4gICAgICAgIHZtLnNlbWlvdGljZnJhbWV3b3JrLnNvY2lhbHdvcmxkID0gdGV4dDtcclxuICAgIH0pO1xyXG5cclxuICAgIGZ1bmN0aW9uIHNhdmVTb2NpYWxXb3JsZCh0ZXh0LGZsYWdTYXZlKXtcclxuICAgICAgICB2YXIgb2JqID0ge1xyXG4gICAgICAgICAgICB0ZXh0OiB0ZXh0LFxyXG4gICAgICAgICAgICB1cGRhdGU6IGZsYWdTYXZlXHJcbiAgICAgICAgfTtcclxuICAgICAgICBTb2NrZXQuZW1pdCgndXBkYXRlU29jaWFsV29ybGQnLCBvYmopO1xyXG4gICAgfVxyXG5cclxuICAgIFNvY2tldC5vbignb25VcGRhdGVQcmFnbWF0aWMnLCBmdW5jdGlvbiAodGV4dCkge1xyXG4gICAgICAgIHZtLnNlbWlvdGljZnJhbWV3b3JrLnByYWdtYXRpYyA9IHRleHQ7XHJcbiAgICB9KTtcclxuXHJcbiAgICBmdW5jdGlvbiBzYXZlUHJhZ21hdGljKHRleHQsZmxhZ1NhdmUpe1xyXG4gICAgICAgIHZhciBvYmogPSB7XHJcbiAgICAgICAgICAgIHRleHQ6IHRleHQsXHJcbiAgICAgICAgICAgIHVwZGF0ZTogZmxhZ1NhdmVcclxuICAgICAgICB9O1xyXG4gICAgICAgIFNvY2tldC5lbWl0KCd1cGRhdGVQcmFnbWF0aWMnLCBvYmopO1xyXG4gICAgfVxyXG5cclxuICAgIFNvY2tldC5vbignb25VcGRhdGVTZW1hbnRpYycsIGZ1bmN0aW9uICh0ZXh0KSB7XHJcbiAgICAgICAgdm0uc2VtaW90aWNmcmFtZXdvcmsuc2VtaW90aWNyYW1ld29yayA9IHRleHQ7XHJcbiAgICB9KTtcclxuICAgIGZ1bmN0aW9uIHNhdmVTZW1hbnRpYyh0ZXh0LGZsYWdTYXZlKXtcclxuICAgICAgICB2YXIgb2JqID0ge1xyXG4gICAgICAgICAgICB0ZXh0OiB0ZXh0LFxyXG4gICAgICAgICAgICB1cGRhdGU6IGZsYWdTYXZlXHJcbiAgICAgICAgfTtcclxuICAgICAgICBTb2NrZXQuZW1pdCgndXBkYXRlU2VtYW50aWMnLCBvYmopO1xyXG4gICAgfVxyXG5cclxuICAgIFNvY2tldC5vbignb25VcGRhdGVTeW50YXRpYycsIGZ1bmN0aW9uICh0ZXh0LGZsYWdTYXZlKSB7XHJcbiAgICAgICAgdm0uc2VtaW90aWNmcmFtZXdvcmsuc3ludGF0aWMgPSB0ZXh0O1xyXG4gICAgfSk7XHJcbiAgICBmdW5jdGlvbiBzYXZlU3ludGF0aWModGV4dCxmbGFnU2F2ZSl7XHJcbiAgICAgICAgdmFyIG9iaiA9IHtcclxuICAgICAgICAgICAgdGV4dDogdGV4dCxcclxuICAgICAgICAgICAgdXBkYXRlOiBmbGFnU2F2ZVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgU29ja2V0LmVtaXQoJ3VwZGF0ZVN5bnRhdGljJywgb2JqKTtcclxuICAgIH1cclxuXHJcbiAgICBTb2NrZXQub24oJ29uVXBkYXRlRW1waXJpY2FsJywgZnVuY3Rpb24gKHRleHQpIHtcclxuICAgICAgICB2bS5zZW1pb3RpY2ZyYW1ld29yay5lbXBpcmljYWwgPSB0ZXh0O1xyXG4gICAgfSk7XHJcbiAgICBmdW5jdGlvbiBzYXZlRW1waXJpY2FsKHRleHQsZmxhZ1NhdmUpe1xyXG4gICAgICAgIHZhciBvYmogPSB7XHJcbiAgICAgICAgICAgIHRleHQ6IHRleHQsXHJcbiAgICAgICAgICAgIHVwZGF0ZTogZmxhZ1NhdmVcclxuICAgICAgICB9O1xyXG4gICAgICAgIFNvY2tldC5lbWl0KCd1cGRhdGVFbXBpcmljYWwnLCBvYmopO1xyXG4gICAgfVxyXG5cclxuICAgIFNvY2tldC5vbignb25VcGRhdGVQaHlzaWNhbCcsIGZ1bmN0aW9uICh0ZXh0KSB7XHJcbiAgICAgICAgdm0uc2VtaW90aWNmcmFtZXdvcmsucGh5c2ljYWwgPSB0ZXh0O1xyXG4gICAgfSk7XHJcbiAgICBmdW5jdGlvbiBzYXZlUGh5c2ljYWwodGV4dCxmbGFnU2F2ZSl7XHJcbiAgICAgICAgdmFyIG9iaiA9IHtcclxuICAgICAgICAgICAgdGV4dDogdGV4dCxcclxuICAgICAgICAgICAgdXBkYXRlOiBmbGFnU2F2ZVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgU29ja2V0LmVtaXQoJ3VwZGF0ZVBoeXNpY2FsJywgb2JqKTtcclxuICAgIH1cclxufSIsIi8qKlxyXG4gKiBDcmVhdGVkIGJ5IEpPU0VWQUxERVJMRUkgb24gMjkvMDYvMjAxNS5cclxuICovXHJcbid1c2Ugc3RyaWN0JztcclxuXHJcbmFuZ3VsYXIubW9kdWxlKCdhcHAnKVxyXG4gICAgLmNvbnRyb2xsZXIoJ3N0YWtlaG9sZGVyQ29udHJvbGxlcicsc3Rha2Vob2xkZXJDb250cm9sbGVyKTtcclxuXHJcblxyXG5mdW5jdGlvbiBzdGFrZWhvbGRlckNvbnRyb2xsZXIoU29ja2V0LCRzY29wZSwkd2luZG93LHByb2JsZW1TZXJ2aWNlKXtcclxuICAgIHZhciB2bSA9IHRoaXM7XHJcbiAgICB2bS5pZHByb2JsZW0gPSBcIlwiO1xyXG4gICAgdm0uc3Rha2Vob2xkZXJMaXN0ID0gW107XHJcbiAgICB2bS5zdGFrZWhvbGRlciA9IFwiXCI7XHJcbiAgICB2bS5pbnRpdE9uaW9uID0gaW50aXRPbmlvbjtcclxuICAgIHZtLm1vdmUgPSBmYWxzZTtcclxuICAgIHZtLmluUHJvY2Vzc2luZyA9IHRydWU7XHJcblxyXG4gICAgZnVuY3Rpb24gaW50aXRPbmlvbigpe1xyXG4gICAgICAgIHZtLmlkcHJvYmxlbSA9ICR3aW5kb3cubG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3Byb2JsZW1pZCcpO1xyXG4gICAgICAgIHByb2JsZW1TZXJ2aWNlLmdldG9uaW9uKHZtLmlkcHJvYmxlbSlcclxuICAgICAgICAgICAgLnN1Y2Nlc3MoZnVuY3Rpb24oZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgaWYoZGF0YS5zdWNjZXNzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdm0uc3Rha2Vob2xkZXJMaXN0ID0gZGF0YS5zdGFrZWhvbGRlcnM7XHJcbiAgICAgICAgICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgICAgICAgICB0b2FzdEFwcC5lcnJvck1lc3NhZ2UoZGF0YS5tZXNzYWdlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB2bS5pblByb2Nlc3NpbmcgPSBmYWxzZTtcclxuICAgIH1cclxuXHJcbiAgICBTb2NrZXQub24oJ29uQnJvYWRjYXN0T25pb25TYXZlJywgZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICAgIGFuZ3VsYXIuZm9yRWFjaCh2bS5zdGFrZWhvbGRlckxpc3QsIGZ1bmN0aW9uIChzdGFrZWhvbGRlcikge1xyXG4gICAgICAgICAgICBpZiAoc3Rha2Vob2xkZXIuX2lkID09IGRhdGEuX2lkKXtcclxuICAgICAgICAgICAgICAgIHN0YWtlaG9sZGVyLnN0YWtlaG9sZGVyID0gZGF0YS5zdGFrZWhvbGRlcjtcclxuICAgICAgICAgICAgICAgIHN0YWtlaG9sZGVyLm5hbWUgPSBkYXRhLm5hbWU7XHJcbiAgICAgICAgICAgICAgICBzdGFrZWhvbGRlci5kZXNjcmlwdGlvbiA9IGRhdGEuZGVzY3JpcHRpb247XHJcbiAgICAgICAgICAgICAgICBzdGFrZWhvbGRlci5vcGVuRWRpdCA9IGRhdGEuZGFkYW9wZW5FZGl0XHJcbiAgICAgICAgICAgICAgICBzdGFrZWhvbGRlci54ID0gZGF0YS54O1xyXG4gICAgICAgICAgICAgICAgc3Rha2Vob2xkZXIueSA9IGRhdGEueTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgIH0pO1xyXG5cclxuXHJcbiAgICAkc2NvcGUuc2F2ZVN0YWtlaG9sZGVyID0gZnVuY3Rpb24oc3Rha2Vob2xkZXIpIHtcclxuICAgICAgICBTb2NrZXQuZW1pdCgnYnJvYWRjYXN0T25pb25TYXZlJywgc3Rha2Vob2xkZXIpO1xyXG4gICAgfTtcclxuXHJcbiAgICBTb2NrZXQub24oJ29uQnJvYWRjYXN0T25pb25FZGl0JywgZnVuY3Rpb24gKGlkKSB7XHJcbiAgICAgICAgYW5ndWxhci5mb3JFYWNoKHZtLnN0YWtlaG9sZGVyTGlzdCwgZnVuY3Rpb24gKHN0YWtlaG9sZGVyKSB7XHJcbiAgICAgICAgICAgIGlmIChzdGFrZWhvbGRlci5faWQgPT0gaWQpIHN0YWtlaG9sZGVyLm9wZW5FZGl0ID0gdHJ1ZTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICB9KTtcclxuXHJcbiAgICAkc2NvcGUuc2V0T3BlbkVkaXQgPSBmdW5jdGlvbihpZCl7XHJcbiAgICAgICAgU29ja2V0LmVtaXQoJ2Jyb2FkY2FzdE9uaW9uRWRpdCcsIGlkKTtcclxuICAgIH07XHJcblxyXG5cclxuICAgIFNvY2tldC5vbignb25Ccm9hZGNhc3RPbmlvblJlbW92ZScsIGZ1bmN0aW9uIChpZCkge1xyXG4gICAgICAgIHZhciBzdGFrZWhvbGRlciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwic3Rha2Vob2xkZXJcIiArdm0uc3Rha2Vob2xkZXJMaXN0W2lkXS5faWQpO1xyXG4gICAgICAgIHN0YWtlaG9sZGVyLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XHJcbiAgICAgICAgdm0uc3Rha2Vob2xkZXJMaXN0LnNwbGljZShpZCwxKTtcclxuICAgIH0pO1xyXG5cclxuICAgICRzY29wZS5kZWxQb3N0SXQgPSBmdW5jdGlvbihpbmRleCxzdGFrZWhvbGRlcikge1xyXG4gICAgICAgIHZhciBvYmogPSB7XHJcbiAgICAgICAgICAgIGluZGV4OiBpbmRleCxcclxuICAgICAgICAgICAgc3Rha2Vob2xkZXI6IHN0YWtlaG9sZGVyXHJcbiAgICAgICAgfVxyXG4gICAgICAgIFNvY2tldC5lbWl0KCdicm9hZGNhc3RPbmlvblJlbW92ZScsIG9iaik7XHJcbiAgICB9O1xyXG5cclxuICAgIFNvY2tldC5vbignb25Ccm9hZGNhc3RPbmlvbkFkZCcsIGZ1bmN0aW9uIChyZXRvcm5vKSB7XHJcbiAgICAgICAgdm0uc3Rha2Vob2xkZXJMaXN0LnB1c2gocmV0b3Jubyk7XHJcbiAgICB9KTtcclxuXHJcbiAgICAkc2NvcGUuYWRkUG9zdEl0ID0gZnVuY3Rpb24oZSxjYW1hZGEpIHtcclxuXHJcblxyXG4gICAgICAgIHZhciBuZXdTdGFrZWhvbGRlciA9XHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBcIm9uaW9ubGF5ZXJcIjogY2FtYWRhLFxyXG4gICAgICAgICAgICBcIm5hbWVcIjogXCJcIixcclxuICAgICAgICAgICAgXCJkZXNjcmlwdGlvblwiOiBcIlwiLFxyXG4gICAgICAgICAgICBcIm9wZW5FZGl0XCI6IHRydWUsXHJcbiAgICAgICAgICAgIFwieFwiOiBlLnBhZ2VYICsgJ3B4JyxcclxuICAgICAgICAgICAgXCJ5XCI6IGUucGFnZVkgKyAncHgnXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgIFNvY2tldC5lbWl0KCdicm9hZGNhc3RPbmlvbkFkZCcsIG5ld1N0YWtlaG9sZGVyKTtcclxuICAgIH07XHJcblxyXG4gICAgdm0uYWNlbmRlID0gZnVuY3Rpb24oZXZ0KSB7XHJcbiAgICAgICAgZXZ0LnRhcmdldC5zZXRBdHRyaWJ1dGUoXCJvcGFjaXR5XCIsIFwiMC44XCIpO1xyXG4gICAgfVxyXG4gICAgdm0uYXBhZ2EgPSBmdW5jdGlvbihldnQpIHtcclxuICAgICAgICBldnQudGFyZ2V0LnNldEF0dHJpYnV0ZShcIm9wYWNpdHlcIiwgXCIxLjBcIik7XHJcbiAgICB9XHJcblxyXG59IiwiLyoqXHJcbiAqIENyZWF0ZWQgYnkgSk9TRVZBTERFUkxFSSBvbiAyMi8wNy8yMDE1LlxyXG4gKi9cclxuXHJcbmFuZ3VsYXIubW9kdWxlKCdhcHAnKVxyXG4gICAgLmNvbnRyb2xsZXIoJ3ZhbHVlSWRlbnRpZmljYXRpb25GcmFtZUNvbnRyb2xsZXInLCB2YWx1ZUlkZW50aWZpY2F0aW9uRnJhbWVDb250cm9sbGVyKTtcclxuXHJcblxyXG5mdW5jdGlvbiB2YWx1ZUlkZW50aWZpY2F0aW9uRnJhbWVDb250cm9sbGVyKCR3aW5kb3cscHJvYmxlbVNlcnZpY2UsdG9hc3RBcHAsU29ja2V0KXtcclxuXHJcblxyXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgc2VsZi5pblByb2Nlc3NpbmcgPSB0cnVlO1xyXG5cclxuICAgIHNlbGYuaWRQcm9ibGVtID0gXCJcIjtcclxuICAgIHNlbGYudXNlcmVtYWlsID0gXCJcIjtcclxuICAgIHNlbGYubmV3dmFsdWVzID0gXCJcIjtcclxuICAgIHNlbGYuc3Rha2Vob2xkZXJMaXN0ID0gW1xyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgb25pb25sYXllcjogXCJDb21tdW5pdHlcIixcclxuICAgICAgICAgICAgc3Rha2Vob2xkZXJzOiBbXVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBvbmlvbmxheWVyOiBcIk1hcmtldFwiLFxyXG4gICAgICAgICAgICBzdGFrZWhvbGRlcnM6IFtdXHJcbiAgICAgICAgfSxcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIG9uaW9ubGF5ZXI6IFwiU291cmNlXCIsXHJcbiAgICAgICAgICAgIHN0YWtlaG9sZGVyczogW11cclxuICAgICAgICB9LFxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgb25pb25sYXllcjogXCJDb250cnVpYnVpdGlvblwiLFxyXG4gICAgICAgICAgICBzdGFrZWhvbGRlcnM6IFtdXHJcbiAgICAgICAgfSxcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIG9uaW9ubGF5ZXI6IFwiVGVjaG5pY29cIixcclxuICAgICAgICAgICAgc3Rha2Vob2xkZXJzOiBbXVxyXG4gICAgICAgIH1cclxuXHJcbiAgICBdO1xyXG5cclxuICAgIHNlbGYuc3VnZXN0aW9uVmFsdWVzID0gXCJcIjtcclxuXHJcbiAgICBzZWxmLnN1Z2VzdGlvblZhbHVlc0FycmF5ID0gW1xyXG4gICAgICAgICdBY2Vzc2liaWxpZGFkZScsICdBZGFwdGFiaWxpZGFkZScsICdFc3Tvv710aWNhJywgJ0F1dG9ub21pYScsICdEaXNwb25pYmlsaWRhZGUnLCAnQ29uc2Np77+9bmNpYScsICdDb2xhYm9yYe+/ve+/vW8nLFxyXG4gICAgICAgICdDb252ZXJzYe+/ve+/vW8nLCAnRW1v77+977+9byBlIEFmZXRvJywgJ0dydXBvcycsICdJZGVudGlkYWRlJywgJ0NvbnNlbnRpbWVudG8gaW5mb3JtYWRvJywgJ01ldGEtY29tdW5pY2Hvv73vv71vJywgJ05vcm1hcycsXHJcbiAgICAgICAgJ09iamV0bycsICdQb3J0YWJpbGlkYWRlJywgJ1ByZXNlbu+/vWEnLCAnUHJpdmFjaWRhZGUnLCAnUHJvcHJpZWRhZGUnLCAnUmVjaXByb2NpZGFkZSwgUmVsYWNpb25hbWVudG8sIFJlcHV0Ye+/ve+/vW8sJyArXHJcbiAgICAgICAgJ0VzY2FsYWJpbGlkYWRlJywgJ1NlZ3VyYW7vv71hJywgJ0NvbXBhcnRpbGhhbWVudG8nLCAnQ29uZmlhbu+/vWEnLCAnVXNhYmlsaWRhZGUnLCAnVmlzaWJpbGlkYWRlJ1xyXG4gICAgXTtcclxuXHJcblxyXG4gICAgc2VsZi5pbml0VmFsdWVJZGVudGlmaWNhdGlvbkZyYW1lID0gZnVuY3Rpb24oKXtcclxuICAgICAgICBzZWxmLmlkcHJvYmxlbSA9ICR3aW5kb3cubG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3Byb2JsZW1pZCcpO1xyXG4gICAgICAgIHByb2JsZW1TZXJ2aWNlLmdldG9uaW9uKHNlbGYuaWRwcm9ibGVtKVxyXG4gICAgICAgICAgICAuc3VjY2VzcyhmdW5jdGlvbihkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICBpZihkYXRhLnN1Y2Nlc3MpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZihkYXRhLnN0YWtlaG9sZGVycy5sZW5ndGggPiAwKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvcih2YXIgayA9IDE7IGsgPCBzZWxmLnN1Z2VzdGlvblZhbHVlc0FycmF5Lmxlbmd0aDsgaysrKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLnN1Z2VzdGlvblZhbHVlcyArPSBzZWxmLnN1Z2VzdGlvblZhbHVlc0FycmF5W2tdICsgIFwiLCBcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxmLnN1Z2VzdGlvblZhbHVlc1tzZWxmLnN1Z2VzdGlvblZhbHVlc0FycmF5W3NlbGYuc3VnZXN0aW9uVmFsdWVzQXJyYXkubGVuZ3RoLTFdXSArIFwiLlwiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yKHZhciBpID0gMDsgaSA8IGRhdGEuc3Rha2Vob2xkZXJzLmxlbmd0aDsgaSsrKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IodmFyIGogPSAwOyBqIDwgc2VsZi5zdGFrZWhvbGRlckxpc3QubGVuZ3RoOyBqKyspe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgc3Rha2Vob2xkZXIgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfaWQgOiBkYXRhLnN0YWtlaG9sZGVyc1tpXS5faWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbmlvbmxheWVyIDogZGF0YS5zdGFrZWhvbGRlcnNbaV0ub25pb25sYXllcixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlcyA6IGRhdGEuc3Rha2Vob2xkZXJzW2ldLnZhbHVlcyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWUgOiBkYXRhLnN0YWtlaG9sZGVyc1tpXS5uYW1lLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVzY3JpcHRpb24gOiBkYXRhLnN0YWtlaG9sZGVyc1tpXS5kZXNjcmlwdGlvbixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wZW5FZGl0IDogZGF0YS5zdGFrZWhvbGRlcnNbaV0ub3BlbkVkaXQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdWYWx1ZXMgOiBbXVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKGRhdGEuc3Rha2Vob2xkZXJzW2ldLm9uaW9ubGF5ZXIgPT0gc2VsZi5zdGFrZWhvbGRlckxpc3Rbal0ub25pb25sYXllcil7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLnN0YWtlaG9sZGVyTGlzdFtqXS5zdGFrZWhvbGRlcnMucHVzaChzdGFrZWhvbGRlcik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBzZWxmLmluUHJvY2Vzc2luZyA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgICAgICAgICAgdG9hc3RBcHAuZXJyb3JNZXNzYWdlKGRhdGEubWVzc2FnZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICB9O1xyXG5cclxuICAgIFNvY2tldC5vbignb25Ccm9hZGNhc3RPbmlvblNhdmUnLCBmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgIGFuZ3VsYXIuZm9yRWFjaChzZWxmLnN0YWtlaG9sZGVyTGlzdCwgZnVuY3Rpb24gKHN0YWtlaG9sZGVyKSB7XHJcbiAgICAgICAgICAgIGlmIChzdGFrZWhvbGRlci5faWQgPT0gZGF0YS5faWQpe1xyXG4gICAgICAgICAgICAgICAgc3Rha2Vob2xkZXIub25pb25sYXllciA9IGRhdGEub25pb25sYXllcjtcclxuICAgICAgICAgICAgICAgIHN0YWtlaG9sZGVyLnZhbHVlcyA9IGRhdGEudmFsdWVzO1xyXG4gICAgICAgICAgICAgICAgc3Rha2Vob2xkZXIubmFtZSA9IGRhdGEubmFtZTtcclxuICAgICAgICAgICAgICAgIHN0YWtlaG9sZGVyLmRlc2NyaXB0aW9uID0gZGF0YS5kZXNjcmlwdGlvbjtcclxuICAgICAgICAgICAgICAgIHN0YWtlaG9sZGVyLm9wZW5FZGl0ID0gZGF0YS5vcGVuRWRpdDtcclxuICAgICAgICAgICAgICAgIHN0YWtlaG9sZGVyLm5ld1ZhbHVlcyA9IFtdO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBzZWxmLnNldFN1Z2dlc3Rpb25TaG93ID0gZnVuY3Rpb24oc3Rha2Vob2xkZXIpe1xyXG4gICAgICAgIHN0YWtlaG9sZGVyLm9wZW5FZGl0ID0gdHJ1ZTtcclxuICAgIH07XHJcblxyXG4gICAgc2VsZi5sZWF2ZVN1Z2dlc3Rpb25TaG93ID0gZnVuY3Rpb24oc3Rha2Vob2xkZXIpe1xyXG4gICAgICAgIHN0YWtlaG9sZGVyLm9wZW5FZGl0ID0gZmFsc2U7XHJcbiAgICB9O1xyXG5cclxuXHJcbiAgICBzZWxmLnJlbW92ZVZhbHVlSWRlbnRpY2F0aW9uID0gZnVuY3Rpb24odmFsdWUsc3Rha2Vob2xkZXIpe1xyXG4gICAgICAgIHZhciBuZXdMaXN0ID0gW107XHJcbiAgICAgICAgZm9yKHZhciBpID0gMDsgaSA8IHN0YWtlaG9sZGVyLnZhbHVlcy5sZW5ndGg7IGkrKyl7XHJcbiAgICAgICAgICAgIGlmKHN0YWtlaG9sZGVyLnZhbHVlc1tpXSAhPSB2YWx1ZSl7XHJcbiAgICAgICAgICAgICAgICBuZXdMaXN0LnB1c2goc3Rha2Vob2xkZXIudmFsdWVzW2ldKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBzdGFrZWhvbGRlci52YWx1ZXMgPSBuZXdMaXN0O1xyXG4gICAgICAgIFNvY2tldC5lbWl0KCdicm9hZGNhc3RPbmlvblNhdmUnLCBzdGFrZWhvbGRlcik7XHJcbiAgICB9XHJcblxyXG4gICAgc2VsZi5zZXRWYWx1ZUlkZW50aWNhdGlvbiA9IGZ1bmN0aW9uKHN0YWtlaG9sZGVyKSB7XHJcbiAgICAgICAgY29uc29sZS5sb2coc3Rha2Vob2xkZXIubmV3VmFsdWVzKTtcclxuXHJcbiAgICAgICAgaWYoKHN0YWtlaG9sZGVyLm5ld1ZhbHVlcyA9PT0gXCJcIikgfHwgKHN0YWtlaG9sZGVyLm5ld1ZhbHVlcyA9PT0gdW5kZWZpbmVkKSl7XHJcbiAgICAgICAgICAgIHRvYXN0QXBwLmVycm9yTWVzc2FnZShcIlZhbG9yIG7vv71vIGVzcGVjaWZpY2Fkby5cIik7XHJcbiAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgIHZhciB2YWx1ZXNMaXN0ID0gc3Rha2Vob2xkZXIubmV3VmFsdWVzLnNwbGl0KCcsJyk7XHJcbiAgICAgICAgICAgIGZvcih2YXIgaT0wOyBpIDwgdmFsdWVzTGlzdC5sZW5ndGg7IGkrKyl7XHJcbiAgICAgICAgICAgICAgICBzdGFrZWhvbGRlci52YWx1ZXMucHVzaCh2YWx1ZXNMaXN0W2ldKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhzdGFrZWhvbGRlci52YWx1ZXMpO1xyXG4gICAgICAgICAgICBzdGFrZWhvbGRlci5uZXdWYWx1ZXMgPSBcIlwiO1xyXG4gICAgICAgICAgICBzdGFrZWhvbGRlci5vcGVuRWRpdCA9IGZhbHNlO1xyXG4gICAgICAgICAgICBTb2NrZXQuZW1pdCgnYnJvYWRjYXN0T25pb25TYXZlJywgc3Rha2Vob2xkZXIpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICB9O1xyXG5cclxuXHJcblxyXG59XHJcbiIsIi8qKlxyXG4gKiBDcmVhdGVkIGJ5IEpPU0VWQUxERVJMRUkgb24gMjUvMDYvMjAxNS5cclxuICovXHJcbihmdW5jdGlvbiAoKSB7XHJcbiAgICBcInVzZSBzdHJpY3RcIjtcclxuXHJcbmFuZ3VsYXJcclxuICAgIC5tb2R1bGUoJ2FwcCcsWyd0b2FzdFNlcnZpY2UnLCd0ZXh0QW5ndWxhcicsJ2x1ZWdnLmRpcmVjdGl2ZXMnLCAnRHJvcERTQycsJ2F1dGhTZXJ2aWNlJywndWkucm91dGVyJywnbmdNYXRlcmlhbCcsJ25nTWRJY29ucycsJ25nQ29va2llcycsJ3Bhc2NhbHByZWNodC50cmFuc2xhdGUnXSlcclxuICAgICAgICAuY29uZmlnKGZ1bmN0aW9uKCRodHRwUHJvdmlkZXIpIHtcclxuICAgICAgICAgICAgJGh0dHBQcm92aWRlci5pbnRlcmNlcHRvcnMucHVzaCgnQXV0aEludGVyY2VwdG9yJyk7XHJcbiAgICAgICAgfSlcclxuXHJcbn0pKCk7XHJcblxyXG5cclxuIiwiLyoqXHJcbiAqIENyZWF0ZWQgYnkgSk9TRVZBTERFUkxFSSBvbiAyNS8wNi8yMDE1LlxyXG4gKi9cclxuXHJcbihmdW5jdGlvbigpe1xyXG5cclxuJ3VzZSBzdHJpY3QnO1xyXG5cclxuYW5ndWxhci5tb2R1bGUoJ2FwcCcpXHJcbiAgICAuY29uZmlnKHJvdXRlcyk7XHJcblxyXG5mdW5jdGlvbiByb3V0ZXMoJHN0YXRlUHJvdmlkZXIsICR1cmxSb3V0ZXJQcm92aWRlcikge1xyXG5cclxuICAgICRzdGF0ZVByb3ZpZGVyLnN0YXRlKCdpbml0Jywge1xyXG4gICAgICAgIHVybDogJy8nLFxyXG4gICAgICAgIHRlbXBsYXRlVXJsOiAndmlld3MvcGFnZXMvaW5pdHBhZ2UuaHRtbCcsXHJcbiAgICAgICAgY29udHJvbGxlcjogJ2xvZ2luQ29udHJvbGxlciBhcyB2bSdcclxuICAgICAgICB9KVxyXG4gICAgICAgIC5zdGF0ZSgnaW5pdC5sb2dpbicsIHtcclxuICAgICAgICAgICAgdXJsOiAnbG9naW4nLFxyXG4gICAgICAgICAgICB2aWV3czoge1xyXG4gICAgICAgICAgICAgICAgJ2NvbnRlbnQtdGFiJzoge1xyXG4gICAgICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAndmlld3MvcGFnZXMvdXNlcmxvZ2luLmh0bWwnLFxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdsb2dpbkNvbnRyb2xsZXIgYXMgdm0nXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KVxyXG4gICAgICAgIC5zdGF0ZSgnaW5pdC5zaWdudXAnLCB7XHJcbiAgICAgICAgICAgIHVybDogJ3NpZ251cCcsXHJcbiAgICAgICAgICAgICAgIHZpZXdzOiB7XHJcbiAgICAgICAgICAgICAgICAnY29udGVudC10YWInOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICd2aWV3cy9wYWdlcy9zaWdudXAuaHRtbCcsXHJcbiAgICAgICAgICAgICAgICAgICAgY29udHJvbGxlcjogJ3NpZ251cENvbnRyb2xsZXIgYXMgdm0nXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KVxyXG4gICAgICAgIC5zdGF0ZSgnaW5pdC5yZXNjdWVwYXNzd29yZCcsIHtcclxuICAgICAgICAgICAgdXJsOiAncmVzY3VlcGFzc3dvcmQnLFxyXG4gICAgICAgICAgICB2aWV3czoge1xyXG4gICAgICAgICAgICAgICAgJ2NvbnRlbnQtdGFiJzoge1xyXG4gICAgICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAndmlld3MvcGFnZXMvcmVzY3VlcGFzc3dvcmQuaHRtbCcsXHJcbiAgICAgICAgICAgICAgICAgICAgY29udHJvbGxlcjogJ3NpZ251cENvbnRyb2xsZXIgYXMgdm0nXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KVxyXG4gICAgICAgIC5zdGF0ZSgnc3RhcnRwcm9ibGVtJywge1xyXG4gICAgICAgICAgICB1cmw6ICcvc3RhcnRwcm9ibGVtJyxcclxuICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICd2aWV3cy9wYWdlcy9zdGFydHByb2JsZW0uaHRtbCcsXHJcbiAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdzdGFydFByb2JsZW1Db250cm9sbGVyIGFzIHZtJ1xyXG5cclxuICAgICAgICB9KVxyXG5cclxuICAgICAgICAuc3RhdGUoJ25ld3Bhc3N3b3JkJywge1xyXG4gICAgICAgICAgICB1cmw6ICcvbmV3cGFzc3dvcmQvOm15dG9rZW4nLFxyXG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ3ZpZXdzL3BhZ2VzL25ld3Bhc3N3b3JkLmh0bWwnLFxyXG4gICAgICAgICAgICBjb250cm9sbGVyOiAnc2lnbnVwQ29udHJvbGxlciBhcyB2bScsXHJcbiAgICAgICAgfSlcclxuXHJcblxyXG4gICAgICAgIC5zdGF0ZSgncHJvYmxlbScsIHtcclxuICAgICAgICAgICAgdXJsOiAnL3Byb2JsZW0nLFxyXG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ3ZpZXdzL3BhZ2VzL3Byb2JsZW0uaHRtbCcsXHJcbiAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdtZW51UHJvYmxlbUNvbnRyb2xsZXIgYXMgdm0nXHJcbiAgICAgICAgfSlcclxuICAgICAgICAuc3RhdGUoJ3Byb2JsZW0uZHNjcmVwb3J0Jywge1xyXG4gICAgICAgICAgICB1cmw6ICcvZHNjcmVwb3J0JyxcclxuICAgICAgICAgICAgdmlld3M6IHtcclxuICAgICAgICAgICAgICAgICdwcm9ibGVtLWRlc2NyaXB0aW9uJzoge1xyXG4gICAgICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAndmlld3MvcGFnZXMvZHNjcmVwb3J0Lmh0bWwnLFxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdkc2NSZXBvcnRDb250cm9sbGVyIGFzIHZtJ1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxuICAgICAgICAuc3RhdGUoJ3Byb2JsZW0uZGVzY3JpcHRpb24nLCB7XHJcbiAgICAgICAgICAgIHVybDogJy9kZXNjcmlwdGlvbicsXHJcbiAgICAgICAgICAgIHZpZXdzOiB7XHJcbiAgICAgICAgICAgICAgICAncHJvYmxlbS1kZXNjcmlwdGlvbic6IHtcclxuICAgICAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ3ZpZXdzL3BhZ2VzL3Byb2JsZW1kZXNjcmlwdGlvbi5odG1sJyxcclxuICAgICAgICAgICAgICAgICAgICBjb250cm9sbGVyOiAnZWRpdFByb2JsZW1Db250cm9sbGVyIGFzIHZtJ1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxuICAgICAgICAuc3RhdGUoJ3Byb2JsZW0uY29sbGFib3JhdG9ycycsIHtcclxuICAgICAgICAgICAgdXJsOiAnL2NvbGxhYm9yYXRvcnMnLFxyXG4gICAgICAgICAgICB2aWV3czoge1xyXG4gICAgICAgICAgICAgICAgJ3Byb2JsZW0tZGVzY3JpcHRpb24nOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICd2aWV3cy9wYWdlcy9jb2xsYWJvcmF0b3JzLmh0bWwnLFxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdjb250cm9sbGVyQ29sbGFib3JhdG9ycyBhcyB2bSdcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLnN0YXRlKCdwcm9ibGVtLnN0YWtlaG9sZGVycycsIHtcclxuICAgICAgICAgICAgdXJsOiAnc3Rha2Vob2xkZXJzJyxcclxuICAgICAgICAgICAgdmlld3M6IHtcclxuICAgICAgICAgICAgICAgICdkc2MtYXJ0aWZhY3QnOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICd2aWV3cy9wYWdlcy9zdGFrZWhvbGRlcnMuaHRtbCcsXHJcbiAgICAgICAgICAgICAgICAgICAgY29udHJvbGxlcjogJ3N0YWtlaG9sZGVyQ29udHJvbGxlciBhcyB2bSdcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLnN0YXRlKCdwcm9ibGVtLmV2YWx1YXRpb25mcmFtZXdvcmsnLCB7XHJcbiAgICAgICAgICAgICAgICB1cmw6ICdldmFsdWF0aW9uZnJhbWV3b3JrJyxcclxuICAgICAgICAgICAgICAgIHZpZXdzOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgJ2RzYy1hcnRpZmFjdCc6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICd2aWV3cy9wYWdlcy9ldmFsdWF0aW9uZnJhbWV3b3JrLmh0bWwnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb250cm9sbGVyOiAnZXZhbHVhdGlvbmZyYW1ld29ya0NvbnRyb2xsZXIgYXMgdm0nXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KVxyXG5cclxuICAgICAgICAuc3RhdGUoJ3Byb2JsZW0uc2VtaW90aWNmcmFtZXdvcmsnLCB7XHJcbiAgICAgICAgICAgICAgICB1cmw6ICdzZW1pb3RpY2ZyYW1ld29yaycsXHJcbiAgICAgICAgICAgICAgICB2aWV3czoge1xyXG4gICAgICAgICAgICAgICAgICAgICdkc2MtYXJ0aWZhY3QnOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAndmlld3MvcGFnZXMvc2VtaW90aWNmcmFtZXdvcmsuaHRtbCcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdzZW1pb3RpY2ZyYW1ld29ya0NvbnRyb2xsZXIgYXMgdm0nXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIC5zdGF0ZSgncHJvYmxlbS5jYXJmJywge1xyXG4gICAgICAgICAgICAgICAgdXJsOiAnY2FyZicsXHJcbiAgICAgICAgICAgICAgICB2aWV3czoge1xyXG4gICAgICAgICAgICAgICAgICAgICdkc2MtYXJ0aWZhY3QnOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAndmlld3MvcGFnZXMvY2FyZi5odG1sJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29udHJvbGxlcjogJ2NhcmZDb250cm9sbGVyIGFzIHZtJ1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAuc3RhdGUoJ3Byb2JsZW0udmlmJywge1xyXG4gICAgICAgICAgICB1cmw6ICd2aWYnLFxyXG4gICAgICAgICAgICB2aWV3czoge1xyXG4gICAgICAgICAgICAgICAgJ2RzYy1hcnRpZmFjdCc6IHtcclxuICAgICAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ3ZpZXdzL3BhZ2VzL3ZpZi5odG1sJyxcclxuICAgICAgICAgICAgICAgICAgICBjb250cm9sbGVyOiAndmFsdWVJZGVudGlmaWNhdGlvbkZyYW1lQ29udHJvbGxlciBhcyB2bSdcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuXHJcbiAgICAgICAgJHVybFJvdXRlclByb3ZpZGVyLm90aGVyd2lzZSgnL2xvZ2luJyk7XHJcbn1cclxuXHJcbn0pKCk7IixudWxsLCIvKipcclxuICogQ3JlYXRlZCBieSBKT1NFVkFMREVSTEVJIG9uIDE0LzA3LzIwMTUuXHJcbiAqL1xyXG4oZnVuY3Rpb24oKXtcclxuICAgIFwidXNlIHN0cmljdFwiO1xyXG5cclxuICAgIGFuZ3VsYXIubW9kdWxlKCdhcHAnKVxyXG4gICAgICAgIC5jb250cm9sbGVyKFwiY2FyZkNvbnRyb2xsZXJcIixjYXJmQ29udHJvbGxlcik7XHJcblxyXG4gICAgZnVuY3Rpb24gY2FyZkNvbnRyb2xsZXIoJHdpbmRvdyxTb2NrZXQscHJvYmxlbVNlcnZpY2UsdG9hc3RBcHApe1xyXG4gICAgICAgIHZhciB2bSA9IHRoaXM7XHJcbiAgICAgICAgdm0uaWRQcm9ibGVtID0gXCJcIjtcclxuICAgICAgICB2bS5pblByb2Nlc3NpbmcgPSB0cnVlO1xyXG4gICAgICAgIHZtLnZhbHVlTGlzdCA9IFtdO1xyXG4gICAgICAgIHZtLnN0YWtlaG9sZGVyTGlzdCA9IFtdO1xyXG4gICAgICAgIHZtLmxvY2FsU3Rha2Vob2xkZXJzID0gW107XHJcbiAgICAgICAgdm0uY2FyZiA9IHtcclxuICAgICAgICAgICAgcG1zOiBcIlwiLFxyXG4gICAgICAgICAgICB2YWx1ZXM6IFtdLFxyXG4gICAgICAgICAgICBwcmlvcml0eTogXCJcIixcclxuICAgICAgICAgICAgcmVxdWlyZW1lbnQ6IFwiXCIsXHJcbiAgICAgICAgICAgIHN0YWtlaG9sZGVyczogW11cclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB2bS5pbml0Q2FyZiA9IGluaXRDYXJmO1xyXG4gICAgICAgIHZtLmNhcmZMaXN0ID0gW107XHJcbiAgICAgICAgdm0uY2FyZlByaW9yaXR5TGlzdCA9IFtdO1xyXG5cclxuICAgICAgICBmdW5jdGlvbiBpbml0Q2FyZigpe1xyXG4gICAgICAgICAgICB2bS5pZFByb2JsZW0gPSAkd2luZG93LmxvY2FsU3RvcmFnZS5nZXRJdGVtKCdwcm9ibGVtaWQnKTtcclxuICAgICAgICAgICAgcHJvYmxlbVNlcnZpY2UuZ2V0Y2FyZih2bS5pZFByb2JsZW0pXHJcbiAgICAgICAgICAgICAgICAuc3VjY2VzcyhmdW5jdGlvbihkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYoZGF0YS5zdWNjZXNzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZtLmxvY2FsU3Rha2Vob2xkZXJzID0gZGF0YS5zdGFrZWhvbGRlcnM7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZtLnN0YWtlaG9sZGVyTGlzdCA9IHZtLmxvY2FsU3Rha2Vob2xkZXJzO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2bS5jYXJmTGlzdCA9IGRhdGEuY2FyZjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdm0uY2FyZlByaW9yaXR5TGlzdCA9IHZtLmxvY2FsUHJpb3JpdHlMaXN0O1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIHZtLmluUHJvY2Vzc2luZyA9IGZhbHNlO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIHJlc2V0Q2FyZigpe1xyXG4gICAgICAgICAgICB2bS5jYXJmID0ge1xyXG4gICAgICAgICAgICAgICAgX2lkOiBcIlwiLFxyXG4gICAgICAgICAgICAgICAgcG1zOiBcIlwiLFxyXG4gICAgICAgICAgICAgICAgdmFsdWVzOiBbXSxcclxuICAgICAgICAgICAgICAgIHByaW9yaXR5OiBcIlwiLFxyXG4gICAgICAgICAgICAgICAgcmVxdWlyZW1lbnQ6IFwiXCIsXHJcbiAgICAgICAgICAgICAgICBzdGFrZWhvbGRlcnM6IFtdXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIHZtLnZhbHVlTGlzdCA9IFtdO1xyXG5cclxuICAgICAgICB9XHJcbiAgICAgICAgU29ja2V0Lm9uKCdvbkJyb2FkY2FzdENBUkZhZGQnLCBmdW5jdGlvbiAoY2FyZikge1xyXG4gICAgICAgICAgICB2bS5jYXJmTGlzdC5wdXNoKGNhcmYpO1xyXG4gICAgICAgICAgICByZXNldENhcmYoKTtcclxuICAgICAgICAgICAgdm0uc3Rha2Vob2xkZXJMaXN0ID0gdm0ubG9jYWxTdGFrZWhvbGRlcnM7XHJcbiAgICAgICAgICAgIHZtLmNhcmZQcmlvcml0eUxpc3QgPSB2bS5sb2NhbFByaW9yaXR5TGlzdDtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdm0uYWRkcG1zdmFsdWUgPSBmdW5jdGlvbihjYXJmKXtcclxuXHJcbiAgICAgICAgICAgIGlmKGNhcmYucG1zID09IFwiXCIpe1xyXG4gICAgICAgICAgICAgICAgdG9hc3RBcHAuZXJyb3JNZXNzYWdlKFwiU2VsZWN0IFBNU1wiKTtcclxuICAgICAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgICAgICBpZihjYXJmLnZhbHVlcy5sZW5ndGggPCAxICl7XHJcbiAgICAgICAgICAgICAgICAgICAgdG9hc3RBcHAuZXJyb3JNZXNzYWdlKFwiU2VsZWN0IG9uZSBvciBtb3JlIFZhbHVlXCIpO1xyXG4gICAgICAgICAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYoY2FyZi5zdGFrZWhvbGRlcnMubGVuZ3RoIDwgMSl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRvYXN0QXBwLmVycm9yTWVzc2FnZShcIlNlbGVjdCBvbmUgb3IgbW9yZSBTdGFrZWhvbGRlcihzKVwiKTtcclxuICAgICAgICAgICAgICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYoY2FyZi5wcmlvcml0eSA9PSBcIlwiKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvYXN0QXBwLmVycm9yTWVzc2FnZShcIlNlbGVjdCBwcmlvcml0eSBbTG93LCBNZWRpdW0gb3IgSGlnaF1cIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgU29ja2V0LmVtaXQoJ2Jyb2FkY2FzdENBUkZhZGQnLCBjYXJmKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZtLnN0YWtlaG9sZGVyTGlzdCA9IFtdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdm0uY2FyZlByaW9yaXR5TGlzdCA9IFtdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIFNvY2tldC5vbignb25Ccm9hZGNhc3RDQVJGcmVtb3ZlJywgZnVuY3Rpb24gKGlkKSB7XHJcbiAgICAgICAgICAgIHZtLmNhcmZMaXN0LnNwbGljZShpZCwxKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdm0ucmVtb3ZlQ0FSRiA9IGZ1bmN0aW9uKGluZGV4LGNhcmYpe1xyXG4gICAgICAgICAgICB2YXIgb2JqID0ge1xyXG4gICAgICAgICAgICAgICAgaW5kZXg6IGluZGV4LFxyXG4gICAgICAgICAgICAgICAgY2FyZjogY2FyZlxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFNvY2tldC5lbWl0KCdicm9hZGNhc3RDQVJGcmVtb3ZlJywgb2JqKTtcclxuICAgICAgICB9XHJcblxyXG5cclxuICAgICAgICB2bS5zZWxlY3RQTVNWYWx1ZSA9IGZ1bmN0aW9uKHBtcyl7XHJcbiAgICAgICAgICAgIGlmKHBtcyAhPSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgIGFuZ3VsYXIuZm9yRWFjaCh2bS5jYXJmUE1TVmFsdWUsIGZ1bmN0aW9uIChwbXNfdmFsdWUpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAocG1zX3ZhbHVlLnBtcyA9PSBwbXMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdm0uY2FyZi52YWx1ZXMgPSBbXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdm0udmFsdWVMaXN0ID0gcG1zX3ZhbHVlLnZhbHVlcztcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB2bS5zZXRQcmlvdGl0eSA9IGZ1bmN0aW9uKHByaW9yaXR5KXtcclxuICAgICAgICAgICAgdm0uY2FyZi5wcmlvcml0eSA9IHByaW9yaXR5O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdm0uYWRkTGlzdFZhbHVlID0gZnVuY3Rpb24obmV3dmFsdWUpe1xyXG4gICAgICAgICAgIGlmKHZtLmNhcmYudmFsdWVzLmxlbmd0aCA9PSAwKXtcclxuICAgICAgICAgICAgICAgIHZtLmNhcmYudmFsdWVzLnB1c2gobmV3dmFsdWUpO1xyXG4gICAgICAgICAgICB9ZWxzZSB7XHJcbiAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdm0uY2FyZi52YWx1ZXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgIGlmIChuZXd2YWx1ZSA9PSB2bS5jYXJmLnZhbHVlc1tpXSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgIHZtLmNhcmYudmFsdWVzLnNwbGljZShpLCAxKTtcclxuICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgdm0uY2FyZi52YWx1ZXMucHVzaChuZXd2YWx1ZSk7XHJcbiAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHZtLmFkZFN0YWtlaG9sZGVyID0gZnVuY3Rpb24obmV3U3Rha2Vob2xkZXIpe1xyXG4gICAgICAgICAgICBpZih2bS5jYXJmLnN0YWtlaG9sZGVycy5sZW5ndGggPT0gMCl7XHJcbiAgICAgICAgICAgICAgICB2bS5jYXJmLnN0YWtlaG9sZGVycy5wdXNoKG5ld1N0YWtlaG9sZGVyKTtcclxuICAgICAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgICAgICBmb3IodmFyIGk9MDsgaSA8IHZtLmNhcmYuc3Rha2Vob2xkZXJzLmxlbmd0aDsgaSsrKXtcclxuICAgICAgICAgICAgICAgICAgICBpZihuZXdTdGFrZWhvbGRlciA9PSB2bS5jYXJmLnN0YWtlaG9sZGVyc1tpXSl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZtLmNhcmYuc3Rha2Vob2xkZXJzLnNwbGljZShpLDEpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgdm0uY2FyZi5zdGFrZWhvbGRlcnMucHVzaChuZXdTdGFrZWhvbGRlcik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICB2bS5sb2NhbFByaW9yaXR5TGlzdCA9IFsnTG93JywgJ01lZGl1bScsJ0hpZ2gnXTtcclxuXHJcbiAgICAgICAgdm0uY2FyZlBNU1ZhbHVlID0gW1xyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIFwicG1zXCI6IFwiSW50ZXJhY3Rpb25cIixcclxuICAgICAgICAgICAgICAgICAgICBcInZhbHVlc1wiOiBbXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiSWRlbnRpdHlcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgXCJOb3Jtc1wiXHJcbiAgICAgICAgICAgICAgICAgICAgXVxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBcInBtc1wiOiBcIkFzc29jaWF0aW9uXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgXCJ2YWx1ZXNcIjogW1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBcIkNvbnZlcnNhdGlvblwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBcIkdyb3Vwc1wiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBcIlJlbGF0aW9uc2hpcFwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBcIlRydXN0XCJcclxuICAgICAgICAgICAgICAgICAgICBdXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIFwicG1zXCI6IFwiTGVhcm5pbmdcIixcclxuICAgICAgICAgICAgICAgICAgICBcInZhbHVlc1wiOiBbXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiTWV0YS1jb21tdW5pY2F0aW9uXCJcclxuICAgICAgICAgICAgICAgICAgICBdXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIFwicG1zXCI6IFwiUGxheVwiLFxyXG4gICAgICAgICAgICAgICAgICAgIFwidmFsdWVzXCI6IFtcclxuICAgICAgICAgICAgICAgICAgICAgICAgXCJBZXN0aGV0aWNzXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiRW1vdGlvbiBhbmQgQWZmZWN0aW9uXCJcclxuICAgICAgICAgICAgICAgICAgICBdXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIFwicG1zXCI6IFwiUHJvdGVjdGlvblwiLFxyXG4gICAgICAgICAgICAgICAgICAgIFwidmFsdWVzXCI6IFtcclxuICAgICAgICAgICAgICAgICAgICAgICAgXCJJbmZvcm1lZCBjb25zZXJ0XCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiUmVwdXRhdGlvblwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBcIlNlY3VyaXR5XCJcclxuICAgICAgICAgICAgICAgICAgICBdXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIFwicG1zXCI6IFwiRXhwbG9pdGF0aW9uXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgXCJ2YWx1ZXNcIjogW1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBcIkFjY2Vzc2liaWxpdHlcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgXCJPYmplY3RcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgXCJQcm9wZXJ0eSAob3duZXJzaGlwKVwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBcIlVzYWJpbGl0eVwiXHJcbiAgICAgICAgICAgICAgICAgICAgXVxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBcInBtc1wiOiBcIlRlcG9yYWxpdHlcIixcclxuICAgICAgICAgICAgICAgICAgICBcInZhbHVlc1wiOiBbXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiQXZhaWxhYmlsaXR5XCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiQXdhcmVuZXNzXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiUHJlc2VuY2VcIlxyXG4gICAgICAgICAgICAgICAgICAgIF1cclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgXCJwbXNcIjogXCJUZXJyaXRvcmlhbGl0eVwiLFxyXG4gICAgICAgICAgICAgICAgICAgIFwidmFsdWVzXCI6IFtcclxuICAgICAgICAgICAgICAgICAgICAgICAgXCJQb3J0YWJpbGl0eVwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBcIlByaXZhY3lcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgXCJTY2FsYWJpbGl0eVwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBcIlZpc2liaWxpdHlcIlxyXG4gICAgICAgICAgICAgICAgICAgIF1cclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgXCJwbXNcIjogXCJDbGFzc2lmaWNhdGlvblwiLFxyXG4gICAgICAgICAgICAgICAgICAgIFwidmFsdWVzXCI6IFtcclxuICAgICAgICAgICAgICAgICAgICAgICAgXCJBdXRvbm9teVwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBcIkNvbGxhYm9yYXRpb25cIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgXCJTaGFyaW5nXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiQWRhcHRhYmlsaXR5XCJcclxuICAgICAgICAgICAgICAgICAgICBdXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIFwicG1zXCI6IFwiU3Vic2lzdGVuY2VcIixcclxuICAgICAgICAgICAgICAgICAgICBcInZhbHVlc1wiOiBbXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiUmVjaXByb2NpdHlcIlxyXG4gICAgICAgICAgICAgICAgICAgIF1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgXVxyXG4gICAgfVxyXG5cclxufSkoKTsiLCIvKipcclxuICogQ3JlYXRlZCBieSBKT1NFVkFMREVSTEVJIG9uIDEwLzA3LzIwMTUuXHJcbiAqL1xyXG5cclxuXHJcbihmdW5jdGlvbigpe1xyXG4gICAgXCJ1c2Ugc3RyaWN0XCI7XHJcbiAgICBhbmd1bGFyLm1vZHVsZSgnYXBwJylcclxuICAgICAgICAuY29udHJvbGxlcignY29udHJvbGxlckNvbGxhYm9yYXRvcnMnLCBjb250cm9sbGVyQ29sbGFib3JhdG9ycyk7XHJcblxyXG4gICAgZnVuY3Rpb24gY29udHJvbGxlckNvbGxhYm9yYXRvcnMoJHdpbmRvdyxwcm9ibGVtU2VydmljZSx0b2FzdEFwcCl7XHJcblxyXG4gICAgICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgICAgICBzZWxmLmlkUHJvYmxlbSA9IFwiXCI7XHJcbiAgICAgICAgc2VsZi5jb2xsYWJvcmF0b3JzID0gW107XHJcbiAgICAgICAgc2VsZi51c2VyZW1haWwgPSBcIlwiO1xyXG5cclxuXHJcbiAgICAgICAgc2VsZi5pbml0Q29sbGFib3JhdG9ycyA9IGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgIHNlbGYuaWRQcm9ibGVtID0gJHdpbmRvdy5sb2NhbFN0b3JhZ2UuZ2V0SXRlbSgncHJvYmxlbWlkJyk7XHJcbiAgICAgICAgICAgIHNlbGYudXNlcmVtYWlsID0gJHdpbmRvdy5sb2NhbFN0b3JhZ2UuZ2V0SXRlbSgndXNlcmVtYWlsJyk7XHJcbiAgICAgICAgICAgIHByb2JsZW1TZXJ2aWNlLmdldGNvbGxhYm9yYXRvcnMoc2VsZi5pZFByb2JsZW0pXHJcbiAgICAgICAgICAgICAgICAuc3VjY2VzcyhmdW5jdGlvbihkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYoZGF0YS5zdWNjZXNzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuY29sbGFib3JhdG9ycyA9IGRhdGEuY29sbGFib3JhdG9ycztcclxuICAgICAgICAgICAgICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdG9hc3RBcHAuZXJyb3JNZXNzYWdlKGRhdGEubWVzc2FnZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBmdW5jdGlvbiBzZWFyY2hDYWxsYWJvcmF0aW9uKGVtYWlsKXtcclxuICAgICAgICAgICAgZm9yKHZhciBpID0gMDsgaSA8IHNlbGYuY29sbGFib3JhdG9ycy5sZW5ndGg7IGkrKyl7XHJcbiAgICAgICAgICAgICAgICBpZihlbWFpbCA9PSBzZWxmLmNvbGxhYm9yYXRvcnNbaV0uZW1haWwpe1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBzZWxmLmFkZENvbGxhYm9yYXRvciA9IGZ1bmN0aW9uKGVtYWlsKXtcclxuICAgICAgICAgICAgaWYoc2VsZi51c2VyZW1haWwgPT0gZW1haWwpe1xyXG4gICAgICAgICAgICAgICAgdG9hc3RBcHAuZXJyb3JNZXNzYWdlKHNlbGYudXNlcmVtYWlsICsgXCIgaXMgZW1haWwgb2Ygb3duZXIuXCIpO1xyXG4gICAgICAgICAgICB9ZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoc2VhcmNoQ2FsbGFib3JhdGlvbihlbWFpbCkpIHtcclxuICAgICAgICAgICAgICAgICAgICB0b2FzdEFwcC5lcnJvck1lc3NhZ2UoXCJVc3VhcmlvIENhZGFzdHJhZG8uXCIpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgaW52aXRlID0ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZHByb2JsZW06IHNlbGYuaWRQcm9ibGVtLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbWFpbDogZW1haWxcclxuICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgICAgIHByb2JsZW1TZXJ2aWNlLmludml0ZShpbnZpdGUpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5zdWNjZXNzKGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZGF0YS5zdWNjZXNzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5jb2xsYWJvcmF0b3JzID0gZGF0YS5jb2xsYWJvcmF0b3JzO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b2FzdEFwcC5lcnJvck1lc3NhZ2UoZGF0YS5tZXNzYWdlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgc2VsZi5yZW1vdmVDb2xsYWJvcmF0b3IgPSBmdW5jdGlvbihwZW9wbGUpe1xyXG4gICAgICAgICAgICB2YXIgb2JqID0ge1xyXG4gICAgICAgICAgICAgICAgaWRwcm9ibGVtOiBzZWxmLmlkUHJvYmxlbSxcclxuICAgICAgICAgICAgICAgIGVtYWlsOiBwZW9wbGUuZW1haWxcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICBwcm9ibGVtU2VydmljZS5yZW1vdmVjb2xsYWJvcmF0b3JzKG9iailcclxuICAgICAgICAgICAgICAgIC5zdWNjZXNzKGZ1bmN0aW9uKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZihkYXRhLnN1Y2Nlc3MpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdG9hc3RBcHAuZXJyb3JNZXNzYWdlKFwiQ29sYWJvcmFkb3IgZm9pIHJlbW92aWRvIGRvIHByb2pldG8uXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmNvbGxhYm9yYXRvcnMgPSBkYXRhLmNvbGxhYm9yYXRvcnM7XHJcbiAgICAgICAgICAgICAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRvYXN0QXBwLmVycm9yTWVzc2FnZShkYXRhLm1lc3NhZ2UpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxufSkoKTsiLCIvKipcclxuICogQ3JlYXRlZCBieSBKT1NFVkFMREVSTEVJIG9uIDI4LzA2LzIwMTUuXHJcbiAqL1xyXG5cclxuXHJcblxyXG5cclxuKGZ1bmN0aW9uKCkge1xyXG5cclxuXHJcbiAgICBcInVzZSBzdHJpY3RcIjtcclxuXHJcbiAgICBhbmd1bGFyLm1vZHVsZSgnYXBwJylcclxuICAgICAgICAuY29udHJvbGxlcignbWVudVByb2JsZW1Db250cm9sbGVyJywgbWVudVByb2JsZW1hQ29udHJvbGxlcik7XHJcblxyXG4gICAgZnVuY3Rpb24gbWVudVByb2JsZW1hQ29udHJvbGxlcihBdXRoLCAkdGltZW91dCwgJHN0YXRlLCAkbWRTaWRlbmF2ICwkbWRVdGlsLCRsb2cpe1xyXG4gICAgICAgIHZhciBzZWxmID0gdGhpcztcclxuXHJcbiAgICAgICAgc2VsZi5vcGVuQ2hhdCA9IGJ1aWxkVG9nZ2xlcignY2hhdCcpO1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEJ1aWxkIGhhbmRsZXIgdG8gb3Blbi9jbG9zZSBhIFNpZGVOYXY7IHdoZW4gYW5pbWF0aW9uIGZpbmlzaGVzXHJcbiAgICAgICAgICogcmVwb3J0IGNvbXBsZXRpb24gaW4gY29uc29sZVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGZ1bmN0aW9uIGJ1aWxkVG9nZ2xlcihuYXZJRCkge1xyXG4gICAgICAgICAgICB2YXIgZGVib3VuY2VGbiA9ICAkbWRVdGlsLmRlYm91bmNlKGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgICAgICAkbWRTaWRlbmF2KG5hdklEKVxyXG4gICAgICAgICAgICAgICAgICAgIC50b2dnbGUoKVxyXG4gICAgICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJGxvZy5kZWJ1ZyhcInRvZ2dsZSBcIiArIG5hdklEICsgXCIgaXMgZG9uZVwiKTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSwzMDApO1xyXG4gICAgICAgICAgICByZXR1cm4gZGVib3VuY2VGbjtcclxuICAgICAgICB9O1xyXG5cclxuXHJcbiAgICAgc2VsZi5mb3JtQWRkQ29sbGFib3JhdG9ycyA9IGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgJHN0YXRlLmdvKCdwcm9ibGVtLmNvbGxhYm9yYXRvcnMnKTtcclxuICAgICAgfVxyXG4gICAgICAgIHNlbGYub3BlblJlcG9ydCA9IGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgICRzdGF0ZS5nbygncHJvYmxlbS5kc2NyZXBvcnQnKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHNlbGYuZWRpdERlc2NyaXB0aW9uUHJvYmxlbSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAkc3RhdGUuZ28oJ3Byb2JsZW0uZGVzY3JpcHRpb24nKTtcclxuICAgIH07XHJcblxyXG4gICAgICAgIHNlbGYuZG9Mb2dvdXQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgQXV0aC5sb2dvdXQoKTtcclxuICAgICAgICAkc3RhdGUuZ28oJ2luaXQubG9naW4nKTtcclxuICAgIH07XHJcbiAgICB9XHJcblxyXG59KSgpOyIsIihmdW5jdGlvbigpe1xyXG5cclxuXCJ1c2Ugc3RyaWN0XCI7XHJcblxyXG4gICAgYW5ndWxhci5tb2R1bGUoJ2FwcCcpXHJcbiAgICAuY29udHJvbGxlcignZWRpdFByb2JsZW1Db250cm9sbGVyJyxlZGl0UHJvYmxlbWFDb250cm9sbGVyKTtcclxuZWRpdFByb2JsZW1hQ29udHJvbGxlci4kaW5qZWN0cmUgPSBbJyRzY29wZScsJ1NvY2tldCddO1xyXG5cclxuZnVuY3Rpb24gZWRpdFByb2JsZW1hQ29udHJvbGxlcigkc2NvcGUsIFNvY2tldCwgJHRpbWVvdXQsdG9hc3RBcHAsJHdpbmRvdyxwcm9ibGVtU2VydmljZSkge1xyXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgdmFyIHVwZGF0ZVRydWUgPSB0cnVlO1xyXG4gICAgc2VsZi5wcm9ibGVtID0gXCJcIjtcclxuXHJcbiAgICBzZWxmLnRhYnNkc2MgPSBbXHJcbiAgICAgICAgJzxtZC10YWIgZGF0YS11aS1zcmVmPVwicHJvYmxlbS5zdGFrZWhvbGRlcnNcIiBtZC1hY3RpdmU9XCIkc3RhdGUuaXMoXFwncHJvYmxlbS5zdGFrZWhvbGRlcnNcXCcpXCIgbGFiZWw9XCJ7e1xcJ0xBQkVMX0FSVElGQUNUX1NUQUtFSE9MREVSXFwnIHwgdHJhbnNsYXRlIH19XCI+PC9tZC10YWI+JyxcclxuICAgICAgICAnPG1kLXRhYiBkYXRhLXVpLXNyZWY9XCJwcm9ibGVtLmV2YWx1YXRpb25mcmFtZXdvcmtcIiBtZC1hY3RpdmU9XCIkc3RhdGUuaXMoXFwncHJvYmxlbS5ldmFsdWF0aW9uZnJhbWV3b3JrXFwnKVwiIGxhYmVsPVwie3tcXCdMQUJFTF9BUlRJRkFDVF9FVkFMVUFUSU9OX0ZSQU1FV09SS1xcJyB8IHRyYW5zbGF0ZSB9fVwiPjwvbWQtdGFiPicsXHJcbiAgICAgICAgJzxtZC10YWIgZGF0YS11aS1zcmVmPVwicHJvYmxlbS5zZW1pb3RpY2ZyYW1ld29ya1wiIG1kLWFjdGl2ZT1cIiRzdGF0ZS5pcyhcXCdwcm9ibGVtLnNlbWlvdGljZnJhbWV3b3JrXFwnKVwiIGxhYmVsPVwie3tcXCdMQUJFTF9BUlRJRkFDVF9TRU1JT1RJQ19GUkFNRVdPUktcXCcgfCB0cmFuc2xhdGUgfX1cIj48L21kLXRhYj4nLFxyXG4gICAgICAgICc8bWQtdGFiIGRhdGEtdWktc3JlZj1cInByb2JsZW0uY2FyZlwiIG1kLWFjdGl2ZT1cIiRzdGF0ZS5pcyhcXCdwcm9ibGVtLmNhcmZcXCcpXCIgbGFiZWw9XCJDQVJGXCI+PC9tZC10YWI+PC9tZC10YWJzPidcclxuICAgIF07XHJcblxyXG4gICAgc2VsZi5nZXRDdXJyZW50UHJvYmxlbSA9IGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgc2VsZi5pZFByb2JsZW0gPSAkd2luZG93LmxvY2FsU3RvcmFnZS5nZXRJdGVtKCdwcm9ibGVtaWQnKTtcclxuICAgICAgICBwcm9ibGVtU2VydmljZS5nZXRwcm9ibGVtKHNlbGYuaWRQcm9ibGVtKVxyXG4gICAgICAgICAgICAuc3VjY2VzcyhmdW5jdGlvbihkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICBpZihkYXRhLnN1Y2Nlc3MpIHtcclxuICAgICAgICAgICAgICAgICAgICBzZWxmLnByb2JsZW0gPSBkYXRhLnByb2JsZW07XHJcbiAgICAgICAgICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgICAgICAgICB0b2FzdEFwcC5lcnJvck1lc3NhZ2UoZGF0YS5tZXNzYWdlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSlcclxuICAgIH07XHJcblxyXG4gICAgdmFyIHNldFVwZGF0ZSA9IGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgdXBkYXRlVHJ1ZSA9IHRydWU7XHJcbiAgICB9O1xyXG5cclxuICAgIFNvY2tldC5vbignb25BdHVhbGl6YXJQcm9ibGVtYScsIGZ1bmN0aW9uIChyZXRvcm5vKSB7XHJcbiAgICAgICAgY29uc29sZS5sb2coXCI9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09cmV0b3Juby4uLi5cIiArIHJldG9ybm8pO1xyXG4gICAgICAgIHNlbGYucHJvYmxlbS5kZXNjcmlwdGlvbiA9IHJldG9ybm8uZGVzY3JpcHRpb247XHJcbiAgICAgICAgc2VsZi5wcm9ibGVtLnVwZGF0ZSA9IHVwZGF0ZVRydWU7XHJcbiAgICB9KTtcclxuXHJcbiAgICAkc2NvcGUucHJvYmxlbVVwZGF0ZSA9IGZ1bmN0aW9uIChwcm9ibGVtKSB7XHJcbiAgICAgICAgcHJvYmxlbS51cGRhdGUgPSB1cGRhdGVUcnVlO1xyXG5cclxuICAgICAgICBTb2NrZXQuZW1pdCgnYXR1YWxpemFyUHJvYmxlbWEnLCBwcm9ibGVtKTtcclxuICAgICAgICBpZiAodXBkYXRlVHJ1ZSkge1xyXG4gICAgICAgICAgICB1cGRhdGVUcnVlID0gZmFsc2U7XHJcbiAgICAgICAgICAgICR0aW1lb3V0KHNldFVwZGF0ZSwgMjAwMCk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICAkc2NvcGUuc2F2ZURlc2NyaXB0aW9uID0gZnVuY3Rpb24gKHByb2JsZW0pIHtcclxuICAgICAgICBjb25zb2xlLmxvZyhcIj09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XCIpO1xyXG4gICAgICAgIHByb2JsZW0udXBkYXRlID0gdXBkYXRlVHJ1ZTtcclxuICAgICAgICBTb2NrZXQuZW1pdCgnYXR1YWxpemFyUHJvYmxlbWEnLCBwcm9ibGVtKTtcclxuICAgIH07XHJcblxyXG59XHJcbn0pKCk7IiwiKGZ1bmN0aW9uKCkge1xyXG4gICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgYW5ndWxhclxyXG4gICAgLm1vZHVsZSgnYXBwJylcclxuICAgIC5mYWN0b3J5KCdwcm9ibGVtU2VydmljZScsIHByb2JsZW1TZXJ2aWNlKTtcclxuXHJcbiAgcHJvYmxlbVNlcnZpY2UuJGluamVjdCA9IFsnJGh0dHAnLCckbG9jYXRpb24nXTtcclxuXHJcbiAgZnVuY3Rpb24gcHJvYmxlbVNlcnZpY2UoJGh0dHAsJGxvY2F0aW9uKSB7XHJcblxyXG4gICAgdmFyIEFQSV9ST1VURV9HRVRVU0VSUFJPQkxFTVMgPSAnL2FwaS9wcm9ibGVtL2dldHByb2JsZW1zJztcclxuICAgIHZhciBBUElfUk9VVEVfR0VUVVNFUlBST0JMRU1TQ09MTEFCT1JBVE9SID0gJy9hcGkvcHJvYmxlbS9nZXRwcm9ibGVtc2NvbGxhYm9yYXRvcic7XHJcbiAgICB2YXIgQVBJX1JPVVRFX05FV1BST0JMRU0gPSAnL2FwaS9wcm9ibGVtL25ld3Byb2JsZW0nO1xyXG4gICAgdmFyIEFQSV9ST1VURV9HRVRQUk9CTEVNID0gJy9hcGkvcHJvYmxlbS9nZXRwcm9ibGVtJztcclxuICAgIHZhciBBUElfUk9VVEVfR0VUQ09MTEFCT1JBVE9SUyA9ICcvYXBpL3Byb2JsZW0vZ2V0Y29sbGFib3JhdG9ycyc7XHJcbiAgICB2YXIgQVBJX1JPVVRFX0lOVklURSA9ICcvYXBpL3Byb2JsZW0vaW52aXRlJztcclxuICAgIHZhciBBUElfUk9VVEVfR0VUT05JT04gPSAnL2FwaS9wcm9ibGVtL2dldG9uaW9uJztcclxuICAgIHZhciBBUElfUk9VVEVfR0VURVZBTFVBVElPTiA9ICcvYXBpL3Byb2JsZW0vZ2V0ZXZhbHVhdGlvbic7XHJcbiAgICB2YXIgQVBJX1JPVVRFX0dFVFNFTUlPVElDRlJBTUVXT1JLID0gJy9hcGkvcHJvYmxlbS9nZXRzZW1pb3RpYyc7XHJcbiAgICB2YXIgQVBJX1JPVVRFX0dFVENBUkYgPSAnL2FwaS9wcm9ibGVtL2dldGNhcmYnO1xyXG4gICAgdmFyIEFQSV9ST1VURV9SRU1PVkVQUk9CTEVNID0gJy9hcGkvcHJvYmxlbS9yZW1vdmVwcm9ibGVtJztcclxuICAgIHZhciBBUElfUk9VVEVfUkVNT1ZFQ09MTEFCT1JBVE9SID0gJy9hcGkvcHJvYmxlbS9yZW1vdmVjb2xsYWJvcmF0b3InO1xyXG4gICAgdmFyIEFQSV9ST1VURV9HRVRISVNUT1JZQ0hBVCA9ICcvYXBpL3Byb2JsZW0vaGlzdG9yeWNoYXQnO1xyXG5cclxuICAgIHZhciBzZXJ2aWNlID0ge1xyXG4gICAgICBuZXdwcm9ibGVtICAgICAgIDogbmV3cHJvYmxlbSxcclxuICAgICAgZ2V0dXNlcnByb2JsZW1zICA6IGdldHVzZXJwcm9ibGVtcyxcclxuICAgICAgZ2V0cHJvYmxlbSAgICAgICA6IGdldHByb2JsZW0sXHJcbiAgICAgIGdldGNvbGxhYm9yYXRvcnMgOiBnZXRjb2xsYWJvcmF0b3JzLFxyXG4gICAgICBpbnZpdGUgICAgICAgICAgIDogaW52aXRlLFxyXG4gICAgICBnZXRvbmlvbiAgICAgICAgIDogZ2V0b25pb24sXHJcbiAgICAgIGdldGV2YWx1YXRpb24gICAgOiBnZXRldmFsdWF0aW9uLFxyXG4gICAgICBnZXRzZW1pb3RpYyAgICAgIDogZ2V0c2VtaW90aWMsXHJcbiAgICAgIGdldGNhcmYgICAgICAgICAgOiBnZXRjYXJmLFxyXG4gICAgICByZW1vdmVwcm9ibGVtICAgIDogcmVtb3ZlcHJvYmxlbSxcclxuICAgICAgZ2V0cHJvYmxlbXNjb2xsYWJvcmF0b3I6IGdldHByb2JsZW1zY29sbGFib3JhdG9yLFxyXG4gICAgICByZW1vdmVjb2xsYWJvcmF0b3JzIDogcmVtb3ZlY29sbGFib3JhdG9ycyxcclxuICAgICAgZ2V0aGlzdG9yeWNoYXQ6IGdldGhpc3RvcnljaGF0XHJcbiAgICB9O1xyXG5cclxuICAgIHJldHVybiBzZXJ2aWNlO1xyXG5cclxuICAgIGZ1bmN0aW9uIG5ld3Byb2JsZW0oZGF0YSkge1xyXG4gICAgICAgIHJldHVybiAkaHR0cC5wb3N0KEFQSV9ST1VURV9ORVdQUk9CTEVNLCBkYXRhKTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBnZXRwcm9ibGVtKGRhdGEpe1xyXG4gICAgICByZXR1cm4gJGh0dHAuZ2V0KEFQSV9ST1VURV9HRVRQUk9CTEVNICsgJz9pZHByb2JsZW09JyArIGRhdGEgKTtcclxuICAgIH1cclxuXHJcblxyXG4gICAgZnVuY3Rpb24gZ2V0dXNlcnByb2JsZW1zKGRhdGEpe1xyXG4gICAgICByZXR1cm4gJGh0dHAuZ2V0KEFQSV9ST1VURV9HRVRVU0VSUFJPQkxFTVMgKyAnP2VtYWlsPScgKyBkYXRhICk7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gZ2V0Y29sbGFib3JhdG9ycyhkYXRhKXtcclxuICAgICAgcmV0dXJuICRodHRwLmdldChBUElfUk9VVEVfR0VUQ09MTEFCT1JBVE9SUyArICc/aWRwcm9ibGVtPScgKyBkYXRhICk7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gaW52aXRlKGRhdGEpe1xyXG4gICAgICByZXR1cm4gJGh0dHAucG9zdChBUElfUk9VVEVfSU5WSVRFLCBkYXRhICk7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gZ2V0b25pb24oZGF0YSl7XHJcbiAgICAgIHJldHVybiAkaHR0cC5nZXQoQVBJX1JPVVRFX0dFVE9OSU9OICsgJz9pZHByb2JsZW09JyArIGRhdGEgKTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBnZXRldmFsdWF0aW9uIChkYXRhKXtcclxuICAgICAgcmV0dXJuICRodHRwLmdldChBUElfUk9VVEVfR0VURVZBTFVBVElPTiArICc/aWRwcm9ibGVtPScgKyBkYXRhICk7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gZ2V0c2VtaW90aWMgKGRhdGEpe1xyXG4gICAgICByZXR1cm4gJGh0dHAuZ2V0KEFQSV9ST1VURV9HRVRTRU1JT1RJQ0ZSQU1FV09SSyArICc/aWRwcm9ibGVtPScgKyBkYXRhIClcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBnZXRjYXJmKGRhdGEpe1xyXG4gICAgICByZXR1cm4gJGh0dHAuZ2V0KEFQSV9ST1VURV9HRVRDQVJGICsgJz9pZHByb2JsZW09JyArIGRhdGEgKVxyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIHJlbW92ZXByb2JsZW0oZGF0YSl7XHJcbiAgICAgIHJldHVybiAkaHR0cC5nZXQoQVBJX1JPVVRFX1JFTU9WRVBST0JMRU0gKyAnP2lkcHJvYmxlbT0nICsgZGF0YSApO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGdldHByb2JsZW1zY29sbGFib3JhdG9yKGRhdGEpe1xyXG4gICAgICByZXR1cm4gJGh0dHAuZ2V0KEFQSV9ST1VURV9HRVRVU0VSUFJPQkxFTVNDT0xMQUJPUkFUT1IgKyAnP2VtYWlsPScgKyBkYXRhICk7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gcmVtb3ZlY29sbGFib3JhdG9ycyhkYXRhKXtcclxuICAgICAgcmV0dXJuICRodHRwLmdldChBUElfUk9VVEVfUkVNT1ZFQ09MTEFCT1JBVE9SICsgJz9pZHByb2JsZW09JyArIGRhdGEuaWRwcm9ibGVtICsgJyZlbWFpbD0nICsgZGF0YS5lbWFpbCApO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGdldGhpc3RvcnljaGF0KGRhdGEpe1xyXG4gICAgICByZXR1cm4gJGh0dHAuZ2V0KEFQSV9ST1VURV9HRVRISVNUT1JZQ0hBVCArICc/aWRwcm9ibGVtPScgKyBkYXRhICk7XHJcbiAgICB9XHJcblxyXG4gIH1cclxufSkoKTtcclxuIiwiXHJcbihmdW5jdGlvbigpe1xyXG5cclxuICAgICd1c2Ugc3RyaWN0JztcclxuICAgIGFuZ3VsYXIubW9kdWxlKCdhcHAnKVxyXG4gICAgICAgIC5jb250cm9sbGVyKCdzdGFydFByb2JsZW1Db250cm9sbGVyJyxzdGFydFByb2JsZW1Db250cm9sbGVyKTtcclxuICAgICAgICBmdW5jdGlvbiBzdGFydFByb2JsZW1Db250cm9sbGVyKCRtZERpYWxvZywkc3RhdGUsQXV0aCxTb2NrZXQsICR3aW5kb3csIHByb2JsZW1TZXJ2aWNlLHRvYXN0QXBwICkge1xyXG4gICAgICAgICAgICB2YXIgdm0gPSB0aGlzO1xyXG4gICAgICAgICAgICB2bS5uaWNrbmFtZSA9IFwiXCI7XHJcbiAgICAgICAgICAgIHZtLnVzZXJpZCA9IFwiXCI7XHJcbiAgICAgICAgICAgIHZtLnVzZXJlbWFpbCA9IFwiXCI7XHJcbiAgICAgICAgICAgIHZtLnByb2JsZW1MaXN0ID0gW107XHJcbiAgICAgICAgICAgIHZtLnByb2JsZW1Db2xsYWJvcmF0b3JMaXN0ID0gW107XHJcbiAgICAgICAgICAgIHZtLmxvZ2luSW5Qcm9ncmVzcyA9IHRydWU7XHJcblxyXG4gICAgICAgICAgICB2bS5nZXRQcm9ibGVtcyA9IGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgICAgICB2bS51c2VyaWQgPSAkd2luZG93LmxvY2FsU3RvcmFnZS5nZXRJdGVtKCd1c2VyaWQnKTtcclxuICAgICAgICAgICAgICAgIHZtLm5pY2tuYW1lID0gJHdpbmRvdy5sb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnbmlja25hbWUnKTtcclxuICAgICAgICAgICAgICAgIHZtLnVzZXJlbWFpbCA9ICR3aW5kb3cubG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3VzZXJlbWFpbCcpO1xyXG4gICAgICAgICAgICAgICAgcHJvYmxlbVNlcnZpY2UuZ2V0dXNlcnByb2JsZW1zKHZtLnVzZXJlbWFpbClcclxuICAgICAgICAgICAgICAgICAgICAuc3VjY2VzcyhmdW5jdGlvbihkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYoZGF0YS5zdWNjZXNzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvcih2YXIgaT0wOyBpIDwgZGF0YS5wcm9ibGVtcy5sZW5ndGg7IGkrKyApe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YS5wcm9ibGVtc1tpXS5kZXNjcmlwdGlvbiA9IGRhdGEucHJvYmxlbXNbaV0uZGVzY3JpcHRpb24ucmVwbGFjZSgvKDwoW14+XSspPikvaWcsXCJcIikuc3Vic3RyaW5nKDAsNDYwKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdm0ucHJvYmxlbUxpc3QgPSBkYXRhLnByb2JsZW1zO1xyXG4gICAgICAgICAgICAgICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0b2FzdEFwcC5lcnJvck1lc3NhZ2UoZGF0YS5tZXNzYWdlKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgcHJvYmxlbVNlcnZpY2UuZ2V0cHJvYmxlbXNjb2xsYWJvcmF0b3Iodm0udXNlcmVtYWlsKVxyXG4gICAgICAgICAgICAgICAgICAgIC5zdWNjZXNzKGZ1bmN0aW9uKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYoZGF0YS5zdWNjZXNzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IodmFyIGk9MDsgaSA8IGRhdGEucHJvYmxlbXMubGVuZ3RoOyBpKysgKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhLnByb2JsZW1zW2ldLmRlc2NyaXB0aW9uID0gZGF0YS5wcm9ibGVtc1tpXS5kZXNjcmlwdGlvbi5yZXBsYWNlKC8oPChbXj5dKyk+KS9pZyxcIlwiKS5zdWJzdHJpbmcoMCw0NjApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZtLnByb2JsZW1Db2xsYWJvcmF0b3JMaXN0ID0gZGF0YS5wcm9ibGVtcztcclxuICAgICAgICAgICAgICAgICAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b2FzdEFwcC5lcnJvck1lc3NhZ2UoZGF0YS5tZXNzYWdlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICB2bS5sb2dpbkluUHJvZ3Jlc3MgPSBmYWxzZTtcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIHJlbW92ZVByb2JsZW0ocHJvYmxlbWlkKXtcclxuICAgICAgICAgICAgICAgICAgICBwcm9ibGVtU2VydmljZS5yZW1vdmVwcm9ibGVtKHByb2JsZW1pZClcclxuICAgICAgICAgICAgICAgICAgICAuc3VjY2VzcyhmdW5jdGlvbihkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKGRhdGEuc3VjY2Vzcykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yKHZhciBpPTA7IGkgPCB2bS5wcm9ibGVtTGlzdC5sZW5ndGg7IGkrKyl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYodm0ucHJvYmxlbUxpc3RbaV0uX2lkID09IHByb2JsZW1pZCl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZtLnByb2JsZW1MaXN0LnNwbGljZShpLDEpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9hc3RBcHAuZXJyb3JNZXNzYWdlKGRhdGEubWVzc2FnZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICB9XHJcblxyXG5cclxuICAgICAgICAgICAgdm0ucmV2b212ZVByb2JsZW0gPSBmdW5jdGlvbihldixwcm9ibGVtKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBBcHBlbmRpbmcgZGlhbG9nIHRvIGRvY3VtZW50LmJvZHkgdG8gY292ZXIgc2lkZW5hdiBpbiBkb2NzIGFwcFxyXG4gICAgICAgICAgICAgICAgdmFyIGNvbmZpcm0gPSAkbWREaWFsb2cuY29uZmlybSgpXHJcbiAgICAgICAgICAgICAgICAgICAgLnBhcmVudChhbmd1bGFyLmVsZW1lbnQoZG9jdW1lbnQuYm9keSkpXHJcbiAgICAgICAgICAgICAgICAgICAgLnRpdGxlKCdEZXRldGUgUHJvYmxlbT8nKVxyXG4gICAgICAgICAgICAgICAgICAgIC5jb250ZW50KCdUaXRsZTogJyArIHByb2JsZW0udGl0bGUpXHJcbiAgICAgICAgICAgICAgICAgICAgLmFyaWFMYWJlbCgnUmVtb3ZlIFByb2JsZW0nKVxyXG4gICAgICAgICAgICAgICAgICAgIC5vaygnRGVzZWpvIHJlbW92ZXIhJylcclxuICAgICAgICAgICAgICAgICAgICAuY2FuY2VsKCdDYW5jZWwnKVxyXG4gICAgICAgICAgICAgICAgICAgIC50YXJnZXRFdmVudChldik7XHJcbiAgICAgICAgICAgICAgICAkbWREaWFsb2cuc2hvdyhjb25maXJtKS50aGVuKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlbW92ZVByb2JsZW0ocHJvYmxlbS5faWQpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICB2bS5zdGFydE5ld1Byb2JsZW0gPSBmdW5jdGlvbihuZXdwcm9ibGVtKXtcclxuICAgICAgICAgICAgICAgIG5ld3Byb2JsZW0udXNlcmlkID0gdm0udXNlcmlkO1xyXG4gICAgICAgICAgICAgICAgcHJvYmxlbVNlcnZpY2UubmV3cHJvYmxlbShuZXdwcm9ibGVtKVxyXG4gICAgICAgICAgICAgICAgICAgIC5zdWNjZXNzKGZ1bmN0aW9uKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYoZGF0YS5zdWNjZXNzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2bS5lZGl0UHJvYmxlbShkYXRhLnByb2JsZW0pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9hc3RBcHAuZXJyb3JNZXNzYWdlKGRhdGEubWVzc2FnZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdm0uZWRpdFByb2JsZW0gPSBmdW5jdGlvbiAocHJvYmxlbSkge1xyXG5cclxuICAgICAgICAgICAgICAgICR3aW5kb3cubG9jYWxTdG9yYWdlLnNldEl0ZW0oXCJwcm9ibGVtaWRcIixwcm9ibGVtLl9pZCk7XHJcbiAgICAgICAgICAgICAgICB2YXIgaW5pdHNvY2tldHByb2JsZW0gPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgXCJpZHByb2JsZW1cIjpwcm9ibGVtLl9pZCxcclxuICAgICAgICAgICAgICAgICAgICBcIm5pY2tuYW1lXCI6IHZtLm5pY2tuYW1lXHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgU29ja2V0LmVtaXQoJ2luaXRQcm9ibGVtJywgaW5pdHNvY2tldHByb2JsZW0pO1xyXG4gICAgICAgICAgICAgICAgJHN0YXRlLmdvKCdwcm9ibGVtLnN0YWtlaG9sZGVycycpO1xyXG4gICAgICAgICAgICB9O1xyXG5cclxuXHJcbiAgICAgICAgICAgIHZtLmRvTG9nb3V0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgQXV0aC5sb2dvdXQoKTtcclxuICAgICAgICAgICAgICAgICRzdGF0ZS5nbygnaW5pdC5sb2dpbicpO1xyXG4gICAgICAgICAgICB9O1xyXG5cclxuXHJcbiAgICAgICAgICAgIHZtLm5ld1Byb2JsZW0gPSBmdW5jdGlvbihldikge1xyXG4gICAgICAgICAgICAgICAgJG1kRGlhbG9nLnNob3coe1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnRyb2xsZXI6IERpYWxvZ0NvbnRyb2xsZXIsXHJcbiAgICAgICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICd2aWV3cy9wYWdlcy9uZXdwcm9ibGVtLmh0bWwnLFxyXG4gICAgICAgICAgICAgICAgICAgIHBhcmVudDogYW5ndWxhci5lbGVtZW50KGRvY3VtZW50LmJvZHkpLFxyXG4gICAgICAgICAgICAgICAgICAgIHRhcmdldEV2ZW50OiBldixcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIERpYWxvZ0NvbnRyb2xsZXIoJHNjb3BlLCAkbWREaWFsb2cpIHtcclxuICAgICAgICAgICAgICAgICRzY29wZS5oaWRlID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJG1kRGlhbG9nLmhpZGUoKTtcclxuICAgICAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAgICAgJHNjb3BlLmNhbmNlbCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICRtZERpYWxvZy5jYW5jZWwoKTtcclxuICAgICAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAgICAgJHNjb3BlLmFkZE5ld1Byb2JsZW0gPSBmdW5jdGlvbihwcm9ibGVtKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdm0uc3RhcnROZXdQcm9ibGVtKHByb2JsZW0pO1xyXG4gICAgICAgICAgICAgICAgICAgICRtZERpYWxvZy5jYW5jZWwoKTtcclxuICAgICAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICB9XHJcbiAgICB9XHJcbn0pKCk7XHJcblxyXG4iLCIvKipcclxuICogQ3JlYXRlZCBieSBKT1NFVkFMREVSTEVJIG9uIDE5LzA2LzIwMTUuXHJcbiAqL1xyXG4oZnVuY3Rpb24oKXtcclxuXHJcbid1c2Ugc3RyaWN0JztcclxuXHJcbiAgICBhbmd1bGFyXHJcbiAgICAubW9kdWxlKCdhcHAnKVxyXG4gICAgLmNvbmZpZyhpbml0TGFuZ3VhZ2UpXHJcbiAgICAuY29udHJvbGxlcignbGFuZ3VhZ2VDb250cm9sbGVyJyxsYW5ndWFnZUNvbnRyb2xsZXIpXHJcbiAgICAuZGlyZWN0aXZlKCdjaGFuZ2VMYW5ndWFnZScsY2hhbmdlTGFuZ3VhZ2UpO1xyXG5cclxuaW5pdExhbmd1YWdlLiRpbmplY3QgPSBbJyR0cmFuc2xhdGVQcm92aWRlciddO1xyXG5sYW5ndWFnZUNvbnRyb2xsZXIuJGluamVjdCA9IFsnJHRyYW5zbGF0ZSddO1xyXG5cclxuZnVuY3Rpb24gaW5pdExhbmd1YWdlICgkdHJhbnNsYXRlUHJvdmlkZXIpIHtcclxuICAgICAgICAkdHJhbnNsYXRlUHJvdmlkZXIudXNlU3RhdGljRmlsZXNMb2FkZXIoe1xyXG4gICAgICAgICAgICBwcmVmaXg6ICdhcHAvbGFuZ3VhZ2UvbGFuZy0nLFxyXG4gICAgICAgICAgICBzdWZmaXg6ICcuanNvbidcclxuICAgICAgICB9KTtcclxuICAgICAgICAkdHJhbnNsYXRlUHJvdmlkZXIucHJlZmVycmVkTGFuZ3VhZ2UoJ2VuJyk7XHJcbiAgICAgICAgJHRyYW5zbGF0ZVByb3ZpZGVyLnVzZVNhbml0aXplVmFsdWVTdHJhdGVneSgnZXNjYXBlZCcpO1xyXG4gICAgICAgICR0cmFuc2xhdGVQcm92aWRlci51c2VMb2NhbFN0b3JhZ2UoKTtcclxufVxyXG5cclxuZnVuY3Rpb24gbGFuZ3VhZ2VDb250cm9sbGVyICgkdHJhbnNsYXRlKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0TGFuZyA9IGZ1bmN0aW9uKGxhbmdLZXkpIHtcclxuICAgICAgICAgICAgJHRyYW5zbGF0ZS51c2UobGFuZ0tleSk7XHJcbiAgICAgICAgfTtcclxufVxyXG5cclxuXHJcblxyXG5cclxuZnVuY3Rpb24gY2hhbmdlTGFuZ3VhZ2UoKXtcclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgdGVtcGxhdGVVcmwgOiBcImFwcC9sYW5ndWFnZS9jaGFuZ2VMYW5ndWFnZS5odG1sXCIsXHJcbiAgICAgICAgcmVzdHJpY3Q6IFwiRVwiXHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuXHJcbn0pKCk7IiwiKGZ1bmN0aW9uKCkge1xyXG4gICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgYW5ndWxhclxyXG4gICAgLm1vZHVsZSgnYXBwJylcclxuICAgIC5jb250cm9sbGVyKCdzaWdudXBDb250cm9sbGVyJywgc2lnbnVwQ29udHJvbGxlcik7XHJcbiAgICBzaWdudXBDb250cm9sbGVyLiRpbmplY3QgPSBbJyR0cmFuc2xhdGUnLCckd2luZG93Jywnc2lnbnVwU2VydmljZScsJyRzdGF0ZScsJ3RvYXN0QXBwJywnQXV0aFRva2VuJywnQXV0aCcsJyRmaWx0ZXInLCckc3RhdGVQYXJhbXMnXTtcclxuXHJcbiAgZnVuY3Rpb24gc2lnbnVwQ29udHJvbGxlcigkdHJhbnNsYXRlLCAkd2luZG93LCBzaWdudXBTZXJ2aWNlLCRzdGF0ZSx0b2FzdEFwcCxBdXRoVG9rZW4sQXV0aCwkZmlsdGVyLCRzdGF0ZVBhcmFtcyl7XHJcbiAgICAvKiBqc2hpbnQgdmFsaWR0aGlzOiB0cnVlICovXHJcbiAgICB2YXIgdm0gPSB0aGlzO1xyXG5cclxuICAgIHZtLm1lc3NhZ2UgID0gJyc7XHJcbiAgICB2bS5zYXZlICAgPSBzYXZlVXNlcjtcclxuICAgIHZtLnJlc2N1ZVBhc3N3b3JkID0gcmVzY3VlUGFzc3dvcmQ7XHJcbiAgICB2bS5jaGFuZ2VQYXNzd29yZCA9IGNoYW5nZVBhc3N3b3JkO1xyXG4gICAgdm0uc2V0TGFuZyA9IHNldExhbmc7XHJcbiAgICB2bS5sb2dpbkluUHJvZ3Jlc3MgPSBmYWxzZTtcclxuXHJcbiAgICBmdW5jdGlvbiBzYXZlVXNlcih1c2VyKSB7XHJcbiAgICAgIHNpZ251cFNlcnZpY2UuY3JlYXRlKHVzZXIpXHJcbiAgICAgICAgICAuc3VjY2VzcyhmdW5jdGlvbihkYXRhKSB7XHJcbiAgICAgICAgICAgIGlmKGRhdGEuc3VjY2Vzcykge1xyXG4gICAgICAgICAgICAgIEF1dGhUb2tlbi5zZXRUb2tlbihkYXRhLnRva2VuKTtcclxuICAgICAgICAgICAgICBBdXRoLmdldFVzZXIoKVxyXG4gICAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbihkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdm0udXNlciA9IGRhdGEuZGF0YTtcclxuICAgICAgICAgICAgICAgICAgICAgIHZtLmxvZ2luSW5Qcm9ncmVzcyA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgJHdpbmRvdy5sb2NhbFN0b3JhZ2Uuc2V0SXRlbShcInVzZXJlbWFpbFwiLHVzZXIuZW1haWwpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgJHdpbmRvdy5sb2NhbFN0b3JhZ2Uuc2V0SXRlbShcInVzZXJpZFwiLHVzZXIuaWQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgJHdpbmRvdy5sb2NhbFN0b3JhZ2Uuc2V0SXRlbShcIm5pY2tuYW1lXCIsdXNlci5uaWNrbmFtZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICB2bS5zZXRMYW5nKHVzZXIubGFuZ3VhZ2UpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRvYXN0QXBwLmVycm9yTWVzc2FnZSgkZmlsdGVyKCd0cmFuc2xhdGUnKSgnV0VMQ09NRV9TWVNURU0nKSArIFwiOiBcIiArIHZtLnVzZXIubmlja25hbWUpO1xyXG4gICAgICAgICAgICAgICAgICAgICRzdGF0ZS5nbygnc3RhcnRwcm9ibGVtJyk7XHJcbiAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgICAgdG9hc3RBcHAuZXJyb3JNZXNzYWdlKFwiRW1haWwgSsOhIGNhZGFzdHJhZG9cIik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH0pXHJcbiAgICAgICB9XHJcblxyXG4gICAgICBmdW5jdGlvbiBzZXRMYW5nKGxhbmdLZXkpIHtcclxuICAgICAgICAgICR0cmFuc2xhdGUudXNlKGxhbmdLZXkpO1xyXG4gICAgICB9O1xyXG5cclxuICAgICAgZnVuY3Rpb24gcmVzY3VlUGFzc3dvcmQodXNlckVtYWlsKXtcclxuICAgICAgICAgIHNpZ251cFNlcnZpY2UucmVzY3VlUGFzc3dvcmQodXNlckVtYWlsKVxyXG4gICAgICAgICAgICAgIC5zdWNjZXNzKGZ1bmN0aW9uKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coZGF0YSk7XHJcbiAgICAgICAgICAgICAgICAgIGlmKGRhdGEuc3VjY2Vzcykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgdG9hc3RBcHAuZXJyb3JNZXNzYWdlKFwiRW1haWwgY29tIGluc3RydcOnw7VlcyBlbnZpYWRvXCIpO1xyXG4gICAgICAgICAgICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgICAgICAgICAgIHRvYXN0QXBwLmVycm9yTWVzc2FnZShcIkVycm9yXCIpO1xyXG4gICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgfSlcclxuICAgICAgfVxyXG5cclxuICAgICAgZnVuY3Rpb24gY2hhbmdlUGFzc3dvcmQodXNlcil7XHJcbiAgICAgICAgICBzaWdudXBTZXJ2aWNlLmNoYW5nZVBhc3N3b3JkKHVzZXIpXHJcbiAgICAgICAgICAgICAgLnN1Y2Nlc3MoZnVuY3Rpb24oZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgICBpZihkYXRhLnN1Y2Nlc3MpIHtcclxuICAgICAgICAgICAgICAgICAgICAgIHRvYXN0QXBwLmVycm9yTWVzc2FnZShcIlNlbmhhIGFsdGVyYWRhIGNvbSBzdWNlc3NvLiBGYcOnYSBsb2dpbiBjb20gYSBub3ZhIHNlbmhhLlwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICRzdGF0ZS5nbygnaW5pdCcpO1xyXG4gICAgICAgICAgICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgICAgICAgICAgIHRvYXN0QXBwLmVycm9yTWVzc2FnZShcIkVycm9yXCIpO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgIH0pXHJcbiAgICAgIH1cclxuXHJcblxyXG4gIH1cclxufSkoKTsiLCIoZnVuY3Rpb24oKSB7XHJcbiAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICBhbmd1bGFyXHJcbiAgICAubW9kdWxlKCdhcHAnKVxyXG4gICAgLmZhY3RvcnkoJ3NpZ251cFNlcnZpY2UnLCBzaWdudXBTZXJ2aWNlKTtcclxuXHJcbiAgc2lnbnVwU2VydmljZS4kaW5qZWN0ID0gWyckaHR0cCcsJyRsb2NhdGlvbiddO1xyXG5cclxuICBmdW5jdGlvbiBzaWdudXBTZXJ2aWNlKCRodHRwLCRsb2NhdGlvbikge1xyXG5cclxuICAgIHZhciBBUElfUk9VVEVfVVNFUiA9ICcvYXBpL3NpZ251cC8nO1xyXG4gICAgdmFyIEFQSV9ST1VURV9SRVNDVUVQQVNTV09SRCA9ICcvYXBpL3Jlc2N1ZXBhc3N3ZC8nO1xyXG4gICAgdmFyIEFQSV9ST1VURV9TRVRORVdQQVNTV09SRCA9ICcvYXBpL3Jlc2N1ZXBhc3N3ZC9uZXdwYXNzd2QvJztcclxuXHJcblxyXG4gICAgdmFyIHNlcnZpY2UgPSB7XHJcbiAgICAgIGNyZWF0ZSAgICAgICAgIDogY3JlYXRlLFxyXG4gICAgICByZXNjdWVQYXNzd29yZCA6IHJlc2N1ZVBhc3N3b3JkLFxyXG4gICAgICBjaGFuZ2VQYXNzd29yZCA6IGNoYW5nZVBhc3N3b3JkXHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIHNlcnZpY2U7XHJcblxyXG4gICAgZnVuY3Rpb24gY3JlYXRlKGRhdGEpIHtcclxuICAgICAgICByZXR1cm4gJGh0dHAucG9zdChBUElfUk9VVEVfVVNFUiwgZGF0YSk7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gcmVzY3VlUGFzc3dvcmQoZGF0YSl7XHJcbiAgICAgIHJldHVybiAkaHR0cC5wb3N0KEFQSV9ST1VURV9SRVNDVUVQQVNTV09SRCwgZGF0YSk7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gY2hhbmdlUGFzc3dvcmQoZGF0YSl7XHJcbiAgICAgIHZhciBteXRva2VuVVJMID0gJGxvY2F0aW9uLnNlYXJjaCgpO1xyXG4gICAgICByZXR1cm4gJGh0dHAuZ2V0KEFQSV9ST1VURV9TRVRORVdQQVNTV09SRCArICc/bXl0b2tlbj0nICsgbXl0b2tlblVSTC5teXRva2VuKycmcGFzc3dvcmQ9JytkYXRhLnBhc3N3b3JkKTtcclxuICAgIH1cclxuICB9XHJcbn0pKCk7XHJcbiIsIi8qKlxyXG4gKiBDcmVhdGVkIGJ5IEpPU0VWQUxERVJMRUkgb24gMjUvMDYvMjAxNS5cclxuICovXHJcblxyXG4oZnVuY3Rpb24oKXtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuICAgIGFuZ3VsYXJcclxuICAgICAgICAubW9kdWxlKCdhcHAnKVxyXG4gICAgICAgIC5jb25maWcoYXBwQ29uZmlnKTtcclxuXHJcbiAgICBhcHBDb25maWcuJGluamVjdCA9IFsnJG1kVGhlbWluZ1Byb3ZpZGVyJywnJGxvY2F0aW9uUHJvdmlkZXInXTtcclxuXHJcbiAgICBmdW5jdGlvbiBhcHBDb25maWcgKCRtZFRoZW1pbmdQcm92aWRlciwkbG9jYXRpb25Qcm92aWRlcikge1xyXG5cclxuICAgICAgICAgLy8kbG9jYXRpb25Qcm92aWRlci5odG1sNU1vZGUodHJ1ZSk7XHJcbiAgICAgICAgdmFyIGN1c3RvbUdyZWVuTWFwID0gJG1kVGhlbWluZ1Byb3ZpZGVyLmV4dGVuZFBhbGV0dGUoJ3RlYWwnLCB7XHJcbiAgICAgICAgICAgICdjb250cmFzdERlZmF1bHRDb2xvcic6ICdsaWdodCcsXHJcbiAgICAgICAgICAgICdjb250cmFzdERhcmtDb2xvcnMnOiBbJzUwJ10sXHJcbiAgICAgICAgICAgICc1MCc6ICdFMEYyRjEnXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICRtZFRoZW1pbmdQcm92aWRlci5kZWZpbmVQYWxldHRlKCdjdXN0b21HcmVlbicsIGN1c3RvbUdyZWVuTWFwKTtcclxuICAgICAgICAkbWRUaGVtaW5nUHJvdmlkZXIudGhlbWUoJ2RlZmF1bHQnKVxyXG4gICAgICAgICAgICAucHJpbWFyeVBhbGV0dGUoJ2N1c3RvbUdyZWVuJywge1xyXG4gICAgICAgICAgICAgICAgJ2RlZmF1bHQnOiAnNTAwJyxcclxuICAgICAgICAgICAgICAgICdodWUtMSc6ICc1MCdcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLmFjY2VudFBhbGV0dGUoJ3RlYWwnKTtcclxuICAgICAgICAkbWRUaGVtaW5nUHJvdmlkZXIudGhlbWUoJ2lucHV0JywgJ2RlZmF1bHQnKVxyXG4gICAgICAgICAgICAucHJpbWFyeVBhbGV0dGUoJ2dyZWVuJyk7XHJcblxyXG4gICAgfVxyXG5cclxuXHJcbn0pKCk7IiwiXHJcbihmdW5jdGlvbigpe1xyXG5cdFwidXNlIHN0cmljdFwiO1xyXG5hbmd1bGFyLm1vZHVsZSgnYXV0aFNlcnZpY2UnLCBbXSlcclxuXHQuZmFjdG9yeSgnQXV0aCcsIGZ1bmN0aW9uKCRodHRwLCAkcSwgQXV0aFRva2VuKSB7XHJcblx0dmFyIGF1dGhGYWN0b3J5ID0ge307XHJcblx0YXV0aEZhY3RvcnkubG9naW4gPSBmdW5jdGlvbihlbWFpbCwgcGFzc3dvcmQpIHtcclxuXHRcdHJldHVybiAkaHR0cC5wb3N0KCcvYXBpL2xvZ2luJywge1xyXG5cdFx0XHRlbWFpbDogZW1haWwsXHJcblx0XHRcdHBhc3N3b3JkOiBwYXNzd29yZFxyXG5cdFx0fSlcclxuXHRcdC5zdWNjZXNzKGZ1bmN0aW9uKGRhdGEpIHtcclxuXHRcdFx0QXV0aFRva2VuLnNldFRva2VuKGRhdGEudG9rZW4pO1xyXG5cdFx0XHRyZXR1cm4gZGF0YTtcclxuXHRcdH0pO1xyXG5cdH07XHJcblxyXG5cdGF1dGhGYWN0b3J5LmxvZ291dCA9IGZ1bmN0aW9uKCkge1xyXG5cdFx0QXV0aFRva2VuLnNldFRva2VuKCk7XHJcblx0fTtcclxuXHJcblx0YXV0aEZhY3RvcnkuaXNMb2dnZWRJbiA9IGZ1bmN0aW9uKCkge1xyXG5cdFx0aWYoQXV0aFRva2VuLmdldFRva2VuKCkpIHtcclxuXHRcdFx0cmV0dXJuIHRydWU7XHJcblx0XHR9ZWxzZSB7XHJcblx0XHRcdHJldHVybiBmYWxzZTtcclxuXHRcdH1cclxuXHR9O1xyXG5cclxuXHRhdXRoRmFjdG9yeS5nZXRVc2VyID0gZnVuY3Rpb24oKSB7XHJcblx0XHRpZihBdXRoVG9rZW4uZ2V0VG9rZW4oKSkge1xyXG5cdFx0XHRyZXR1cm4gJGh0dHAuZ2V0KCcvYXBpL21lJyk7XHJcblx0XHR9XHJcblx0XHRlbHNlIHtcclxuXHRcdFx0cmV0dXJuICRxLnJlamVjdCh7bWVzc2FnZTogXCJVc2VyIGhhcyBubyB0b2tlblwifSk7XHJcblx0XHR9XHJcblxyXG5cdH07XHJcblx0cmV0dXJuIGF1dGhGYWN0b3J5O1xyXG59KVxyXG5cclxuXHJcbi5mYWN0b3J5KCdBdXRoVG9rZW4nLCBmdW5jdGlvbigkd2luZG93KSB7XHJcblxyXG5cdHZhciBhdXRoVG9rZW5GYWN0b3J5ID0ge307XHJcblxyXG5cdGF1dGhUb2tlbkZhY3RvcnkuZ2V0VG9rZW4gPSBmdW5jdGlvbigpIHtcclxuXHRcdHJldHVybiAkd2luZG93LmxvY2FsU3RvcmFnZS5nZXRJdGVtKCd0b2tlbicpO1xyXG5cdH07XHJcblxyXG5cdGF1dGhUb2tlbkZhY3Rvcnkuc2V0VG9rZW4gPSBmdW5jdGlvbih0b2tlbikge1xyXG5cclxuXHRcdGlmICh0b2tlbikge1xyXG5cdFx0XHQkd2luZG93LmxvY2FsU3RvcmFnZS5zZXRJdGVtKCd0b2tlbicsIHRva2VuKTtcclxuXHRcdH1cclxuXHRcdGVsc2V7XHJcblx0XHRcdCR3aW5kb3cubG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oJ3Rva2VuJyk7XHJcblx0fVxyXG5cclxuXHR9O1xyXG5cdHJldHVybiBhdXRoVG9rZW5GYWN0b3J5O1xyXG59KVxyXG5cclxuXHJcbi5mYWN0b3J5KCdBdXRoSW50ZXJjZXB0b3InLCBmdW5jdGlvbigkcSwgJGxvY2F0aW9uLCBBdXRoVG9rZW4pIHtcclxuXHR2YXIgaW50ZXJjZXB0b3JGYWN0b3J5ID0ge307XHJcblx0aW50ZXJjZXB0b3JGYWN0b3J5LnJlcXVlc3QgPSBmdW5jdGlvbihjb25maWcpIHtcclxuXHRcdHZhciB0b2tlbiA9IEF1dGhUb2tlbi5nZXRUb2tlbigpO1xyXG5cdFx0aWYodG9rZW4pIHtcclxuXHRcdFx0Y29uZmlnLmhlYWRlcnNbJ3gtYWNjZXNzLXRva2VuJ10gPSB0b2tlbjtcclxuXHRcdH1cclxuXHRcdHJldHVybiBjb25maWc7XHJcblx0fTtcclxuXHRyZXR1cm4gaW50ZXJjZXB0b3JGYWN0b3J5O1xyXG59KTtcclxufSkoKTsiLCJcclxuYW5ndWxhci5tb2R1bGUoJ0Ryb3BEU0MnLFtdKVxyXG4gICAgLmRpcmVjdGl2ZSgnZHJhZ2dhYmxlJywgZnVuY3Rpb24oJGRvY3VtZW50LFNvY2tldCkge1xyXG4gICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICByZXN0cmljdDogJ0EnLFxyXG4gICAgICAgICAgICByZXBsYWNlOiB0cnVlLFxyXG4gICAgICAgICAgICBsaW5rOiBmdW5jdGlvbihzY29wZSwgZWxlbWVudCwgYXR0cikge1xyXG4gICAgICAgICAgICAgICAgICBlbGVtZW50Lm9uKCdtb3VzZWRvd24nLCBmdW5jdGlvbihldmVudCkge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgIGlmKGV2ZW50LnRhcmdldC5pZC5zdWJzdHJpbmcoMCwxMSkgPT0gXCJzdGFrZWhvbGRlclwiKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBQcmV2ZW50IGRlZmF1bHQgZHJhZ2dpbmcgb2Ygc2VsZWN0ZWQgY29udGVudFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgJGRvY3VtZW50LmJpbmQoJ21vdXNlbW92ZScsIG1vdXNlbW92ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgJGRvY3VtZW50LmJpbmQoJ21vdXNldXAnLCBtb3VzZXVwKTtcclxuICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICBmdW5jdGlvbiBtb3VzZW1vdmUoZXZlbnQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgIHZhciBpZF9kaXYgPSBldmVudC50YXJnZXQuaWQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICBpZiAoaWRfZGl2ID09ICdzdmcnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgaWRfZGl2ID0gXCJcIjtcclxuICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICBzY29wZS5zdGFrZWhvbGRlci5vbmlvbmxheWVyID0gaWRfZGl2O1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgIHkgPSBldmVudC5wYWdlWTtcclxuICAgICAgICAgICAgICAgICAgICAgIHggPSBldmVudC5wYWdlWDtcclxuICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQuY3NzKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICB0b3A6IHkgKyAncHgnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGxlZnQ6ICB4ICsgJ3B4J1xyXG4gICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAvKlNvY2tldC5vbignb25Ccm9hZGNhc3RPbmlvblBvc2l0aW9uJywgZnVuY3Rpb24gKHN0YWtlaG9sZGVyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5jc3Moe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b3A6IHN0YWtlaG9sZGVyLnksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxlZnQ6ICBzdGFrZWhvbGRlci54XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICB9KTsqL1xyXG4gICAgICAgICAgICAgICAgICAgICAgc2NvcGUuc3Rha2Vob2xkZXIueCA9IHggKyAncHgnO1xyXG4gICAgICAgICAgICAgICAgICAgICAgc2NvcGUuc3Rha2Vob2xkZXIueSA9IHkgKyAncHgnO1xyXG4gICAgICAgICAgICAgICAgICAgICAgLy9Tb2NrZXQuZW1pdCgnYnJvYWRjYXN0T25pb25Qb3NpdGlvbicsIHNjb3BlLnN0YWtlaG9sZGVyKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAgICAgICBmdW5jdGlvbiBtb3VzZXVwKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgJGRvY3VtZW50LnVuYmluZCgnbW91c2Vtb3ZlJywgbW91c2Vtb3ZlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICRkb2N1bWVudC51bmJpbmQoJ21vdXNldXAnLCBtb3VzZXVwKTtcclxuICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICB9KTsiLCIvKipcclxuICogQ3JlYXRlZCBieSBKT1NFVkFMREVSTEVJIG9uIDI1LzA2LzIwMTUuXHJcbiAqL1xyXG5cclxuKGZ1bmN0aW9uKCkge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICAgIGFuZ3VsYXIubW9kdWxlKCdhcHAnKVxyXG4gICAgICAgLmNvbnRyb2xsZXIoJ2xvZ2luQ29udHJvbGxlcicsbG9naW5Db250cm9sbGVyKTtcclxuXHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGxvZ2luQ29udHJvbGxlcigkdHJhbnNsYXRlLCAkcm9vdFNjb3BlLCAkc3RhdGUsIEF1dGgsICR3aW5kb3csICRmaWx0ZXIsIHRvYXN0QXBwKSB7XHJcbiAgICAgICAgICAgIHZhciB2bSA9IHRoaXM7XHJcbiAgICAgICAgICAgIHZtLmluUHJvZ3Jlc3MgPSBmYWxzZTtcclxuXHJcbiAgICAgICAgICAgIHZtLnNldExhbmcgPSBmdW5jdGlvbihsYW5nS2V5KSB7XHJcbiAgICAgICAgICAgICAgICAgJHRyYW5zbGF0ZS51c2UobGFuZ0tleSk7XHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICB2bS5sb2dnZWRJbiA9IEF1dGguaXNMb2dnZWRJbigpO1xyXG4gICAgICAgICAgICAkcm9vdFNjb3BlLiRvbignJHJvdXRlQ2hhbmdlU3RhcnQnLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgIHZtLmxvZ2dlZEluID0gQXV0aC5pc0xvZ2dlZEluKCk7XHJcbiAgICAgICAgICAgICAgICBBdXRoLmdldFVzZXIoKVxyXG4gICAgICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdm0udXNlciA9IGRhdGEuZGF0YTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICB2bS5kb0xvZ2luID0gZnVuY3Rpb24odXNlcikge1xyXG4gICAgICAgICAgICAgICAgdm0uaW5Qcm9ncmVzcyA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICB2bS5lcnJvciA9ICcnO1xyXG4gICAgICAgICAgICAgICAgQXV0aC5sb2dpbih1c2VyLmVtYWlsLCB1c2VyLnBhc3N3b3JkKVxyXG4gICAgICAgICAgICAgICAgICAgIC5zdWNjZXNzKGZ1bmN0aW9uKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJHdpbmRvdy5sb2NhbFN0b3JhZ2Uuc2V0SXRlbShcInVzZXJlbWFpbFwiLGRhdGEuZW1haWwpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkd2luZG93LmxvY2FsU3RvcmFnZS5zZXRJdGVtKFwidXNlcmlkXCIsZGF0YS5pZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICR3aW5kb3cubG9jYWxTdG9yYWdlLnNldEl0ZW0oXCJuaWNrbmFtZVwiLGRhdGEubmlja25hbWUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2bS5zZXRMYW5nKGRhdGEubGFuZ3VhZ2UpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2bS5pblByb2dyZXNzID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIEF1dGguZ2V0VXNlcigpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbihkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdm0udXNlciA9IGRhdGEuZGF0YTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b2FzdEFwcC5lcnJvck1lc3NhZ2UoJGZpbHRlcigndHJhbnNsYXRlJykoJ1dFTENPTUVfU1lTVEVNJykgKyBcIjogXCIgKyB2bS51c2VyLm5pY2tuYW1lKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZihkYXRhLnN1Y2Nlc3MpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzdGF0ZS5nbygnc3RhcnRwcm9ibGVtJyk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdm0uZXJyb3IgPSBkYXRhLm1lc3NhZ2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIHZtLmRvTG9nb3V0ID0gZnVuY3Rpb24oKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgQXV0aC5sb2dvdXQoKTtcclxuICAgICAgICAgICAgICAgICRzdGF0ZSgnaW5pdCcpO1xyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICB9XHJcblxyXG59KSgpO1xyXG4iLCIvKipcclxuICogQ3JlYXRlZCBieSBKT1NFVkFMREVSTEVJIG9uIDIxLzA2LzIwMTUuXHJcbiAqL1xyXG5cclxuYW5ndWxhci5tb2R1bGUoJ2FwcCcpLlxyXG4gICAgc2VydmljZSgnU29ja2V0JyxcclxuICAgIFsnJGxvY2F0aW9uJywgJyR0aW1lb3V0JyxcclxuICAgIGZ1bmN0aW9uKCRsb2NhdGlvbiwgJHRpbWVvdXQpIHtcclxuICAgICAgICBpZiAodHJ1ZSkge1xyXG4gICAgICAgICAgICB0aGlzLnNvY2tldCA9IGlvKCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgJGxvY2F0aW9uLnBhdGgoJy8nKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5vbiA9IGZ1bmN0aW9uKGV2ZW50TmFtZSwgY2FsbGJhY2spIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuc29ja2V0KSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNvY2tldC5vbihldmVudE5hbWUsIGZ1bmN0aW9uKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgICAgICAkdGltZW91dChmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2soZGF0YSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgdGhpcy5lbWl0ID0gZnVuY3Rpb24oZXZlbnROYW1lLCBkYXRhKSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLnNvY2tldCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zb2NrZXQuZW1pdChldmVudE5hbWUsIGRhdGEpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgdGhpcy5yZW1vdmVMaXN0ZW5lciA9IGZ1bmN0aW9uKGV2ZW50TmFtZSkge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5zb2NrZXQpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuc29ja2V0LnJlbW92ZUxpc3RlbmVyKGV2ZW50TmFtZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgfVxyXG5dKTtcclxuIl0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9