function toastApp(e){function o(o){this.message=o,e.show({controller:"toastController",controllerAs:"vm",templateUrl:"views/pages/dsctoast.html",action:"OK",highlightAction:!0,position:"top left",hideDelay:5e3})}var t={message:"",errorMessage:o};return t}function chatDSC(e,o,t,r,a,n){var i=this;i.newmsg="",i.messages=[],i.replay=!1,i.nickname="",i.close=function(){t("chat").close().then(function(){r.debug("close chat")})},i.initHistoryChat=function(){i.idProblem=n.localStorage.getItem("problemid"),i.nickname=n.localStorage.getItem("nickname"),a.gethistorychat(i.idProblem).success(function(e){if(e.success)for(var o=0;o<e.historychat.length;o++){var t=new Date(e.historychat[o].time),r={nickname:e.historychat[o].nickname,msg:e.historychat[o].msg,time:t.getDate()+"/"+(t.getMonth()+1)+"/"+t.getFullYear()+" ["+t.getHours()+":"+t.getMinutes()+"] "};i.messages.push(r)}})},i.showReplay=function(){i.replay=i.replay?!1:!0},o.on("onBroadcastChat",function(e){var o=new Date(e[e.length-1].time);i.messages.push({nickname:e[e.length-1].nickname,msg:e[e.length-1].msg,time:o.getDate()+"/"+(o.getMonth()+1)+"/"+o.getFullYear()+" ["+o.getHours()+":"+o.getMinutes()+"] "})}),i.sendMessage=function(e){o.emit("broadcastChat",e),i.newmsg=""}}function dscReportController(){function e(e){var o=document.getElementById("projectResport"),t=new jsPDF("l","px");t.addHTML(o,0,0,{pagesplit:!0},function(e){t.save("test.pdf")})}var o=this;o.idproblem="ajflajfljalfjaljf",o.buidReport=e}function evaluationframeworkController(e,o,t,r){function a(){n.idproblem=e.localStorage.getItem("problemid"),o.getevaluation(n.idproblem).success(function(e){e.success?n.evaluationframeworkList=e.evaluationframework:toastApp.errorMessage(e.message)})}var n=this;n.evaluationframeworkList=[],n.initEvaluation=a,t.on("onBroadcastFrameSave",function(e){angular.forEach(n.evaluationframeworkList,function(o){o.onionlayer==e.onionlayer&&angular.forEach(o.stakeholders,function(o){o._id==e._id&&(o.name=e.name,o.onionlayer=e.onionlayer,o.description=e.description,o.openEdit=e.openEdit,o.problems=e.problems,o.solutions=e.solutions)})})}),r.saveDiscution=function(e){t.emit("broadcastFrameSave",e)},t.on("onUpdateStakeholder",function(e){console.log(e)}),r.setOpenEditDiscution=function(e){e.openEdit=!0}}function semioticframeworkController(e,o,t){function r(){u.idproblem=o.localStorage.getItem("problemid"),t.getsemiotic(u.idproblem).success(function(e){e.success?u.semioticframework=e.semioticframework:toastApp.errorMessage(e.message)})}function a(o,t){var r={text:o,update:t};e.emit("updateSocialWorld",r)}function n(o,t){var r={text:o,update:t};e.emit("updatePragmatic",r)}function i(o,t){var r={text:o,update:t};e.emit("updateSemantic",r)}function s(o,t){var r={text:o,update:t};e.emit("updateSyntatic",r)}function l(o,t){var r={text:o,update:t};e.emit("updateEmpirical",r)}function c(o,t){var r={text:o,update:t};e.emit("updatePhysical",r)}var u=this;u.idproblem="",u.saveSocialWorld=a,u.savePragmatic=n,u.saveSemantic=i,u.saveSyntatic=s,u.saveEmpirical=l,u.savePhysical=c,u.semioticframework="",u.initSemioticFramework=r,e.on("onUpdateSocialWorld",function(e){u.semioticframework.socialworld=e}),e.on("onUpdatePragmatic",function(e){u.semioticframework.pragmatic=e}),e.on("onUpdateSemantic",function(e){u.semioticframework.semioticramework=e}),e.on("onUpdateSyntatic",function(e,o){u.semioticframework.syntatic=e}),e.on("onUpdateEmpirical",function(e){u.semioticframework.empirical=e}),e.on("onUpdatePhysical",function(e){u.semioticframework.physical=e})}function stakeholderController(e,o,t,r){function a(){n.idproblem=t.localStorage.getItem("problemid"),r.getonion(n.idproblem).success(function(e){e.success?n.stakeholderList=e.stakeholders:toastApp.errorMessage(e.message)}),n.inProcessing=!1}var n=this;n.idproblem="",n.stakeholderList=[],n.stakeholder="",n.intitOnion=a,n.move=!1,n.inProcessing=!0,e.on("onBroadcastOnionSave",function(e){angular.forEach(n.stakeholderList,function(o){o._id==e._id&&(o.stakeholder=e.stakeholder,o.name=e.name,o.description=e.description,o.openEdit=e.dadaopenEdit,o.x=e.x,o.y=e.y)})}),o.saveStakeholder=function(o){e.emit("broadcastOnionSave",o)},e.on("onBroadcastOnionEdit",function(e){angular.forEach(n.stakeholderList,function(o){o._id==e&&(o.openEdit=!0)})}),o.setOpenEdit=function(o){e.emit("broadcastOnionEdit",o)},e.on("onBroadcastOnionRemove",function(e){var o=document.getElementById("stakeholder"+n.stakeholderList[e]._id);o.style.display="none",n.stakeholderList.splice(e,1)}),o.delPostIt=function(o,t){var r={index:o,stakeholder:t};e.emit("broadcastOnionRemove",r)},e.on("onBroadcastOnionAdd",function(e){n.stakeholderList.push(e)}),o.addPostIt=function(o,t){var r={onionlayer:t,name:"",description:"",openEdit:!0,x:o.pageX+"px",y:o.pageY+"px"};e.emit("broadcastOnionAdd",r)},n.acende=function(e){e.target.setAttribute("opacity","0.8")},n.apaga=function(e){e.target.setAttribute("opacity","1.0")}}function valueIdentificationFrameController(e,o,t,r){var a=this;a.inProcessing=!0,a.idProblem="",a.useremail="",a.newvalues="",a.stakeholderList=[{onionlayer:"Community",stakeholders:[]},{onionlayer:"Market",stakeholders:[]},{onionlayer:"Source",stakeholders:[]},{onionlayer:"Contruibuition",stakeholders:[]},{onionlayer:"Technico",stakeholders:[]}],a.sugestionValues="",a.sugestionValuesArray=["Acessibilidade","Adaptabilidade","Est�tica","Autonomia","Disponibilidade","Consci�ncia","Colabora��o","Conversa��o","Emo��o e Afeto","Grupos","Identidade","Consentimento informado","Meta-comunica��o","Normas","Objeto","Portabilidade","Presen�a","Privacidade","Propriedade","Reciprocidade, Relacionamento, Reputa��o,Escalabilidade","Seguran�a","Compartilhamento","Confian�a","Usabilidade","Visibilidade"],a.initValueIdentificationFrame=function(){a.idproblem=e.localStorage.getItem("problemid"),o.getonion(a.idproblem).success(function(e){if(e.success){if(e.stakeholders.length>0){for(var o=1;o<a.sugestionValuesArray.length;o++)a.sugestionValues+=a.sugestionValuesArray[o]+", ";a.sugestionValues[a.sugestionValuesArray[a.sugestionValuesArray.length-1]]+".";for(var r=0;r<e.stakeholders.length;r++)for(var n=0;n<a.stakeholderList.length;n++){var i={_id:e.stakeholders[r]._id,onionlayer:e.stakeholders[r].onionlayer,values:e.stakeholders[r].values,name:e.stakeholders[r].name,description:e.stakeholders[r].description,openEdit:e.stakeholders[r].openEdit,newValues:[]};e.stakeholders[r].onionlayer!=a.stakeholderList[n].onionlayer||a.stakeholderList[n].stakeholders.push(i)}}a.inProcessing=!1}else t.errorMessage(e.message)})},r.on("onBroadcastOnionSave",function(e){angular.forEach(a.stakeholderList,function(o){o._id==e._id&&(o.onionlayer=e.onionlayer,o.values=e.values,o.name=e.name,o.description=e.description,o.openEdit=e.openEdit,o.newValues=[])})}),a.setSuggestionShow=function(e){e.openEdit=!0},a.leaveSuggestionShow=function(e){e.openEdit=!1},a.removeValueIdentication=function(e,o){for(var t=[],a=0;a<o.values.length;a++)o.values[a]!=e&&t.push(o.values[a]);o.values=t,r.emit("broadcastOnionSave",o)},a.setValueIdentication=function(e){if(console.log(e.newValues),""===e.newValues||void 0===e.newValues)t.errorMessage("Valor n�o especificado.");else{for(var o=e.newValues.split(","),a=0;a<o.length;a++)e.values.push(o[a]);console.log(e.values),e.newValues="",e.openEdit=!1,r.emit("broadcastOnionSave",e)}}}!function(){"use strict";angular.module("app",["toastService","textAngular","luegg.directives","DropDSC","authService","ui.router","ngMaterial","ngMdIcons","ngCookies","pascalprecht.translate"]).config(["$httpProvider",function(e){e.interceptors.push("AuthInterceptor")}])}(),angular.module("toastService",[]).controller("toastController",["$mdToast","toastApp",function(e,o){var t=this;t.message=o.message,t.closeToast=function(){e.hide()}}]).factory("toastApp",toastApp),toastApp.$inject=["$mdToast"],function(){"use strict";function e(e,o){e.state("init",{url:"/",templateUrl:"views/pages/initpage.html",controller:"loginController as vm"}).state("init.login",{url:"login",views:{"content-tab":{templateUrl:"views/pages/userlogin.html",controller:"loginController as vm"}}}).state("init.signup",{url:"signup",views:{"content-tab":{templateUrl:"views/pages/signup.html",controller:"signupController as vm"}}}).state("init.rescuepassword",{url:"rescuepassword",views:{"content-tab":{templateUrl:"views/pages/rescuepassword.html",controller:"signupController as vm"}}}).state("startproblem",{url:"/startproblem",templateUrl:"views/pages/startproblem.html",controller:"startProblemController as vm"}).state("newpassword",{url:"/newpassword/:mytoken",templateUrl:"views/pages/newpassword.html",controller:"signupController as vm"}).state("problem",{url:"/problem",templateUrl:"views/pages/problem.html",controller:"menuProblemController as vm"}).state("problem.dscreport",{url:"/dscreport",views:{"problem-description":{templateUrl:"views/pages/dscreport.html",controller:"dscReportController as vm"}}}).state("problem.description",{url:"/description",views:{"problem-description":{templateUrl:"views/pages/problemdescription.html",controller:"editProblemController as vm"}}}).state("problem.collaborators",{url:"/collaborators",views:{"problem-description":{templateUrl:"views/pages/collaborators.html",controller:"controllerCollaborators as vm"}}}).state("problem.stakeholders",{url:"stakeholders",views:{"dsc-artifact":{templateUrl:"views/pages/stakeholders.html",controller:"stakeholderController as vm"}}}).state("problem.evaluationframework",{url:"evaluationframework",views:{"dsc-artifact":{templateUrl:"views/pages/evaluationframework.html",controller:"evaluationframeworkController as vm"}}}).state("problem.semioticframework",{url:"semioticframework",views:{"dsc-artifact":{templateUrl:"views/pages/semioticframework.html",controller:"semioticframeworkController as vm"}}}).state("problem.carf",{url:"carf",views:{"dsc-artifact":{templateUrl:"views/pages/carf.html",controller:"carfController as vm"}}}).state("problem.vif",{url:"vif",views:{"dsc-artifact":{templateUrl:"views/pages/vif.html",controller:"valueIdentificationFrameController as vm"}}}),o.otherwise("/login")}angular.module("app").config(e),e.$inject=["$stateProvider","$urlRouterProvider"]}(),function(){"use strict";function e(e){e.useStaticFilesLoader({prefix:"app/language/lang-",suffix:".json"}),e.preferredLanguage("en"),e.useSanitizeValueStrategy("escaped"),e.useLocalStorage()}function o(e){this.setLang=function(o){e.use(o)}}function t(){return{templateUrl:"app/language/changeLanguage.html",restrict:"E"}}angular.module("app").config(e).controller("languageController",o).directive("changeLanguage",t),e.$inject=["$translateProvider"],o.$inject=["$translate"]}(),function(){"use strict";function e(e,o,t,r){function a(){i.idProblem=e.localStorage.getItem("problemid"),t.getcarf(i.idProblem).success(function(e){e.success&&(i.localStakeholders=e.stakeholders,i.stakeholderList=i.localStakeholders,i.carfList=e.carf,i.carfPriorityList=i.localPriorityList)}),i.inProcessing=!1}function n(){i.carf={_id:"",pms:"",values:[],priority:"",requirement:"",stakeholders:[]},i.valueList=[]}var i=this;i.idProblem="",i.inProcessing=!0,i.valueList=[],i.stakeholderList=[],i.localStakeholders=[],i.carf={pms:"",values:[],priority:"",requirement:"",stakeholders:[]},i.initCarf=a,i.carfList=[],i.carfPriorityList=[],o.on("onBroadcastCARFadd",function(e){i.carfList.push(e),n(),i.stakeholderList=i.localStakeholders,i.carfPriorityList=i.localPriorityList}),i.addpmsvalue=function(e){""==e.pms?r.errorMessage("Select PMS"):e.values.length<1?r.errorMessage("Select one or more Value"):e.stakeholders.length<1?r.errorMessage("Select one or more Stakeholder(s)"):""==e.priority?r.errorMessage("Select priority [Low, Medium or High]"):(o.emit("broadcastCARFadd",e),i.stakeholderList=[],i.carfPriorityList=[])},o.on("onBroadcastCARFremove",function(e){i.carfList.splice(e,1)}),i.removeCARF=function(e,t){var r={index:e,carf:t};o.emit("broadcastCARFremove",r)},i.selectPMSValue=function(e){void 0!=e&&angular.forEach(i.carfPMSValue,function(o){return o.pms==e?(i.carf.values=[],void(i.valueList=o.values)):void 0})},i.setPriotity=function(e){i.carf.priority=e},i.addListValue=function(e){if(0==i.carf.values.length)i.carf.values.push(e);else{for(var o=0;o<i.carf.values.length;o++)if(e==i.carf.values[o])return void i.carf.values.splice(o,1);i.carf.values.push(e)}},i.addStakeholder=function(e){if(0==i.carf.stakeholders.length)i.carf.stakeholders.push(e);else{for(var o=0;o<i.carf.stakeholders.length;o++)if(e==i.carf.stakeholders[o])return void i.carf.stakeholders.splice(o,1);i.carf.stakeholders.push(e)}},i.localPriorityList=["Low","Medium","High"],i.carfPMSValue=[{pms:"Interaction",values:["Identity","Norms"]},{pms:"Association",values:["Conversation","Groups","Relationship","Trust"]},{pms:"Learning",values:["Meta-communication"]},{pms:"Play",values:["Aesthetics","Emotion and Affection"]},{pms:"Protection",values:["Informed consert","Reputation","Security"]},{pms:"Exploitation",values:["Accessibility","Object","Property (ownership)","Usability"]},{pms:"Teporality",values:["Availability","Awareness","Presence"]},{pms:"Territoriality",values:["Portability","Privacy","Scalability","Visibility"]},{pms:"Classification",values:["Autonomy","Collaboration","Sharing","Adaptability"]},{pms:"Subsistence",values:["Reciprocity"]}]}angular.module("app").controller("carfController",e),e.$inject=["$window","Socket","problemService","toastApp"]}(),angular.module("app").controller("chatDSC",chatDSC),chatDSC.$inject=["$timeout","Socket","$mdSidenav","$log","problemService","$window"],function(){"use strict";function e(e,o,t){function r(e){for(var o=0;o<a.collaborators.length;o++)if(e==a.collaborators[o].email)return!0;return!1}var a=this;a.idProblem="",a.collaborators=[],a.useremail="",a.initCollaborators=function(){a.idProblem=e.localStorage.getItem("problemid"),a.useremail=e.localStorage.getItem("useremail"),o.getcollaborators(a.idProblem).success(function(e){e.success?a.collaborators=e.collaborators:t.errorMessage(e.message)})},a.addCollaborator=function(e){if(a.useremail==e)t.errorMessage(a.useremail+" is email of owner.");else if(r(e))t.errorMessage("Usuario Cadastrado.");else{var n={idproblem:a.idProblem,email:e};o.invite(n).success(function(e){e.success?a.collaborators=e.collaborators:t.errorMessage(e.message)})}},a.removeCollaborator=function(e){var r={idproblem:a.idProblem,email:e.email};o.removecollaborators(r).success(function(e){e.success?(t.errorMessage("Colaborador foi removido do projeto."),a.collaborators=e.collaborators):t.errorMessage(e.message)})}}angular.module("app").controller("controllerCollaborators",e),e.$inject=["$window","problemService","toastApp"]}(),angular.module("app").controller("dscReportController",dscReportController),angular.module("app").controller("evaluationframeworkController",evaluationframeworkController),evaluationframeworkController.$inject=["$window","problemService","Socket","$scope"],function(){"use strict";function e(e,o,t,r,a,n){function i(e){var o=a.debounce(function(){r(e).toggle().then(function(){n.debug("toggle "+e+" is done")})},300);return o}var s=this;s.openChat=i("chat"),s.formAddCollaborators=function(){t.go("problem.collaborators")},s.openReport=function(){t.go("problem.dscreport")},s.editDescriptionProblem=function(){t.go("problem.description")},s.doLogout=function(){e.logout(),t.go("init.login")}}angular.module("app").controller("menuProblemController",e),e.$inject=["Auth","$timeout","$state","$mdSidenav","$mdUtil","$log"]}(),function(){"use strict";function e(e,o,t,r,a,n){var i=this,s=!0;i.problem="",i.tabsdsc=['<md-tab data-ui-sref="problem.stakeholders" md-active="$state.is(\'problem.stakeholders\')" label="{{\'LABEL_ARTIFACT_STAKEHOLDER\' | translate }}"></md-tab>','<md-tab data-ui-sref="problem.evaluationframework" md-active="$state.is(\'problem.evaluationframework\')" label="{{\'LABEL_ARTIFACT_EVALUATION_FRAMEWORK\' | translate }}"></md-tab>','<md-tab data-ui-sref="problem.semioticframework" md-active="$state.is(\'problem.semioticframework\')" label="{{\'LABEL_ARTIFACT_SEMIOTIC_FRAMEWORK\' | translate }}"></md-tab>','<md-tab data-ui-sref="problem.carf" md-active="$state.is(\'problem.carf\')" label="CARF"></md-tab></md-tabs>'],i.getCurrentProblem=function(){i.idProblem=a.localStorage.getItem("problemid"),n.getproblem(i.idProblem).success(function(e){e.success?i.problem=e.problem:r.errorMessage(e.message)})};var l=function(){s=!0};o.on("onAtualizarProblema",function(e){console.log("=========================================================================retorno...."+e),i.problem.description=e.description,i.problem.update=s}),e.problemUpdate=function(e){e.update=s,o.emit("atualizarProblema",e),s&&(s=!1,t(l,2e3))},e.saveDescription=function(e){console.log("============================================================================="),e.update=s,o.emit("atualizarProblema",e)}}angular.module("app").controller("editProblemController",e),e.$injectre=["$scope","Socket"],e.$inject=["$scope","Socket","$timeout","toastApp","$window","problemService"]}(),function(){"use strict";function e(e,o){function t(o){return e.post(v,o)}function r(o){return e.get(h+"?idproblem="+o)}function a(o){return e.get(f+"?email="+o)}function n(o){return e.get(k+"?idproblem="+o)}function i(o){return e.post(w,o)}function s(o){return e.get(S+"?idproblem="+o)}function l(o){return e.get(y+"?idproblem="+o)}function c(o){return e.get(P+"?idproblem="+o)}function u(o){return e.get(C+"?idproblem="+o)}function m(o){return e.get($+"?idproblem="+o)}function p(o){return e.get(b+"?email="+o)}function d(o){return e.get(L+"?idproblem="+o.idproblem+"&email="+o.email)}function g(o){return e.get(A+"?idproblem="+o)}var f="/api/problem/getproblems",b="/api/problem/getproblemscollaborator",v="/api/problem/newproblem",h="/api/problem/getproblem",k="/api/problem/getcollaborators",w="/api/problem/invite",S="/api/problem/getonion",y="/api/problem/getevaluation",P="/api/problem/getsemiotic",C="/api/problem/getcarf",$="/api/problem/removeproblem",L="/api/problem/removecollaborator",A="/api/problem/historychat",I={newproblem:t,getuserproblems:a,getproblem:r,getcollaborators:n,invite:i,getonion:s,getevaluation:l,getsemiotic:c,getcarf:u,removeproblem:m,getproblemscollaborator:p,removecollaborators:d,gethistorychat:g};return I}angular.module("app").factory("problemService",e),e.$inject=["$http","$location"]}(),angular.module("app").controller("semioticframeworkController",semioticframeworkController),semioticframeworkController.$inject=["Socket","$window","problemService"],angular.module("app").controller("stakeholderController",stakeholderController),stakeholderController.$inject=["Socket","$scope","$window","problemService"],function(){"use strict";function e(e,o,t,r,a,n,i){function s(e){n.removeproblem(e).success(function(o){if(o.success){for(var t=0;t<c.problemList.length;t++)if(c.problemList[t]._id==e){c.problemList.splice(t,1);break}}else i.errorMessage(o.message)})}function l(e,o){e.hide=function(){o.hide()},e.cancel=function(){o.cancel()},e.addNewProblem=function(e){c.startNewProblem(e),o.cancel()}}var c=this;c.nickname="",c.userid="",c.useremail="",c.problemList=[],c.problemCollaboratorList=[],c.loginInProgress=!0,c.getProblems=function(){c.userid=a.localStorage.getItem("userid"),c.nickname=a.localStorage.getItem("nickname"),c.useremail=a.localStorage.getItem("useremail"),n.getuserproblems(c.useremail).success(function(e){if(e.success){for(var o=0;o<e.problems.length;o++)e.problems[o].description=e.problems[o].description.replace(/(<([^>]+)>)/gi,"").substring(0,460);c.problemList=e.problems}else i.errorMessage(e.message)}),n.getproblemscollaborator(c.useremail).success(function(e){if(e.success){for(var o=0;o<e.problems.length;o++)e.problems[o].description=e.problems[o].description.replace(/(<([^>]+)>)/gi,"").substring(0,460);c.problemCollaboratorList=e.problems}else i.errorMessage(e.message)}),c.loginInProgress=!1},c.revomveProblem=function(o,t){var r=e.confirm().parent(angular.element(document.body)).title("Detete Problem?").content("Title: "+t.title).ariaLabel("Remove Problem").ok("Desejo remover!").cancel("Cancel").targetEvent(o);e.show(r).then(function(){s(t._id)})},c.startNewProblem=function(e){e.userid=c.userid,n.newproblem(e).success(function(e){e.success?c.editProblem(e.problem):i.errorMessage(e.message)})},c.editProblem=function(e){a.localStorage.setItem("problemid",e._id);var t={idproblem:e._id,nickname:c.nickname};r.emit("initProblem",t),o.go("problem.stakeholders")},c.doLogout=function(){t.logout(),o.go("init.login")},c.newProblem=function(o){e.show({controller:l,templateUrl:"views/pages/newproblem.html",parent:angular.element(document.body),targetEvent:o})},l.$inject=["$scope","$mdDialog"]}angular.module("app").controller("startProblemController",e),e.$inject=["$mdDialog","$state","Auth","Socket","$window","problemService","toastApp"]}(),angular.module("app").controller("valueIdentificationFrameController",valueIdentificationFrameController),valueIdentificationFrameController.$inject=["$window","problemService","toastApp","Socket"],function(){"use strict";function e(e,o,t,r,a,n,i,s,l){function c(e){t.create(e).success(function(t){t.success?(n.setToken(t.token),i.getUser().then(function(t){d.user=t.data,d.loginInProgress=!1,o.localStorage.setItem("useremail",e.email),o.localStorage.setItem("userid",e.id),o.localStorage.setItem("nickname",e.nickname),d.setLang(e.language),a.errorMessage(s("translate")("WELCOME_SYSTEM")+": "+d.user.nickname),r.go("startproblem")})):a.errorMessage("Email Já cadastrado")})}function u(o){e.use(o)}function m(e){t.rescuePassword(e).success(function(e){console.log(e),a.errorMessage(e.success?"Email com instruções enviado":"Error")})}function p(e){t.changePassword(e).success(function(e){e.success?(a.errorMessage("Senha alterada com sucesso. Faça login com a nova senha."),r.go("init")):a.errorMessage("Error")})}var d=this;d.message="",d.save=c,d.rescuePassword=m,d.changePassword=p,d.setLang=u,d.loginInProgress=!1}angular.module("app").controller("signupController",e),e.$inject=["$translate","$window","signupService","$state","toastApp","AuthToken","Auth","$filter","$stateParams"]}(),function(){"use strict";function e(e,o){function t(o){return e.post(n,o)}function r(o){return e.post(i,o)}function a(t){var r=o.search();return e.get(s+"?mytoken="+r.mytoken+"&password="+t.password)}var n="/api/signup/",i="/api/rescuepasswd/",s="/api/rescuepasswd/newpasswd/",l={create:t,rescuePassword:r,changePassword:a};return l}angular.module("app").factory("signupService",e),e.$inject=["$http","$location"]}(),function(){"use strict";function e(e,o){var t=e.extendPalette("teal",{contrastDefaultColor:"light",contrastDarkColors:["50"],50:"E0F2F1"});e.definePalette("customGreen",t),e.theme("default").primaryPalette("customGreen",{"default":"500","hue-1":"50"}).accentPalette("teal"),e.theme("input","default").primaryPalette("green")}angular.module("app").config(e),e.$inject=["$mdThemingProvider","$locationProvider"]}(),function(){"use strict";angular.module("authService",[]).factory("Auth",["$http","$q","AuthToken",function(e,o,t){var r={};return r.login=function(o,r){return e.post("/api/login",{email:o,password:r}).success(function(e){return t.setToken(e.token),e})},r.logout=function(){t.setToken()},r.isLoggedIn=function(){return t.getToken()?!0:!1},r.getUser=function(){return t.getToken()?e.get("/api/me"):o.reject({message:"User has no token"})},r}]).factory("AuthToken",["$window",function(e){var o={};return o.getToken=function(){return e.localStorage.getItem("token")},o.setToken=function(o){o?e.localStorage.setItem("token",o):e.localStorage.removeItem("token")},o}]).factory("AuthInterceptor",["$q","$location","AuthToken",function(e,o,t){var r={};return r.request=function(e){var o=t.getToken();return o&&(e.headers["x-access-token"]=o),e},r}])}(),angular.module("DropDSC",[]).directive("draggable",["$document","Socket",function(e,o){return{restrict:"A",replace:!0,link:function(o,t,r){function a(e){var r=e.target.id;"svg"==r&&(r=""),o.stakeholder.onionlayer=r,y=e.pageY,x=e.pageX,t.css({top:y+"px",left:x+"px"}),o.stakeholder.x=x+"px",o.stakeholder.y=y+"px"}function n(){e.unbind("mousemove",a),e.unbind("mouseup",n)}t.on("mousedown",function(o){"stakeholder"==o.target.id.substring(0,11)&&(o.preventDefault(),e.bind("mousemove",a),e.bind("mouseup",n))})}}}]),function(){"use strict";function e(e,o,t,r,a,n,i){var s=this;s.loginInProgress=!1,s.setLang=function(o){e.use(o)},s.loggedIn=r.isLoggedIn(),o.$on("$routeChangeStart",function(){s.loggedIn=r.isLoggedIn(),r.getUser().then(function(e){s.user=e.data})}),s.doLogin=function(e){s.loginInProgress=!0,s.error="",r.login(e.email,e.password).success(function(e){a.localStorage.setItem("useremail",e.email),a.localStorage.setItem("userid",e.id),a.localStorage.setItem("nickname",e.nickname),s.setLang(e.language),s.loginInProgress=!1,r.getUser().then(function(e){s.user=e.data,i.errorMessage(n("translate")("WELCOME_SYSTEM")+": "+s.user.nickname)}),e.success?t.go("startproblem"):s.error=e.message})},s.doLogout=function(){r.logout(),t("init")}}angular.module("app").controller("loginController",e),e.$inject=["$translate","$rootScope","$state","Auth","$window","$filter","toastApp"]}(),angular.module("app").service("Socket",["$location","$timeout",function(e,o){this.socket=io(),this.on=function(e,t){this.socket&&this.socket.on(e,function(e){o(function(){t(e)})})},this.emit=function(e,o){this.socket&&this.socket.emit(e,o)},this.removeListener=function(e){this.socket&&this.socket.removeListener(e)}}]);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInRvYXN0LnNlcnZpY2UuanMiLCJwcm9ibGVtL2NoYXQuY29udHJvbGxlci5qcyIsInByb2JsZW0vZHNjcmVzcG9ydC5jb250cm9sbGVyLmpzIiwicHJvYmxlbS9ldmFsdWF0aW9uZnJhbWV3b3JrLmNvbnRyb2xsZXIuanMiLCJwcm9ibGVtL3NlbWlvdGljZnJhbWV3b3JrLmVkaXQuY29udHJvbGxlci5qcyIsInByb2JsZW0vc3Rha2Vob2xkZXIuZWRpdC5jb250cm9sbGVyLmpzIiwicHJvYmxlbS92YWx1ZWRlbnRpZmljYXRpb25mcmFtZS5jb250cm9sbGVyLmpzIiwiZHNjLmFwcC5qcyIsInJvdXRlci5hcHAuanMiLCJhcHAuZHNjLm1pbi5qcyIsImxhbmd1YWdlL3RyYW5zbGF0ZS5jb250cm9sbGVyLmpzIiwicHJvYmxlbS9jYXJmLmNvbnRyb2xsZXIuanMiLCJwcm9ibGVtL2NvbGxhYm9yYXRvcnMuY29udHJvbGxlci5qcyIsInByb2JsZW0vbWVudS5wcm9ibGVtLmNvbnRyb2xsZXIuanMiLCJwcm9ibGVtL3Byb2JsZW0uZWRpdC5jb250cm9sbGVyLmpzIiwicHJvYmxlbS9wcm9ibGVtLnNlcnZpY2UuanMiLCJwcm9ibGVtL3N0YXJ0LnByb2JsZW0uY29udHJvbGxlci5qcyIsInVzZXIvc2lnbnVwLmNvbnRyb2xsZXIuanMiLCJ1c2VyL3NpZ251cC5zZXJ2aWNlLmpzIiwiYXBwLmNvbmZpZy5qcyIsImF1dGguc2VydmljZS5qcyIsImRyYWcuZHNjLmpzIiwibG9naW4uY29udHJvbGxlci5qcyIsInNvY2tldC5zZXJ2aWNlLmpzIl0sIm5hbWVzIjpbInRvYXN0QXBwIiwiJG1kVG9hc3QiLCJlcnJvck1lc3NhZ2UiLCJ0aGlzIiwibWVzc2FnZSIsInNob3ciLCJjb250cm9sbGVyIiwiY29udHJvbGxlckFzIiwidGVtcGxhdGVVcmwiLCJhY3Rpb24iLCJoaWdobGlnaHRBY3Rpb24iLCJwb3NpdGlvbiIsImhpZGVEZWxheSIsInNlcnZpY2UiLCJjaGF0RFNDIiwiJHRpbWVvdXQiLCJTb2NrZXQiLCIkbWRTaWRlbmF2IiwiJGxvZyIsInByb2JsZW1TZXJ2aWNlIiwiJHdpbmRvdyIsInZtIiwibmV3bXNnIiwibWVzc2FnZXMiLCJyZXBsYXkiLCJuaWNrbmFtZSIsImNsb3NlIiwidGhlbiIsImRlYnVnIiwiaW5pdEhpc3RvcnlDaGF0IiwiaWRQcm9ibGVtIiwibG9jYWxTdG9yYWdlIiwiZ2V0SXRlbSIsImdldGhpc3RvcnljaGF0Iiwic3VjY2VzcyIsImRhdGEiLCJpIiwiaGlzdG9yeWNoYXQiLCJsZW5ndGgiLCJ0bXAiLCJEYXRlIiwidGltZSIsIm1zbiIsIm1zZyIsImdldERhdGUiLCJnZXRNb250aCIsImdldEZ1bGxZZWFyIiwiZ2V0SG91cnMiLCJnZXRNaW51dGVzIiwicHVzaCIsInNob3dSZXBsYXkiLCJvbiIsIm9iaiIsInNlbmRNZXNzYWdlIiwiY2hhdG1zZyIsImVtaXQiLCJkc2NSZXBvcnRDb250cm9sbGVyIiwiYnVpZFJlcG9ydCIsImVsZW1lbnQiLCJodG1sIiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsInBkZiIsImpzUERGIiwiYWRkSFRNTCIsInBhZ2VzcGxpdCIsImRpc3Bvc2UiLCJzYXZlIiwiaWRwcm9ibGVtIiwiZXZhbHVhdGlvbmZyYW1ld29ya0NvbnRyb2xsZXIiLCIkc2NvcGUiLCJpbml0RXZhbHVhdGlvbiIsImdldGV2YWx1YXRpb24iLCJldmFsdWF0aW9uZnJhbWV3b3JrTGlzdCIsImV2YWx1YXRpb25mcmFtZXdvcmsiLCJhbmd1bGFyIiwiZm9yRWFjaCIsIm9uaW9ubGF5ZXIiLCJzdGFrZWhvbGRlcnMiLCJzdGFrZWhvbGRlciIsIl9pZCIsIm5hbWUiLCJkZXNjcmlwdGlvbiIsIm9wZW5FZGl0IiwicHJvYmxlbXMiLCJzb2x1dGlvbnMiLCJzYXZlRGlzY3V0aW9uIiwic3Rha2Vob2xkZXJPbmlvbiIsImNvbnNvbGUiLCJsb2ciLCJzZXRPcGVuRWRpdERpc2N1dGlvbiIsImN1cnJlbnRTdGFrZWhvbGRlciIsInNlbWlvdGljZnJhbWV3b3JrQ29udHJvbGxlciIsImluaXRTZW1pb3RpY0ZyYW1ld29yayIsImdldHNlbWlvdGljIiwic2VtaW90aWNmcmFtZXdvcmsiLCJzYXZlU29jaWFsV29ybGQiLCJ0ZXh0IiwiZmxhZ1NhdmUiLCJ1cGRhdGUiLCJzYXZlUHJhZ21hdGljIiwic2F2ZVNlbWFudGljIiwic2F2ZVN5bnRhdGljIiwic2F2ZUVtcGlyaWNhbCIsInNhdmVQaHlzaWNhbCIsInNvY2lhbHdvcmxkIiwicHJhZ21hdGljIiwic2VtaW90aWNyYW1ld29yayIsInN5bnRhdGljIiwiZW1waXJpY2FsIiwicGh5c2ljYWwiLCJzdGFrZWhvbGRlckNvbnRyb2xsZXIiLCJpbnRpdE9uaW9uIiwiZ2V0b25pb24iLCJzdGFrZWhvbGRlckxpc3QiLCJpblByb2Nlc3NpbmciLCJtb3ZlIiwiZGFkYW9wZW5FZGl0IiwieCIsInkiLCJzYXZlU3Rha2Vob2xkZXIiLCJpZCIsInNldE9wZW5FZGl0Iiwic3R5bGUiLCJkaXNwbGF5Iiwic3BsaWNlIiwiZGVsUG9zdEl0IiwiaW5kZXgiLCJyZXRvcm5vIiwiYWRkUG9zdEl0IiwiZSIsImNhbWFkYSIsIm5ld1N0YWtlaG9sZGVyIiwicGFnZVgiLCJwYWdlWSIsImFjZW5kZSIsImV2dCIsInRhcmdldCIsInNldEF0dHJpYnV0ZSIsImFwYWdhIiwidmFsdWVJZGVudGlmaWNhdGlvbkZyYW1lQ29udHJvbGxlciIsInNlbGYiLCJ1c2VyZW1haWwiLCJuZXd2YWx1ZXMiLCJzdWdlc3Rpb25WYWx1ZXMiLCJzdWdlc3Rpb25WYWx1ZXNBcnJheSIsImluaXRWYWx1ZUlkZW50aWZpY2F0aW9uRnJhbWUiLCJrIiwiaiIsInZhbHVlcyIsIm5ld1ZhbHVlcyIsInNldFN1Z2dlc3Rpb25TaG93IiwibGVhdmVTdWdnZXN0aW9uU2hvdyIsInJlbW92ZVZhbHVlSWRlbnRpY2F0aW9uIiwidmFsdWUiLCJuZXdMaXN0Iiwic2V0VmFsdWVJZGVudGljYXRpb24iLCJ1bmRlZmluZWQiLCJ2YWx1ZXNMaXN0Iiwic3BsaXQiLCJtb2R1bGUiLCJjb25maWciLCIkaHR0cFByb3ZpZGVyIiwiaW50ZXJjZXB0b3JzIiwiY2xvc2VUb2FzdCIsImhpZGUiLCJmYWN0b3J5IiwiJGluamVjdCIsInJvdXRlcyIsIiRzdGF0ZVByb3ZpZGVyIiwiJHVybFJvdXRlclByb3ZpZGVyIiwic3RhdGUiLCJ1cmwiLCJ2aWV3cyIsImNvbnRlbnQtdGFiIiwicHJvYmxlbS1kZXNjcmlwdGlvbiIsImRzYy1hcnRpZmFjdCIsIm90aGVyd2lzZSIsImluaXRMYW5ndWFnZSIsIiR0cmFuc2xhdGVQcm92aWRlciIsInVzZVN0YXRpY0ZpbGVzTG9hZGVyIiwicHJlZml4Iiwic3VmZml4IiwicHJlZmVycmVkTGFuZ3VhZ2UiLCJ1c2VTYW5pdGl6ZVZhbHVlU3RyYXRlZ3kiLCJ1c2VMb2NhbFN0b3JhZ2UiLCJsYW5ndWFnZUNvbnRyb2xsZXIiLCIkdHJhbnNsYXRlIiwic2V0TGFuZyIsImxhbmdLZXkiLCJ1c2UiLCJjaGFuZ2VMYW5ndWFnZSIsInJlc3RyaWN0IiwiZGlyZWN0aXZlIiwiY2FyZkNvbnRyb2xsZXIiLCJpbml0Q2FyZiIsImdldGNhcmYiLCJsb2NhbFN0YWtlaG9sZGVycyIsImNhcmZMaXN0IiwiY2FyZiIsImNhcmZQcmlvcml0eUxpc3QiLCJsb2NhbFByaW9yaXR5TGlzdCIsInJlc2V0Q2FyZiIsInBtcyIsInByaW9yaXR5IiwicmVxdWlyZW1lbnQiLCJ2YWx1ZUxpc3QiLCJhZGRwbXN2YWx1ZSIsInJlbW92ZUNBUkYiLCJzZWxlY3RQTVNWYWx1ZSIsImNhcmZQTVNWYWx1ZSIsInBtc192YWx1ZSIsInNldFByaW90aXR5IiwiYWRkTGlzdFZhbHVlIiwibmV3dmFsdWUiLCJhZGRTdGFrZWhvbGRlciIsImNvbnRyb2xsZXJDb2xsYWJvcmF0b3JzIiwic2VhcmNoQ2FsbGFib3JhdGlvbiIsImVtYWlsIiwiY29sbGFib3JhdG9ycyIsImluaXRDb2xsYWJvcmF0b3JzIiwiZ2V0Y29sbGFib3JhdG9ycyIsImFkZENvbGxhYm9yYXRvciIsImludml0ZSIsInJlbW92ZUNvbGxhYm9yYXRvciIsInBlb3BsZSIsInJlbW92ZWNvbGxhYm9yYXRvcnMiLCJtZW51UHJvYmxlbWFDb250cm9sbGVyIiwiQXV0aCIsIiRzdGF0ZSIsIiRtZFV0aWwiLCJidWlsZFRvZ2dsZXIiLCJuYXZJRCIsImRlYm91bmNlRm4iLCJkZWJvdW5jZSIsInRvZ2dsZSIsIm9wZW5DaGF0IiwiZm9ybUFkZENvbGxhYm9yYXRvcnMiLCJnbyIsIm9wZW5SZXBvcnQiLCJlZGl0RGVzY3JpcHRpb25Qcm9ibGVtIiwiZG9Mb2dvdXQiLCJsb2dvdXQiLCJlZGl0UHJvYmxlbWFDb250cm9sbGVyIiwidXBkYXRlVHJ1ZSIsInByb2JsZW0iLCJ0YWJzZHNjIiwiZ2V0Q3VycmVudFByb2JsZW0iLCJnZXRwcm9ibGVtIiwic2V0VXBkYXRlIiwicHJvYmxlbVVwZGF0ZSIsInNhdmVEZXNjcmlwdGlvbiIsIiRpbmplY3RyZSIsIiRodHRwIiwiJGxvY2F0aW9uIiwibmV3cHJvYmxlbSIsInBvc3QiLCJBUElfUk9VVEVfTkVXUFJPQkxFTSIsImdldCIsIkFQSV9ST1VURV9HRVRQUk9CTEVNIiwiZ2V0dXNlcnByb2JsZW1zIiwiQVBJX1JPVVRFX0dFVFVTRVJQUk9CTEVNUyIsIkFQSV9ST1VURV9HRVRDT0xMQUJPUkFUT1JTIiwiQVBJX1JPVVRFX0lOVklURSIsIkFQSV9ST1VURV9HRVRPTklPTiIsIkFQSV9ST1VURV9HRVRFVkFMVUFUSU9OIiwiQVBJX1JPVVRFX0dFVFNFTUlPVElDRlJBTUVXT1JLIiwiQVBJX1JPVVRFX0dFVENBUkYiLCJyZW1vdmVwcm9ibGVtIiwiQVBJX1JPVVRFX1JFTU9WRVBST0JMRU0iLCJnZXRwcm9ibGVtc2NvbGxhYm9yYXRvciIsIkFQSV9ST1VURV9HRVRVU0VSUFJPQkxFTVNDT0xMQUJPUkFUT1IiLCJBUElfUk9VVEVfUkVNT1ZFQ09MTEFCT1JBVE9SIiwiQVBJX1JPVVRFX0dFVEhJU1RPUllDSEFUIiwic3RhcnRQcm9ibGVtQ29udHJvbGxlciIsIiRtZERpYWxvZyIsInJlbW92ZVByb2JsZW0iLCJwcm9ibGVtaWQiLCJwcm9ibGVtTGlzdCIsIkRpYWxvZ0NvbnRyb2xsZXIiLCJjYW5jZWwiLCJhZGROZXdQcm9ibGVtIiwic3RhcnROZXdQcm9ibGVtIiwidXNlcmlkIiwicHJvYmxlbUNvbGxhYm9yYXRvckxpc3QiLCJsb2dpbkluUHJvZ3Jlc3MiLCJnZXRQcm9ibGVtcyIsInJlcGxhY2UiLCJzdWJzdHJpbmciLCJyZXZvbXZlUHJvYmxlbSIsImV2IiwiY29uZmlybSIsInBhcmVudCIsImJvZHkiLCJ0aXRsZSIsImNvbnRlbnQiLCJhcmlhTGFiZWwiLCJvayIsInRhcmdldEV2ZW50IiwiZWRpdFByb2JsZW0iLCJzZXRJdGVtIiwiaW5pdHNvY2tldHByb2JsZW0iLCJuZXdQcm9ibGVtIiwic2lnbnVwQ29udHJvbGxlciIsInNpZ251cFNlcnZpY2UiLCJBdXRoVG9rZW4iLCIkZmlsdGVyIiwiJHN0YXRlUGFyYW1zIiwic2F2ZVVzZXIiLCJ1c2VyIiwiY3JlYXRlIiwic2V0VG9rZW4iLCJ0b2tlbiIsImdldFVzZXIiLCJsYW5ndWFnZSIsInJlc2N1ZVBhc3N3b3JkIiwidXNlckVtYWlsIiwiY2hhbmdlUGFzc3dvcmQiLCJBUElfUk9VVEVfVVNFUiIsIkFQSV9ST1VURV9SRVNDVUVQQVNTV09SRCIsIm15dG9rZW5VUkwiLCJzZWFyY2giLCJBUElfUk9VVEVfU0VUTkVXUEFTU1dPUkQiLCJteXRva2VuIiwicGFzc3dvcmQiLCJhcHBDb25maWciLCIkbWRUaGVtaW5nUHJvdmlkZXIiLCIkbG9jYXRpb25Qcm92aWRlciIsImN1c3RvbUdyZWVuTWFwIiwiZXh0ZW5kUGFsZXR0ZSIsImNvbnRyYXN0RGVmYXVsdENvbG9yIiwiY29udHJhc3REYXJrQ29sb3JzIiwiNTAiLCJkZWZpbmVQYWxldHRlIiwidGhlbWUiLCJwcmltYXJ5UGFsZXR0ZSIsImRlZmF1bHQiLCJodWUtMSIsImFjY2VudFBhbGV0dGUiLCIkcSIsImF1dGhGYWN0b3J5IiwibG9naW4iLCJpc0xvZ2dlZEluIiwiZ2V0VG9rZW4iLCJyZWplY3QiLCJhdXRoVG9rZW5GYWN0b3J5IiwicmVtb3ZlSXRlbSIsImludGVyY2VwdG9yRmFjdG9yeSIsInJlcXVlc3QiLCJoZWFkZXJzIiwiJGRvY3VtZW50IiwibGluayIsInNjb3BlIiwiYXR0ciIsIm1vdXNlbW92ZSIsImV2ZW50IiwiaWRfZGl2IiwiY3NzIiwidG9wIiwibGVmdCIsIm1vdXNldXAiLCJ1bmJpbmQiLCJwcmV2ZW50RGVmYXVsdCIsImJpbmQiLCJsb2dpbkNvbnRyb2xsZXIiLCIkcm9vdFNjb3BlIiwibG9nZ2VkSW4iLCIkb24iLCJkb0xvZ2luIiwiZXJyb3IiLCJzb2NrZXQiLCJpbyIsImV2ZW50TmFtZSIsImNhbGxiYWNrIiwicmVtb3ZlTGlzdGVuZXIiXSwibWFwcGluZ3MiOiJBQW1CQSxRQUFBQSxVQUFBQyxHQVVBLFFBQUFDLEdBQUFBLEdBQ0FDLEtBQUFDLFFBQUFGLEVBQ0FELEVBQUFJLE1BRUFDLFdBQUEsa0JBQ0FDLGFBQUEsS0FDQUMsWUFBQSw0QkFDQUMsT0FBQSxLQUNBQyxpQkFBQSxFQUNBQyxTQUFBLFdBQ0FDLFVBQUEsTUFqQkEsR0FBQUMsSUFDQVQsUUFBQSxHQUNBRixhQUFBQSxFQUdBLE9BQUFXLEdDbEJBLFFBQUFDLFNBQUFDLEVBQUFDLEVBQUFDLEVBQUFDLEVBQUFDLEVBQUFDLEdBQ0EsR0FBQUMsR0FBQWxCLElBQ0FrQixHQUFBQyxPQUFBLEdBQ0FELEVBQUFFLFlBQ0FGLEVBQUFHLFFBQUEsRUFDQUgsRUFBQUksU0FBQSxHQUNBSixFQUFBSyxNQUFBLFdBQ0FULEVBQUEsUUFBQVMsUUFDQUMsS0FBQSxXQUNBVCxFQUFBVSxNQUFBLGlCQUlBUCxFQUFBUSxnQkFBQSxXQUNBUixFQUFBUyxVQUFBVixFQUFBVyxhQUFBQyxRQUFBLGFBQ0FYLEVBQUFJLFNBQUFMLEVBQUFXLGFBQUFDLFFBQUEsWUFDQWIsRUFBQWMsZUFBQVosRUFBQVMsV0FDQUksUUFBQSxTQUFBQyxHQUNBLEdBQUFBLEVBQUFELFFBQ0EsSUFBQSxHQUFBRSxHQUFBLEVBQUFBLEVB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VixVQUNBSixFQUFBdUssUUFBQXpKLEVBQUF1UixVQUNBclMsRUFBQXdRLGlCQUFBLEVBQ0F6RCxFQUFBcUYsVUFDQTlSLEtBQUEsU0FBQVEsR0FDQWQsRUFBQWdTLEtBQUFsUixFQUFBQSxLQUNBbkMsRUFBQUUsYUFBQWdULEVBQUEsYUFBQSxrQkFBQSxLQUFBN1IsRUFBQWdTLEtBQUE1UixZQUVBVSxFQUFBRCxRQUNBbU0sRUFBQVMsR0FBQSxnQkFJQXpOLEVBQUE0VixNQUFBOVUsRUFBQS9CLFdBS0FpQixFQUFBNE4sU0FBQSxXQUVBYixFQUFBYyxTQUNBYixFQUFBLFNBakRBMUosUUFBQXFGLE9BQUEsT0FDQTFKLFdBQUEsa0JBQUFzVyxHYmd2RFFBLEVBQWdCck0sU0FBVyxhQUFjLGFBQWMsU0FBVSxPQUFRLFVBQVcsVUFBVyxlY3B2RHZHNUYsUUFBQXFGLE9BQUEsT0FDQW5KLFFBQUEsVUFDQSxZQUFBLFdBQ0EsU0FBQWlQLEVBQUEvTyxHQUVBWixLQUFBK1csT0FBQUMsS0FJQWhYLEtBQUFnRCxHQUFBLFNBQUFpVSxFQUFBQyxHQUNBbFgsS0FBQStXLFFBQ0EvVyxLQUFBK1csT0FBQS9ULEdBQUFpVSxFQUFBLFNBQUFqVixHQUNBcEIsRUFBQSxXQUNBc1csRUFBQWxWLFFBS0FoQyxLQUFBb0QsS0FBQSxTQUFBNlQsRUFBQWpWLEdBQ0FoQyxLQUFBK1csUUFDQS9XLEtBQUErVyxPQUFBM1QsS0FBQTZULEVBQUFqVixJQUlBaEMsS0FBQW1YLGVBQUEsU0FBQUYsR0FDQWpYLEtBQUErVyxRQUNBL1csS0FBQStXLE9BQUFJLGVBQUFGIiwiZmlsZSI6ImFwcC5kc2MubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXHJcbiAqIENyZWF0ZWQgYnkgSk9TRVZBTERFUkxFSSBvbiAyNy8wNi8yMDE1LlxyXG4gKi9cclxuJ3VzZSBzdHJpY3QnO1xyXG5cclxuYW5ndWxhci5tb2R1bGUoJ3RvYXN0U2VydmljZScsW10pXHJcbiAgICAuY29udHJvbGxlcigndG9hc3RDb250cm9sbGVyJywgZnVuY3Rpb24oJG1kVG9hc3QsdG9hc3RBcHApIHtcclxuXHJcbiAgICAgICAgdmFyIHZtID0gdGhpcztcclxuICAgICAgICB2bS5tZXNzYWdlID0gIHRvYXN0QXBwLm1lc3NhZ2U7XHJcbiAgICAgICAgdm0uY2xvc2VUb2FzdCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAkbWRUb2FzdC5oaWRlKCk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICB9KVxyXG4gICAgLmZhY3RvcnkoICd0b2FzdEFwcCcsIHRvYXN0QXBwICk7XHJcblxyXG4gICAgdG9hc3RBcHAuJGluamVjdCA9IFsgJyRtZFRvYXN0JyBdO1xyXG5cclxuICAgIGZ1bmN0aW9uIHRvYXN0QXBwICgkbWRUb2FzdCkge1xyXG5cclxuXHJcbiAgICB2YXIgc2VydmljZSA9IHtcclxuICAgICAgICBtZXNzYWdlOiAnJyxcclxuICAgICAgICBlcnJvck1lc3NhZ2U6IGVycm9yTWVzc2FnZVxyXG4gICAgfTtcclxuXHJcbiAgICByZXR1cm4gc2VydmljZTtcclxuXHJcbiAgICAgICAgZnVuY3Rpb24gZXJyb3JNZXNzYWdlKGVycm9yTWVzc2FnZSkge1xyXG4gICAgICAgICAgICB0aGlzLm1lc3NhZ2UgPSBlcnJvck1lc3NhZ2U7XHJcbiAgICAgICAgICAgICRtZFRvYXN0LnNob3coXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29udHJvbGxlcjogJ3RvYXN0Q29udHJvbGxlcicsXHJcbiAgICAgICAgICAgICAgICAgICAgY29udHJvbGxlckFzOiAndm0nLFxyXG4gICAgICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAndmlld3MvcGFnZXMvZHNjdG9hc3QuaHRtbCcsXHJcbiAgICAgICAgICAgICAgICAgICAgYWN0aW9uOiBcIk9LXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgaGlnaGxpZ2h0QWN0aW9uOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uOiBcInRvcCBsZWZ0XCIsXHJcbiAgICAgICAgICAgICAgICAgICAgaGlkZURlbGF5OiA1MDAwXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgfVxyXG5cclxuXHJcblxyXG5cclxuXHJcbiAgICAvKmZ1bmN0aW9uIGVycm9yTWVzc2FnZShlcnJvck1lc3NhZ2UpIHtcclxuICAgICAgICB0aGlzLm1lc3NhZ2UgPSBlcnJvck1lc3NhZ2U7XHJcbiAgICAgICAgJG1kVG9hc3Quc2hvdyhcclxuICAgICAgICAgICAgJG1kVG9hc3Quc2ltcGxlKClcclxuICAgICAgICAgICAgICAgIC5jb250ZW50KHRoaXMubWVzc2FnZSksXHJcbiAgICAgICAgICAgICAgICAuYWN0aW9uKCdPSycpXHJcbiAgICAgICAgICAgICAgICAuaGlnaGxpZ2h0QWN0aW9uKHRydWUpXHJcbiAgICAgICAgICAgICAgICAucG9zaXRpb24oJ3RvcCByaWdodCcpXHJcbiAgICAgICAgICAgICAgICAuaGlkZURlbGF5KDkwMDApXHJcbiAgICAgICAgKTtcclxuICAgIH0qL1xyXG59XHJcblxyXG5cclxuXHJcblxyXG5cclxuIiwiLyoqXHJcbiAqIENyZWF0ZWQgYnkgSk9TRVZBTERFUkxFSSBvbiAxNS8wNy8yMDE1LlxyXG4gKi9cclxuJ3VzZSBzdHJpY3QnO1xyXG5cclxuYW5ndWxhclxyXG4gICAgLm1vZHVsZSgnYXBwJylcclxuICAgIC5jb250cm9sbGVyKCdjaGF0RFNDJyxjaGF0RFNDKTtcclxuXHJcbiAgICBmdW5jdGlvbiBjaGF0RFNDKCR0aW1lb3V0LCBTb2NrZXQsICRtZFNpZGVuYXYsICRsb2cscHJvYmxlbVNlcnZpY2UsJHdpbmRvdykge1xyXG4gICAgICAgIHZhciB2bSA9IHRoaXM7XHJcbiAgICAgICAgdm0ubmV3bXNnID0gXCJcIjtcclxuICAgICAgICB2bS5tZXNzYWdlcyA9IFtdO1xyXG4gICAgICAgIHZtLnJlcGxheSA9IGZhbHNlO1xyXG4gICAgICAgIHZtLm5pY2tuYW1lID0gXCJcIixcclxuICAgICAgICB2bS5jbG9zZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgJG1kU2lkZW5hdignY2hhdCcpLmNsb3NlKClcclxuICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAkbG9nLmRlYnVnKFwiY2xvc2UgY2hhdFwiKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHZtLmluaXRIaXN0b3J5Q2hhdCA9IGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgIHZtLmlkUHJvYmxlbSA9ICR3aW5kb3cubG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3Byb2JsZW1pZCcpO1xyXG4gICAgICAgICAgICB2bS5uaWNrbmFtZSA9ICR3aW5kb3cubG9jYWxTdG9yYWdlLmdldEl0ZW0oJ25pY2tuYW1lJyk7XHJcbiAgICAgICAgICAgIHByb2JsZW1TZXJ2aWNlLmdldGhpc3RvcnljaGF0KHZtLmlkUHJvYmxlbSlcclxuICAgICAgICAgICAgICAgIC5zdWNjZXNzKGZ1bmN0aW9uKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZihkYXRhLnN1Y2Nlc3MpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBkYXRhLmhpc3RvcnljaGF0Lmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdG1wID0gbmV3IERhdGUoZGF0YS5oaXN0b3J5Y2hhdFtpXS50aW1lKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBtc24gPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmlja25hbWU6IGRhdGEuaGlzdG9yeWNoYXRbaV0ubmlja25hbWUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbXNnOiBkYXRhLmhpc3RvcnljaGF0W2ldLm1zZyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aW1lOiB0bXAuZ2V0RGF0ZSgpICsgXCIvXCIgKyAodG1wLmdldE1vbnRoKCkgKyAxICkrIFwiL1wiICsgdG1wLmdldEZ1bGxZZWFyKCkgKyBcIiBbXCIgKyB0bXAuZ2V0SG91cnMoKSArIFwiOlwiICsgdG1wLmdldE1pbnV0ZXMoKSArIFwiXSBcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdm0ubWVzc2FnZXMucHVzaChtc24pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHZtLnNob3dSZXBsYXkgPSBmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICBpZih2bS5yZXBsYXkpe1xyXG4gICAgICAgICAgICAgICAgdm0ucmVwbGF5ID0gZmFsc2U7XHJcbiAgICAgICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICAgICAgdm0ucmVwbGF5ID0gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICB9XHJcbiAgICAgICAgU29ja2V0Lm9uKCdvbkJyb2FkY2FzdENoYXQnLCBmdW5jdGlvbiAob2JqKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgdG1wID0gbmV3IERhdGUob2JqW29iai5sZW5ndGggLTFdLnRpbWUpO1xyXG4gICAgICAgICAgICAgICAgdm0ubWVzc2FnZXMucHVzaCh7XHJcbiAgICAgICAgICAgICAgICAgICAgbmlja25hbWU6IG9ialtvYmoubGVuZ3RoIC0xXS5uaWNrbmFtZSxcclxuICAgICAgICAgICAgICAgICAgICBtc2c6IG9ialtvYmoubGVuZ3RoIC0xXS5tc2csXHJcbiAgICAgICAgICAgICAgICAgICAgdGltZTogdG1wLmdldERhdGUoKSArIFwiL1wiICsgKHRtcC5nZXRNb250aCgpICsgMSkgKyBcIi9cIiArIHRtcC5nZXRGdWxsWWVhcigpICsgXCIgW1wiICsgdG1wLmdldEhvdXJzKCkgKyBcIjpcIiArIHRtcC5nZXRNaW51dGVzKCkgKyBcIl0gXCJcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB2bS5zZW5kTWVzc2FnZSA9IGZ1bmN0aW9uKGNoYXRtc2cpe1xyXG4gICAgICAgICAgICAgU29ja2V0LmVtaXQoJ2Jyb2FkY2FzdENoYXQnLCBjaGF0bXNnKTtcclxuICAgICAgICAgICAgdm0ubmV3bXNnID0gXCJcIjtcclxuICAgICAgICB9XHJcblxyXG4gICAgfTtcclxuXHJcbiIsIi8qKlxyXG4gKiBDcmVhdGVkIGJ5IEpPU0VWQUxERVJMRUkgb24gMjIvMDcvMjAxNS5cclxuICovXHJcblxyXG5cclxuYW5ndWxhci5tb2R1bGUoJ2FwcCcpXHJcbiAgICAuY29udHJvbGxlcignZHNjUmVwb3J0Q29udHJvbGxlcicsZHNjUmVwb3J0Q29udHJvbGxlcik7XHJcblxyXG5cclxuZnVuY3Rpb24gZHNjUmVwb3J0Q29udHJvbGxlcigpIHtcclxuXHJcbiAgICB2YXIgdm0gPSB0aGlzO1xyXG5cclxuICAgIHZtLmlkcHJvYmxlbSA9ICdhamZsYWpmbGphbGZqYWxqZic7XHJcblxyXG4gICAgdm0uYnVpZFJlcG9ydCA9IGJ1aWRSZXBvcnQ7XHJcblxyXG4gICAgZnVuY3Rpb24gYnVpZFJlcG9ydChlbGVtZW50KSB7XHJcblxyXG5cclxuICAgICAgICB2YXIgaHRtbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwcm9qZWN0UmVzcG9ydCcpO1xyXG5cclxuICAgICAgICB2YXIgcGRmID0gbmV3IGpzUERGKCdsJywncHgnKTtcclxuXHJcbiAgICAgICAgcGRmLmFkZEhUTUwoXHJcbiAgICAgICAgICAgIGh0bWwsIDAsIDAsIHtcclxuICAgICAgICAgICAgICAgIHBhZ2VzcGxpdDogdHJ1ZVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBmdW5jdGlvbihkaXNwb3NlKXtcclxuICAgICAgICAgICAgICAgIHBkZi5zYXZlKCd0ZXN0LnBkZicpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgKTtcclxuXHJcbiAgICB9XHJcbn1cclxuXHJcbiIsIi8qKlxyXG4gKiBDcmVhdGVkIGJ5IEpPU0VWQUxERVJMRUkgb24gMjkvMDYvMjAxNS5cclxuICovXHJcblxyXG4ndXNlIHN0cmljdCc7XHJcblxyXG5hbmd1bGFyLm1vZHVsZSgnYXBwJylcclxuICAgIC5jb250cm9sbGVyKCdldmFsdWF0aW9uZnJhbWV3b3JrQ29udHJvbGxlcicsZXZhbHVhdGlvbmZyYW1ld29ya0NvbnRyb2xsZXIpO1xyXG5cclxuXHJcblxyXG5cclxuICBmdW5jdGlvbiBldmFsdWF0aW9uZnJhbWV3b3JrQ29udHJvbGxlciAoJHdpbmRvdyxwcm9ibGVtU2VydmljZSxTb2NrZXQsJHNjb3BlKXtcclxuXHJcbiAgICAgIHZhciB2bSA9IHRoaXM7XHJcbiAgICAgIHZtLmV2YWx1YXRpb25mcmFtZXdvcmtMaXN0ID1bXTtcclxuICAgICAgdm0uaW5pdEV2YWx1YXRpb24gPSBpbml0RXZhbHVhdGlvbjtcclxuXHJcbiAgICAgIGZ1bmN0aW9uIGluaXRFdmFsdWF0aW9uKCl7XHJcbiAgICAgICAgICB2bS5pZHByb2JsZW0gPSAkd2luZG93LmxvY2FsU3RvcmFnZS5nZXRJdGVtKCdwcm9ibGVtaWQnKTtcclxuICAgICAgICAgcHJvYmxlbVNlcnZpY2UuZ2V0ZXZhbHVhdGlvbih2bS5pZHByb2JsZW0pXHJcbiAgICAgICAgICAgICAgLnN1Y2Nlc3MoZnVuY3Rpb24oZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgICBpZihkYXRhLnN1Y2Nlc3MpIHtcclxuICAgICAgICAgICAgICAgICAgICAgIHZtLmV2YWx1YXRpb25mcmFtZXdvcmtMaXN0ID0gZGF0YS5ldmFsdWF0aW9uZnJhbWV3b3JrO1xyXG4gICAgICAgICAgICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgICAgICAgICAgIHRvYXN0QXBwLmVycm9yTWVzc2FnZShkYXRhLm1lc3NhZ2UpO1xyXG4gICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgfSlcclxuICAgICAgfTtcclxuXHJcblxyXG5cclxuXHJcblxyXG4gICAgICBTb2NrZXQub24oJ29uQnJvYWRjYXN0RnJhbWVTYXZlJywgZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICAgIGFuZ3VsYXIuZm9yRWFjaCh2bS5ldmFsdWF0aW9uZnJhbWV3b3JrTGlzdCxmdW5jdGlvbihldmFsdWF0aW9uZnJhbWV3b3JrKXtcclxuICAgICAgICAgICAgIGlmKCBldmFsdWF0aW9uZnJhbWV3b3JrLm9uaW9ubGF5ZXIgPT0gZGF0YS5vbmlvbmxheWVyKXtcclxuICAgICAgICAgICAgICAgICBhbmd1bGFyLmZvckVhY2goZXZhbHVhdGlvbmZyYW1ld29yay5zdGFrZWhvbGRlcnMsZnVuY3Rpb24oc3Rha2Vob2xkZXIpe1xyXG4gICAgICAgICAgICAgICAgICAgICBpZiAoc3Rha2Vob2xkZXIuX2lkID09IGRhdGEuX2lkKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgIHN0YWtlaG9sZGVyLm5hbWUgPSBkYXRhLm5hbWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICBzdGFrZWhvbGRlci5vbmlvbmxheWVyID0gZGF0YS5vbmlvbmxheWVyO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgc3Rha2Vob2xkZXIuZGVzY3JpcHRpb24gPSBkYXRhLmRlc2NyaXB0aW9uO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgc3Rha2Vob2xkZXIub3BlbkVkaXQgPSBkYXRhLm9wZW5FZGl0O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgc3Rha2Vob2xkZXIucHJvYmxlbXMgPSBkYXRhLnByb2JsZW1zO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgc3Rha2Vob2xkZXIuc29sdXRpb25zID0gZGF0YS5zb2x1dGlvbnM7XHJcbiAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgIH1cclxuICAgICAgICAgIH0pO1xyXG4gICAgICB9KTtcclxuXHJcblxyXG4gICAgICAkc2NvcGUuc2F2ZURpc2N1dGlvbiA9IGZ1bmN0aW9uKHN0YWtlaG9sZGVyKSB7XHJcbiAgICAgICAgICBTb2NrZXQuZW1pdCgnYnJvYWRjYXN0RnJhbWVTYXZlJywgc3Rha2Vob2xkZXIpO1xyXG4gICAgICB9O1xyXG5cclxuXHJcbiAgICAgIFNvY2tldC5vbignb25VcGRhdGVTdGFrZWhvbGRlcicsIGZ1bmN0aW9uIChzdGFrZWhvbGRlck9uaW9uKSB7XHJcbiAgICAgICAgIGNvbnNvbGUubG9nKHN0YWtlaG9sZGVyT25pb24pO1xyXG5cclxuICAgICAgfSk7XHJcblxyXG4gICAgICAkc2NvcGUuc2V0T3BlbkVkaXREaXNjdXRpb24gPSBmdW5jdGlvbihjdXJyZW50U3Rha2Vob2xkZXIpe1xyXG4gICAgICAgICAgY3VycmVudFN0YWtlaG9sZGVyLm9wZW5FZGl0ID0gdHJ1ZTtcclxuICAgICAgfTtcclxuICB9XHJcblxyXG4iLCIvKipcclxuICogQ3JlYXRlZCBieSBKT1NFVkFMREVSTEVJIG9uIDI5LzA2LzIwMTUuXHJcbiAqL1xyXG5cclxuXHJcbid1c2Ugc3RyaWN0JztcclxuXHJcbmFuZ3VsYXIubW9kdWxlKCdhcHAnKVxyXG4gICAgLmNvbnRyb2xsZXIoJ3NlbWlvdGljZnJhbWV3b3JrQ29udHJvbGxlcicsc2VtaW90aWNmcmFtZXdvcmtDb250cm9sbGVyKTtcclxuXHJcblxyXG5mdW5jdGlvbiBzZW1pb3RpY2ZyYW1ld29ya0NvbnRyb2xsZXIoU29ja2V0LCR3aW5kb3csIHByb2JsZW1TZXJ2aWNlKXtcclxuICAgIHZhciB2bSA9IHRoaXM7XHJcbiAgICB2bS5pZHByb2JsZW0gPSBcIlwiO1xyXG4gICAgdm0uc2F2ZVNvY2lhbFdvcmxkID0gc2F2ZVNvY2lhbFdvcmxkO1xyXG4gICAgdm0uc2F2ZVByYWdtYXRpYyA9IHNhdmVQcmFnbWF0aWM7XHJcbiAgICB2bS5zYXZlU2VtYW50aWMgPSBzYXZlU2VtYW50aWM7XHJcbiAgICB2bS5zYXZlU3ludGF0aWMgPSBzYXZlU3ludGF0aWM7XHJcbiAgICB2bS5zYXZlRW1waXJpY2FsID0gc2F2ZUVtcGlyaWNhbDtcclxuICAgIHZtLnNhdmVQaHlzaWNhbCA9IHNhdmVQaHlzaWNhbDtcclxuICAgIHZtLnNlbWlvdGljZnJhbWV3b3JrID0gXCJcIjtcclxuICAgIHZtLmluaXRTZW1pb3RpY0ZyYW1ld29yayA9IGluaXRTZW1pb3RpY0ZyYW1ld29yaztcclxuXHJcbiAgICBmdW5jdGlvbiBpbml0U2VtaW90aWNGcmFtZXdvcmsoKXtcclxuICAgICAgICB2bS5pZHByb2JsZW0gPSAkd2luZG93LmxvY2FsU3RvcmFnZS5nZXRJdGVtKCdwcm9ibGVtaWQnKTtcclxuXHJcbiAgICAgICAgcHJvYmxlbVNlcnZpY2UuZ2V0c2VtaW90aWModm0uaWRwcm9ibGVtKVxyXG4gICAgICAgICAgICAuc3VjY2VzcyhmdW5jdGlvbihkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICBpZihkYXRhLnN1Y2Nlc3MpIHtcclxuICAgICAgICAgICAgICAgICAgICB2bS5zZW1pb3RpY2ZyYW1ld29yayA9IGRhdGEuc2VtaW90aWNmcmFtZXdvcms7XHJcbiAgICAgICAgICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgICAgICAgICB0b2FzdEFwcC5lcnJvck1lc3NhZ2UoZGF0YS5tZXNzYWdlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgU29ja2V0Lm9uKCdvblVwZGF0ZVNvY2lhbFdvcmxkJywgZnVuY3Rpb24gKHRleHQpIHtcclxuICAgICAgICB2bS5zZW1pb3RpY2ZyYW1ld29yay5zb2NpYWx3b3JsZCA9IHRleHQ7XHJcbiAgICB9KTtcclxuXHJcbiAgICBmdW5jdGlvbiBzYXZlU29jaWFsV29ybGQodGV4dCxmbGFnU2F2ZSl7XHJcbiAgICAgICAgdmFyIG9iaiA9IHtcclxuICAgICAgICAgICAgdGV4dDogdGV4dCxcclxuICAgICAgICAgICAgdXBkYXRlOiBmbGFnU2F2ZVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgU29ja2V0LmVtaXQoJ3VwZGF0ZVNvY2lhbFdvcmxkJywgb2JqKTtcclxuICAgIH1cclxuXHJcbiAgICBTb2NrZXQub24oJ29uVXBkYXRlUHJhZ21hdGljJywgZnVuY3Rpb24gKHRleHQpIHtcclxuICAgICAgICB2bS5zZW1pb3RpY2ZyYW1ld29yay5wcmFnbWF0aWMgPSB0ZXh0O1xyXG4gICAgfSk7XHJcblxyXG4gICAgZnVuY3Rpb24gc2F2ZVByYWdtYXRpYyh0ZXh0LGZsYWdTYXZlKXtcclxuICAgICAgICB2YXIgb2JqID0ge1xyXG4gICAgICAgICAgICB0ZXh0OiB0ZXh0LFxyXG4gICAgICAgICAgICB1cGRhdGU6IGZsYWdTYXZlXHJcbiAgICAgICAgfTtcclxuICAgICAgICBTb2NrZXQuZW1pdCgndXBkYXRlUHJhZ21hdGljJywgb2JqKTtcclxuICAgIH1cclxuXHJcbiAgICBTb2NrZXQub24oJ29uVXBkYXRlU2VtYW50aWMnLCBmdW5jdGlvbiAodGV4dCkge1xyXG4gICAgICAgIHZtLnNlbWlvdGljZnJhbWV3b3JrLnNlbWlvdGljcmFtZXdvcmsgPSB0ZXh0O1xyXG4gICAgfSk7XHJcbiAgICBmdW5jdGlvbiBzYXZlU2VtYW50aWModGV4dCxmbGFnU2F2ZSl7XHJcbiAgICAgICAgdmFyIG9iaiA9IHtcclxuICAgICAgICAgICAgdGV4dDogdGV4dCxcclxuICAgICAgICAgICAgdXBkYXRlOiBmbGFnU2F2ZVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgU29ja2V0LmVtaXQoJ3VwZGF0ZVNlbWFudGljJywgb2JqKTtcclxuICAgIH1cclxuXHJcbiAgICBTb2NrZXQub24oJ29uVXBkYXRlU3ludGF0aWMnLCBmdW5jdGlvbiAodGV4dCxmbGFnU2F2ZSkge1xyXG4gICAgICAgIHZtLnNlbWlvdGljZnJhbWV3b3JrLnN5bnRhdGljID0gdGV4dDtcclxuICAgIH0pO1xyXG4gICAgZnVuY3Rpb24gc2F2ZVN5bnRhdGljKHRleHQsZmxhZ1NhdmUpe1xyXG4gICAgICAgIHZhciBvYmogPSB7XHJcbiAgICAgICAgICAgIHRleHQ6IHRleHQsXHJcbiAgICAgICAgICAgIHVwZGF0ZTogZmxhZ1NhdmVcclxuICAgICAgICB9O1xyXG4gICAgICAgIFNvY2tldC5lbWl0KCd1cGRhdGVTeW50YXRpYycsIG9iaik7XHJcbiAgICB9XHJcblxyXG4gICAgU29ja2V0Lm9uKCdvblVwZGF0ZUVtcGlyaWNhbCcsIGZ1bmN0aW9uICh0ZXh0KSB7XHJcbiAgICAgICAgdm0uc2VtaW90aWNmcmFtZXdvcmsuZW1waXJpY2FsID0gdGV4dDtcclxuICAgIH0pO1xyXG4gICAgZnVuY3Rpb24gc2F2ZUVtcGlyaWNhbCh0ZXh0LGZsYWdTYXZlKXtcclxuICAgICAgICB2YXIgb2JqID0ge1xyXG4gICAgICAgICAgICB0ZXh0OiB0ZXh0LFxyXG4gICAgICAgICAgICB1cGRhdGU6IGZsYWdTYXZlXHJcbiAgICAgICAgfTtcclxuICAgICAgICBTb2NrZXQuZW1pdCgndXBkYXRlRW1waXJpY2FsJywgb2JqKTtcclxuICAgIH1cclxuXHJcbiAgICBTb2NrZXQub24oJ29uVXBkYXRlUGh5c2ljYWwnLCBmdW5jdGlvbiAodGV4dCkge1xyXG4gICAgICAgIHZtLnNlbWlvdGljZnJhbWV3b3JrLnBoeXNpY2FsID0gdGV4dDtcclxuICAgIH0pO1xyXG4gICAgZnVuY3Rpb24gc2F2ZVBoeXNpY2FsKHRleHQsZmxhZ1NhdmUpe1xyXG4gICAgICAgIHZhciBvYmogPSB7XHJcbiAgICAgICAgICAgIHRleHQ6IHRleHQsXHJcbiAgICAgICAgICAgIHVwZGF0ZTogZmxhZ1NhdmVcclxuICAgICAgICB9O1xyXG4gICAgICAgIFNvY2tldC5lbWl0KCd1cGRhdGVQaHlzaWNhbCcsIG9iaik7XHJcbiAgICB9XHJcbn0iLCIvKipcclxuICogQ3JlYXRlZCBieSBKT1NFVkFMREVSTEVJIG9uIDI5LzA2LzIwMTUuXHJcbiAqL1xyXG4ndXNlIHN0cmljdCc7XHJcblxyXG5hbmd1bGFyLm1vZHVsZSgnYXBwJylcclxuICAgIC5jb250cm9sbGVyKCdzdGFrZWhvbGRlckNvbnRyb2xsZXInLHN0YWtlaG9sZGVyQ29udHJvbGxlcik7XHJcblxyXG5cclxuZnVuY3Rpb24gc3Rha2Vob2xkZXJDb250cm9sbGVyKFNvY2tldCwkc2NvcGUsJHdpbmRvdyxwcm9ibGVtU2VydmljZSl7XHJcbiAgICB2YXIgdm0gPSB0aGlzO1xyXG4gICAgdm0uaWRwcm9ibGVtID0gXCJcIjtcclxuICAgIHZtLnN0YWtlaG9sZGVyTGlzdCA9IFtdO1xyXG4gICAgdm0uc3Rha2Vob2xkZXIgPSBcIlwiO1xyXG4gICAgdm0uaW50aXRPbmlvbiA9IGludGl0T25pb247XHJcbiAgICB2bS5tb3ZlID0gZmFsc2U7XHJcbiAgICB2bS5pblByb2Nlc3NpbmcgPSB0cnVlO1xyXG5cclxuICAgIGZ1bmN0aW9uIGludGl0T25pb24oKXtcclxuICAgICAgICB2bS5pZHByb2JsZW0gPSAkd2luZG93LmxvY2FsU3RvcmFnZS5nZXRJdGVtKCdwcm9ibGVtaWQnKTtcclxuICAgICAgICBwcm9ibGVtU2VydmljZS5nZXRvbmlvbih2bS5pZHByb2JsZW0pXHJcbiAgICAgICAgICAgIC5zdWNjZXNzKGZ1bmN0aW9uKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgIGlmKGRhdGEuc3VjY2Vzcykge1xyXG4gICAgICAgICAgICAgICAgICAgIHZtLnN0YWtlaG9sZGVyTGlzdCA9IGRhdGEuc3Rha2Vob2xkZXJzO1xyXG4gICAgICAgICAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgICAgICAgICAgdG9hc3RBcHAuZXJyb3JNZXNzYWdlKGRhdGEubWVzc2FnZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgdm0uaW5Qcm9jZXNzaW5nID0gZmFsc2U7XHJcbiAgICB9XHJcblxyXG4gICAgU29ja2V0Lm9uKCdvbkJyb2FkY2FzdE9uaW9uU2F2ZScsIGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgICBhbmd1bGFyLmZvckVhY2godm0uc3Rha2Vob2xkZXJMaXN0LCBmdW5jdGlvbiAoc3Rha2Vob2xkZXIpIHtcclxuICAgICAgICAgICAgaWYgKHN0YWtlaG9sZGVyLl9pZCA9PSBkYXRhLl9pZCl7XHJcbiAgICAgICAgICAgICAgICBzdGFrZWhvbGRlci5zdGFrZWhvbGRlciA9IGRhdGEuc3Rha2Vob2xkZXI7XHJcbiAgICAgICAgICAgICAgICBzdGFrZWhvbGRlci5uYW1lID0gZGF0YS5uYW1lO1xyXG4gICAgICAgICAgICAgICAgc3Rha2Vob2xkZXIuZGVzY3JpcHRpb24gPSBkYXRhLmRlc2NyaXB0aW9uO1xyXG4gICAgICAgICAgICAgICAgc3Rha2Vob2xkZXIub3BlbkVkaXQgPSBkYXRhLmRhZGFvcGVuRWRpdFxyXG4gICAgICAgICAgICAgICAgc3Rha2Vob2xkZXIueCA9IGRhdGEueDtcclxuICAgICAgICAgICAgICAgIHN0YWtlaG9sZGVyLnkgPSBkYXRhLnk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICB9KTtcclxuXHJcblxyXG4gICAgJHNjb3BlLnNhdmVTdGFrZWhvbGRlciA9IGZ1bmN0aW9uKHN0YWtlaG9sZGVyKSB7XHJcbiAgICAgICAgU29ja2V0LmVtaXQoJ2Jyb2FkY2FzdE9uaW9uU2F2ZScsIHN0YWtlaG9sZGVyKTtcclxuICAgIH07XHJcblxyXG4gICAgU29ja2V0Lm9uKCdvbkJyb2FkY2FzdE9uaW9uRWRpdCcsIGZ1bmN0aW9uIChpZCkge1xyXG4gICAgICAgIGFuZ3VsYXIuZm9yRWFjaCh2bS5zdGFrZWhvbGRlckxpc3QsIGZ1bmN0aW9uIChzdGFrZWhvbGRlcikge1xyXG4gICAgICAgICAgICBpZiAoc3Rha2Vob2xkZXIuX2lkID09IGlkKSBzdGFrZWhvbGRlci5vcGVuRWRpdCA9IHRydWU7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgfSk7XHJcblxyXG4gICAgJHNjb3BlLnNldE9wZW5FZGl0ID0gZnVuY3Rpb24oaWQpe1xyXG4gICAgICAgIFNvY2tldC5lbWl0KCdicm9hZGNhc3RPbmlvbkVkaXQnLCBpZCk7XHJcbiAgICB9O1xyXG5cclxuXHJcbiAgICBTb2NrZXQub24oJ29uQnJvYWRjYXN0T25pb25SZW1vdmUnLCBmdW5jdGlvbiAoaWQpIHtcclxuICAgICAgICB2YXIgc3Rha2Vob2xkZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInN0YWtlaG9sZGVyXCIgK3ZtLnN0YWtlaG9sZGVyTGlzdFtpZF0uX2lkKTtcclxuICAgICAgICBzdGFrZWhvbGRlci5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xyXG4gICAgICAgIHZtLnN0YWtlaG9sZGVyTGlzdC5zcGxpY2UoaWQsMSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICAkc2NvcGUuZGVsUG9zdEl0ID0gZnVuY3Rpb24oaW5kZXgsc3Rha2Vob2xkZXIpIHtcclxuICAgICAgICB2YXIgb2JqID0ge1xyXG4gICAgICAgICAgICBpbmRleDogaW5kZXgsXHJcbiAgICAgICAgICAgIHN0YWtlaG9sZGVyOiBzdGFrZWhvbGRlclxyXG4gICAgICAgIH1cclxuICAgICAgICBTb2NrZXQuZW1pdCgnYnJvYWRjYXN0T25pb25SZW1vdmUnLCBvYmopO1xyXG4gICAgfTtcclxuXHJcbiAgICBTb2NrZXQub24oJ29uQnJvYWRjYXN0T25pb25BZGQnLCBmdW5jdGlvbiAocmV0b3Jubykge1xyXG4gICAgICAgIHZtLnN0YWtlaG9sZGVyTGlzdC5wdXNoKHJldG9ybm8pO1xyXG4gICAgfSk7XHJcblxyXG4gICAgJHNjb3BlLmFkZFBvc3RJdCA9IGZ1bmN0aW9uKGUsY2FtYWRhKSB7XHJcblxyXG5cclxuICAgICAgICB2YXIgbmV3U3Rha2Vob2xkZXIgPVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgXCJvbmlvbmxheWVyXCI6IGNhbWFkYSxcclxuICAgICAgICAgICAgXCJuYW1lXCI6IFwiXCIsXHJcbiAgICAgICAgICAgIFwiZGVzY3JpcHRpb25cIjogXCJcIixcclxuICAgICAgICAgICAgXCJvcGVuRWRpdFwiOiB0cnVlLFxyXG4gICAgICAgICAgICBcInhcIjogZS5wYWdlWCArICdweCcsXHJcbiAgICAgICAgICAgIFwieVwiOiBlLnBhZ2VZICsgJ3B4J1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICBTb2NrZXQuZW1pdCgnYnJvYWRjYXN0T25pb25BZGQnLCBuZXdTdGFrZWhvbGRlcik7XHJcbiAgICB9O1xyXG5cclxuICAgIHZtLmFjZW5kZSA9IGZ1bmN0aW9uKGV2dCkge1xyXG4gICAgICAgIGV2dC50YXJnZXQuc2V0QXR0cmlidXRlKFwib3BhY2l0eVwiLCBcIjAuOFwiKTtcclxuICAgIH1cclxuICAgIHZtLmFwYWdhID0gZnVuY3Rpb24oZXZ0KSB7XHJcbiAgICAgICAgZXZ0LnRhcmdldC5zZXRBdHRyaWJ1dGUoXCJvcGFjaXR5XCIsIFwiMS4wXCIpO1xyXG4gICAgfVxyXG5cclxufSIsIi8qKlxyXG4gKiBDcmVhdGVkIGJ5IEpPU0VWQUxERVJMRUkgb24gMjIvMDcvMjAxNS5cclxuICovXHJcblxyXG5hbmd1bGFyLm1vZHVsZSgnYXBwJylcclxuICAgIC5jb250cm9sbGVyKCd2YWx1ZUlkZW50aWZpY2F0aW9uRnJhbWVDb250cm9sbGVyJywgdmFsdWVJZGVudGlmaWNhdGlvbkZyYW1lQ29udHJvbGxlcik7XHJcblxyXG5cclxuZnVuY3Rpb24gdmFsdWVJZGVudGlmaWNhdGlvbkZyYW1lQ29udHJvbGxlcigkd2luZG93LHByb2JsZW1TZXJ2aWNlLHRvYXN0QXBwLFNvY2tldCl7XHJcblxyXG5cclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgIHNlbGYuaW5Qcm9jZXNzaW5nID0gdHJ1ZTtcclxuXHJcbiAgICBzZWxmLmlkUHJvYmxlbSA9IFwiXCI7XHJcbiAgICBzZWxmLnVzZXJlbWFpbCA9IFwiXCI7XHJcbiAgICBzZWxmLm5ld3ZhbHVlcyA9IFwiXCI7XHJcbiAgICBzZWxmLnN0YWtlaG9sZGVyTGlzdCA9IFtcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIG9uaW9ubGF5ZXI6IFwiQ29tbXVuaXR5XCIsXHJcbiAgICAgICAgICAgIHN0YWtlaG9sZGVyczogW11cclxuICAgICAgICB9LFxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgb25pb25sYXllcjogXCJNYXJrZXRcIixcclxuICAgICAgICAgICAgc3Rha2Vob2xkZXJzOiBbXVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBvbmlvbmxheWVyOiBcIlNvdXJjZVwiLFxyXG4gICAgICAgICAgICBzdGFrZWhvbGRlcnM6IFtdXHJcbiAgICAgICAgfSxcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIG9uaW9ubGF5ZXI6IFwiQ29udHJ1aWJ1aXRpb25cIixcclxuICAgICAgICAgICAgc3Rha2Vob2xkZXJzOiBbXVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBvbmlvbmxheWVyOiBcIlRlY2huaWNvXCIsXHJcbiAgICAgICAgICAgIHN0YWtlaG9sZGVyczogW11cclxuICAgICAgICB9XHJcblxyXG4gICAgXTtcclxuXHJcbiAgICBzZWxmLnN1Z2VzdGlvblZhbHVlcyA9IFwiXCI7XHJcblxyXG4gICAgc2VsZi5zdWdlc3Rpb25WYWx1ZXNBcnJheSA9IFtcclxuICAgICAgICAnQWNlc3NpYmlsaWRhZGUnLCAnQWRhcHRhYmlsaWRhZGUnLCAnRXN077+9dGljYScsICdBdXRvbm9taWEnLCAnRGlzcG9uaWJpbGlkYWRlJywgJ0NvbnNjae+/vW5jaWEnLCAnQ29sYWJvcmHvv73vv71vJyxcclxuICAgICAgICAnQ29udmVyc2Hvv73vv71vJywgJ0Vtb++/ve+/vW8gZSBBZmV0bycsICdHcnVwb3MnLCAnSWRlbnRpZGFkZScsICdDb25zZW50aW1lbnRvIGluZm9ybWFkbycsICdNZXRhLWNvbXVuaWNh77+977+9bycsICdOb3JtYXMnLFxyXG4gICAgICAgICdPYmpldG8nLCAnUG9ydGFiaWxpZGFkZScsICdQcmVzZW7vv71hJywgJ1ByaXZhY2lkYWRlJywgJ1Byb3ByaWVkYWRlJywgJ1JlY2lwcm9jaWRhZGUsIFJlbGFjaW9uYW1lbnRvLCBSZXB1dGHvv73vv71vLCcgK1xyXG4gICAgICAgICdFc2NhbGFiaWxpZGFkZScsICdTZWd1cmFu77+9YScsICdDb21wYXJ0aWxoYW1lbnRvJywgJ0NvbmZpYW7vv71hJywgJ1VzYWJpbGlkYWRlJywgJ1Zpc2liaWxpZGFkZSdcclxuICAgIF07XHJcblxyXG5cclxuICAgIHNlbGYuaW5pdFZhbHVlSWRlbnRpZmljYXRpb25GcmFtZSA9IGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgc2VsZi5pZHByb2JsZW0gPSAkd2luZG93LmxvY2FsU3RvcmFnZS5nZXRJdGVtKCdwcm9ibGVtaWQnKTtcclxuICAgICAgICBwcm9ibGVtU2VydmljZS5nZXRvbmlvbihzZWxmLmlkcHJvYmxlbSlcclxuICAgICAgICAgICAgLnN1Y2Nlc3MoZnVuY3Rpb24oZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgaWYoZGF0YS5zdWNjZXNzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYoZGF0YS5zdGFrZWhvbGRlcnMubGVuZ3RoID4gMCl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IodmFyIGsgPSAxOyBrIDwgc2VsZi5zdWdlc3Rpb25WYWx1ZXNBcnJheS5sZW5ndGg7IGsrKyl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5zdWdlc3Rpb25WYWx1ZXMgKz0gc2VsZi5zdWdlc3Rpb25WYWx1ZXNBcnJheVtrXSArICBcIiwgXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5zdWdlc3Rpb25WYWx1ZXNbc2VsZi5zdWdlc3Rpb25WYWx1ZXNBcnJheVtzZWxmLnN1Z2VzdGlvblZhbHVlc0FycmF5Lmxlbmd0aC0xXV0gKyBcIi5cIjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvcih2YXIgaSA9IDA7IGkgPCBkYXRhLnN0YWtlaG9sZGVycy5sZW5ndGg7IGkrKyl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yKHZhciBqID0gMDsgaiA8IHNlbGYuc3Rha2Vob2xkZXJMaXN0Lmxlbmd0aDsgaisrKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHN0YWtlaG9sZGVyID0ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2lkIDogZGF0YS5zdGFrZWhvbGRlcnNbaV0uX2lkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25pb25sYXllciA6IGRhdGEuc3Rha2Vob2xkZXJzW2ldLm9uaW9ubGF5ZXIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZXMgOiBkYXRhLnN0YWtlaG9sZGVyc1tpXS52YWx1ZXMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lIDogZGF0YS5zdGFrZWhvbGRlcnNbaV0ubmFtZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uIDogZGF0YS5zdGFrZWhvbGRlcnNbaV0uZGVzY3JpcHRpb24sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcGVuRWRpdCA6IGRhdGEuc3Rha2Vob2xkZXJzW2ldLm9wZW5FZGl0LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3VmFsdWVzIDogW11cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihkYXRhLnN0YWtlaG9sZGVyc1tpXS5vbmlvbmxheWVyID09IHNlbGYuc3Rha2Vob2xkZXJMaXN0W2pdLm9uaW9ubGF5ZXIpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5zdGFrZWhvbGRlckxpc3Rbal0uc3Rha2Vob2xkZXJzLnB1c2goc3Rha2Vob2xkZXIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5pblByb2Nlc3NpbmcgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICAgICAgICAgIHRvYXN0QXBwLmVycm9yTWVzc2FnZShkYXRhLm1lc3NhZ2UpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgfTtcclxuXHJcbiAgICBTb2NrZXQub24oJ29uQnJvYWRjYXN0T25pb25TYXZlJywgZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICBhbmd1bGFyLmZvckVhY2goc2VsZi5zdGFrZWhvbGRlckxpc3QsIGZ1bmN0aW9uIChzdGFrZWhvbGRlcikge1xyXG4gICAgICAgICAgICBpZiAoc3Rha2Vob2xkZXIuX2lkID09IGRhdGEuX2lkKXtcclxuICAgICAgICAgICAgICAgIHN0YWtlaG9sZGVyLm9uaW9ubGF5ZXIgPSBkYXRhLm9uaW9ubGF5ZXI7XHJcbiAgICAgICAgICAgICAgICBzdGFrZWhvbGRlci52YWx1ZXMgPSBkYXRhLnZhbHVlcztcclxuICAgICAgICAgICAgICAgIHN0YWtlaG9sZGVyLm5hbWUgPSBkYXRhLm5hbWU7XHJcbiAgICAgICAgICAgICAgICBzdGFrZWhvbGRlci5kZXNjcmlwdGlvbiA9IGRhdGEuZGVzY3JpcHRpb247XHJcbiAgICAgICAgICAgICAgICBzdGFrZWhvbGRlci5vcGVuRWRpdCA9IGRhdGEub3BlbkVkaXQ7XHJcbiAgICAgICAgICAgICAgICBzdGFrZWhvbGRlci5uZXdWYWx1ZXMgPSBbXTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcblxyXG4gICAgc2VsZi5zZXRTdWdnZXN0aW9uU2hvdyA9IGZ1bmN0aW9uKHN0YWtlaG9sZGVyKXtcclxuICAgICAgICBzdGFrZWhvbGRlci5vcGVuRWRpdCA9IHRydWU7XHJcbiAgICB9O1xyXG5cclxuICAgIHNlbGYubGVhdmVTdWdnZXN0aW9uU2hvdyA9IGZ1bmN0aW9uKHN0YWtlaG9sZGVyKXtcclxuICAgICAgICBzdGFrZWhvbGRlci5vcGVuRWRpdCA9IGZhbHNlO1xyXG4gICAgfTtcclxuXHJcblxyXG4gICAgc2VsZi5yZW1vdmVWYWx1ZUlkZW50aWNhdGlvbiA9IGZ1bmN0aW9uKHZhbHVlLHN0YWtlaG9sZGVyKXtcclxuICAgICAgICB2YXIgbmV3TGlzdCA9IFtdO1xyXG4gICAgICAgIGZvcih2YXIgaSA9IDA7IGkgPCBzdGFrZWhvbGRlci52YWx1ZXMubGVuZ3RoOyBpKyspe1xyXG4gICAgICAgICAgICBpZihzdGFrZWhvbGRlci52YWx1ZXNbaV0gIT0gdmFsdWUpe1xyXG4gICAgICAgICAgICAgICAgbmV3TGlzdC5wdXNoKHN0YWtlaG9sZGVyLnZhbHVlc1tpXSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgc3Rha2Vob2xkZXIudmFsdWVzID0gbmV3TGlzdDtcclxuICAgICAgICBTb2NrZXQuZW1pdCgnYnJvYWRjYXN0T25pb25TYXZlJywgc3Rha2Vob2xkZXIpO1xyXG4gICAgfVxyXG5cclxuICAgIHNlbGYuc2V0VmFsdWVJZGVudGljYXRpb24gPSBmdW5jdGlvbihzdGFrZWhvbGRlcikge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKHN0YWtlaG9sZGVyLm5ld1ZhbHVlcyk7XHJcblxyXG4gICAgICAgIGlmKChzdGFrZWhvbGRlci5uZXdWYWx1ZXMgPT09IFwiXCIpIHx8IChzdGFrZWhvbGRlci5uZXdWYWx1ZXMgPT09IHVuZGVmaW5lZCkpe1xyXG4gICAgICAgICAgICB0b2FzdEFwcC5lcnJvck1lc3NhZ2UoXCJWYWxvciBu77+9byBlc3BlY2lmaWNhZG8uXCIpO1xyXG4gICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICB2YXIgdmFsdWVzTGlzdCA9IHN0YWtlaG9sZGVyLm5ld1ZhbHVlcy5zcGxpdCgnLCcpO1xyXG4gICAgICAgICAgICBmb3IodmFyIGk9MDsgaSA8IHZhbHVlc0xpc3QubGVuZ3RoOyBpKyspe1xyXG4gICAgICAgICAgICAgICAgc3Rha2Vob2xkZXIudmFsdWVzLnB1c2godmFsdWVzTGlzdFtpXSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY29uc29sZS5sb2coc3Rha2Vob2xkZXIudmFsdWVzKTtcclxuICAgICAgICAgICAgc3Rha2Vob2xkZXIubmV3VmFsdWVzID0gXCJcIjtcclxuICAgICAgICAgICAgc3Rha2Vob2xkZXIub3BlbkVkaXQgPSBmYWxzZTtcclxuICAgICAgICAgICAgU29ja2V0LmVtaXQoJ2Jyb2FkY2FzdE9uaW9uU2F2ZScsIHN0YWtlaG9sZGVyKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgfTtcclxuXHJcblxyXG5cclxufVxyXG4iLCIvKipcclxuICogQ3JlYXRlZCBieSBKT1NFVkFMREVSTEVJIG9uIDI1LzA2LzIwMTUuXHJcbiAqL1xyXG4oZnVuY3Rpb24gKCkge1xyXG4gICAgXCJ1c2Ugc3RyaWN0XCI7XHJcblxyXG5hbmd1bGFyXHJcbiAgICAubW9kdWxlKCdhcHAnLFsndG9hc3RTZXJ2aWNlJywndGV4dEFuZ3VsYXInLCdsdWVnZy5kaXJlY3RpdmVzJywgJ0Ryb3BEU0MnLCdhdXRoU2VydmljZScsJ3VpLnJvdXRlcicsJ25nTWF0ZXJpYWwnLCduZ01kSWNvbnMnLCduZ0Nvb2tpZXMnLCdwYXNjYWxwcmVjaHQudHJhbnNsYXRlJ10pXHJcbiAgICAgICAgLmNvbmZpZyhmdW5jdGlvbigkaHR0cFByb3ZpZGVyKSB7XHJcbiAgICAgICAgICAgICRodHRwUHJvdmlkZXIuaW50ZXJjZXB0b3JzLnB1c2goJ0F1dGhJbnRlcmNlcHRvcicpO1xyXG4gICAgICAgIH0pXHJcblxyXG59KSgpO1xyXG5cclxuXHJcbiIsIi8qKlxyXG4gKiBDcmVhdGVkIGJ5IEpPU0VWQUxERVJMRUkgb24gMjUvMDYvMjAxNS5cclxuICovXHJcblxyXG4oZnVuY3Rpb24oKXtcclxuXHJcbid1c2Ugc3RyaWN0JztcclxuXHJcbmFuZ3VsYXIubW9kdWxlKCdhcHAnKVxyXG4gICAgLmNvbmZpZyhyb3V0ZXMpO1xyXG5cclxuZnVuY3Rpb24gcm91dGVzKCRzdGF0ZVByb3ZpZGVyLCAkdXJsUm91dGVyUHJvdmlkZXIpIHtcclxuXHJcbiAgICAkc3RhdGVQcm92aWRlci5zdGF0ZSgnaW5pdCcsIHtcclxuICAgICAgICB1cmw6ICcvJyxcclxuICAgICAgICB0ZW1wbGF0ZVVybDogJ3ZpZXdzL3BhZ2VzL2luaXRwYWdlLmh0bWwnLFxyXG4gICAgICAgIGNvbnRyb2xsZXI6ICdsb2dpbkNvbnRyb2xsZXIgYXMgdm0nXHJcbiAgICAgICAgfSlcclxuICAgICAgICAuc3RhdGUoJ2luaXQubG9naW4nLCB7XHJcbiAgICAgICAgICAgIHVybDogJ2xvZ2luJyxcclxuICAgICAgICAgICAgdmlld3M6IHtcclxuICAgICAgICAgICAgICAgICdjb250ZW50LXRhYic6IHtcclxuICAgICAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ3ZpZXdzL3BhZ2VzL3VzZXJsb2dpbi5odG1sJyxcclxuICAgICAgICAgICAgICAgICAgICBjb250cm9sbGVyOiAnbG9naW5Db250cm9sbGVyIGFzIHZtJ1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxuICAgICAgICAuc3RhdGUoJ2luaXQuc2lnbnVwJywge1xyXG4gICAgICAgICAgICB1cmw6ICdzaWdudXAnLFxyXG4gICAgICAgICAgICAgICB2aWV3czoge1xyXG4gICAgICAgICAgICAgICAgJ2NvbnRlbnQtdGFiJzoge1xyXG4gICAgICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAndmlld3MvcGFnZXMvc2lnbnVwLmh0bWwnLFxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdzaWdudXBDb250cm9sbGVyIGFzIHZtJ1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxuICAgICAgICAuc3RhdGUoJ2luaXQucmVzY3VlcGFzc3dvcmQnLCB7XHJcbiAgICAgICAgICAgIHVybDogJ3Jlc2N1ZXBhc3N3b3JkJyxcclxuICAgICAgICAgICAgdmlld3M6IHtcclxuICAgICAgICAgICAgICAgICdjb250ZW50LXRhYic6IHtcclxuICAgICAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ3ZpZXdzL3BhZ2VzL3Jlc2N1ZXBhc3N3b3JkLmh0bWwnLFxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdzaWdudXBDb250cm9sbGVyIGFzIHZtJ1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxuICAgICAgICAuc3RhdGUoJ3N0YXJ0cHJvYmxlbScsIHtcclxuICAgICAgICAgICAgdXJsOiAnL3N0YXJ0cHJvYmxlbScsXHJcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAndmlld3MvcGFnZXMvc3RhcnRwcm9ibGVtLmh0bWwnLFxyXG4gICAgICAgICAgICBjb250cm9sbGVyOiAnc3RhcnRQcm9ibGVtQ29udHJvbGxlciBhcyB2bSdcclxuXHJcbiAgICAgICAgfSlcclxuXHJcbiAgICAgICAgLnN0YXRlKCduZXdwYXNzd29yZCcsIHtcclxuICAgICAgICAgICAgdXJsOiAnL25ld3Bhc3N3b3JkLzpteXRva2VuJyxcclxuICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICd2aWV3cy9wYWdlcy9uZXdwYXNzd29yZC5odG1sJyxcclxuICAgICAgICAgICAgY29udHJvbGxlcjogJ3NpZ251cENvbnRyb2xsZXIgYXMgdm0nLFxyXG4gICAgICAgIH0pXHJcblxyXG5cclxuICAgICAgICAuc3RhdGUoJ3Byb2JsZW0nLCB7XHJcbiAgICAgICAgICAgIHVybDogJy9wcm9ibGVtJyxcclxuICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICd2aWV3cy9wYWdlcy9wcm9ibGVtLmh0bWwnLFxyXG4gICAgICAgICAgICBjb250cm9sbGVyOiAnbWVudVByb2JsZW1Db250cm9sbGVyIGFzIHZtJ1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLnN0YXRlKCdwcm9ibGVtLmRzY3JlcG9ydCcsIHtcclxuICAgICAgICAgICAgdXJsOiAnL2RzY3JlcG9ydCcsXHJcbiAgICAgICAgICAgIHZpZXdzOiB7XHJcbiAgICAgICAgICAgICAgICAncHJvYmxlbS1kZXNjcmlwdGlvbic6IHtcclxuICAgICAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ3ZpZXdzL3BhZ2VzL2RzY3JlcG9ydC5odG1sJyxcclxuICAgICAgICAgICAgICAgICAgICBjb250cm9sbGVyOiAnZHNjUmVwb3J0Q29udHJvbGxlciBhcyB2bSdcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLnN0YXRlKCdwcm9ibGVtLmRlc2NyaXB0aW9uJywge1xyXG4gICAgICAgICAgICB1cmw6ICcvZGVzY3JpcHRpb24nLFxyXG4gICAgICAgICAgICB2aWV3czoge1xyXG4gICAgICAgICAgICAgICAgJ3Byb2JsZW0tZGVzY3JpcHRpb24nOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICd2aWV3cy9wYWdlcy9wcm9ibGVtZGVzY3JpcHRpb24uaHRtbCcsXHJcbiAgICAgICAgICAgICAgICAgICAgY29udHJvbGxlcjogJ2VkaXRQcm9ibGVtQ29udHJvbGxlciBhcyB2bSdcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLnN0YXRlKCdwcm9ibGVtLmNvbGxhYm9yYXRvcnMnLCB7XHJcbiAgICAgICAgICAgIHVybDogJy9jb2xsYWJvcmF0b3JzJyxcclxuICAgICAgICAgICAgdmlld3M6IHtcclxuICAgICAgICAgICAgICAgICdwcm9ibGVtLWRlc2NyaXB0aW9uJzoge1xyXG4gICAgICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAndmlld3MvcGFnZXMvY29sbGFib3JhdG9ycy5odG1sJyxcclxuICAgICAgICAgICAgICAgICAgICBjb250cm9sbGVyOiAnY29udHJvbGxlckNvbGxhYm9yYXRvcnMgYXMgdm0nXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KVxyXG4gICAgICAgIC5zdGF0ZSgncHJvYmxlbS5zdGFrZWhvbGRlcnMnLCB7XHJcbiAgICAgICAgICAgIHVybDogJ3N0YWtlaG9sZGVycycsXHJcbiAgICAgICAgICAgIHZpZXdzOiB7XHJcbiAgICAgICAgICAgICAgICAnZHNjLWFydGlmYWN0Jzoge1xyXG4gICAgICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAndmlld3MvcGFnZXMvc3Rha2Vob2xkZXJzLmh0bWwnLFxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdzdGFrZWhvbGRlckNvbnRyb2xsZXIgYXMgdm0nXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KVxyXG4gICAgICAgIC5zdGF0ZSgncHJvYmxlbS5ldmFsdWF0aW9uZnJhbWV3b3JrJywge1xyXG4gICAgICAgICAgICAgICAgdXJsOiAnZXZhbHVhdGlvbmZyYW1ld29yaycsXHJcbiAgICAgICAgICAgICAgICB2aWV3czoge1xyXG4gICAgICAgICAgICAgICAgICAgICdkc2MtYXJ0aWZhY3QnOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAndmlld3MvcGFnZXMvZXZhbHVhdGlvbmZyYW1ld29yay5odG1sJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29udHJvbGxlcjogJ2V2YWx1YXRpb25mcmFtZXdvcmtDb250cm9sbGVyIGFzIHZtJ1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSlcclxuXHJcbiAgICAgICAgLnN0YXRlKCdwcm9ibGVtLnNlbWlvdGljZnJhbWV3b3JrJywge1xyXG4gICAgICAgICAgICAgICAgdXJsOiAnc2VtaW90aWNmcmFtZXdvcmsnLFxyXG4gICAgICAgICAgICAgICAgdmlld3M6IHtcclxuICAgICAgICAgICAgICAgICAgICAnZHNjLWFydGlmYWN0Jzoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ3ZpZXdzL3BhZ2VzL3NlbWlvdGljZnJhbWV3b3JrLmh0bWwnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb250cm9sbGVyOiAnc2VtaW90aWNmcmFtZXdvcmtDb250cm9sbGVyIGFzIHZtJ1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAuc3RhdGUoJ3Byb2JsZW0uY2FyZicsIHtcclxuICAgICAgICAgICAgICAgIHVybDogJ2NhcmYnLFxyXG4gICAgICAgICAgICAgICAgdmlld3M6IHtcclxuICAgICAgICAgICAgICAgICAgICAnZHNjLWFydGlmYWN0Jzoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ3ZpZXdzL3BhZ2VzL2NhcmYuaHRtbCcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdjYXJmQ29udHJvbGxlciBhcyB2bSdcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgLnN0YXRlKCdwcm9ibGVtLnZpZicsIHtcclxuICAgICAgICAgICAgdXJsOiAndmlmJyxcclxuICAgICAgICAgICAgdmlld3M6IHtcclxuICAgICAgICAgICAgICAgICdkc2MtYXJ0aWZhY3QnOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICd2aWV3cy9wYWdlcy92aWYuaHRtbCcsXHJcbiAgICAgICAgICAgICAgICAgICAgY29udHJvbGxlcjogJ3ZhbHVlSWRlbnRpZmljYXRpb25GcmFtZUNvbnRyb2xsZXIgYXMgdm0nXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcblxyXG4gICAgICAgICR1cmxSb3V0ZXJQcm92aWRlci5vdGhlcndpc2UoJy9sb2dpbicpO1xyXG59XHJcblxyXG59KSgpOyIsbnVsbCwiLyoqXHJcbiAqIENyZWF0ZWQgYnkgSk9TRVZBTERFUkxFSSBvbiAxOS8wNi8yMDE1LlxyXG4gKi9cclxuKGZ1bmN0aW9uKCl7XHJcblxyXG4ndXNlIHN0cmljdCc7XHJcblxyXG4gICAgYW5ndWxhclxyXG4gICAgLm1vZHVsZSgnYXBwJylcclxuICAgIC5jb25maWcoaW5pdExhbmd1YWdlKVxyXG4gICAgLmNvbnRyb2xsZXIoJ2xhbmd1YWdlQ29udHJvbGxlcicsbGFuZ3VhZ2VDb250cm9sbGVyKVxyXG4gICAgLmRpcmVjdGl2ZSgnY2hhbmdlTGFuZ3VhZ2UnLGNoYW5nZUxhbmd1YWdlKTtcclxuXHJcbmluaXRMYW5ndWFnZS4kaW5qZWN0ID0gWyckdHJhbnNsYXRlUHJvdmlkZXInXTtcclxubGFuZ3VhZ2VDb250cm9sbGVyLiRpbmplY3QgPSBbJyR0cmFuc2xhdGUnXTtcclxuXHJcbmZ1bmN0aW9uIGluaXRMYW5ndWFnZSAoJHRyYW5zbGF0ZVByb3ZpZGVyKSB7XHJcbiAgICAgICAgJHRyYW5zbGF0ZVByb3ZpZGVyLnVzZVN0YXRpY0ZpbGVzTG9hZGVyKHtcclxuICAgICAgICAgICAgcHJlZml4OiAnYXBwL2xhbmd1YWdlL2xhbmctJyxcclxuICAgICAgICAgICAgc3VmZml4OiAnLmpzb24nXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgJHRyYW5zbGF0ZVByb3ZpZGVyLnByZWZlcnJlZExhbmd1YWdlKCdlbicpO1xyXG4gICAgICAgICR0cmFuc2xhdGVQcm92aWRlci51c2VTYW5pdGl6ZVZhbHVlU3RyYXRlZ3koJ2VzY2FwZWQnKTtcclxuICAgICAgICAkdHJhbnNsYXRlUHJvdmlkZXIudXNlTG9jYWxTdG9yYWdlKCk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGxhbmd1YWdlQ29udHJvbGxlciAoJHRyYW5zbGF0ZSkge1xyXG4gICAgICAgICAgICB0aGlzLnNldExhbmcgPSBmdW5jdGlvbihsYW5nS2V5KSB7XHJcbiAgICAgICAgICAgICR0cmFuc2xhdGUudXNlKGxhbmdLZXkpO1xyXG4gICAgICAgIH07XHJcbn1cclxuXHJcblxyXG5cclxuXHJcbmZ1bmN0aW9uIGNoYW5nZUxhbmd1YWdlKCl7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIHRlbXBsYXRlVXJsIDogXCJhcHAvbGFuZ3VhZ2UvY2hhbmdlTGFuZ3VhZ2UuaHRtbFwiLFxyXG4gICAgICAgIHJlc3RyaWN0OiBcIkVcIlxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcblxyXG59KSgpOyIsIi8qKlxyXG4gKiBDcmVhdGVkIGJ5IEpPU0VWQUxERVJMRUkgb24gMTQvMDcvMjAxNS5cclxuICovXHJcbihmdW5jdGlvbigpe1xyXG4gICAgXCJ1c2Ugc3RyaWN0XCI7XHJcblxyXG4gICAgYW5ndWxhci5tb2R1bGUoJ2FwcCcpXHJcbiAgICAgICAgLmNvbnRyb2xsZXIoXCJjYXJmQ29udHJvbGxlclwiLGNhcmZDb250cm9sbGVyKTtcclxuXHJcbiAgICBmdW5jdGlvbiBjYXJmQ29udHJvbGxlcigkd2luZG93LFNvY2tldCxwcm9ibGVtU2VydmljZSx0b2FzdEFwcCl7XHJcbiAgICAgICAgdmFyIHZtID0gdGhpcztcclxuICAgICAgICB2bS5pZFByb2JsZW0gPSBcIlwiO1xyXG4gICAgICAgIHZtLmluUHJvY2Vzc2luZyA9IHRydWU7XHJcbiAgICAgICAgdm0udmFsdWVMaXN0ID0gW107XHJcbiAgICAgICAgdm0uc3Rha2Vob2xkZXJMaXN0ID0gW107XHJcbiAgICAgICAgdm0ubG9jYWxTdGFrZWhvbGRlcnMgPSBbXTtcclxuICAgICAgICB2bS5jYXJmID0ge1xyXG4gICAgICAgICAgICBwbXM6IFwiXCIsXHJcbiAgICAgICAgICAgIHZhbHVlczogW10sXHJcbiAgICAgICAgICAgIHByaW9yaXR5OiBcIlwiLFxyXG4gICAgICAgICAgICByZXF1aXJlbWVudDogXCJcIixcclxuICAgICAgICAgICAgc3Rha2Vob2xkZXJzOiBbXVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIHZtLmluaXRDYXJmID0gaW5pdENhcmY7XHJcbiAgICAgICAgdm0uY2FyZkxpc3QgPSBbXTtcclxuICAgICAgICB2bS5jYXJmUHJpb3JpdHlMaXN0ID0gW107XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGluaXRDYXJmKCl7XHJcbiAgICAgICAgICAgIHZtLmlkUHJvYmxlbSA9ICR3aW5kb3cubG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3Byb2JsZW1pZCcpO1xyXG4gICAgICAgICAgICBwcm9ibGVtU2VydmljZS5nZXRjYXJmKHZtLmlkUHJvYmxlbSlcclxuICAgICAgICAgICAgICAgIC5zdWNjZXNzKGZ1bmN0aW9uKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZihkYXRhLnN1Y2Nlc3MpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdm0ubG9jYWxTdGFrZWhvbGRlcnMgPSBkYXRhLnN0YWtlaG9sZGVycztcclxuICAgICAgICAgICAgICAgICAgICAgICAgdm0uc3Rha2Vob2xkZXJMaXN0ID0gdm0ubG9jYWxTdGFrZWhvbGRlcnM7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZtLmNhcmZMaXN0ID0gZGF0YS5jYXJmO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2bS5jYXJmUHJpb3JpdHlMaXN0ID0gdm0ubG9jYWxQcmlvcml0eUxpc3Q7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgdm0uaW5Qcm9jZXNzaW5nID0gZmFsc2U7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgZnVuY3Rpb24gcmVzZXRDYXJmKCl7XHJcbiAgICAgICAgICAgIHZtLmNhcmYgPSB7XHJcbiAgICAgICAgICAgICAgICBfaWQ6IFwiXCIsXHJcbiAgICAgICAgICAgICAgICBwbXM6IFwiXCIsXHJcbiAgICAgICAgICAgICAgICB2YWx1ZXM6IFtdLFxyXG4gICAgICAgICAgICAgICAgcHJpb3JpdHk6IFwiXCIsXHJcbiAgICAgICAgICAgICAgICByZXF1aXJlbWVudDogXCJcIixcclxuICAgICAgICAgICAgICAgIHN0YWtlaG9sZGVyczogW11cclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgdm0udmFsdWVMaXN0ID0gW107XHJcblxyXG4gICAgICAgIH1cclxuICAgICAgICBTb2NrZXQub24oJ29uQnJvYWRjYXN0Q0FSRmFkZCcsIGZ1bmN0aW9uIChjYXJmKSB7XHJcbiAgICAgICAgICAgIHZtLmNhcmZMaXN0LnB1c2goY2FyZik7XHJcbiAgICAgICAgICAgIHJlc2V0Q2FyZigpO1xyXG4gICAgICAgICAgICB2bS5zdGFrZWhvbGRlckxpc3QgPSB2bS5sb2NhbFN0YWtlaG9sZGVycztcclxuICAgICAgICAgICAgdm0uY2FyZlByaW9yaXR5TGlzdCA9IHZtLmxvY2FsUHJpb3JpdHlMaXN0O1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB2bS5hZGRwbXN2YWx1ZSA9IGZ1bmN0aW9uKGNhcmYpe1xyXG5cclxuICAgICAgICAgICAgaWYoY2FyZi5wbXMgPT0gXCJcIil7XHJcbiAgICAgICAgICAgICAgICB0b2FzdEFwcC5lcnJvck1lc3NhZ2UoXCJTZWxlY3QgUE1TXCIpO1xyXG4gICAgICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgICAgIGlmKGNhcmYudmFsdWVzLmxlbmd0aCA8IDEgKXtcclxuICAgICAgICAgICAgICAgICAgICB0b2FzdEFwcC5lcnJvck1lc3NhZ2UoXCJTZWxlY3Qgb25lIG9yIG1vcmUgVmFsdWVcIik7XHJcbiAgICAgICAgICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgICAgICAgICBpZihjYXJmLnN0YWtlaG9sZGVycy5sZW5ndGggPCAxKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdG9hc3RBcHAuZXJyb3JNZXNzYWdlKFwiU2VsZWN0IG9uZSBvciBtb3JlIFN0YWtlaG9sZGVyKHMpXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZihjYXJmLnByaW9yaXR5ID09IFwiXCIpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9hc3RBcHAuZXJyb3JNZXNzYWdlKFwiU2VsZWN0IHByaW9yaXR5IFtMb3csIE1lZGl1bSBvciBIaWdoXVwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBTb2NrZXQuZW1pdCgnYnJvYWRjYXN0Q0FSRmFkZCcsIGNhcmYpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdm0uc3Rha2Vob2xkZXJMaXN0ID0gW107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2bS5jYXJmUHJpb3JpdHlMaXN0ID0gW107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgU29ja2V0Lm9uKCdvbkJyb2FkY2FzdENBUkZyZW1vdmUnLCBmdW5jdGlvbiAoaWQpIHtcclxuICAgICAgICAgICAgdm0uY2FyZkxpc3Quc3BsaWNlKGlkLDEpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB2bS5yZW1vdmVDQVJGID0gZnVuY3Rpb24oaW5kZXgsY2FyZil7XHJcbiAgICAgICAgICAgIHZhciBvYmogPSB7XHJcbiAgICAgICAgICAgICAgICBpbmRleDogaW5kZXgsXHJcbiAgICAgICAgICAgICAgICBjYXJmOiBjYXJmXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgU29ja2V0LmVtaXQoJ2Jyb2FkY2FzdENBUkZyZW1vdmUnLCBvYmopO1xyXG4gICAgICAgIH1cclxuXHJcblxyXG4gICAgICAgIHZtLnNlbGVjdFBNU1ZhbHVlID0gZnVuY3Rpb24ocG1zKXtcclxuICAgICAgICAgICAgaWYocG1zICE9IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgYW5ndWxhci5mb3JFYWNoKHZtLmNhcmZQTVNWYWx1ZSwgZnVuY3Rpb24gKHBtc192YWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChwbXNfdmFsdWUucG1zID09IHBtcykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2bS5jYXJmLnZhbHVlcyA9IFtdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2bS52YWx1ZUxpc3QgPSBwbXNfdmFsdWUudmFsdWVzO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHZtLnNldFByaW90aXR5ID0gZnVuY3Rpb24ocHJpb3JpdHkpe1xyXG4gICAgICAgICAgICB2bS5jYXJmLnByaW9yaXR5ID0gcHJpb3JpdHk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB2bS5hZGRMaXN0VmFsdWUgPSBmdW5jdGlvbihuZXd2YWx1ZSl7XHJcbiAgICAgICAgICAgaWYodm0uY2FyZi52YWx1ZXMubGVuZ3RoID09IDApe1xyXG4gICAgICAgICAgICAgICAgdm0uY2FyZi52YWx1ZXMucHVzaChuZXd2YWx1ZSk7XHJcbiAgICAgICAgICAgIH1lbHNlIHtcclxuICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB2bS5jYXJmLnZhbHVlcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgaWYgKG5ld3ZhbHVlID09IHZtLmNhcmYudmFsdWVzW2ldKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgdm0uY2FyZi52YWx1ZXMuc3BsaWNlKGksIDEpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICB2bS5jYXJmLnZhbHVlcy5wdXNoKG5ld3ZhbHVlKTtcclxuICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgdm0uYWRkU3Rha2Vob2xkZXIgPSBmdW5jdGlvbihuZXdTdGFrZWhvbGRlcil7XHJcbiAgICAgICAgICAgIGlmKHZtLmNhcmYuc3Rha2Vob2xkZXJzLmxlbmd0aCA9PSAwKXtcclxuICAgICAgICAgICAgICAgIHZtLmNhcmYuc3Rha2Vob2xkZXJzLnB1c2gobmV3U3Rha2Vob2xkZXIpO1xyXG4gICAgICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgICAgIGZvcih2YXIgaT0wOyBpIDwgdm0uY2FyZi5zdGFrZWhvbGRlcnMubGVuZ3RoOyBpKyspe1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKG5ld1N0YWtlaG9sZGVyID09IHZtLmNhcmYuc3Rha2Vob2xkZXJzW2ldKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdm0uY2FyZi5zdGFrZWhvbGRlcnMuc3BsaWNlKGksMSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB2bS5jYXJmLnN0YWtlaG9sZGVycy5wdXNoKG5ld1N0YWtlaG9sZGVyKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHZtLmxvY2FsUHJpb3JpdHlMaXN0ID0gWydMb3cnLCAnTWVkaXVtJywnSGlnaCddO1xyXG5cclxuICAgICAgICB2bS5jYXJmUE1TVmFsdWUgPSBbXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgXCJwbXNcIjogXCJJbnRlcmFjdGlvblwiLFxyXG4gICAgICAgICAgICAgICAgICAgIFwidmFsdWVzXCI6IFtcclxuICAgICAgICAgICAgICAgICAgICAgICAgXCJJZGVudGl0eVwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBcIk5vcm1zXCJcclxuICAgICAgICAgICAgICAgICAgICBdXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIFwicG1zXCI6IFwiQXNzb2NpYXRpb25cIixcclxuICAgICAgICAgICAgICAgICAgICBcInZhbHVlc1wiOiBbXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiQ29udmVyc2F0aW9uXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiR3JvdXBzXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiUmVsYXRpb25zaGlwXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiVHJ1c3RcIlxyXG4gICAgICAgICAgICAgICAgICAgIF1cclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgXCJwbXNcIjogXCJMZWFybmluZ1wiLFxyXG4gICAgICAgICAgICAgICAgICAgIFwidmFsdWVzXCI6IFtcclxuICAgICAgICAgICAgICAgICAgICAgICAgXCJNZXRhLWNvbW11bmljYXRpb25cIlxyXG4gICAgICAgICAgICAgICAgICAgIF1cclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgXCJwbXNcIjogXCJQbGF5XCIsXHJcbiAgICAgICAgICAgICAgICAgICAgXCJ2YWx1ZXNcIjogW1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBcIkFlc3RoZXRpY3NcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgXCJFbW90aW9uIGFuZCBBZmZlY3Rpb25cIlxyXG4gICAgICAgICAgICAgICAgICAgIF1cclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgXCJwbXNcIjogXCJQcm90ZWN0aW9uXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgXCJ2YWx1ZXNcIjogW1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBcIkluZm9ybWVkIGNvbnNlcnRcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgXCJSZXB1dGF0aW9uXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiU2VjdXJpdHlcIlxyXG4gICAgICAgICAgICAgICAgICAgIF1cclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgXCJwbXNcIjogXCJFeHBsb2l0YXRpb25cIixcclxuICAgICAgICAgICAgICAgICAgICBcInZhbHVlc1wiOiBbXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiQWNjZXNzaWJpbGl0eVwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBcIk9iamVjdFwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBcIlByb3BlcnR5IChvd25lcnNoaXApXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiVXNhYmlsaXR5XCJcclxuICAgICAgICAgICAgICAgICAgICBdXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIFwicG1zXCI6IFwiVGVwb3JhbGl0eVwiLFxyXG4gICAgICAgICAgICAgICAgICAgIFwidmFsdWVzXCI6IFtcclxuICAgICAgICAgICAgICAgICAgICAgICAgXCJBdmFpbGFiaWxpdHlcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgXCJBd2FyZW5lc3NcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgXCJQcmVzZW5jZVwiXHJcbiAgICAgICAgICAgICAgICAgICAgXVxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBcInBtc1wiOiBcIlRlcnJpdG9yaWFsaXR5XCIsXHJcbiAgICAgICAgICAgICAgICAgICAgXCJ2YWx1ZXNcIjogW1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBcIlBvcnRhYmlsaXR5XCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiUHJpdmFjeVwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBcIlNjYWxhYmlsaXR5XCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiVmlzaWJpbGl0eVwiXHJcbiAgICAgICAgICAgICAgICAgICAgXVxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBcInBtc1wiOiBcIkNsYXNzaWZpY2F0aW9uXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgXCJ2YWx1ZXNcIjogW1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBcIkF1dG9ub215XCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiQ29sbGFib3JhdGlvblwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBcIlNoYXJpbmdcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgXCJBZGFwdGFiaWxpdHlcIlxyXG4gICAgICAgICAgICAgICAgICAgIF1cclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgXCJwbXNcIjogXCJTdWJzaXN0ZW5jZVwiLFxyXG4gICAgICAgICAgICAgICAgICAgIFwidmFsdWVzXCI6IFtcclxuICAgICAgICAgICAgICAgICAgICAgICAgXCJSZWNpcHJvY2l0eVwiXHJcbiAgICAgICAgICAgICAgICAgICAgXVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBdXHJcbiAgICB9XHJcblxyXG59KSgpOyIsIi8qKlxyXG4gKiBDcmVhdGVkIGJ5IEpPU0VWQUxERVJMRUkgb24gMTAvMDcvMjAxNS5cclxuICovXHJcblxyXG5cclxuKGZ1bmN0aW9uKCl7XHJcbiAgICBcInVzZSBzdHJpY3RcIjtcclxuICAgIGFuZ3VsYXIubW9kdWxlKCdhcHAnKVxyXG4gICAgICAgIC5jb250cm9sbGVyKCdjb250cm9sbGVyQ29sbGFib3JhdG9ycycsIGNvbnRyb2xsZXJDb2xsYWJvcmF0b3JzKTtcclxuXHJcbiAgICBmdW5jdGlvbiBjb250cm9sbGVyQ29sbGFib3JhdG9ycygkd2luZG93LHByb2JsZW1TZXJ2aWNlLHRvYXN0QXBwKXtcclxuXHJcbiAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgICAgIHNlbGYuaWRQcm9ibGVtID0gXCJcIjtcclxuICAgICAgICBzZWxmLmNvbGxhYm9yYXRvcnMgPSBbXTtcclxuICAgICAgICBzZWxmLnVzZXJlbWFpbCA9IFwiXCI7XHJcblxyXG5cclxuICAgICAgICBzZWxmLmluaXRDb2xsYWJvcmF0b3JzID0gZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgc2VsZi5pZFByb2JsZW0gPSAkd2luZG93LmxvY2FsU3RvcmFnZS5nZXRJdGVtKCdwcm9ibGVtaWQnKTtcclxuICAgICAgICAgICAgc2VsZi51c2VyZW1haWwgPSAkd2luZG93LmxvY2FsU3RvcmFnZS5nZXRJdGVtKCd1c2VyZW1haWwnKTtcclxuICAgICAgICAgICAgcHJvYmxlbVNlcnZpY2UuZ2V0Y29sbGFib3JhdG9ycyhzZWxmLmlkUHJvYmxlbSlcclxuICAgICAgICAgICAgICAgIC5zdWNjZXNzKGZ1bmN0aW9uKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZihkYXRhLnN1Y2Nlc3MpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5jb2xsYWJvcmF0b3JzID0gZGF0YS5jb2xsYWJvcmF0b3JzO1xyXG4gICAgICAgICAgICAgICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0b2FzdEFwcC5lcnJvck1lc3NhZ2UoZGF0YS5tZXNzYWdlKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIHNlYXJjaENhbGxhYm9yYXRpb24oZW1haWwpe1xyXG4gICAgICAgICAgICBmb3IodmFyIGkgPSAwOyBpIDwgc2VsZi5jb2xsYWJvcmF0b3JzLmxlbmd0aDsgaSsrKXtcclxuICAgICAgICAgICAgICAgIGlmKGVtYWlsID09IHNlbGYuY29sbGFib3JhdG9yc1tpXS5lbWFpbCl7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHNlbGYuYWRkQ29sbGFib3JhdG9yID0gZnVuY3Rpb24oZW1haWwpe1xyXG4gICAgICAgICAgICBpZihzZWxmLnVzZXJlbWFpbCA9PSBlbWFpbCl7XHJcbiAgICAgICAgICAgICAgICB0b2FzdEFwcC5lcnJvck1lc3NhZ2Uoc2VsZi51c2VyZW1haWwgKyBcIiBpcyBlbWFpbCBvZiBvd25lci5cIik7XHJcbiAgICAgICAgICAgIH1lbHNlIHtcclxuICAgICAgICAgICAgICAgIGlmIChzZWFyY2hDYWxsYWJvcmF0aW9uKGVtYWlsKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRvYXN0QXBwLmVycm9yTWVzc2FnZShcIlVzdWFyaW8gQ2FkYXN0cmFkby5cIik7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBpbnZpdGUgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlkcHJvYmxlbTogc2VsZi5pZFByb2JsZW0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVtYWlsOiBlbWFpbFxyXG4gICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICAgICAgcHJvYmxlbVNlcnZpY2UuaW52aXRlKGludml0ZSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgLnN1Y2Nlc3MoZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkYXRhLnN1Y2Nlc3MpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmNvbGxhYm9yYXRvcnMgPSBkYXRhLmNvbGxhYm9yYXRvcnM7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvYXN0QXBwLmVycm9yTWVzc2FnZShkYXRhLm1lc3NhZ2UpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBzZWxmLnJlbW92ZUNvbGxhYm9yYXRvciA9IGZ1bmN0aW9uKHBlb3BsZSl7XHJcbiAgICAgICAgICAgIHZhciBvYmogPSB7XHJcbiAgICAgICAgICAgICAgICBpZHByb2JsZW06IHNlbGYuaWRQcm9ibGVtLFxyXG4gICAgICAgICAgICAgICAgZW1haWw6IHBlb3BsZS5lbWFpbFxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgIHByb2JsZW1TZXJ2aWNlLnJlbW92ZWNvbGxhYm9yYXRvcnMob2JqKVxyXG4gICAgICAgICAgICAgICAgLnN1Y2Nlc3MoZnVuY3Rpb24oZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKGRhdGEuc3VjY2Vzcykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0b2FzdEFwcC5lcnJvck1lc3NhZ2UoXCJDb2xhYm9yYWRvciBmb2kgcmVtb3ZpZG8gZG8gcHJvamV0by5cIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuY29sbGFib3JhdG9ycyA9IGRhdGEuY29sbGFib3JhdG9ycztcclxuICAgICAgICAgICAgICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdG9hc3RBcHAuZXJyb3JNZXNzYWdlKGRhdGEubWVzc2FnZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG59KSgpOyIsIi8qKlxyXG4gKiBDcmVhdGVkIGJ5IEpPU0VWQUxERVJMRUkgb24gMjgvMDYvMjAxNS5cclxuICovXHJcblxyXG5cclxuXHJcblxyXG4oZnVuY3Rpb24oKSB7XHJcblxyXG5cclxuICAgIFwidXNlIHN0cmljdFwiO1xyXG5cclxuICAgIGFuZ3VsYXIubW9kdWxlKCdhcHAnKVxyXG4gICAgICAgIC5jb250cm9sbGVyKCdtZW51UHJvYmxlbUNvbnRyb2xsZXInLCBtZW51UHJvYmxlbWFDb250cm9sbGVyKTtcclxuXHJcbiAgICBmdW5jdGlvbiBtZW51UHJvYmxlbWFDb250cm9sbGVyKEF1dGgsICR0aW1lb3V0LCAkc3RhdGUsICRtZFNpZGVuYXYgLCRtZFV0aWwsJGxvZyl7XHJcbiAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xyXG5cclxuICAgICAgICBzZWxmLm9wZW5DaGF0ID0gYnVpbGRUb2dnbGVyKCdjaGF0Jyk7XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQnVpbGQgaGFuZGxlciB0byBvcGVuL2Nsb3NlIGEgU2lkZU5hdjsgd2hlbiBhbmltYXRpb24gZmluaXNoZXNcclxuICAgICAgICAgKiByZXBvcnQgY29tcGxldGlvbiBpbiBjb25zb2xlXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgZnVuY3Rpb24gYnVpbGRUb2dnbGVyKG5hdklEKSB7XHJcbiAgICAgICAgICAgIHZhciBkZWJvdW5jZUZuID0gICRtZFV0aWwuZGVib3VuY2UoZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgICAgICRtZFNpZGVuYXYobmF2SUQpXHJcbiAgICAgICAgICAgICAgICAgICAgLnRvZ2dsZSgpXHJcbiAgICAgICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkbG9nLmRlYnVnKFwidG9nZ2xlIFwiICsgbmF2SUQgKyBcIiBpcyBkb25lXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9LDMwMCk7XHJcbiAgICAgICAgICAgIHJldHVybiBkZWJvdW5jZUZuO1xyXG4gICAgICAgIH07XHJcblxyXG5cclxuICAgICBzZWxmLmZvcm1BZGRDb2xsYWJvcmF0b3JzID0gZnVuY3Rpb24oKXtcclxuICAgICAgICAkc3RhdGUuZ28oJ3Byb2JsZW0uY29sbGFib3JhdG9ycycpO1xyXG4gICAgICB9XHJcbiAgICAgICAgc2VsZi5vcGVuUmVwb3J0ID0gZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgJHN0YXRlLmdvKCdwcm9ibGVtLmRzY3JlcG9ydCcpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgc2VsZi5lZGl0RGVzY3JpcHRpb25Qcm9ibGVtID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICRzdGF0ZS5nbygncHJvYmxlbS5kZXNjcmlwdGlvbicpO1xyXG4gICAgfTtcclxuXHJcbiAgICAgICAgc2VsZi5kb0xvZ291dCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBBdXRoLmxvZ291dCgpO1xyXG4gICAgICAgICRzdGF0ZS5nbygnaW5pdC5sb2dpbicpO1xyXG4gICAgfTtcclxuICAgIH1cclxuXHJcbn0pKCk7IiwiKGZ1bmN0aW9uKCl7XHJcblxyXG5cInVzZSBzdHJpY3RcIjtcclxuXHJcbiAgICBhbmd1bGFyLm1vZHVsZSgnYXBwJylcclxuICAgIC5jb250cm9sbGVyKCdlZGl0UHJvYmxlbUNvbnRyb2xsZXInLGVkaXRQcm9ibGVtYUNvbnRyb2xsZXIpO1xyXG5lZGl0UHJvYmxlbWFDb250cm9sbGVyLiRpbmplY3RyZSA9IFsnJHNjb3BlJywnU29ja2V0J107XHJcblxyXG5mdW5jdGlvbiBlZGl0UHJvYmxlbWFDb250cm9sbGVyKCRzY29wZSwgU29ja2V0LCAkdGltZW91dCx0b2FzdEFwcCwkd2luZG93LHByb2JsZW1TZXJ2aWNlKSB7XHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICB2YXIgdXBkYXRlVHJ1ZSA9IHRydWU7XHJcbiAgICBzZWxmLnByb2JsZW0gPSBcIlwiO1xyXG5cclxuICAgIHNlbGYudGFic2RzYyA9IFtcclxuICAgICAgICAnPG1kLXRhYiBkYXRhLXVpLXNyZWY9XCJwcm9ibGVtLnN0YWtlaG9sZGVyc1wiIG1kLWFjdGl2ZT1cIiRzdGF0ZS5pcyhcXCdwcm9ibGVtLnN0YWtlaG9sZGVyc1xcJylcIiBsYWJlbD1cInt7XFwnTEFCRUxfQVJUSUZBQ1RfU1RBS0VIT0xERVJcXCcgfCB0cmFuc2xhdGUgfX1cIj48L21kLXRhYj4nLFxyXG4gICAgICAgICc8bWQtdGFiIGRhdGEtdWktc3JlZj1cInByb2JsZW0uZXZhbHVhdGlvbmZyYW1ld29ya1wiIG1kLWFjdGl2ZT1cIiRzdGF0ZS5pcyhcXCdwcm9ibGVtLmV2YWx1YXRpb25mcmFtZXdvcmtcXCcpXCIgbGFiZWw9XCJ7e1xcJ0xBQkVMX0FSVElGQUNUX0VWQUxVQVRJT05fRlJBTUVXT1JLXFwnIHwgdHJhbnNsYXRlIH19XCI+PC9tZC10YWI+JyxcclxuICAgICAgICAnPG1kLXRhYiBkYXRhLXVpLXNyZWY9XCJwcm9ibGVtLnNlbWlvdGljZnJhbWV3b3JrXCIgbWQtYWN0aXZlPVwiJHN0YXRlLmlzKFxcJ3Byb2JsZW0uc2VtaW90aWNmcmFtZXdvcmtcXCcpXCIgbGFiZWw9XCJ7e1xcJ0xBQkVMX0FSVElGQUNUX1NFTUlPVElDX0ZSQU1FV09SS1xcJyB8IHRyYW5zbGF0ZSB9fVwiPjwvbWQtdGFiPicsXHJcbiAgICAgICAgJzxtZC10YWIgZGF0YS11aS1zcmVmPVwicHJvYmxlbS5jYXJmXCIgbWQtYWN0aXZlPVwiJHN0YXRlLmlzKFxcJ3Byb2JsZW0uY2FyZlxcJylcIiBsYWJlbD1cIkNBUkZcIj48L21kLXRhYj48L21kLXRhYnM+J1xyXG4gICAgXTtcclxuXHJcbiAgICBzZWxmLmdldEN1cnJlbnRQcm9ibGVtID0gZnVuY3Rpb24oKXtcclxuICAgICAgICBzZWxmLmlkUHJvYmxlbSA9ICR3aW5kb3cubG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3Byb2JsZW1pZCcpO1xyXG4gICAgICAgIHByb2JsZW1TZXJ2aWNlLmdldHByb2JsZW0oc2VsZi5pZFByb2JsZW0pXHJcbiAgICAgICAgICAgIC5zdWNjZXNzKGZ1bmN0aW9uKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgIGlmKGRhdGEuc3VjY2Vzcykge1xyXG4gICAgICAgICAgICAgICAgICAgIHNlbGYucHJvYmxlbSA9IGRhdGEucHJvYmxlbTtcclxuICAgICAgICAgICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICAgICAgICAgIHRvYXN0QXBwLmVycm9yTWVzc2FnZShkYXRhLm1lc3NhZ2UpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgfTtcclxuXHJcbiAgICB2YXIgc2V0VXBkYXRlID0gZnVuY3Rpb24oKXtcclxuICAgICAgICB1cGRhdGVUcnVlID0gdHJ1ZTtcclxuICAgIH07XHJcblxyXG4gICAgU29ja2V0Lm9uKCdvbkF0dWFsaXphclByb2JsZW1hJywgZnVuY3Rpb24gKHJldG9ybm8pIHtcclxuICAgICAgICBjb25zb2xlLmxvZyhcIj09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1yZXRvcm5vLi4uLlwiICsgcmV0b3Jubyk7XHJcbiAgICAgICAgc2VsZi5wcm9ibGVtLmRlc2NyaXB0aW9uID0gcmV0b3Juby5kZXNjcmlwdGlvbjtcclxuICAgICAgICBzZWxmLnByb2JsZW0udXBkYXRlID0gdXBkYXRlVHJ1ZTtcclxuICAgIH0pO1xyXG5cclxuICAgICRzY29wZS5wcm9ibGVtVXBkYXRlID0gZnVuY3Rpb24gKHByb2JsZW0pIHtcclxuICAgICAgICBwcm9ibGVtLnVwZGF0ZSA9IHVwZGF0ZVRydWU7XHJcblxyXG4gICAgICAgIFNvY2tldC5lbWl0KCdhdHVhbGl6YXJQcm9ibGVtYScsIHByb2JsZW0pO1xyXG4gICAgICAgIGlmICh1cGRhdGVUcnVlKSB7XHJcbiAgICAgICAgICAgIHVwZGF0ZVRydWUgPSBmYWxzZTtcclxuICAgICAgICAgICAgJHRpbWVvdXQoc2V0VXBkYXRlLCAyMDAwKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgICRzY29wZS5zYXZlRGVzY3JpcHRpb24gPSBmdW5jdGlvbiAocHJvYmxlbSkge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKFwiPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cIik7XHJcbiAgICAgICAgcHJvYmxlbS51cGRhdGUgPSB1cGRhdGVUcnVlO1xyXG4gICAgICAgIFNvY2tldC5lbWl0KCdhdHVhbGl6YXJQcm9ibGVtYScsIHByb2JsZW0pO1xyXG4gICAgfTtcclxuXHJcbn1cclxufSkoKTsiLCIoZnVuY3Rpb24oKSB7XHJcbiAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICBhbmd1bGFyXHJcbiAgICAubW9kdWxlKCdhcHAnKVxyXG4gICAgLmZhY3RvcnkoJ3Byb2JsZW1TZXJ2aWNlJywgcHJvYmxlbVNlcnZpY2UpO1xyXG5cclxuICBwcm9ibGVtU2VydmljZS4kaW5qZWN0ID0gWyckaHR0cCcsJyRsb2NhdGlvbiddO1xyXG5cclxuICBmdW5jdGlvbiBwcm9ibGVtU2VydmljZSgkaHR0cCwkbG9jYXRpb24pIHtcclxuXHJcbiAgICB2YXIgQVBJX1JPVVRFX0dFVFVTRVJQUk9CTEVNUyA9ICcvYXBpL3Byb2JsZW0vZ2V0cHJvYmxlbXMnO1xyXG4gICAgdmFyIEFQSV9ST1VURV9HRVRVU0VSUFJPQkxFTVNDT0xMQUJPUkFUT1IgPSAnL2FwaS9wcm9ibGVtL2dldHByb2JsZW1zY29sbGFib3JhdG9yJztcclxuICAgIHZhciBBUElfUk9VVEVfTkVXUFJPQkxFTSA9ICcvYXBpL3Byb2JsZW0vbmV3cHJvYmxlbSc7XHJcbiAgICB2YXIgQVBJX1JPVVRFX0dFVFBST0JMRU0gPSAnL2FwaS9wcm9ibGVtL2dldHByb2JsZW0nO1xyXG4gICAgdmFyIEFQSV9ST1VURV9HRVRDT0xMQUJPUkFUT1JTID0gJy9hcGkvcHJvYmxlbS9nZXRjb2xsYWJvcmF0b3JzJztcclxuICAgIHZhciBBUElfUk9VVEVfSU5WSVRFID0gJy9hcGkvcHJvYmxlbS9pbnZpdGUnO1xyXG4gICAgdmFyIEFQSV9ST1VURV9HRVRPTklPTiA9ICcvYXBpL3Byb2JsZW0vZ2V0b25pb24nO1xyXG4gICAgdmFyIEFQSV9ST1VURV9HRVRFVkFMVUFUSU9OID0gJy9hcGkvcHJvYmxlbS9nZXRldmFsdWF0aW9uJztcclxuICAgIHZhciBBUElfUk9VVEVfR0VUU0VNSU9USUNGUkFNRVdPUksgPSAnL2FwaS9wcm9ibGVtL2dldHNlbWlvdGljJztcclxuICAgIHZhciBBUElfUk9VVEVfR0VUQ0FSRiA9ICcvYXBpL3Byb2JsZW0vZ2V0Y2FyZic7XHJcbiAgICB2YXIgQVBJX1JPVVRFX1JFTU9WRVBST0JMRU0gPSAnL2FwaS9wcm9ibGVtL3JlbW92ZXByb2JsZW0nO1xyXG4gICAgdmFyIEFQSV9ST1VURV9SRU1PVkVDT0xMQUJPUkFUT1IgPSAnL2FwaS9wcm9ibGVtL3JlbW92ZWNvbGxhYm9yYXRvcic7XHJcbiAgICB2YXIgQVBJX1JPVVRFX0dFVEhJU1RPUllDSEFUID0gJy9hcGkvcHJvYmxlbS9oaXN0b3J5Y2hhdCc7XHJcblxyXG4gICAgdmFyIHNlcnZpY2UgPSB7XHJcbiAgICAgIG5ld3Byb2JsZW0gICAgICAgOiBuZXdwcm9ibGVtLFxyXG4gICAgICBnZXR1c2VycHJvYmxlbXMgIDogZ2V0dXNlcnByb2JsZW1zLFxyXG4gICAgICBnZXRwcm9ibGVtICAgICAgIDogZ2V0cHJvYmxlbSxcclxuICAgICAgZ2V0Y29sbGFib3JhdG9ycyA6IGdldGNvbGxhYm9yYXRvcnMsXHJcbiAgICAgIGludml0ZSAgICAgICAgICAgOiBpbnZpdGUsXHJcbiAgICAgIGdldG9uaW9uICAgICAgICAgOiBnZXRvbmlvbixcclxuICAgICAgZ2V0ZXZhbHVhdGlvbiAgICA6IGdldGV2YWx1YXRpb24sXHJcbiAgICAgIGdldHNlbWlvdGljICAgICAgOiBnZXRzZW1pb3RpYyxcclxuICAgICAgZ2V0Y2FyZiAgICAgICAgICA6IGdldGNhcmYsXHJcbiAgICAgIHJlbW92ZXByb2JsZW0gICAgOiByZW1vdmVwcm9ibGVtLFxyXG4gICAgICBnZXRwcm9ibGVtc2NvbGxhYm9yYXRvcjogZ2V0cHJvYmxlbXNjb2xsYWJvcmF0b3IsXHJcbiAgICAgIHJlbW92ZWNvbGxhYm9yYXRvcnMgOiByZW1vdmVjb2xsYWJvcmF0b3JzLFxyXG4gICAgICBnZXRoaXN0b3J5Y2hhdDogZ2V0aGlzdG9yeWNoYXRcclxuICAgIH07XHJcblxyXG4gICAgcmV0dXJuIHNlcnZpY2U7XHJcblxyXG4gICAgZnVuY3Rpb24gbmV3cHJvYmxlbShkYXRhKSB7XHJcbiAgICAgICAgcmV0dXJuICRodHRwLnBvc3QoQVBJX1JPVVRFX05FV1BST0JMRU0sIGRhdGEpO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGdldHByb2JsZW0oZGF0YSl7XHJcbiAgICAgIHJldHVybiAkaHR0cC5nZXQoQVBJX1JPVVRFX0dFVFBST0JMRU0gKyAnP2lkcHJvYmxlbT0nICsgZGF0YSApO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICBmdW5jdGlvbiBnZXR1c2VycHJvYmxlbXMoZGF0YSl7XHJcbiAgICAgIHJldHVybiAkaHR0cC5nZXQoQVBJX1JPVVRFX0dFVFVTRVJQUk9CTEVNUyArICc/ZW1haWw9JyArIGRhdGEgKTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBnZXRjb2xsYWJvcmF0b3JzKGRhdGEpe1xyXG4gICAgICByZXR1cm4gJGh0dHAuZ2V0KEFQSV9ST1VURV9HRVRDT0xMQUJPUkFUT1JTICsgJz9pZHByb2JsZW09JyArIGRhdGEgKTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBpbnZpdGUoZGF0YSl7XHJcbiAgICAgIHJldHVybiAkaHR0cC5wb3N0KEFQSV9ST1VURV9JTlZJVEUsIGRhdGEgKTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBnZXRvbmlvbihkYXRhKXtcclxuICAgICAgcmV0dXJuICRodHRwLmdldChBUElfUk9VVEVfR0VUT05JT04gKyAnP2lkcHJvYmxlbT0nICsgZGF0YSApO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGdldGV2YWx1YXRpb24gKGRhdGEpe1xyXG4gICAgICByZXR1cm4gJGh0dHAuZ2V0KEFQSV9ST1VURV9HRVRFVkFMVUFUSU9OICsgJz9pZHByb2JsZW09JyArIGRhdGEgKTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBnZXRzZW1pb3RpYyAoZGF0YSl7XHJcbiAgICAgIHJldHVybiAkaHR0cC5nZXQoQVBJX1JPVVRFX0dFVFNFTUlPVElDRlJBTUVXT1JLICsgJz9pZHByb2JsZW09JyArIGRhdGEgKVxyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGdldGNhcmYoZGF0YSl7XHJcbiAgICAgIHJldHVybiAkaHR0cC5nZXQoQVBJX1JPVVRFX0dFVENBUkYgKyAnP2lkcHJvYmxlbT0nICsgZGF0YSApXHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gcmVtb3ZlcHJvYmxlbShkYXRhKXtcclxuICAgICAgcmV0dXJuICRodHRwLmdldChBUElfUk9VVEVfUkVNT1ZFUFJPQkxFTSArICc/aWRwcm9ibGVtPScgKyBkYXRhICk7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gZ2V0cHJvYmxlbXNjb2xsYWJvcmF0b3IoZGF0YSl7XHJcbiAgICAgIHJldHVybiAkaHR0cC5nZXQoQVBJX1JPVVRFX0dFVFVTRVJQUk9CTEVNU0NPTExBQk9SQVRPUiArICc/ZW1haWw9JyArIGRhdGEgKTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiByZW1vdmVjb2xsYWJvcmF0b3JzKGRhdGEpe1xyXG4gICAgICByZXR1cm4gJGh0dHAuZ2V0KEFQSV9ST1VURV9SRU1PVkVDT0xMQUJPUkFUT1IgKyAnP2lkcHJvYmxlbT0nICsgZGF0YS5pZHByb2JsZW0gKyAnJmVtYWlsPScgKyBkYXRhLmVtYWlsICk7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gZ2V0aGlzdG9yeWNoYXQoZGF0YSl7XHJcbiAgICAgIHJldHVybiAkaHR0cC5nZXQoQVBJX1JPVVRFX0dFVEhJU1RPUllDSEFUICsgJz9pZHByb2JsZW09JyArIGRhdGEgKTtcclxuICAgIH1cclxuXHJcbiAgfVxyXG59KSgpO1xyXG4iLCJcclxuKGZ1bmN0aW9uKCl7XHJcblxyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG4gICAgYW5ndWxhci5tb2R1bGUoJ2FwcCcpXHJcbiAgICAgICAgLmNvbnRyb2xsZXIoJ3N0YXJ0UHJvYmxlbUNvbnRyb2xsZXInLHN0YXJ0UHJvYmxlbUNvbnRyb2xsZXIpO1xyXG4gICAgICAgIGZ1bmN0aW9uIHN0YXJ0UHJvYmxlbUNvbnRyb2xsZXIoJG1kRGlhbG9nLCRzdGF0ZSxBdXRoLFNvY2tldCwgJHdpbmRvdywgcHJvYmxlbVNlcnZpY2UsdG9hc3RBcHAgKSB7XHJcbiAgICAgICAgICAgIHZhciB2bSA9IHRoaXM7XHJcbiAgICAgICAgICAgIHZtLm5pY2tuYW1lID0gXCJcIjtcclxuICAgICAgICAgICAgdm0udXNlcmlkID0gXCJcIjtcclxuICAgICAgICAgICAgdm0udXNlcmVtYWlsID0gXCJcIjtcclxuICAgICAgICAgICAgdm0ucHJvYmxlbUxpc3QgPSBbXTtcclxuICAgICAgICAgICAgdm0ucHJvYmxlbUNvbGxhYm9yYXRvckxpc3QgPSBbXTtcclxuICAgICAgICAgICAgdm0ubG9naW5JblByb2dyZXNzID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgICAgIHZtLmdldFByb2JsZW1zID0gZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgICAgIHZtLnVzZXJpZCA9ICR3aW5kb3cubG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3VzZXJpZCcpO1xyXG4gICAgICAgICAgICAgICAgdm0ubmlja25hbWUgPSAkd2luZG93LmxvY2FsU3RvcmFnZS5nZXRJdGVtKCduaWNrbmFtZScpO1xyXG4gICAgICAgICAgICAgICAgdm0udXNlcmVtYWlsID0gJHdpbmRvdy5sb2NhbFN0b3JhZ2UuZ2V0SXRlbSgndXNlcmVtYWlsJyk7XHJcbiAgICAgICAgICAgICAgICBwcm9ibGVtU2VydmljZS5nZXR1c2VycHJvYmxlbXModm0udXNlcmVtYWlsKVxyXG4gICAgICAgICAgICAgICAgICAgIC5zdWNjZXNzKGZ1bmN0aW9uKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZihkYXRhLnN1Y2Nlc3MpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yKHZhciBpPTA7IGkgPCBkYXRhLnByb2JsZW1zLmxlbmd0aDsgaSsrICl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhLnByb2JsZW1zW2ldLmRlc2NyaXB0aW9uID0gZGF0YS5wcm9ibGVtc1tpXS5kZXNjcmlwdGlvbi5yZXBsYWNlKC8oPChbXj5dKyk+KS9pZyxcIlwiKS5zdWJzdHJpbmcoMCw0NjApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2bS5wcm9ibGVtTGlzdCA9IGRhdGEucHJvYmxlbXM7XHJcbiAgICAgICAgICAgICAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRvYXN0QXBwLmVycm9yTWVzc2FnZShkYXRhLm1lc3NhZ2UpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICBwcm9ibGVtU2VydmljZS5nZXRwcm9ibGVtc2NvbGxhYm9yYXRvcih2bS51c2VyZW1haWwpXHJcbiAgICAgICAgICAgICAgICAgICAgLnN1Y2Nlc3MoZnVuY3Rpb24oZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZihkYXRhLnN1Y2Nlc3MpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvcih2YXIgaT0wOyBpIDwgZGF0YS5wcm9ibGVtcy5sZW5ndGg7IGkrKyApe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEucHJvYmxlbXNbaV0uZGVzY3JpcHRpb24gPSBkYXRhLnByb2JsZW1zW2ldLmRlc2NyaXB0aW9uLnJlcGxhY2UoLyg8KFtePl0rKT4pL2lnLFwiXCIpLnN1YnN0cmluZygwLDQ2MCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdm0ucHJvYmxlbUNvbGxhYm9yYXRvckxpc3QgPSBkYXRhLnByb2JsZW1zO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvYXN0QXBwLmVycm9yTWVzc2FnZShkYXRhLm1lc3NhZ2UpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIHZtLmxvZ2luSW5Qcm9ncmVzcyA9IGZhbHNlO1xyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgZnVuY3Rpb24gcmVtb3ZlUHJvYmxlbShwcm9ibGVtaWQpe1xyXG4gICAgICAgICAgICAgICAgICAgIHByb2JsZW1TZXJ2aWNlLnJlbW92ZXByb2JsZW0ocHJvYmxlbWlkKVxyXG4gICAgICAgICAgICAgICAgICAgIC5zdWNjZXNzKGZ1bmN0aW9uKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYoZGF0YS5zdWNjZXNzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IodmFyIGk9MDsgaSA8IHZtLnByb2JsZW1MaXN0Lmxlbmd0aDsgaSsrKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZih2bS5wcm9ibGVtTGlzdFtpXS5faWQgPT0gcHJvYmxlbWlkKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdm0ucHJvYmxlbUxpc3Quc3BsaWNlKGksMSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b2FzdEFwcC5lcnJvck1lc3NhZ2UoZGF0YS5tZXNzYWdlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIH1cclxuXHJcblxyXG4gICAgICAgICAgICB2bS5yZXZvbXZlUHJvYmxlbSA9IGZ1bmN0aW9uKGV2LHByb2JsZW0pIHtcclxuICAgICAgICAgICAgICAgIC8vIEFwcGVuZGluZyBkaWFsb2cgdG8gZG9jdW1lbnQuYm9keSB0byBjb3ZlciBzaWRlbmF2IGluIGRvY3MgYXBwXHJcbiAgICAgICAgICAgICAgICB2YXIgY29uZmlybSA9ICRtZERpYWxvZy5jb25maXJtKClcclxuICAgICAgICAgICAgICAgICAgICAucGFyZW50KGFuZ3VsYXIuZWxlbWVudChkb2N1bWVudC5ib2R5KSlcclxuICAgICAgICAgICAgICAgICAgICAudGl0bGUoJ0RldGV0ZSBQcm9ibGVtPycpXHJcbiAgICAgICAgICAgICAgICAgICAgLmNvbnRlbnQoJ1RpdGxlOiAnICsgcHJvYmxlbS50aXRsZSlcclxuICAgICAgICAgICAgICAgICAgICAuYXJpYUxhYmVsKCdSZW1vdmUgUHJvYmxlbScpXHJcbiAgICAgICAgICAgICAgICAgICAgLm9rKCdEZXNlam8gcmVtb3ZlciEnKVxyXG4gICAgICAgICAgICAgICAgICAgIC5jYW5jZWwoJ0NhbmNlbCcpXHJcbiAgICAgICAgICAgICAgICAgICAgLnRhcmdldEV2ZW50KGV2KTtcclxuICAgICAgICAgICAgICAgICRtZERpYWxvZy5zaG93KGNvbmZpcm0pLnRoZW4oZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVtb3ZlUHJvYmxlbShwcm9ibGVtLl9pZCk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIHZtLnN0YXJ0TmV3UHJvYmxlbSA9IGZ1bmN0aW9uKG5ld3Byb2JsZW0pe1xyXG4gICAgICAgICAgICAgICAgbmV3cHJvYmxlbS51c2VyaWQgPSB2bS51c2VyaWQ7XHJcbiAgICAgICAgICAgICAgICBwcm9ibGVtU2VydmljZS5uZXdwcm9ibGVtKG5ld3Byb2JsZW0pXHJcbiAgICAgICAgICAgICAgICAgICAgLnN1Y2Nlc3MoZnVuY3Rpb24oZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZihkYXRhLnN1Y2Nlc3MpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZtLmVkaXRQcm9ibGVtKGRhdGEucHJvYmxlbSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b2FzdEFwcC5lcnJvck1lc3NhZ2UoZGF0YS5tZXNzYWdlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB2bS5lZGl0UHJvYmxlbSA9IGZ1bmN0aW9uIChwcm9ibGVtKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgJHdpbmRvdy5sb2NhbFN0b3JhZ2Uuc2V0SXRlbShcInByb2JsZW1pZFwiLHByb2JsZW0uX2lkKTtcclxuICAgICAgICAgICAgICAgIHZhciBpbml0c29ja2V0cHJvYmxlbSA9IHtcclxuICAgICAgICAgICAgICAgICAgICBcImlkcHJvYmxlbVwiOnByb2JsZW0uX2lkLFxyXG4gICAgICAgICAgICAgICAgICAgIFwibmlja25hbWVcIjogdm0ubmlja25hbWVcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICBTb2NrZXQuZW1pdCgnaW5pdFByb2JsZW0nLCBpbml0c29ja2V0cHJvYmxlbSk7XHJcbiAgICAgICAgICAgICAgICAkc3RhdGUuZ28oJ3Byb2JsZW0uc3Rha2Vob2xkZXJzJyk7XHJcbiAgICAgICAgICAgIH07XHJcblxyXG5cclxuICAgICAgICAgICAgdm0uZG9Mb2dvdXQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICBBdXRoLmxvZ291dCgpO1xyXG4gICAgICAgICAgICAgICAgJHN0YXRlLmdvKCdpbml0LmxvZ2luJyk7XHJcbiAgICAgICAgICAgIH07XHJcblxyXG5cclxuICAgICAgICAgICAgdm0ubmV3UHJvYmxlbSA9IGZ1bmN0aW9uKGV2KSB7XHJcbiAgICAgICAgICAgICAgICAkbWREaWFsb2cuc2hvdyh7XHJcbiAgICAgICAgICAgICAgICAgICAgY29udHJvbGxlcjogRGlhbG9nQ29udHJvbGxlcixcclxuICAgICAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ3ZpZXdzL3BhZ2VzL25ld3Byb2JsZW0uaHRtbCcsXHJcbiAgICAgICAgICAgICAgICAgICAgcGFyZW50OiBhbmd1bGFyLmVsZW1lbnQoZG9jdW1lbnQuYm9keSksXHJcbiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0RXZlbnQ6IGV2LFxyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgZnVuY3Rpb24gRGlhbG9nQ29udHJvbGxlcigkc2NvcGUsICRtZERpYWxvZykge1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLmhpZGUgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICAgICAkbWREaWFsb2cuaGlkZSgpO1xyXG4gICAgICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuY2FuY2VsID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJG1kRGlhbG9nLmNhbmNlbCgpO1xyXG4gICAgICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuYWRkTmV3UHJvYmxlbSA9IGZ1bmN0aW9uKHByb2JsZW0pIHtcclxuICAgICAgICAgICAgICAgICAgICB2bS5zdGFydE5ld1Byb2JsZW0ocHJvYmxlbSk7XHJcbiAgICAgICAgICAgICAgICAgICAgJG1kRGlhbG9nLmNhbmNlbCgpO1xyXG4gICAgICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIH1cclxuICAgIH1cclxufSkoKTtcclxuXHJcbiIsIihmdW5jdGlvbigpIHtcclxuICAndXNlIHN0cmljdCc7XHJcblxyXG4gIGFuZ3VsYXJcclxuICAgIC5tb2R1bGUoJ2FwcCcpXHJcbiAgICAuY29udHJvbGxlcignc2lnbnVwQ29udHJvbGxlcicsIHNpZ251cENvbnRyb2xsZXIpO1xyXG4gICAgc2lnbnVwQ29udHJvbGxlci4kaW5qZWN0ID0gWyckdHJhbnNsYXRlJywnJHdpbmRvdycsJ3NpZ251cFNlcnZpY2UnLCckc3RhdGUnLCd0b2FzdEFwcCcsJ0F1dGhUb2tlbicsJ0F1dGgnLCckZmlsdGVyJywnJHN0YXRlUGFyYW1zJ107XHJcblxyXG4gIGZ1bmN0aW9uIHNpZ251cENvbnRyb2xsZXIoJHRyYW5zbGF0ZSwgJHdpbmRvdywgc2lnbnVwU2VydmljZSwkc3RhdGUsdG9hc3RBcHAsQXV0aFRva2VuLEF1dGgsJGZpbHRlciwkc3RhdGVQYXJhbXMpe1xyXG4gICAgLyoganNoaW50IHZhbGlkdGhpczogdHJ1ZSAqL1xyXG4gICAgdmFyIHZtID0gdGhpcztcclxuXHJcbiAgICB2bS5tZXNzYWdlICA9ICcnO1xyXG4gICAgdm0uc2F2ZSAgID0gc2F2ZVVzZXI7XHJcbiAgICB2bS5yZXNjdWVQYXNzd29yZCA9IHJlc2N1ZVBhc3N3b3JkO1xyXG4gICAgdm0uY2hhbmdlUGFzc3dvcmQgPSBjaGFuZ2VQYXNzd29yZDtcclxuICAgIHZtLnNldExhbmcgPSBzZXRMYW5nO1xyXG4gICAgdm0ubG9naW5JblByb2dyZXNzID0gZmFsc2U7XHJcblxyXG4gICAgZnVuY3Rpb24gc2F2ZVVzZXIodXNlcikge1xyXG4gICAgICBzaWdudXBTZXJ2aWNlLmNyZWF0ZSh1c2VyKVxyXG4gICAgICAgICAgLnN1Y2Nlc3MoZnVuY3Rpb24oZGF0YSkge1xyXG4gICAgICAgICAgICBpZihkYXRhLnN1Y2Nlc3MpIHtcclxuICAgICAgICAgICAgICBBdXRoVG9rZW4uc2V0VG9rZW4oZGF0YS50b2tlbik7XHJcbiAgICAgICAgICAgICAgQXV0aC5nZXRVc2VyKClcclxuICAgICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24oZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZtLnVzZXIgPSBkYXRhLmRhdGE7XHJcbiAgICAgICAgICAgICAgICAgICAgICB2bS5sb2dpbkluUHJvZ3Jlc3MgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICAgICR3aW5kb3cubG9jYWxTdG9yYWdlLnNldEl0ZW0oXCJ1c2VyZW1haWxcIix1c2VyLmVtYWlsKTtcclxuICAgICAgICAgICAgICAgICAgICAgICR3aW5kb3cubG9jYWxTdG9yYWdlLnNldEl0ZW0oXCJ1c2VyaWRcIix1c2VyLmlkKTtcclxuICAgICAgICAgICAgICAgICAgICAgICR3aW5kb3cubG9jYWxTdG9yYWdlLnNldEl0ZW0oXCJuaWNrbmFtZVwiLHVzZXIubmlja25hbWUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgdm0uc2V0TGFuZyh1c2VyLmxhbmd1YWdlKTtcclxuICAgICAgICAgICAgICAgICAgICB0b2FzdEFwcC5lcnJvck1lc3NhZ2UoJGZpbHRlcigndHJhbnNsYXRlJykoJ1dFTENPTUVfU1lTVEVNJykgKyBcIjogXCIgKyB2bS51c2VyLm5pY2tuYW1lKTtcclxuICAgICAgICAgICAgICAgICAgICAkc3RhdGUuZ28oJ3N0YXJ0cHJvYmxlbScpO1xyXG4gICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICAgIHRvYXN0QXBwLmVycm9yTWVzc2FnZShcIkVtYWlsIErDoSBjYWRhc3RyYWRvXCIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9KVxyXG4gICAgICAgfVxyXG5cclxuICAgICAgZnVuY3Rpb24gc2V0TGFuZyhsYW5nS2V5KSB7XHJcbiAgICAgICAgICAkdHJhbnNsYXRlLnVzZShsYW5nS2V5KTtcclxuICAgICAgfTtcclxuXHJcbiAgICAgIGZ1bmN0aW9uIHJlc2N1ZVBhc3N3b3JkKHVzZXJFbWFpbCl7XHJcbiAgICAgICAgICBzaWdudXBTZXJ2aWNlLnJlc2N1ZVBhc3N3b3JkKHVzZXJFbWFpbClcclxuICAgICAgICAgICAgICAuc3VjY2VzcyhmdW5jdGlvbihkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGRhdGEpO1xyXG4gICAgICAgICAgICAgICAgICBpZihkYXRhLnN1Y2Nlc3MpIHtcclxuICAgICAgICAgICAgICAgICAgICAgIHRvYXN0QXBwLmVycm9yTWVzc2FnZShcIkVtYWlsIGNvbSBpbnN0cnXDp8O1ZXMgZW52aWFkb1wiKTtcclxuICAgICAgICAgICAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgICAgICAgICAgICB0b2FzdEFwcC5lcnJvck1lc3NhZ2UoXCJFcnJvclwiKTtcclxuICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIH0pXHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGZ1bmN0aW9uIGNoYW5nZVBhc3N3b3JkKHVzZXIpe1xyXG4gICAgICAgICAgc2lnbnVwU2VydmljZS5jaGFuZ2VQYXNzd29yZCh1c2VyKVxyXG4gICAgICAgICAgICAgIC5zdWNjZXNzKGZ1bmN0aW9uKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgICAgaWYoZGF0YS5zdWNjZXNzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICB0b2FzdEFwcC5lcnJvck1lc3NhZ2UoXCJTZW5oYSBhbHRlcmFkYSBjb20gc3VjZXNzby4gRmHDp2EgbG9naW4gY29tIGEgbm92YSBzZW5oYS5cIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAkc3RhdGUuZ28oJ2luaXQnKTtcclxuICAgICAgICAgICAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgICAgICAgICAgICB0b2FzdEFwcC5lcnJvck1lc3NhZ2UoXCJFcnJvclwiKTtcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICB9KVxyXG4gICAgICB9XHJcblxyXG5cclxuICB9XHJcbn0pKCk7IiwiKGZ1bmN0aW9uKCkge1xyXG4gICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgYW5ndWxhclxyXG4gICAgLm1vZHVsZSgnYXBwJylcclxuICAgIC5mYWN0b3J5KCdzaWdudXBTZXJ2aWNlJywgc2lnbnVwU2VydmljZSk7XHJcblxyXG4gIHNpZ251cFNlcnZpY2UuJGluamVjdCA9IFsnJGh0dHAnLCckbG9jYXRpb24nXTtcclxuXHJcbiAgZnVuY3Rpb24gc2lnbnVwU2VydmljZSgkaHR0cCwkbG9jYXRpb24pIHtcclxuXHJcbiAgICB2YXIgQVBJX1JPVVRFX1VTRVIgPSAnL2FwaS9zaWdudXAvJztcclxuICAgIHZhciBBUElfUk9VVEVfUkVTQ1VFUEFTU1dPUkQgPSAnL2FwaS9yZXNjdWVwYXNzd2QvJztcclxuICAgIHZhciBBUElfUk9VVEVfU0VUTkVXUEFTU1dPUkQgPSAnL2FwaS9yZXNjdWVwYXNzd2QvbmV3cGFzc3dkLyc7XHJcblxyXG5cclxuICAgIHZhciBzZXJ2aWNlID0ge1xyXG4gICAgICBjcmVhdGUgICAgICAgICA6IGNyZWF0ZSxcclxuICAgICAgcmVzY3VlUGFzc3dvcmQgOiByZXNjdWVQYXNzd29yZCxcclxuICAgICAgY2hhbmdlUGFzc3dvcmQgOiBjaGFuZ2VQYXNzd29yZFxyXG4gICAgfTtcclxuICAgIHJldHVybiBzZXJ2aWNlO1xyXG5cclxuICAgIGZ1bmN0aW9uIGNyZWF0ZShkYXRhKSB7XHJcbiAgICAgICAgcmV0dXJuICRodHRwLnBvc3QoQVBJX1JPVVRFX1VTRVIsIGRhdGEpO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIHJlc2N1ZVBhc3N3b3JkKGRhdGEpe1xyXG4gICAgICByZXR1cm4gJGh0dHAucG9zdChBUElfUk9VVEVfUkVTQ1VFUEFTU1dPUkQsIGRhdGEpO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGNoYW5nZVBhc3N3b3JkKGRhdGEpe1xyXG4gICAgICB2YXIgbXl0b2tlblVSTCA9ICRsb2NhdGlvbi5zZWFyY2goKTtcclxuICAgICAgcmV0dXJuICRodHRwLmdldChBUElfUk9VVEVfU0VUTkVXUEFTU1dPUkQgKyAnP215dG9rZW49JyArIG15dG9rZW5VUkwubXl0b2tlbisnJnBhc3N3b3JkPScrZGF0YS5wYXNzd29yZCk7XHJcbiAgICB9XHJcbiAgfVxyXG59KSgpO1xyXG4iLCIvKipcclxuICogQ3JlYXRlZCBieSBKT1NFVkFMREVSTEVJIG9uIDI1LzA2LzIwMTUuXHJcbiAqL1xyXG5cclxuKGZ1bmN0aW9uKCl7XHJcbiAgICAndXNlIHN0cmljdCc7XHJcbiAgICBhbmd1bGFyXHJcbiAgICAgICAgLm1vZHVsZSgnYXBwJylcclxuICAgICAgICAuY29uZmlnKGFwcENvbmZpZyk7XHJcblxyXG4gICAgYXBwQ29uZmlnLiRpbmplY3QgPSBbJyRtZFRoZW1pbmdQcm92aWRlcicsJyRsb2NhdGlvblByb3ZpZGVyJ107XHJcblxyXG4gICAgZnVuY3Rpb24gYXBwQ29uZmlnICgkbWRUaGVtaW5nUHJvdmlkZXIsJGxvY2F0aW9uUHJvdmlkZXIpIHtcclxuXHJcbiAgICAgICAgIC8vJGxvY2F0aW9uUHJvdmlkZXIuaHRtbDVNb2RlKHRydWUpO1xyXG4gICAgICAgIHZhciBjdXN0b21HcmVlbk1hcCA9ICRtZFRoZW1pbmdQcm92aWRlci5leHRlbmRQYWxldHRlKCd0ZWFsJywge1xyXG4gICAgICAgICAgICAnY29udHJhc3REZWZhdWx0Q29sb3InOiAnbGlnaHQnLFxyXG4gICAgICAgICAgICAnY29udHJhc3REYXJrQ29sb3JzJzogWyc1MCddLFxyXG4gICAgICAgICAgICAnNTAnOiAnRTBGMkYxJ1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAkbWRUaGVtaW5nUHJvdmlkZXIuZGVmaW5lUGFsZXR0ZSgnY3VzdG9tR3JlZW4nLCBjdXN0b21HcmVlbk1hcCk7XHJcbiAgICAgICAgJG1kVGhlbWluZ1Byb3ZpZGVyLnRoZW1lKCdkZWZhdWx0JylcclxuICAgICAgICAgICAgLnByaW1hcnlQYWxldHRlKCdjdXN0b21HcmVlbicsIHtcclxuICAgICAgICAgICAgICAgICdkZWZhdWx0JzogJzUwMCcsXHJcbiAgICAgICAgICAgICAgICAnaHVlLTEnOiAnNTAnXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5hY2NlbnRQYWxldHRlKCd0ZWFsJyk7XHJcbiAgICAgICAgJG1kVGhlbWluZ1Byb3ZpZGVyLnRoZW1lKCdpbnB1dCcsICdkZWZhdWx0JylcclxuICAgICAgICAgICAgLnByaW1hcnlQYWxldHRlKCdncmVlbicpO1xyXG5cclxuICAgIH1cclxuXHJcblxyXG59KSgpOyIsIlxyXG4oZnVuY3Rpb24oKXtcclxuXHRcInVzZSBzdHJpY3RcIjtcclxuYW5ndWxhci5tb2R1bGUoJ2F1dGhTZXJ2aWNlJywgW10pXHJcblx0LmZhY3RvcnkoJ0F1dGgnLCBmdW5jdGlvbigkaHR0cCwgJHEsIEF1dGhUb2tlbikge1xyXG5cdHZhciBhdXRoRmFjdG9yeSA9IHt9O1xyXG5cdGF1dGhGYWN0b3J5LmxvZ2luID0gZnVuY3Rpb24oZW1haWwsIHBhc3N3b3JkKSB7XHJcblx0XHRyZXR1cm4gJGh0dHAucG9zdCgnL2FwaS9sb2dpbicsIHtcclxuXHRcdFx0ZW1haWw6IGVtYWlsLFxyXG5cdFx0XHRwYXNzd29yZDogcGFzc3dvcmRcclxuXHRcdH0pXHJcblx0XHQuc3VjY2VzcyhmdW5jdGlvbihkYXRhKSB7XHJcblx0XHRcdEF1dGhUb2tlbi5zZXRUb2tlbihkYXRhLnRva2VuKTtcclxuXHRcdFx0cmV0dXJuIGRhdGE7XHJcblx0XHR9KTtcclxuXHR9O1xyXG5cclxuXHRhdXRoRmFjdG9yeS5sb2dvdXQgPSBmdW5jdGlvbigpIHtcclxuXHRcdEF1dGhUb2tlbi5zZXRUb2tlbigpO1xyXG5cdH07XHJcblxyXG5cdGF1dGhGYWN0b3J5LmlzTG9nZ2VkSW4gPSBmdW5jdGlvbigpIHtcclxuXHRcdGlmKEF1dGhUb2tlbi5nZXRUb2tlbigpKSB7XHJcblx0XHRcdHJldHVybiB0cnVlO1xyXG5cdFx0fWVsc2Uge1xyXG5cdFx0XHRyZXR1cm4gZmFsc2U7XHJcblx0XHR9XHJcblx0fTtcclxuXHJcblx0YXV0aEZhY3RvcnkuZ2V0VXNlciA9IGZ1bmN0aW9uKCkge1xyXG5cdFx0aWYoQXV0aFRva2VuLmdldFRva2VuKCkpIHtcclxuXHRcdFx0cmV0dXJuICRodHRwLmdldCgnL2FwaS9tZScpO1xyXG5cdFx0fVxyXG5cdFx0ZWxzZSB7XHJcblx0XHRcdHJldHVybiAkcS5yZWplY3Qoe21lc3NhZ2U6IFwiVXNlciBoYXMgbm8gdG9rZW5cIn0pO1xyXG5cdFx0fVxyXG5cclxuXHR9O1xyXG5cdHJldHVybiBhdXRoRmFjdG9yeTtcclxufSlcclxuXHJcblxyXG4uZmFjdG9yeSgnQXV0aFRva2VuJywgZnVuY3Rpb24oJHdpbmRvdykge1xyXG5cclxuXHR2YXIgYXV0aFRva2VuRmFjdG9yeSA9IHt9O1xyXG5cclxuXHRhdXRoVG9rZW5GYWN0b3J5LmdldFRva2VuID0gZnVuY3Rpb24oKSB7XHJcblx0XHRyZXR1cm4gJHdpbmRvdy5sb2NhbFN0b3JhZ2UuZ2V0SXRlbSgndG9rZW4nKTtcclxuXHR9O1xyXG5cclxuXHRhdXRoVG9rZW5GYWN0b3J5LnNldFRva2VuID0gZnVuY3Rpb24odG9rZW4pIHtcclxuXHJcblx0XHRpZiAodG9rZW4pIHtcclxuXHRcdFx0JHdpbmRvdy5sb2NhbFN0b3JhZ2Uuc2V0SXRlbSgndG9rZW4nLCB0b2tlbik7XHJcblx0XHR9XHJcblx0XHRlbHNle1xyXG5cdFx0XHQkd2luZG93LmxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCd0b2tlbicpO1xyXG5cdH1cclxuXHJcblx0fTtcclxuXHRyZXR1cm4gYXV0aFRva2VuRmFjdG9yeTtcclxufSlcclxuXHJcblxyXG4uZmFjdG9yeSgnQXV0aEludGVyY2VwdG9yJywgZnVuY3Rpb24oJHEsICRsb2NhdGlvbiwgQXV0aFRva2VuKSB7XHJcblx0dmFyIGludGVyY2VwdG9yRmFjdG9yeSA9IHt9O1xyXG5cdGludGVyY2VwdG9yRmFjdG9yeS5yZXF1ZXN0ID0gZnVuY3Rpb24oY29uZmlnKSB7XHJcblx0XHR2YXIgdG9rZW4gPSBBdXRoVG9rZW4uZ2V0VG9rZW4oKTtcclxuXHRcdGlmKHRva2VuKSB7XHJcblx0XHRcdGNvbmZpZy5oZWFkZXJzWyd4LWFjY2Vzcy10b2tlbiddID0gdG9rZW47XHJcblx0XHR9XHJcblx0XHRyZXR1cm4gY29uZmlnO1xyXG5cdH07XHJcblx0cmV0dXJuIGludGVyY2VwdG9yRmFjdG9yeTtcclxufSk7XHJcbn0pKCk7IiwiXHJcbmFuZ3VsYXIubW9kdWxlKCdEcm9wRFNDJyxbXSlcclxuICAgIC5kaXJlY3RpdmUoJ2RyYWdnYWJsZScsIGZ1bmN0aW9uKCRkb2N1bWVudCxTb2NrZXQpIHtcclxuICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgcmVzdHJpY3Q6ICdBJyxcclxuICAgICAgICAgICAgcmVwbGFjZTogdHJ1ZSxcclxuICAgICAgICAgICAgbGluazogZnVuY3Rpb24oc2NvcGUsIGVsZW1lbnQsIGF0dHIpIHtcclxuICAgICAgICAgICAgICAgICAgZWxlbWVudC5vbignbW91c2Vkb3duJywgZnVuY3Rpb24oZXZlbnQpIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICBpZihldmVudC50YXJnZXQuaWQuc3Vic3RyaW5nKDAsMTEpID09IFwic3Rha2Vob2xkZXJcIil7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gUHJldmVudCBkZWZhdWx0IGRyYWdnaW5nIG9mIHNlbGVjdGVkIGNvbnRlbnRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICRkb2N1bWVudC5iaW5kKCdtb3VzZW1vdmUnLCBtb3VzZW1vdmUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICRkb2N1bWVudC5iaW5kKCdtb3VzZXVwJywgbW91c2V1cCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gbW91c2Vtb3ZlKGV2ZW50KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICB2YXIgaWRfZGl2ID0gZXZlbnQudGFyZ2V0LmlkO1xyXG4gICAgICAgICAgICAgICAgICAgICAgaWYgKGlkX2RpdiA9PSAnc3ZnJykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGlkX2RpdiA9IFwiXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgc2NvcGUuc3Rha2Vob2xkZXIub25pb25sYXllciA9IGlkX2RpdjtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICB5ID0gZXZlbnQucGFnZVk7XHJcbiAgICAgICAgICAgICAgICAgICAgICB4ID0gZXZlbnQucGFnZVg7XHJcbiAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50LmNzcyh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgdG9wOiB5ICsgJ3B4JyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICBsZWZ0OiAgeCArICdweCdcclxuICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgLypTb2NrZXQub24oJ29uQnJvYWRjYXN0T25pb25Qb3NpdGlvbicsIGZ1bmN0aW9uIChzdGFrZWhvbGRlcikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQuY3NzKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9wOiBzdGFrZWhvbGRlci55LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZWZ0OiAgc3Rha2Vob2xkZXIueFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgfSk7Ki9cclxuICAgICAgICAgICAgICAgICAgICAgIHNjb3BlLnN0YWtlaG9sZGVyLnggPSB4ICsgJ3B4JztcclxuICAgICAgICAgICAgICAgICAgICAgIHNjb3BlLnN0YWtlaG9sZGVyLnkgPSB5ICsgJ3B4JztcclxuICAgICAgICAgICAgICAgICAgICAgIC8vU29ja2V0LmVtaXQoJ2Jyb2FkY2FzdE9uaW9uUG9zaXRpb24nLCBzY29wZS5zdGFrZWhvbGRlcik7XHJcblxyXG4gICAgICAgICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gbW91c2V1cCgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICRkb2N1bWVudC51bmJpbmQoJ21vdXNlbW92ZScsIG1vdXNlbW92ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAkZG9jdW1lbnQudW5iaW5kKCdtb3VzZXVwJywgbW91c2V1cCk7XHJcbiAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgIH07XHJcblxyXG4gICAgfSk7IiwiLyoqXHJcbiAqIENyZWF0ZWQgYnkgSk9TRVZBTERFUkxFSSBvbiAyNS8wNi8yMDE1LlxyXG4gKi9cclxuXHJcbihmdW5jdGlvbigpIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgICBhbmd1bGFyLm1vZHVsZSgnYXBwJylcclxuICAgICAgIC5jb250cm9sbGVyKCdsb2dpbkNvbnRyb2xsZXInLGxvZ2luQ29udHJvbGxlcik7XHJcblxyXG5cclxuICAgICAgICBmdW5jdGlvbiBsb2dpbkNvbnRyb2xsZXIoJHRyYW5zbGF0ZSwgJHJvb3RTY29wZSwgJHN0YXRlLCBBdXRoLCAkd2luZG93LCAkZmlsdGVyLCB0b2FzdEFwcCkge1xyXG4gICAgICAgICAgICB2YXIgdm0gPSB0aGlzO1xyXG4gICAgICAgICAgICB2bS5sb2dpbkluUHJvZ3Jlc3MgPSBmYWxzZTtcclxuXHJcbiAgICAgICAgICAgIHZtLnNldExhbmcgPSBmdW5jdGlvbihsYW5nS2V5KSB7XHJcbiAgICAgICAgICAgICAgICAgJHRyYW5zbGF0ZS51c2UobGFuZ0tleSk7XHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICB2bS5sb2dnZWRJbiA9IEF1dGguaXNMb2dnZWRJbigpO1xyXG4gICAgICAgICAgICAkcm9vdFNjb3BlLiRvbignJHJvdXRlQ2hhbmdlU3RhcnQnLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgIHZtLmxvZ2dlZEluID0gQXV0aC5pc0xvZ2dlZEluKCk7XHJcbiAgICAgICAgICAgICAgICBBdXRoLmdldFVzZXIoKVxyXG4gICAgICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdm0udXNlciA9IGRhdGEuZGF0YTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICB2bS5kb0xvZ2luID0gZnVuY3Rpb24odXNlcikge1xyXG4gICAgICAgICAgICAgICAgdm0ubG9naW5JblByb2dyZXNzID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIHZtLmVycm9yID0gJyc7XHJcbiAgICAgICAgICAgICAgICBBdXRoLmxvZ2luKHVzZXIuZW1haWwsIHVzZXIucGFzc3dvcmQpXHJcbiAgICAgICAgICAgICAgICAgICAgLnN1Y2Nlc3MoZnVuY3Rpb24oZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkd2luZG93LmxvY2FsU3RvcmFnZS5zZXRJdGVtKFwidXNlcmVtYWlsXCIsZGF0YS5lbWFpbCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICR3aW5kb3cubG9jYWxTdG9yYWdlLnNldEl0ZW0oXCJ1c2VyaWRcIixkYXRhLmlkKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJHdpbmRvdy5sb2NhbFN0b3JhZ2Uuc2V0SXRlbShcIm5pY2tuYW1lXCIsZGF0YS5uaWNrbmFtZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZtLnNldExhbmcoZGF0YS5sYW5ndWFnZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZtLmxvZ2luSW5Qcm9ncmVzcyA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBBdXRoLmdldFVzZXIoKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24oZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZtLnVzZXIgPSBkYXRhLmRhdGE7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9hc3RBcHAuZXJyb3JNZXNzYWdlKCRmaWx0ZXIoJ3RyYW5zbGF0ZScpKCdXRUxDT01FX1NZU1RFTScpICsgXCI6IFwiICsgdm0udXNlci5uaWNrbmFtZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYoZGF0YS5zdWNjZXNzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc3RhdGUuZ28oJ3N0YXJ0cHJvYmxlbScpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZtLmVycm9yID0gZGF0YS5tZXNzYWdlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB2bS5kb0xvZ291dCA9IGZ1bmN0aW9uKCkge1xyXG5cclxuICAgICAgICAgICAgICAgIEF1dGgubG9nb3V0KCk7XHJcbiAgICAgICAgICAgICAgICAkc3RhdGUoJ2luaXQnKTtcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgfVxyXG5cclxufSkoKTtcclxuIiwiLyoqXHJcbiAqIENyZWF0ZWQgYnkgSk9TRVZBTERFUkxFSSBvbiAyMS8wNi8yMDE1LlxyXG4gKi9cclxuXHJcbmFuZ3VsYXIubW9kdWxlKCdhcHAnKS5cclxuICAgIHNlcnZpY2UoJ1NvY2tldCcsXHJcbiAgICBbJyRsb2NhdGlvbicsICckdGltZW91dCcsXHJcbiAgICBmdW5jdGlvbigkbG9jYXRpb24sICR0aW1lb3V0KSB7XHJcbiAgICAgICAgaWYgKHRydWUpIHtcclxuICAgICAgICAgICAgdGhpcy5zb2NrZXQgPSBpbygpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICRsb2NhdGlvbi5wYXRoKCcvJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMub24gPSBmdW5jdGlvbihldmVudE5hbWUsIGNhbGxiYWNrKSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLnNvY2tldCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zb2NrZXQub24oZXZlbnROYW1lLCBmdW5jdGlvbihkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJHRpbWVvdXQoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrKGRhdGEpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgICAgIHRoaXMuZW1pdCA9IGZ1bmN0aW9uKGV2ZW50TmFtZSwgZGF0YSkge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5zb2NrZXQpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuc29ja2V0LmVtaXQoZXZlbnROYW1lLCBkYXRhKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHRoaXMucmVtb3ZlTGlzdGVuZXIgPSBmdW5jdGlvbihldmVudE5hbWUpIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuc29ja2V0KSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNvY2tldC5yZW1vdmVMaXN0ZW5lcihldmVudE5hbWUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuXSk7XHJcbiJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==