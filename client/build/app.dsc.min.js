!function(){"use strict";angular.module("app",["ngImgCrop","toastService","textAngular","luegg.directives","appRxDrag","DropDSC","authService","ui.router","ngMaterial","ngMdIcons","ngCookies","pascalprecht.translate"]).config(["$httpProvider",function(e){e.interceptors.push("AuthInterceptor")}])}(),function(){"use strict";function e(e){function o(o){this.message=o,e.show({controller:"toastController",controllerAs:"vm",templateUrl:"views/pages/dsctoast.html",action:"OK",highlightAction:!0,position:"top right",hideDelay:500})}var t={message:"",errorMessage:o};return t}angular.module("toastService",[]).controller("toastController",["$mdToast","toastApp",function(e,o){var t=this;t.message=o.message,t.closeToast=function(){e.hide()}}]).factory("toastApp",e),e.$inject=["$mdToast"]}(),function(){"use strict";function e(e,o){e.state("init",{url:"/",templateUrl:"views/pages/initpage.html",controller:"loginController as vm"}).state("init.login",{url:"login",views:{"content-tab":{templateUrl:"views/pages/userlogin.html",controller:"loginController as vm"}}}).state("init.signup",{url:"signup",views:{"content-tab":{templateUrl:"views/pages/signup.html",controller:"signupController as vm"}}}).state("init.rescuepassword",{url:"rescuepassword",views:{"content-tab":{templateUrl:"views/pages/rescuepassword.html",controller:"signupController as vm"}}}).state("startproblem",{url:"/startproblem",templateUrl:"views/pages/startproblem.html",controller:"startProblemController as vm"}).state("profile",{url:"/profile",templateUrl:"views/pages/profile.html",controller:"profileController as vm"}).state("dscreport",{url:"/dscreport",templateUrl:"views/pages/problemreport.html",controller:"problemReportController as vm"}).state("newpassword",{url:"/newpassword/:mytoken",templateUrl:"views/pages/newpassword.html",controller:"signupController as vm"}).state("problem",{url:"/problem",templateUrl:"views/pages/problem.html",controller:"menuProblemController as vm"}).state("problem.description",{url:"/description",views:{"problem-description":{templateUrl:"views/pages/problemdescription.html",controller:"editProblemController as vm"}}}).state("problem.collaborators",{url:"/collaborators",views:{"problem-description":{templateUrl:"views/pages/collaborators.html",controller:"controllerCollaborators as vm"}}}).state("problem.stakeholders",{url:"/stakeholders",views:{"dsc-artifact":{templateUrl:"views/pages/stakeholders.html",controller:"stakeholderController as vm"}}}).state("problem.evaluationframework",{url:"/evaluationframework",views:{"dsc-artifact":{templateUrl:"views/pages/evaluationframework.html",controller:"evaluationframeworkController as vm"}}}).state("problem.semioticframework",{url:"/semioticframework",views:{"dsc-artifact":{templateUrl:"views/pages/semioticframework.html",controller:"semioticframeworkController as vm"}}}).state("problem.carf",{url:"/carf",views:{"dsc-artifact":{templateUrl:"views/pages/carf.html",controller:"carfController as vm"}}}).state("problem.vif",{url:"/vif",views:{"dsc-artifact":{templateUrl:"views/pages/vif.html",controller:"valueIdentificationFrameController as vm"}}}).state("problem.onion",{url:"/onion",views:{"dsc-artifact":{templateUrl:"views/pages/onion.html",controller:"onionController as vm"}}}),o.otherwise("/login")}angular.module("app").config(e),e.$inject=["$stateProvider","$urlRouterProvider"]}(),function(){"use strict";function e(e){e.useStaticFilesLoader({prefix:"app/language/lang-",suffix:".json"}),e.preferredLanguage("en"),e.useSanitizeValueStrategy("escaped"),e.useLocalStorage()}function o(e){function o(o){e.use(o)}var t=this;t.setLang=o}function t(){return{templateUrl:"app/language/changeLanguage.html",restrict:"E"}}angular.module("app").config(e).controller("languageController",o).directive("changeLanguage",t),e.$inject=["$translateProvider"],o.$inject=["$translate"]}(),function(){"use strict";function e(e,o,t,r){function n(){d.idProblem=e.localStorage.getItem("problemid"),t.getcarf(d.idProblem).success(function(e){e.success&&(d.localStakeholders=e.stakeholders,d.stakeholderList=d.localStakeholders,d.carfList=e.carf,d.carfPriorityList=d.localPriorityList)}),d.inProcessing=!1}function a(){d.carf={_id:"",pms:"",values:[],priority:"",requirement:"",stakeholders:[]},d.valueList=[]}function i(e){""===e.pms?r.errorMessage("Select PMS"):e.values.length<1?r.errorMessage("Select one or more Value"):e.stakeholders.length<1?r.errorMessage("Select one or more Stakeholder(s)"):""===e.priority?r.errorMessage("Select priority [Low, Medium or High]"):(o.emit("broadcastCARFadd",e),d.stakeholderList=[],d.carfPriorityList=[])}function s(e,t){var r={index:e,carf:t};o.emit("broadcastCARFremove",r)}function l(e){void 0!==e&&angular.forEach(d.carfPMSValue,function(o){return o.pms==e?(d.carf.values=[],void(d.valueList=o.values)):void 0})}function c(e){d.carf.priority=e}function u(e){if(0===d.carf.values.length)d.carf.values.push(e);else{for(var o=0;o<d.carf.values.length;o++)if(e==d.carf.values[o])return void d.carf.values.splice(o,1);d.carf.values.push(e)}}function m(e){if(0===d.carf.stakeholders.length)d.carf.stakeholders.push(e);else{for(var o=0;o<d.carf.stakeholders.length;o++)if(e==d.carf.stakeholders[o])return void d.carf.stakeholders.splice(o,1);d.carf.stakeholders.push(e)}}var d=this;d.idProblem="",d.inProcessing=!0,d.valueList=[],d.stakeholderList=[],d.localStakeholders=[],d.addpmsvalue=i,d.removeCARF=s,d.selectPMSValue=l,d.setPriotity=c,d.addListValue=u,d.addStakeholder=m,d.carf={pms:"",values:[],priority:"",requirement:"",stakeholders:[]},d.initCarf=n,d.carfList=[],d.carfPriorityList=[],o.on("onBroadcastCARFadd",function(e){d.carfList.push(e),a(),d.stakeholderList=d.localStakeholders,d.carfPriorityList=d.localPriorityList}),o.on("onBroadcastCARFremove",function(e){d.carfList.splice(e,1)}),d.localPriorityList=["Low","Medium","High"],d.carfPMSValue=[{pms:"Interaction",values:["Identity","Norms"]},{pms:"Association",values:["Conversation","Groups","Relationship","Trust"]},{pms:"Learning",values:["Meta-communication"]},{pms:"Play",values:["Aesthetics","Emotion and Affection"]},{pms:"Protection",values:["Informed consert","Reputation","Security"]},{pms:"Exploitation",values:["Accessibility","Object","Property (ownership)","Usability"]},{pms:"Teporality",values:["Availability","Awareness","Presence"]},{pms:"Territoriality",values:["Portability","Privacy","Scalability","Visibility"]},{pms:"Classification",values:["Autonomy","Collaboration","Sharing","Adaptability"]},{pms:"Subsistence",values:["Reciprocity"]}]}angular.module("app").controller("carfController",e),e.$inject=["$window","Socket","problemService","toastApp"]}(),function(){"use strict";function e(e,o,t,r){function n(){l.isOpenChat=!l.isOpenChat,document.getElementById("message").focus()}function a(){l.idProblem=r.localStorage.getItem("problemid"),l.nickname=r.localStorage.getItem("nickname"),l.photo=r.localStorage.getItem("photo"),t.gethistorychat(l.idProblem).success(function(e){if(e.success)for(var o=0;o<e.historychat.length;o++){var t=new Date(e.historychat[o].time),r={nickname:e.historychat[o].nickname,msg:e.historychat[o].msg,time:t.getDate()+"/"+(t.getMonth()+1)+"/"+t.getFullYear()+" ["+t.getHours()+":"+t.getMinutes()+"] "};l.messages.push(r)}}),o.emit("checkUsers")}function i(){l.replay?l.replay=!1:l.replay=!0}function s(e){void 0===e||e.length<2||(o.emit("broadcastChat",e),l.newmsg="")}var l=this;l.newmsg="",l.messages=[],l.replay=!1,l.nickname="",l.userList=[],l.initHistoryChat=a,l.showReplay=i,l.sendMessage=s,l.photo="",l.openChat=n,l.isOpenChat=!1,o.on("onBroadcastChat",function(e){var o=new Date(e[e.length-1].time);l.messages.push({nickname:e[e.length-1].nickname,msg:e[e.length-1].msg,time:o.getDate()+"/"+(o.getMonth()+1)+"/"+o.getFullYear()+" ["+o.getHours()+":"+o.getMinutes()+"] "})}),o.on("onCheckUsers",function(e){l.userList=e})}angular.module("app").controller("chatDSC",e),e.$inject=["$timeout","Socket","problemService","$window"]}(),function(){"use strict";function e(e,o,t,r){function n(){l.idProblem=e.localStorage.getItem("problemid"),l.useremail=e.localStorage.getItem("useremail"),t.getcollaborators(l.idProblem).success(function(e){e.success?l.collaborators=e.collaborators:r.errorMessage(e.message)})}function a(e){for(var o=0;o<l.collaborators.length;o++)if(e==l.collaborators[o].email)return!0;return!1}function i(e){if(l.useremail==e)r.errorMessage(l.useremail+" is email of owner.");else if(a(e))r.errorMessage("Usuario Cadastrado.");else{var o={idproblem:l.idProblem,email:e};t.invite(o).success(function(e){e.success?l.collaborators=e.collaborators:r.errorMessage(e.message)})}}function s(e){var o={idproblem:l.idProblem,email:e.email};t.removecollaborators(o).success(function(e){e.success?(r.errorMessage("Colaborador foi removido do projeto."),l.collaborators=e.collaborators):r.errorMessage(e.message)})}var l=this;l.idProblem="",l.collaborators=[],l.useremail="",l.initCollaborators=n,l.addCollaborator=i,l.removeCollaborator=s}angular.module("app").controller("controllerCollaborators",e),e.$inject=["$window","Socket","problemService","toastApp"]}(),function(){"use strict";function e(){function e(e){var o=document.getElementById("projectResport"),t=new jsPDF("l","px");t.addHTML(o,0,0,{pagesplit:!0},function(e){t.save("test.pdf")})}var o=this;o.idproblem="ajflajfljalfjaljf",o.buidReport=e}angular.module("app").controller("dscReportController",e)}(),function(){"use strict";function e(e,o,t,r){function n(){s.idproblem=e.localStorage.getItem("problemid"),o.getevaluation(s.idproblem).success(function(e){e.success?s.evaluationframeworkList=e.evaluationframework:r.errorMessage(e.message)})}function a(e){t.emit("broadcastFrameSave",e)}function i(e){e.openEdit=!0}var s=this;s.evaluationframeworkList=[],s.initEvaluation=n,s.setOpenEditDiscution=i,s.saveFrame=a,t.on("onBroadcastFrameEdit",function(e){console.log("O que vem aqui..."+e),angular.forEach(s.evaluationframeworkList,function(o){o.onionlayer==e.onionlayer&&angular.forEach(o.stakeholders,function(o){o._id==e._id&&(o.name=e.name,o.onionlayer=e.onionlayer,o.description=e.description,o.openEdit=e.openEdit,o.problems=e.problems,o.solutions=e.solutions)})})}),t.on("onUpdateStakeholder",function(e){console.log(e)})}angular.module("app").controller("evaluationframeworkController",e),e.$inject=["$window","problemService","Socket","toastApp"]}(),function(){"use strict";function e(e,o,t,r,n,a){function i(){d.nickname=t.localStorage.getItem("nickname"),d.idProblem=t.localStorage.getItem("problemid"),r.getproblem(d.idProblem).success(function(e){e.success?d.problem=e.problem:n.errorMessage(e.message)});var e={idproblem:d.idProblem,nickname:d.nickname};a.emit("initProblem",e)}function s(){o.go("startproblem")}function l(){o.go("problem.collaborators")}function c(){o.go("dscreport")}function u(){o.go("problem.description")}function m(){e.logout(),o.go("init.login")}var d=this;d.formAddCollaborators=l,d.editDescriptionProblem=u,d.doLogout=m,d.systemReturn=s,d.formProblemReport=c,d.getCurrentProblem=i,d.nickname}angular.module("app").controller("menuProblemController",e),e.$inject=["Auth","$state","$window","problemService","toastApp","Socket"]}(),function(){"use strict";function e(e,o,t,r,n){var a=this;a.idproblem="",a.intiMytOnion=intiMytOnion,a.savePostItOnion=savePostItOnion,a.editPostItOnion=editPostItOnion,a.delPostItOnion=delPostItOnion,a.addPostItOnion=addPostItOnion,a.onOnion=onOnion,a.offOnion=offOnion}angular.module("app").controller("onionController",e),e.$inject=["Socket","$window","problemService","$mdDialog","toastApp"]}(),function(){"use strict";function e(e,o,t,r,n,a){function i(){u.nickname=n.localStorage.getItem("nickname"),u.idProblem=n.localStorage.getItem("problemid"),u.localcode=n.localStorage.getItem("localcode"),a.getproblem(u.idProblem).success(function(e){e.success?u.problem=e.problem:r.errorMessage(e.message)});var o={idproblem:u.idProblem,nickname:u.nickname};e.emit("initProblem",o)}function s(){m=!0}function l(o){o.update=m,o.localcode=u.localcode,e.emit("atualizarProblema",o),m&&(m=!1,t(s,2e3))}function c(o){o.localcode=u.localcode,o.update=m,e.emit("atualizarProblema",o)}var u=this,m=!0;u.problem="",u.problemUpdate=l,u.getCurrentProblem=i,u.saveDescription=c,u.nickname,u.localcode="";var d=null,p=null;u.selectedIndex=1,u.$watch("selectedIndex",function(e,o){p=d,d=artefacts[e],o+1&&o!=e&&console.log("Goodbye "+p.title+"!"),e+1&&console.log("Hello "+d.title+"!")}),e.on("onAtualizarProblema",function(e){u.localcode!==e.localcode&&(u.problem.description=e.description),u.problem.update=m})}angular.module("app").controller("editProblemController",e),e.$injectre=["$scope","Socket"],e.$inject=["Socket","$watch","$timeout","toastApp","$window","problemService"]}(),function(){"use strict";function e(e,o,t,r){function n(){i.idProblem=e.localStorage.getItem("problemid"),o.getproblemreport(i.idProblem).success(function(e){e.success?i.problem=e.problem:t.errorMessage(e.message)})}function a(){r.go("problem.stakeholders")}var i=this;i.idProblem,i.problem,i.initProblemPeport=n,i.systemReturn=a}angular.module("app").controller("problemReportController",e),e.$inject=["$window","problemService","toastApp","$state"]}(),function(){"use strict";function e(e,o){function t(o){return e.post(v,o)}function r(o){return e.get(w+"?idproblem="+o)}function n(o){return e.get(k+"?idproblem="+o)}function a(o){return e.get(b+"?email="+o)}function i(o){return e.get(y+"?idproblem="+o)}function s(o){return e.post(S,o)}function l(o){return e.get(P+"?idproblem="+o)}function c(o){return e.get(C+"?idproblem="+o)}function u(o){return e.get($+"?idproblem="+o)}function m(o){return e.get(I+"?idproblem="+o)}function d(o){return e.get(A+"?idproblem="+o)}function p(o){return e.get(h+"?email="+o)}function g(o){return e.get(L+"?idproblem="+o.idproblem+"&email="+o.email)}function f(o){return e.get(E+"?idproblem="+o)}var b="/api/problem/getproblems",h="/api/problem/getproblemscollaborator",v="/api/problem/newproblem",k="/api/problem/getproblem",w="/api/problem/getproblemreport",y="/api/problem/getcollaborators",S="/api/problem/invite",P="/api/problem/getonion",C="/api/problem/getevaluation",$="/api/problem/getsemiotic",I="/api/problem/getcarf",A="/api/problem/removeproblem",L="/api/problem/removecollaborator",E="/api/problem/historychat",M={newproblem:t,getuserproblems:a,getproblem:n,getcollaborators:i,invite:s,getonion:l,getevaluation:c,getsemiotic:u,getcarf:m,removeproblem:d,getproblemscollaborator:p,removecollaborators:g,gethistorychat:f,getproblemreport:r};return M}angular.module("app").factory("problemService",e),e.$inject=["$http","$location"]}(),function(){"use strict";function e(e,o,t,r){function n(){m.idproblem=o.localStorage.getItem("problemid"),t.getsemiotic(m.idproblem).success(function(e){e.success?m.semioticframework=e.semioticframework:r.errorMessage(e.message)})}function a(o,t){var r={text:o,update:t};e.emit("updateSocialWorld",r)}function i(o,t){var r={text:o,update:t};e.emit("updatePragmatic",r)}function s(o,t){var r={text:o,update:t};e.emit("updateSemantic",r)}function l(o,t){var r={text:o,update:t};e.emit("updateSyntatic",r)}function c(o,t){var r={text:o,update:t};e.emit("updateEmpirical",r)}function u(o,t){var r={text:o,update:t};e.emit("updatePhysical",r)}var m=this;m.idproblem="",m.saveSocialWorld=a,m.savePragmatic=i,m.saveSemantic=s,m.saveSyntatic=l,m.saveEmpirical=c,m.savePhysical=u,m.semioticframework="",m.initSemioticFramework=n,e.on("onUpdateSocialWorld",function(e){m.semioticframework.socialworld=e}),e.on("onUpdatePragmatic",function(e){m.semioticframework.pragmatic=e}),e.on("onUpdateSemantic",function(e){m.semioticframework.semioticramework=e}),e.on("onUpdateSyntatic",function(e,o){m.semioticframework.syntatic=e}),e.on("onUpdateEmpirical",function(e){m.semioticframework.empirical=e}),e.on("onUpdatePhysical",function(e){m.semioticframework.physical=e})}angular.module("app").controller("semioticframeworkController",e),e.$inject=["Socket","$window","problemService","toastApp"]}(),function(e){"use strict";function o(e,o,t,r,n){function a(){p.idproblem=o.localStorage.getItem("problemid"),p.localcode=o.localStorage.getItem("localcode"),t.getonion(p.idproblem).success(function(e){e.success?p.stakeholderList=e.stakeholders:n.errorMessage(e.message)}),p.inProcessing=!1}function i(o){e.emit("broadcastOnionSave",o)}function s(o){e.emit("broadcastOnionEdit",o)}function l(o,t){var r={index:o,stakeholder:t};e.emit("broadcastOnionRemove",r)}function c(e,o,t){var n=r.confirm().parent(angular.element(document.body)).title("Detete Stakeholder?").content("Title: "+t.name).ariaLabel("Remove Stakeholder").ok("Yes!").cancel("Cancel").targetEvent(e);r.show(n).then(function(){l(o,t)})}function u(o,t){var r={onionlayer:t,name:"",description:"",openEdit:!0,x:o.pageX+"px",y:o.pageY+"px"};e.emit("broadcastOnionAdd",r)}function m(e){document.getElementById("name"+e).setAttribute("style","text-decoration: underline;"),document.getElementById("legend"+e).setAttribute("opacity","0.7"),document.getElementById(e).setAttribute("opacity","0.7")}function d(e){document.getElementById("name"+e).setAttribute("style","text-decoration: none;"),document.getElementById("legend"+e).setAttribute("opacity","1.0"),document.getElementById(e).setAttribute("opacity","1.0")}var p=this;p.idproblem="",p.stakeholderList=[],p.stakeholder="",p.intitOnion=a,p.move=!1,p.inProcessing=!0,p.saveStakeholder=i,p.setOpenEdit=s,p.delPostIt=c,p.addPostIt=u,p.acende=m,p.apaga=d,p.localcode="",e.on("onBroadcastOnionSave",function(e){angular.forEach(p.stakeholderList,function(o){o._id==e._id&&(o.stakeholder=e.stakeholder,o.name=e.name,o.description=e.description,o.openEdit=e.openEdit,o.x=e.x,o.y=e.y,o.zindex=9999)})}),e.on("onBroadcastOnionEdit",function(e){angular.forEach(p.stakeholderList,function(o){o._id===e&&(o.openEdit=!0,o.zindex=9999)})}),e.on("onBroadcastOnionRemove",function(e){var o=document.getElementById("stakeholder"+p.stakeholderList[e]._id);o.style.display="none",p.stakeholderList.splice(e,1)}),e.on("onBroadcastMove",function(e){console.log(e.localcode+"  "+p.localcode),p.localcode!==e.localcode&&(document.getElementById("stakeholder"+e._id).style.left=e.x,document.getElementById("stakeholder"+e._id).style.top=e.y)}),e.on("onBroadcastOnionAdd",function(e){p.stakeholderList.push(e)})}angular.module("app").controller("stakeholderController",o),o.$inject=["Socket","$window","problemService","$mdDialog","toastApp"]}(this),function(){"use strict";function e(e,o,t,r,n,a,i){function s(){b.userid=n.localStorage.getItem("userid"),b.nickname=n.localStorage.getItem("nickname"),b.useremail=n.localStorage.getItem("useremail"),b.photo=n.localStorage.getItem("photo"),a.getuserproblems(b.useremail).success(function(e){if(e.success){for(var o=0;o<e.problems.length;o++)e.problems[o].description=e.problems[o].description.replace(/(<([^>]+)>)/gi,"").substring(0,460);b.problemList=e.problems}else i.errorMessage(e.message)}),a.getproblemscollaborator(b.useremail).success(function(e){if(e.success){for(var o=0;o<e.problems.length;o++)e.problems[o].description=e.problems[o].description.replace(/(<([^>]+)>)/gi,"").substring(0,460);b.problemCollaboratorList=e.problems}else i.errorMessage(e.message)}),b.loginInProgress=!1}function l(e){a.removeproblem(e).success(function(o){if(o.success){for(var t=0;t<b.problemList.length;t++)if(b.problemList[t]._id==e){b.problemList.splice(t,1);break}}else i.errorMessage(o.message)})}function c(o,t){var r=e.confirm().parent(angular.element(document.body)).title("Detete Problem?").content("Title: "+t.title).ariaLabel("Remove Problem").ok("Desejo remover!").cancel("Cancel").targetEvent(o);e.show(r).then(function(){l(t._id)})}function u(e){e.userid=b.userid,a.newproblem(e).success(function(e){e.success?b.editProblem(e.problem):i.errorMessage(e.message)})}function m(e){n.localStorage.setItem("problemid",e._id);var t={idproblem:e._id,nickname:b.nickname};r.emit("initProblem",t),o.go("problem.stakeholders")}function d(){t.logout(),o.go("init.login")}function p(){o.go("profile")}function g(o){e.show({controller:f,templateUrl:"views/pages/newproblem.html",parent:angular.element(document.body),targetEvent:o})}function f(e,o){e.hide=function(){o.hide()},e.cancel=function(){o.cancel()},e.addNewProblem=function(e){b.startNewProblem(e),o.cancel()},e.addArtifact=function(e){console.log(e)}}var b=this;b.nickname="",b.userid="",b.useremail="",b.problemList=[],b.problemCollaboratorList=[],b.loginInProgress=!0,b.getProblems=s,b.revomveProblem=c,b.startNewProblem=u,b.editProblem=m,b.doLogout=d,b.newProblem=g,b.editProfile=p,b.photo,f.$inject=["$scope","$mdDialog"]}angular.module("app").controller("startProblemController",e),e.$inject=["$mdDialog","$state","Auth","Socket","$window","problemService","toastApp"]}(),function(){"use strict";function e(e,o,t,r){function n(){u.idproblem=e.localStorage.getItem("problemid"),o.getonion(u.idproblem).success(function(e){if(e.success){if(e.stakeholders.length>0){for(var o=1;o<u.sugestionValuesArray.length;o++)u.sugestionValues+=u.sugestionValuesArray[o]+", ";u.sugestionValues[u.sugestionValuesArray[u.sugestionValuesArray.length-1]]+".";for(var r=0;r<e.stakeholders.length;r++)for(var n=0;n<u.stakeholderList.length;n++){var a={_id:e.stakeholders[r]._id,onionlayer:e.stakeholders[r].onionlayer,values:e.stakeholders[r].values,name:e.stakeholders[r].name,description:e.stakeholders[r].description,openEdit:e.stakeholders[r].openEdit,x:e.stakeholders[r].x,y:e.stakeholders[r].y,newValues:[]};e.stakeholders[r].onionlayer!=u.stakeholderList[n].onionlayer||u.stakeholderList[n].stakeholders.push(a)}}u.inProcessing=!1}else t.errorMessage(e.message)})}function a(e){e.openEdit=!0}function i(e){e.openEdit=!1}function s(e,o){for(var t=[],n=0;n<o.values.length;n++)o.values[n]!=e&&t.push(o.values[n]);o.values=t,r.emit("broadcastOnionSave",o)}function l(e){if(""===e.newValues||void 0===e.newValues)t.errorMessage("Valor não especificado.");else{for(var o=e.newValues.split(","),n=0;n<o.length;n++)c(e.values,o[n])?t.errorMessage("Duplicate value: "+o[n]):e.values.push(o[n]);e.newValues="",e.openEdit=!1,r.emit("broadcastOnionSave",e)}}function c(e,o){for(var t=0;t<e.length;t++)if(o===e[t])return!0;return!1}var u=this;u.inProcessing=!0,u.idProblem="",u.useremail="",u.newvalues="",u.initValueIdentificationFrame=n,u.setSuggestionShow=a,u.leaveSuggestionShow=i,u.removeValueIdentication=s,u.setValueIdentication=l,u.sugestionValues="",u.stakeholderList=[{onionlayer:"Community",stakeholders:[]},{onionlayer:"Market",stakeholders:[]},{onionlayer:"Source",stakeholders:[]},{onionlayer:"Contribution",stakeholders:[]},{onionlayer:"Technico",stakeholders:[]}],u.sugestionValuesArray=["Acessibilidade","Adaptabilidade","Estética","Autonomia","Disponibilidade","Consciência","Colaboração","Conversação","Emoção e Afeto","Grupos","Identidade","Consentimento informado","Meta-comunicação","Normas","Objeto","Portabilidade","Presença","Privacidade","Propriedade","Reciprocidade, Relacionamento, Reputação","Escalabilidade","Segurança","Compartilhamento","Confiança","Usabilidade","Visibilidade"],r.on("onBroadcastOnionSave",function(e){angular.forEach(u.stakeholderList,function(o){o._id==e._id&&(o.stakeholder=e.stakeholder,o.name=e.name,o.description=e.description,o.openEdit=e.openEdit,o.x=e.x,o.y=e.y,o.newValues=[])})})}angular.module("app").controller("valueIdentificationFrameController",e),e.$inject=["$window","problemService","toastApp","Socket"]}(),function(){"use strict";function e(e,o,t,r){function n(){o.go("startproblem")}function a(){s.userid=e.localStorage.getItem("userid"),void 0!==s.userid}function i(o){var t={userid:e.localStorage.getItem("userid"),photo:o};r.uploadPhoto(t).success(function(t){t.success?e.localStorage.setItem("photo",o):toastApp.errorMessage("-----")})}var s=this;s.startProfile=a,s.uploadInProgress=!0,s.uploadProgress=0,s.userid,s.savePhoto=i,s.systemReturn=n,s.myImage="",s.myCroppedImage="";var l=function(e){var o=e.currentTarget.files[0],r=new FileReader;r.onload=function(e){t.$apply(function(o){o.myImage=e.target.result})},r.readAsDataURL(o)};angular.element(document.querySelector("#fileInput")).on("change",l)}angular.module("app").controller("profileController",e),e.$inject=["$window","$state","$scope","signupService"]}(),function(){"use strict";function e(e,o,t,r,n,a,i,s,l){function c(e){t.create(e).success(function(o){o.success?(n.errorMessage(s("translate")("WELCOME_SYSTEM")+e.nickname),r.go("init.login")):n.errorMessage("Email Já cadastrado")})}function u(o){e.use(o)}function m(e){t.rescuePassword(e).success(function(o){o.success?(n.errorMessage("Email com instruções enviado para "+e.email),r.go("init.login")):n.errorMessage("Error")})}function d(e){t.changePassword(e).success(function(e){e.success?(n.errorMessage("Senha alterada com sucesso. Faça login com a nova senha."),r.go("init.login")):n.errorMessage("Error")})}var p=this;p.message="",p.saveUser=c,p.rescuePassword=m,p.changePassword=d,p.setLang=u,p.loginInProgress=!1}angular.module("app").controller("signupController",e),e.$inject=["$translate","$window","signupService","$state","toastApp","AuthToken","Auth","$filter","$stateParams"]}(),function(){"use strict";function e(e,o){function t(o){return e.post(i,o)}function r(o){return e.post(s,o)}function n(t){var r=o.search();return e.get(l+"?mytoken="+r.mytoken+"&password="+t.password)}function a(o){return e.post(c,o)}var i="/api/signup/",s="/api/rescuepasswd/",l="/api/rescuepasswd/newpasswd/",c="/api/profile/photo/",u={create:t,rescuePassword:r,changePassword:n,uploadPhoto:a};return u}angular.module("app").factory("signupService",e),e.$inject=["$http","$location"]}(),function(){"use strict";function e(e){var o=e.extendPalette("teal",{50:"E0F2F1",100:"B2DFDB",200:"80CBC4",300:"4DB6AC",400:"26A69A",500:"009688",600:"00897B",700:"00796B",800:"00695C",900:"004D40",A100:"A7FFEB",A200:"64FFDA",A400:"1DE9B6",A700:"00BFA5",contrastDefaultColor:"light",contrastDarkColors:["50","100","200","300","400","A100"],contrastLightColors:void 0});e.definePalette("teal",o),e.theme("default").primaryPalette("teal").accentPalette("green")}angular.module("app").config(e),e.$inject=["$mdThemingProvider","$locationProvider"]}(),function(){"use strict";angular.module("authService",[]).factory("Auth",["$http","$q","AuthToken",function(e,o,t){var r={};return r.login=function(o,r){return e.post("/api/login",{email:o,password:r}).success(function(e){return t.setToken(e.token),e})},r.logout=function(){t.setToken()},r.isLoggedIn=function(){return t.getToken()?!0:!1},r.getUser=function(r){return t.getToken()?e.get("/api/me/?userid="+r):o.reject({message:"User has no token"})},r}]).factory("AuthToken",["$window",function(e){var o={};return o.getToken=function(){return e.localStorage.getItem("token")},o.setToken=function(o){o?e.localStorage.setItem("token",o):e.localStorage.removeItem("token")},o}]).factory("AuthInterceptor",["$q","$location","AuthToken",function(e,o,t){var r={};return r.request=function(e){var o=t.getToken();return o&&(e.headers["x-access-token"]=o),e},r}])}(),angular.module("DropDSC",[]).directive("draggable",["$document","Socket","$window",function(e,o,t){return{restrict:"A",replace:!0,link:function(r,n,a){function i(e){var o=e.target.id;"svg"==o&&(o=""),r.stakeholder.onionlayer=o,y=e.pageY,x=e.pageX,n.css({top:y+"px",left:x+"px"}),r.stakeholder.x=x+"px",r.stakeholder.y=y+"px"}function s(){e.unbind("mousemove",i),e.unbind("mouseup",s),o.emit("broadcastMove",r.stakeholder)}n.on("mousedown",function(o){"stakeholder"==o.target.id.substring(0,11)&&(r.stakeholder.localcode=t.localStorage.getItem("localcode"),o.preventDefault(),e.bind("mousemove",i),e.bind("mouseup",s))})}}}]),function(e){angular.module("appRxDrag",["rx"]).directive("rxdraggable",["$document","$window","rx","Socket",function(e,o,t,r){return function(n,a,i){var s=o.localStorage.getItem("localcode"),l=t.Observable.fromEvent(a,"mouseup"),c=t.Observable.fromEvent(e,"mousemove"),u=t.Observable.fromEvent(a,"mousedown").map(function(e){return e.preventDefault(),{left:e.clientX-a[0].getBoundingClientRect().left,top:e.clientY-a[0].getBoundingClientRect().top}}),m=u.selectMany(function(e){return c.map(function(o){return{left:o.clientX-e.left,top:o.clientY-e.top}}).takeUntil(l)});m.subscribe(function(e){a.css({top:e.top+"px",left:e.left+"px"}),e.localcode=s,r.emit("broadcastMove",e)})}}])}.call(this),function(){"use strict";function e(e,o,t,r,n,a,i){function s(o){e.use(o)}function l(){return Math.random()+Math.floor(10*Math.random())}function c(e){m.inProcessing=!0,m.error="",r.login(e.email,e.password).success(function(e){n.localStorage.setItem("useremail",e.email),n.localStorage.setItem("userid",e.id),n.localStorage.setItem("localcode",e.id+"-"+l()),n.localStorage.setItem("nickname",e.nickname),m.setLang(e.language),m.inProcessing=!1,r.getUser(e.id).then(function(o){i.errorMessage(a("translate")("WELCOME_SYSTEM")+": "+e.nickname),e.success?(n.localStorage.setItem("photo",o.data.photo),t.go("startproblem")):i.errorMessage("Usuário e senha não conferem.")})})}function u(){r.logout(),t("init")}var m=this;m.inProcessing=!1,m.setLang=s,m.doLogout=u,m.doLogin=c,m.loggedIn=r.isLoggedIn(),o.$on("$routeChangeStart",function(){m.loggedIn=r.isLoggedIn(),r.getUser().then(function(e){m.user=e.data})})}angular.module("app").controller("loginController",e),e.$inject=["$translate","$rootScope","$state","Auth","$window","$filter","toastApp"]}(),function(){"use strict";angular.module("app").service("Socket",["$location","$timeout",function(e,o){this.socket=io(),this.on=function(e,t){this.socket&&this.socket.on(e,function(e){o(function(){t(e)})})},this.emit=function(e,o){this.socket&&this.socket.emit(e,o)},this.removeListener=function(e){this.socket&&this.socket.removeListener(e)}}])}();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImRzYy5hcHAuanMiLCJ0b2FzdC5zZXJ2aWNlLmpzIiwicm91dGVyLmFwcC5qcyIsImFwcC5kc2MubWluLmpzIiwibGFuZ3VhZ2UvdHJhbnNsYXRlLmNvbnRyb2xsZXIuanMiLCJwcm9ibGVtL2NhcmYuY29udHJvbGxlci5qcyIsInByb2JsZW0vY2hhdC5jb250cm9sbGVyLmpzIiwicHJvYmxlbS9jb2xsYWJvcmF0b3JzLmNvbnRyb2xsZXIuanMiLCJwcm9ibGVtL2RzY3Jlc3BvcnQuY29udHJvbGxlci5qcyIsInByb2JsZW0vZXZhbHVhdGlvbmZyYW1ld29yay5jb250cm9sbGVyLmpzIiwicHJvYmxlbS9tZW51LnByb2JsZW0uY29udHJvbGxlci5qcyIsInByb2JsZW0vb25pb24uY29udHJvbGxlci5qcyIsInByb2JsZW0vcHJvYmxlbS5lZGl0LmNvbnRyb2xsZXIuanMiLCJwcm9ibGVtL3Byb2JsZW0ucmVwb3J0LmNvbnRyb2xsZXIuanMiLCJwcm9ibGVtL3Byb2JsZW0uc2VydmljZS5qcyIsInByb2JsZW0vc2VtaW90aWNmcmFtZXdvcmsuZWRpdC5jb250cm9sbGVyLmpzIiwicHJvYmxlbS9zdGFrZWhvbGRlci5lZGl0LmNvbnRyb2xsZXIuanMiLCJwcm9ibGVtL3N0YXJ0LnByb2JsZW0uY29udHJvbGxlci5qcyIsInByb2JsZW0vdmFsdWVkZW50aWZpY2F0aW9uZnJhbWUuY29udHJvbGxlci5qcyIsInVzZXIvcHJvZmlsZS5jb250cm9sbGVyLmpzIiwidXNlci9zaWdudXAuY29udHJvbGxlci5qcyIsInVzZXIvc2lnbnVwLnNlcnZpY2UuanMiLCJhcHAuY29uZmlnLmpzIiwiYXV0aC5zZXJ2aWNlLmpzIiwiZHJhZy5kc2MuanMiLCJkcmFncnguZHNjLmpzIiwibG9naW4uY29udHJvbGxlci5qcyIsInNvY2tldC5zZXJ2aWNlLmpzIl0sIm5hbWVzIjpbImFuZ3VsYXIiLCJtb2R1bGUiLCJjb25maWciLCIkaHR0cFByb3ZpZGVyIiwiaW50ZXJjZXB0b3JzIiwicHVzaCIsInRvYXN0QXBwIiwiJG1kVG9hc3QiLCJlcnJvck1lc3NhZ2UiLCJ0aGlzIiwibWVzc2FnZSIsInNob3ciLCJjb250cm9sbGVyIiwiY29udHJvbGxlckFzIiwidGVtcGxhdGVVcmwiLCJhY3Rpb24iLCJoaWdobGlnaHRBY3Rpb24iLCJwb3NpdGlvbiIsImhpZGVEZWxheSIsInNlcnZpY2UiLCJzZWxmIiwiY2xvc2VUb2FzdCIsImhpZGUiLCJmYWN0b3J5IiwiJGluamVjdCIsInJvdXRlcyIsIiRzdGF0ZVByb3ZpZGVyIiwiJHVybFJvdXRlclByb3ZpZGVyIiwic3RhdGUiLCJ1cmwiLCJ2aWV3cyIsImNvbnRlbnQtdGFiIiwicHJvYmxlbS1kZXNjcmlwdGlvbiIsImRzYy1hcnRpZmFjdCIsIm90aGVyd2lzZSIsImluaXRMYW5ndWFnZSIsIiR0cmFuc2xhdGVQcm92aWRlciIsInVzZVN0YXRpY0ZpbGVzTG9hZGVyIiwicHJlZml4Iiwic3VmZml4IiwicHJlZmVycmVkTGFuZ3VhZ2UiLCJ1c2VTYW5pdGl6ZVZhbHVlU3RyYXRlZ3kiLCJ1c2VMb2NhbFN0b3JhZ2UiLCJsYW5ndWFnZUNvbnRyb2xsZXIiLCIkdHJhbnNsYXRlIiwic2V0TGFuZyIsImxhbmdLZXkiLCJ1c2UiLCJjaGFuZ2VMYW5ndWFnZSIsInJlc3RyaWN0IiwiZGlyZWN0aXZlIiwiY2FyZkNvbnRyb2xsZXIiLCIkd2luZG93IiwiU29ja2V0IiwicHJvYmxlbVNlcnZpY2UiLCJpbml0Q2FyZiIsImlkUHJvYmxlbSIsImxvY2FsU3RvcmFnZSIsImdldEl0ZW0iLCJnZXRjYXJmIiwic3VjY2VzcyIsImRhdGEiLCJsb2NhbFN0YWtlaG9sZGVycyIsInN0YWtlaG9sZGVycyIsInN0YWtlaG9sZGVyTGlzdCIsImNhcmZMaXN0IiwiY2FyZiIsImNhcmZQcmlvcml0eUxpc3QiLCJsb2NhbFByaW9yaXR5TGlzdCIsImluUHJvY2Vzc2luZyIsInJlc2V0Q2FyZiIsIl9pZCIsInBtcyIsInZhbHVlcyIsInByaW9yaXR5IiwicmVxdWlyZW1lbnQiLCJ2YWx1ZUxpc3QiLCJhZGRwbXN2YWx1ZSIsImxlbmd0aCIsImVtaXQiLCJyZW1vdmVDQVJGIiwiaW5kZXgiLCJvYmoiLCJzZWxlY3RQTVNWYWx1ZSIsInVuZGVmaW5lZCIsImZvckVhY2giLCJjYXJmUE1TVmFsdWUiLCJwbXNfdmFsdWUiLCJzZXRQcmlvdGl0eSIsImFkZExpc3RWYWx1ZSIsIm5ld3ZhbHVlIiwiaSIsInNwbGljZSIsImFkZFN0YWtlaG9sZGVyIiwibmV3U3Rha2Vob2xkZXIiLCJvbiIsImlkIiwiY2hhdERTQyIsIiR0aW1lb3V0Iiwib3BlbkNoYXQiLCJpc09wZW5DaGF0IiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsImZvY3VzIiwiaW5pdEhpc3RvcnlDaGF0Iiwibmlja25hbWUiLCJwaG90byIsImdldGhpc3RvcnljaGF0IiwiaGlzdG9yeWNoYXQiLCJ0bXAiLCJEYXRlIiwidGltZSIsIm1zbiIsIm1zZyIsImdldERhdGUiLCJnZXRNb250aCIsImdldEZ1bGxZZWFyIiwiZ2V0SG91cnMiLCJnZXRNaW51dGVzIiwibWVzc2FnZXMiLCJzaG93UmVwbGF5IiwicmVwbGF5Iiwic2VuZE1lc3NhZ2UiLCJjaGF0bXNnIiwibmV3bXNnIiwidXNlckxpc3QiLCJjb250cm9sbGVyQ29sbGFib3JhdG9ycyIsImluaXRDb2xsYWJvcmF0b3JzIiwidXNlcmVtYWlsIiwiZ2V0Y29sbGFib3JhdG9ycyIsImNvbGxhYm9yYXRvcnMiLCJzZWFyY2hDYWxsYWJvcmF0aW9uIiwiZW1haWwiLCJhZGRDb2xsYWJvcmF0b3IiLCJpbnZpdGUiLCJpZHByb2JsZW0iLCJyZW1vdmVDb2xsYWJvcmF0b3IiLCJwZW9wbGUiLCJyZW1vdmVjb2xsYWJvcmF0b3JzIiwiZHNjUmVwb3J0Q29udHJvbGxlciIsImJ1aWRSZXBvcnQiLCJlbGVtZW50IiwiaHRtbCIsInBkZiIsImpzUERGIiwiYWRkSFRNTCIsInBhZ2VzcGxpdCIsImRpc3Bvc2UiLCJzYXZlIiwiZXZhbHVhdGlvbmZyYW1ld29ya0NvbnRyb2xsZXIiLCJpbml0RXZhbHVhdGlvbiIsImdldGV2YWx1YXRpb24iLCJldmFsdWF0aW9uZnJhbWV3b3JrTGlzdCIsImV2YWx1YXRpb25mcmFtZXdvcmsiLCJzYXZlRnJhbWUiLCJzdGFrZWhvbGRlciIsInNldE9wZW5FZGl0RGlzY3V0aW9uIiwiY3VycmVudFN0YWtlaG9sZGVyIiwib3BlbkVkaXQiLCJjb25zb2xlIiwibG9nIiwib25pb25sYXllciIsIm5hbWUiLCJkZXNjcmlwdGlvbiIsInByb2JsZW1zIiwic29sdXRpb25zIiwic3Rha2Vob2xkZXJPbmlvbiIsIm1lbnVQcm9ibGVtYUNvbnRyb2xsZXIiLCJBdXRoIiwiJHN0YXRlIiwiZ2V0Q3VycmVudFByb2JsZW0iLCJnZXRwcm9ibGVtIiwicHJvYmxlbSIsImluaXRzb2NrZXRwcm9ibGVtIiwic3lzdGVtUmV0dXJuIiwiZ28iLCJmb3JtQWRkQ29sbGFib3JhdG9ycyIsImZvcm1Qcm9ibGVtUmVwb3J0IiwiZWRpdERlc2NyaXB0aW9uUHJvYmxlbSIsImRvTG9nb3V0IiwibG9nb3V0Iiwib25pb25Db250cm9sbGVyIiwiJG1kRGlhbG9nIiwiaW50aU15dE9uaW9uIiwic2F2ZVBvc3RJdE9uaW9uIiwiZWRpdFBvc3RJdE9uaW9uIiwiZGVsUG9zdEl0T25pb24iLCJhZGRQb3N0SXRPbmlvbiIsIm9uT25pb24iLCJvZmZPbmlvbiIsImVkaXRQcm9ibGVtYUNvbnRyb2xsZXIiLCIkd2F0Y2giLCJsb2NhbGNvZGUiLCJzZXRVcGRhdGUiLCJ1cGRhdGVUcnVlIiwicHJvYmxlbVVwZGF0ZSIsInVwZGF0ZSIsInNhdmVEZXNjcmlwdGlvbiIsInNlbGVjdGVkIiwicHJldmlvdXMiLCJzZWxlY3RlZEluZGV4IiwiY3VycmVudCIsIm9sZCIsImFydGVmYWN0cyIsInRpdGxlIiwicmV0b3JubyIsIiRpbmplY3RyZSIsInByb2JsZW1SZXBvcnRDb250cm9sbGVyIiwiaW5pdFByb2JsZW1QZXBvcnQiLCJnZXRwcm9ibGVtcmVwb3J0IiwiJGh0dHAiLCIkbG9jYXRpb24iLCJuZXdwcm9ibGVtIiwicG9zdCIsIkFQSV9ST1VURV9ORVdQUk9CTEVNIiwiZ2V0IiwiQVBJX1JPVVRFX0dFVFBST0JMRU1SRVBPUlQiLCJBUElfUk9VVEVfR0VUUFJPQkxFTSIsImdldHVzZXJwcm9ibGVtcyIsIkFQSV9ST1VURV9HRVRVU0VSUFJPQkxFTVMiLCJBUElfUk9VVEVfR0VUQ09MTEFCT1JBVE9SUyIsIkFQSV9ST1VURV9JTlZJVEUiLCJnZXRvbmlvbiIsIkFQSV9ST1VURV9HRVRPTklPTiIsIkFQSV9ST1VURV9HRVRFVkFMVUFUSU9OIiwiZ2V0c2VtaW90aWMiLCJBUElfUk9VVEVfR0VUU0VNSU9USUNGUkFNRVdPUksiLCJBUElfUk9VVEVfR0VUQ0FSRiIsInJlbW92ZXByb2JsZW0iLCJBUElfUk9VVEVfUkVNT1ZFUFJPQkxFTSIsImdldHByb2JsZW1zY29sbGFib3JhdG9yIiwiQVBJX1JPVVRFX0dFVFVTRVJQUk9CTEVNU0NPTExBQk9SQVRPUiIsIkFQSV9ST1VURV9SRU1PVkVDT0xMQUJPUkFUT1IiLCJBUElfUk9VVEVfR0VUSElTVE9SWUNIQVQiLCJzZW1pb3RpY2ZyYW1ld29ya0NvbnRyb2xsZXIiLCJpbml0U2VtaW90aWNGcmFtZXdvcmsiLCJzZW1pb3RpY2ZyYW1ld29yayIsInNhdmVTb2NpYWxXb3JsZCIsInRleHQiLCJmbGFnU2F2ZSIsInNhdmVQcmFnbWF0aWMiLCJzYXZlU2VtYW50aWMiLCJzYXZlU3ludGF0aWMiLCJzYXZlRW1waXJpY2FsIiwic2F2ZVBoeXNpY2FsIiwic29jaWFsd29ybGQiLCJwcmFnbWF0aWMiLCJzZW1pb3RpY3JhbWV3b3JrIiwic3ludGF0aWMiLCJlbXBpcmljYWwiLCJwaHlzaWNhbCIsInN0YWtlaG9sZGVyQ29udHJvbGxlciIsImludGl0T25pb24iLCJzYXZlU3Rha2Vob2xkZXIiLCJzZXRPcGVuRWRpdCIsInJlbW92ZVBvc3RJdCIsImRlbFBvc3RJdCIsImV2IiwiY29uZmlybSIsInBhcmVudCIsImJvZHkiLCJjb250ZW50IiwiYXJpYUxhYmVsIiwib2siLCJjYW5jZWwiLCJ0YXJnZXRFdmVudCIsInRoZW4iLCJhZGRQb3N0SXQiLCJlIiwiY2FtYWRhIiwieCIsInBhZ2VYIiwieSIsImFjZW5kZSIsInNldEF0dHJpYnV0ZSIsImFwYWdhIiwibW92ZSIsInppbmRleCIsInN0eWxlIiwiZGlzcGxheSIsImxlZnQiLCJ0b3AiLCJzdGFydFByb2JsZW1Db250cm9sbGVyIiwiZ2V0UHJvYmxlbXMiLCJ1c2VyaWQiLCJyZXBsYWNlIiwic3Vic3RyaW5nIiwicHJvYmxlbUxpc3QiLCJwcm9ibGVtQ29sbGFib3JhdG9yTGlzdCIsImxvZ2luSW5Qcm9ncmVzcyIsImRlbGV0ZVByb2JsZW0iLCJwcm9ibGVtaWQiLCJyZXZvbXZlUHJvYmxlbSIsInN0YXJ0TmV3UHJvYmxlbSIsImVkaXRQcm9ibGVtIiwic2V0SXRlbSIsImVkaXRQcm9maWxlIiwibmV3UHJvYmxlbSIsIkRpYWxvZ0NvbnRyb2xsZXIiLCIkc2NvcGUiLCJhZGROZXdQcm9ibGVtIiwiYWRkQXJ0aWZhY3QiLCJ2YWxvciIsInZhbHVlSWRlbnRpZmljYXRpb25GcmFtZUNvbnRyb2xsZXIiLCJpbml0VmFsdWVJZGVudGlmaWNhdGlvbkZyYW1lIiwiayIsInN1Z2VzdGlvblZhbHVlc0FycmF5Iiwic3VnZXN0aW9uVmFsdWVzIiwiaiIsIm5ld1ZhbHVlcyIsInNldFN1Z2dlc3Rpb25TaG93IiwibGVhdmVTdWdnZXN0aW9uU2hvdyIsInJlbW92ZVZhbHVlSWRlbnRpY2F0aW9uIiwidmFsdWUiLCJuZXdMaXN0Iiwic2V0VmFsdWVJZGVudGljYXRpb24iLCJ2YWx1ZXNMaXN0Iiwic3BsaXQiLCJmaW5kVmFsdWUiLCJsaXN0IiwibmV3dmFsdWVzIiwicHJvZmlsZUNvbnRyb2xsZXIiLCJzaWdudXBTZXJ2aWNlIiwic3RhcnRQcm9maWxlIiwic2F2ZVBob3RvIiwibXlpbWFnZSIsInVzZXJQaG90byIsInVwbG9hZFBob3RvIiwidXBsb2FkSW5Qcm9ncmVzcyIsInVwbG9hZFByb2dyZXNzIiwibXlJbWFnZSIsIm15Q3JvcHBlZEltYWdlIiwiaGFuZGxlRmlsZVNlbGVjdCIsImV2dCIsImZpbGUiLCJjdXJyZW50VGFyZ2V0IiwiZmlsZXMiLCJyZWFkZXIiLCJGaWxlUmVhZGVyIiwib25sb2FkIiwiJGFwcGx5IiwidGFyZ2V0IiwicmVzdWx0IiwicmVhZEFzRGF0YVVSTCIsInF1ZXJ5U2VsZWN0b3IiLCJzaWdudXBDb250cm9sbGVyIiwiQXV0aFRva2VuIiwiJGZpbHRlciIsIiRzdGF0ZVBhcmFtcyIsInNhdmVVc2VyIiwidXNlciIsImNyZWF0ZSIsInJlc2N1ZVBhc3N3b3JkIiwidXNlckVtYWlsIiwiY2hhbmdlUGFzc3dvcmQiLCJBUElfUk9VVEVfVVNFUiIsIkFQSV9ST1VURV9SRVNDVUVQQVNTV09SRCIsIm15dG9rZW5VUkwiLCJzZWFyY2giLCJBUElfUk9VVEVfU0VUTkVXUEFTU1dPUkQiLCJteXRva2VuIiwicGFzc3dvcmQiLCJBUElfUk9VVEVfVVBEQVRFUEhPVE8iLCJhcHBDb25maWciLCIkbWRUaGVtaW5nUHJvdmlkZXIiLCJuZW9uUmVkTWFwIiwiZXh0ZW5kUGFsZXR0ZSIsIjUwIiwiMTAwIiwiMjAwIiwiMzAwIiwiNDAwIiwiNTAwIiwiNjAwIiwiNzAwIiwiODAwIiwiOTAwIiwiQTEwMCIsIkEyMDAiLCJBNDAwIiwiQTcwMCIsImNvbnRyYXN0RGVmYXVsdENvbG9yIiwiY29udHJhc3REYXJrQ29sb3JzIiwiY29udHJhc3RMaWdodENvbG9ycyIsImRlZmluZVBhbGV0dGUiLCJ0aGVtZSIsInByaW1hcnlQYWxldHRlIiwiYWNjZW50UGFsZXR0ZSIsIiRxIiwiYXV0aEZhY3RvcnkiLCJsb2dpbiIsInNldFRva2VuIiwidG9rZW4iLCJpc0xvZ2dlZEluIiwiZ2V0VG9rZW4iLCJnZXRVc2VyIiwicmVqZWN0IiwiYXV0aFRva2VuRmFjdG9yeSIsInJlbW92ZUl0ZW0iLCJpbnRlcmNlcHRvckZhY3RvcnkiLCJyZXF1ZXN0IiwiaGVhZGVycyIsIiRkb2N1bWVudCIsImxpbmsiLCJzY29wZSIsImF0dHIiLCJtb3VzZW1vdmUiLCJldmVudCIsImlkX2RpdiIsInBhZ2VZIiwiY3NzIiwibW91c2V1cCIsInVuYmluZCIsInByZXZlbnREZWZhdWx0IiwiYmluZCIsInJ4IiwiYXR0cnMiLCJPYnNlcnZhYmxlIiwiZnJvbUV2ZW50IiwibW91c2Vkb3duIiwibWFwIiwiY2xpZW50WCIsImdldEJvdW5kaW5nQ2xpZW50UmVjdCIsImNsaWVudFkiLCJtb3VzZWRyYWciLCJzZWxlY3RNYW55IiwiaW1hZ2VPZmZzZXQiLCJwb3MiLCJ0YWtlVW50aWwiLCJzdWJzY3JpYmUiLCJjYWxsIiwibG9naW5Db250cm9sbGVyIiwiJHJvb3RTY29wZSIsImdldExvY2FsQ29kZSIsIk1hdGgiLCJyYW5kb20iLCJmbG9vciIsImRvTG9naW4iLCJlcnJvciIsImxhbmd1YWdlIiwidXNlckRhdGEiLCJsb2dnZWRJbiIsIiRvbiIsInNvY2tldCIsImlvIiwiZXZlbnROYW1lIiwiY2FsbGJhY2siLCJyZW1vdmVMaXN0ZW5lciJdLCJtYXBwaW5ncyI6IkNBR0EsV0FDQSxZQUVBQSxTQUNBQyxPQUFBLE9BQUEsWUFBQSxlQUFBLGNBQUEsbUJBQUEsWUFBQSxVQUFBLGNBQUEsWUFBQSxhQUFBLFlBQUEsWUFBQSwyQkFDQUMsUUFBQSxnQkFBQSxTQUFBQyxHQUNBQSxFQUFBQyxhQUFBQyxLQUFBLHlCQ05BLFdBRUEsWUFjQSxTQUFBQyxHQUFBQyxHQWdCQSxRQUFBQyxHQUFBQSxHQUNBQyxLQUFBQyxRQUFBRixFQUNBRCxFQUFBSSxNQUVBQyxXQUFBLGtCQUNBQyxhQUFBLEtBQ0FDLFlBQUEsNEJBQ0FDLE9BQUEsS0FDQUMsaUJBQUEsRUFDQUMsU0FBQSxZQUNBQyxVQUFBLE1BekJBLEdBQUFDLElBQ0FULFFBQUEsR0FDQUYsYUFBQUEsRUFFQSxPQUFBVyxHQWpCQW5CLFFBQUFDLE9BQUEsbUJBQ0FXLFdBQUEsbUJBQUEsV0FBQSxXQUFBLFNBQUFMLEVBQUFELEdBQ0EsR0FBQWMsR0FBQVgsSUFDQVcsR0FBQVYsUUFBQUosRUFBQUksUUFDQVUsRUFB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Y0FBQSxFQUNBakQsRUFBQXlCLFFBQUFBLEVBQ0F6QixFQUFBK0osU0FBQUEsRUFDQS9KLEVBQUFpYSxRQUFBQSxFQVlBamEsRUFBQXFhLFNBQUFqUixFQUFBaU8sYUFFQXVDLEVBQUFVLElBQUEsb0JBQUEsV0FDQXRhLEVBQUFxYSxTQUFBalIsRUFBQWlPLGFBQ0FqTyxFQUFBbU8sVUFDQWpJLEtBQUEsU0FBQTdNLEdBQ0F6QyxFQUFBMFUsS0FBQWpTLEVBQUFBLFNBM0JBN0QsUUFDQUMsT0FBQSxPQUNBVyxXQUFBLGtCQUFBbWEsR3ZCK3JFUUEsRUFBZ0J2WixTQUFXLGFBQWMsYUFBYyxTQUFVLE9BQVEsVUFBVyxVQUFXLGV3QnJzRXZHLFdBRUEsWUFFQXhCLFNBQ0FDLE9BQUEsT0FDQWtCLFFBQUEsVUFDQSxZQUFBLFdBQ0EsU0FBQWdNLEVBQUFqSCxHQUVBekYsS0FBQWtiLE9BQUFDLEtBS0FuYixLQUFBc0YsR0FBQSxTQUFBOFYsRUFBQUMsR0FDQXJiLEtBQUFrYixRQUNBbGIsS0FBQWtiLE9BQUE1VixHQUFBOFYsRUFBQSxTQUFBaFksR0FDQXFDLEVBQUEsV0FDQTRWLEVBQUFqWSxRQU1BcEQsS0FBQXNFLEtBQUEsU0FBQThXLEVBQUFoWSxHQUNBcEQsS0FBQWtiLFFBQ0FsYixLQUFBa2IsT0FBQTVXLEtBQUE4VyxFQUFBaFksSUFJQXBELEtBQUFzYixlQUFBLFNBQUFGLEdBQ0FwYixLQUFBa2IsUUFDQWxiLEtBQUFrYixPQUFBSSxlQUFBRiIsImZpbGUiOiJhcHAuZHNjLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxyXG4gKiBDcmVhdGVkIGJ5IEpPU0VWQUxERVJMRUkgb24gMjUvMDYvMjAxNS5cclxuICovXHJcbihmdW5jdGlvbiAoKSB7XHJcbiAgICBcInVzZSBzdHJpY3RcIjtcclxuXHJcbmFuZ3VsYXJcclxuICAgIC5tb2R1bGUoJ2FwcCcsWyduZ0ltZ0Nyb3AnLCd0b2FzdFNlcnZpY2UnLCd0ZXh0QW5ndWxhcicsJ2x1ZWdnLmRpcmVjdGl2ZXMnLCAnYXBwUnhEcmFnJywgJ0Ryb3BEU0MnLCdhdXRoU2VydmljZScsJ3VpLnJvdXRlcicsJ25nTWF0ZXJpYWwnLCduZ01kSWNvbnMnLCduZ0Nvb2tpZXMnLCdwYXNjYWxwcmVjaHQudHJhbnNsYXRlJ10pXHJcbiAgICAgICAgLmNvbmZpZyhmdW5jdGlvbigkaHR0cFByb3ZpZGVyKSB7XHJcbiAgICAgICAgICAgICRodHRwUHJvdmlkZXIuaW50ZXJjZXB0b3JzLnB1c2goJ0F1dGhJbnRlcmNlcHRvcicpO1xyXG4gICAgICAgIH0pXHJcblxyXG59KSgpO1xyXG5cclxuXHJcbiIsIi8qKlxyXG4gKiBDcmVhdGVkIGJ5IEpPU0VWQUxERVJMRUkgb24gMjcvMDYvMjAxNS5cclxuICovXHJcbihmdW5jdGlvbigpe1xyXG5cclxuICAgICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgICBhbmd1bGFyLm1vZHVsZSgndG9hc3RTZXJ2aWNlJyxbXSlcclxuICAgICAgICAuY29udHJvbGxlcigndG9hc3RDb250cm9sbGVyJywgZnVuY3Rpb24oJG1kVG9hc3QsdG9hc3RBcHApIHtcclxuICAgICAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgICAgICAgICBzZWxmLm1lc3NhZ2UgPSAgdG9hc3RBcHAubWVzc2FnZTtcclxuICAgICAgICAgICAgc2VsZi5jbG9zZVRvYXN0ID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAkbWRUb2FzdC5oaWRlKCk7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfSlcclxuICAgICAgICAuZmFjdG9yeSggJ3RvYXN0QXBwJywgdG9hc3RBcHAgKTtcclxuXHJcbiAgICB0b2FzdEFwcC4kaW5qZWN0ID0gWyAnJG1kVG9hc3QnIF07XHJcblxyXG4gICAgZnVuY3Rpb24gdG9hc3RBcHAgKCRtZFRvYXN0KSB7XHJcbiAgICAgICAgdmFyIHNlcnZpY2UgPSB7XHJcbiAgICAgICAgICAgIG1lc3NhZ2U6ICcnLFxyXG4gICAgICAgICAgICBlcnJvck1lc3NhZ2U6IGVycm9yTWVzc2FnZVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgcmV0dXJuIHNlcnZpY2U7XHJcblxyXG4gICAgICAgIC8qZnVuY3Rpb24gZXJyb3JNZXNzYWdlKGVycm9yTWVzc2FnZSkge1xyXG4gICAgICAgICAgICAkbWRUb2FzdC5zaG93KFxyXG4gICAgICAgICAgICAgICAgJG1kVG9hc3Quc2ltcGxlKClcclxuICAgICAgICAgICAgICAgIC50ZXh0Q29udGVudChlcnJvck1lc3NhZ2UpXHJcbiAgICAgICAgICAgICAgICAucG9zaXRpb24oJ3RvcCByaWdodCcpXHJcbiAgICAgICAgICAgICAgICAuaGlkZURlbGF5KDgwMClcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICB9Ki9cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gZXJyb3JNZXNzYWdlKGVycm9yTWVzc2FnZSkge1xyXG4gICAgICAgICAgICB0aGlzLm1lc3NhZ2UgPSBlcnJvck1lc3NhZ2U7XHJcbiAgICAgICAgICAgICRtZFRvYXN0LnNob3coXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29udHJvbGxlcjogJ3RvYXN0Q29udHJvbGxlcicsXHJcbiAgICAgICAgICAgICAgICAgICAgY29udHJvbGxlckFzOiAndm0nLFxyXG4gICAgICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAndmlld3MvcGFnZXMvZHNjdG9hc3QuaHRtbCcsXHJcbiAgICAgICAgICAgICAgICAgICAgYWN0aW9uOiBcIk9LXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgaGlnaGxpZ2h0QWN0aW9uOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uOiBcInRvcCByaWdodFwiLFxyXG4gICAgICAgICAgICAgICAgICAgIGhpZGVEZWxheTogNTAwXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxufSkoKTtcclxuXHJcblxyXG5cclxuXHJcblxyXG4iLCIvKipcclxuICogQ3JlYXRlZCBieSBKT1NFVkFMREVSTEVJIG9uIDI1LzA2LzIwMTUuXHJcbiAqL1xyXG4oZnVuY3Rpb24oKXtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgICBhbmd1bGFyXHJcbiAgICAgICAgLm1vZHVsZSgnYXBwJylcclxuICAgICAgICAuY29uZmlnKHJvdXRlcyk7XHJcblxyXG4gICAgZnVuY3Rpb24gcm91dGVzKCRzdGF0ZVByb3ZpZGVyLCAkdXJsUm91dGVyUHJvdmlkZXIpIHtcclxuXHJcblxyXG4gICAgICAgICRzdGF0ZVByb3ZpZGVyLnN0YXRlKCdpbml0Jywge1xyXG4gICAgICAgICAgICB1cmw6ICcvJyxcclxuICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICd2aWV3cy9wYWdlcy9pbml0cGFnZS5odG1sJyxcclxuICAgICAgICAgICAgY29udHJvbGxlcjogJ2xvZ2luQ29udHJvbGxlciBhcyB2bSdcclxuICAgICAgICB9KVxyXG4gICAgICAgICAgICAuc3RhdGUoJ2luaXQubG9naW4nLCB7XHJcbiAgICAgICAgICAgICAgICB1cmw6ICdsb2dpbicsXHJcbiAgICAgICAgICAgICAgICB2aWV3czoge1xyXG4gICAgICAgICAgICAgICAgICAgICdjb250ZW50LXRhYic6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICd2aWV3cy9wYWdlcy91c2VybG9naW4uaHRtbCcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdsb2dpbkNvbnRyb2xsZXIgYXMgdm0nXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAuc3RhdGUoJ2luaXQuc2lnbnVwJywge1xyXG4gICAgICAgICAgICAgICAgdXJsOiAnc2lnbnVwJyxcclxuICAgICAgICAgICAgICAgIHZpZXdzOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgJ2NvbnRlbnQtdGFiJzoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ3ZpZXdzL3BhZ2VzL3NpZ251cC5odG1sJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29udHJvbGxlcjogJ3NpZ251cENvbnRyb2xsZXIgYXMgdm0nXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAuc3RhdGUoJ2luaXQucmVzY3VlcGFzc3dvcmQnLCB7XHJcbiAgICAgICAgICAgICAgICB1cmw6ICdyZXNjdWVwYXNzd29yZCcsXHJcbiAgICAgICAgICAgICAgICB2aWV3czoge1xyXG4gICAgICAgICAgICAgICAgICAgICdjb250ZW50LXRhYic6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICd2aWV3cy9wYWdlcy9yZXNjdWVwYXNzd29yZC5odG1sJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29udHJvbGxlcjogJ3NpZ251cENvbnRyb2xsZXIgYXMgdm0nXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAuc3RhdGUoJ3N0YXJ0cHJvYmxlbScsIHtcclxuICAgICAgICAgICAgICAgIHVybDogJy9zdGFydHByb2JsZW0nLFxyXG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICd2aWV3cy9wYWdlcy9zdGFydHByb2JsZW0uaHRtbCcsXHJcbiAgICAgICAgICAgICAgICBjb250cm9sbGVyOiAnc3RhcnRQcm9ibGVtQ29udHJvbGxlciBhcyB2bSdcclxuXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5zdGF0ZSgncHJvZmlsZScsIHtcclxuICAgICAgICAgICAgICAgIHVybDogJy9wcm9maWxlJyxcclxuICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAndmlld3MvcGFnZXMvcHJvZmlsZS5odG1sJyxcclxuICAgICAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdwcm9maWxlQ29udHJvbGxlciBhcyB2bSdcclxuXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5zdGF0ZSgnZHNjcmVwb3J0Jywge1xyXG4gICAgICAgICAgICAgICAgdXJsOiAnL2RzY3JlcG9ydCcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAndmlld3MvcGFnZXMvcHJvYmxlbXJlcG9ydC5odG1sJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29udHJvbGxlcjogJ3Byb2JsZW1SZXBvcnRDb250cm9sbGVyIGFzIHZtJ1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAuc3RhdGUoJ25ld3Bhc3N3b3JkJywge1xyXG4gICAgICAgICAgICAgICAgdXJsOiAnL25ld3Bhc3N3b3JkLzpteXRva2VuJyxcclxuICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAndmlld3MvcGFnZXMvbmV3cGFzc3dvcmQuaHRtbCcsXHJcbiAgICAgICAgICAgICAgICBjb250cm9sbGVyOiAnc2lnbnVwQ29udHJvbGxlciBhcyB2bSdcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLnN0YXRlKCdwcm9ibGVtJywge1xyXG4gICAgICAgICAgICAgICAgdXJsOiAnL3Byb2JsZW0nLFxyXG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICd2aWV3cy9wYWdlcy9wcm9ibGVtLmh0bWwnLFxyXG4gICAgICAgICAgICAgICAgY29udHJvbGxlcjogJ21lbnVQcm9ibGVtQ29udHJvbGxlciBhcyB2bSdcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLnN0YXRlKCdwcm9ibGVtLmRlc2NyaXB0aW9uJywge1xyXG4gICAgICAgICAgICAgICAgdXJsOiAnL2Rlc2NyaXB0aW9uJyxcclxuICAgICAgICAgICAgICAgIHZpZXdzOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgJ3Byb2JsZW0tZGVzY3JpcHRpb24nOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAndmlld3MvcGFnZXMvcHJvYmxlbWRlc2NyaXB0aW9uLmh0bWwnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb250cm9sbGVyOiAnZWRpdFByb2JsZW1Db250cm9sbGVyIGFzIHZtJ1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLnN0YXRlKCdwcm9ibGVtLmNvbGxhYm9yYXRvcnMnLCB7XHJcbiAgICAgICAgICAgICAgICB1cmw6ICcvY29sbGFib3JhdG9ycycsXHJcbiAgICAgICAgICAgICAgICB2aWV3czoge1xyXG4gICAgICAgICAgICAgICAgICAgICdwcm9ibGVtLWRlc2NyaXB0aW9uJzoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ3ZpZXdzL3BhZ2VzL2NvbGxhYm9yYXRvcnMuaHRtbCcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdjb250cm9sbGVyQ29sbGFib3JhdG9ycyBhcyB2bSdcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5zdGF0ZSgncHJvYmxlbS5zdGFrZWhvbGRlcnMnLCB7XHJcbiAgICAgICAgICAgICAgICB1cmw6ICcvc3Rha2Vob2xkZXJzJyxcclxuICAgICAgICAgICAgICAgIHZpZXdzOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgJ2RzYy1hcnRpZmFjdCc6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICd2aWV3cy9wYWdlcy9zdGFrZWhvbGRlcnMuaHRtbCcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdzdGFrZWhvbGRlckNvbnRyb2xsZXIgYXMgdm0nXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAuc3RhdGUoJ3Byb2JsZW0uZXZhbHVhdGlvbmZyYW1ld29yaycsIHtcclxuICAgICAgICAgICAgICAgIHVybDogJy9ldmFsdWF0aW9uZnJhbWV3b3JrJyxcclxuICAgICAgICAgICAgICAgIHZpZXdzOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgJ2RzYy1hcnRpZmFjdCc6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICd2aWV3cy9wYWdlcy9ldmFsdWF0aW9uZnJhbWV3b3JrLmh0bWwnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb250cm9sbGVyOiAnZXZhbHVhdGlvbmZyYW1ld29ya0NvbnRyb2xsZXIgYXMgdm0nXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KVxyXG5cclxuICAgICAgICAgICAgLnN0YXRlKCdwcm9ibGVtLnNlbWlvdGljZnJhbWV3b3JrJywge1xyXG4gICAgICAgICAgICAgICAgdXJsOiAnL3NlbWlvdGljZnJhbWV3b3JrJyxcclxuICAgICAgICAgICAgICAgIHZpZXdzOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgJ2RzYy1hcnRpZmFjdCc6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICd2aWV3cy9wYWdlcy9zZW1pb3RpY2ZyYW1ld29yay5odG1sJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29udHJvbGxlcjogJ3NlbWlvdGljZnJhbWV3b3JrQ29udHJvbGxlciBhcyB2bSdcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5zdGF0ZSgncHJvYmxlbS5jYXJmJywge1xyXG4gICAgICAgICAgICAgICAgdXJsOiAnL2NhcmYnLFxyXG4gICAgICAgICAgICAgICAgdmlld3M6IHtcclxuICAgICAgICAgICAgICAgICAgICAnZHNjLWFydGlmYWN0Jzoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ3ZpZXdzL3BhZ2VzL2NhcmYuaHRtbCcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdjYXJmQ29udHJvbGxlciBhcyB2bSdcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5zdGF0ZSgncHJvYmxlbS52aWYnLCB7XHJcbiAgICAgICAgICAgICAgICB1cmw6ICcvdmlmJyxcclxuICAgICAgICAgICAgICAgIHZpZXdzOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgJ2RzYy1hcnRpZmFjdCc6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICd2aWV3cy9wYWdlcy92aWYuaHRtbCcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRyb2xsZXI6ICd2YWx1ZUlkZW50aWZpY2F0aW9uRnJhbWVDb250cm9sbGVyIGFzIHZtJ1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLnN0YXRlKCdwcm9ibGVtLm9uaW9uJywge1xyXG4gICAgICAgICAgICAgICAgdXJsOiAnL29uaW9uJyxcclxuICAgICAgICAgICAgICAgIHZpZXdzOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgJ2RzYy1hcnRpZmFjdCc6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICd2aWV3cy9wYWdlcy9vbmlvbi5odG1sJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29udHJvbGxlcjogJ29uaW9uQ29udHJvbGxlciBhcyB2bSdcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICR1cmxSb3V0ZXJQcm92aWRlci5vdGhlcndpc2UoJy9sb2dpbicpO1xyXG5cclxuICAgIH1cclxuXHJcbn0pKCk7XHJcbiIsbnVsbCwiLyoqXHJcbiAqIENyZWF0ZWQgYnkgSk9TRVZBTERFUkxFSSBvbiAxOS8wNi8yMDE1LlxyXG4gKi9cclxuKGZ1bmN0aW9uKCl7XHJcblxyXG4ndXNlIHN0cmljdCc7XHJcblxyXG4gICAgYW5ndWxhclxyXG4gICAgLm1vZHVsZSgnYXBwJylcclxuICAgIC5jb25maWcoaW5pdExhbmd1YWdlKVxyXG4gICAgLmNvbnRyb2xsZXIoJ2xhbmd1YWdlQ29udHJvbGxlcicsbGFuZ3VhZ2VDb250cm9sbGVyKVxyXG4gICAgLmRpcmVjdGl2ZSgnY2hhbmdlTGFuZ3VhZ2UnLGNoYW5nZUxhbmd1YWdlKTtcclxuXHJcbmluaXRMYW5ndWFnZS4kaW5qZWN0ID0gWyckdHJhbnNsYXRlUHJvdmlkZXInXTtcclxubGFuZ3VhZ2VDb250cm9sbGVyLiRpbmplY3QgPSBbJyR0cmFuc2xhdGUnXTtcclxuXHJcbmZ1bmN0aW9uIGluaXRMYW5ndWFnZSAoJHRyYW5zbGF0ZVByb3ZpZGVyKSB7XHJcbiAgICAgICAgJHRyYW5zbGF0ZVByb3ZpZGVyLnVzZVN0YXRpY0ZpbGVzTG9hZGVyKHtcclxuICAgICAgICAgICAgcHJlZml4OiAnYXBwL2xhbmd1YWdlL2xhbmctJyxcclxuICAgICAgICAgICAgc3VmZml4OiAnLmpzb24nXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgJHRyYW5zbGF0ZVByb3ZpZGVyLnByZWZlcnJlZExhbmd1YWdlKCdlbicpO1xyXG4gICAgICAgICR0cmFuc2xhdGVQcm92aWRlci51c2VTYW5pdGl6ZVZhbHVlU3RyYXRlZ3koJ2VzY2FwZWQnKTtcclxuICAgICAgICAkdHJhbnNsYXRlUHJvdmlkZXIudXNlTG9jYWxTdG9yYWdlKCk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGxhbmd1YWdlQ29udHJvbGxlciAoJHRyYW5zbGF0ZSkge1xyXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgc2VsZi5zZXRMYW5nID0gc2V0TGFuZztcclxuICAgIGZ1bmN0aW9uIHNldExhbmcobGFuZ0tleSkge1xyXG4gICAgICAgICAgICAkdHJhbnNsYXRlLnVzZShsYW5nS2V5KTtcclxuICAgIH1cclxufVxyXG5cclxuZnVuY3Rpb24gY2hhbmdlTGFuZ3VhZ2UoKXtcclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgdGVtcGxhdGVVcmwgOiBcImFwcC9sYW5ndWFnZS9jaGFuZ2VMYW5ndWFnZS5odG1sXCIsXHJcbiAgICAgICAgcmVzdHJpY3Q6IFwiRVwiXHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuXHJcbn0pKCk7IiwiLyoqXHJcbiAqIENyZWF0ZWQgYnkgSk9TRVZBTERFUkxFSSBvbiAxNC8wNy8yMDE1LlxyXG4gKi9cclxuKGZ1bmN0aW9uKCl7XHJcblxyXG4gICAgXCJ1c2Ugc3RyaWN0XCI7XHJcblxyXG4gICAgYW5ndWxhci5tb2R1bGUoJ2FwcCcpXHJcbiAgICAgICAgLmNvbnRyb2xsZXIoXCJjYXJmQ29udHJvbGxlclwiLGNhcmZDb250cm9sbGVyKTtcclxuXHJcbiAgICBmdW5jdGlvbiBjYXJmQ29udHJvbGxlcigkd2luZG93LFNvY2tldCxwcm9ibGVtU2VydmljZSx0b2FzdEFwcCl7XHJcblxyXG4gICAgICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgICAgICBzZWxmLmlkUHJvYmxlbSA9IFwiXCI7XHJcbiAgICAgICAgc2VsZi5pblByb2Nlc3NpbmcgPSB0cnVlO1xyXG4gICAgICAgIHNlbGYudmFsdWVMaXN0ID0gW107XHJcbiAgICAgICAgc2VsZi5zdGFrZWhvbGRlckxpc3QgPSBbXTtcclxuICAgICAgICBzZWxmLmxvY2FsU3Rha2Vob2xkZXJzID0gW107XHJcbiAgICAgICAgc2VsZi5hZGRwbXN2YWx1ZSA9IGFkZHBtc3ZhbHVlO1xyXG4gICAgICAgIHNlbGYucmVtb3ZlQ0FSRiA9IHJlbW92ZUNBUkY7XHJcbiAgICAgICAgc2VsZi5zZWxlY3RQTVNWYWx1ZSA9IHNlbGVjdFBNU1ZhbHVlO1xyXG4gICAgICAgIHNlbGYuc2V0UHJpb3RpdHkgPSBzZXRQcmlvdGl0eTtcclxuICAgICAgICBzZWxmLmFkZExpc3RWYWx1ZSA9IGFkZExpc3RWYWx1ZTtcclxuICAgICAgICBzZWxmLmFkZFN0YWtlaG9sZGVyID0gYWRkU3Rha2Vob2xkZXI7XHJcbiAgICAgICAgc2VsZi5jYXJmID0ge1xyXG4gICAgICAgICAgICBwbXM6IFwiXCIsXHJcbiAgICAgICAgICAgIHZhbHVlczogW10sXHJcbiAgICAgICAgICAgIHByaW9yaXR5OiBcIlwiLFxyXG4gICAgICAgICAgICByZXF1aXJlbWVudDogXCJcIixcclxuICAgICAgICAgICAgc3Rha2Vob2xkZXJzOiBbXVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIHNlbGYuaW5pdENhcmYgPSBpbml0Q2FyZjtcclxuICAgICAgICBzZWxmLmNhcmZMaXN0ID0gW107XHJcbiAgICAgICAgc2VsZi5jYXJmUHJpb3JpdHlMaXN0ID0gW107XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGluaXRDYXJmKCl7XHJcbiAgICAgICAgICAgIHNlbGYuaWRQcm9ibGVtID0gJHdpbmRvdy5sb2NhbFN0b3JhZ2UuZ2V0SXRlbSgncHJvYmxlbWlkJyk7XHJcbiAgICAgICAgICAgIHByb2JsZW1TZXJ2aWNlLmdldGNhcmYoc2VsZi5pZFByb2JsZW0pXHJcbiAgICAgICAgICAgICAgICAuc3VjY2VzcyhmdW5jdGlvbihkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYoZGF0YS5zdWNjZXNzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYubG9jYWxTdGFrZWhvbGRlcnMgPSBkYXRhLnN0YWtlaG9sZGVycztcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5zdGFrZWhvbGRlckxpc3QgPSBzZWxmLmxvY2FsU3Rha2Vob2xkZXJzO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmNhcmZMaXN0ID0gZGF0YS5jYXJmO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmNhcmZQcmlvcml0eUxpc3QgPSBzZWxmLmxvY2FsUHJpb3JpdHlMaXN0O1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBzZWxmLmluUHJvY2Vzc2luZyA9IGZhbHNlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gcmVzZXRDYXJmKCl7XHJcbiAgICAgICAgICAgIHNlbGYuY2FyZiA9IHtcclxuICAgICAgICAgICAgICAgIF9pZDogXCJcIixcclxuICAgICAgICAgICAgICAgIHBtczogXCJcIixcclxuICAgICAgICAgICAgICAgIHZhbHVlczogW10sXHJcbiAgICAgICAgICAgICAgICBwcmlvcml0eTogXCJcIixcclxuICAgICAgICAgICAgICAgIHJlcXVpcmVtZW50OiBcIlwiLFxyXG4gICAgICAgICAgICAgICAgc3Rha2Vob2xkZXJzOiBbXVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICBzZWxmLnZhbHVlTGlzdCA9IFtdO1xyXG5cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIFNvY2tldC5vbignb25Ccm9hZGNhc3RDQVJGYWRkJywgZnVuY3Rpb24gKGNhcmYpIHtcclxuICAgICAgICAgICAgc2VsZi5jYXJmTGlzdC5wdXNoKGNhcmYpO1xyXG4gICAgICAgICAgICByZXNldENhcmYoKTtcclxuICAgICAgICAgICAgc2VsZi5zdGFrZWhvbGRlckxpc3QgPSBzZWxmLmxvY2FsU3Rha2Vob2xkZXJzO1xyXG4gICAgICAgICAgICBzZWxmLmNhcmZQcmlvcml0eUxpc3QgPSBzZWxmLmxvY2FsUHJpb3JpdHlMaXN0O1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBmdW5jdGlvbiBhZGRwbXN2YWx1ZShjYXJmKXtcclxuXHJcbiAgICAgICAgICAgIGlmKGNhcmYucG1zID09PSBcIlwiKXtcclxuICAgICAgICAgICAgICAgIHRvYXN0QXBwLmVycm9yTWVzc2FnZShcIlNlbGVjdCBQTVNcIik7XHJcbiAgICAgICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICAgICAgaWYoY2FyZi52YWx1ZXMubGVuZ3RoIDwgMSApe1xyXG4gICAgICAgICAgICAgICAgICAgIHRvYXN0QXBwLmVycm9yTWVzc2FnZShcIlNlbGVjdCBvbmUgb3IgbW9yZSBWYWx1ZVwiKTtcclxuICAgICAgICAgICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKGNhcmYuc3Rha2Vob2xkZXJzLmxlbmd0aCA8IDEpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0b2FzdEFwcC5lcnJvck1lc3NhZ2UoXCJTZWxlY3Qgb25lIG9yIG1vcmUgU3Rha2Vob2xkZXIocylcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKGNhcmYucHJpb3JpdHkgPT09IFwiXCIpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9hc3RBcHAuZXJyb3JNZXNzYWdlKFwiU2VsZWN0IHByaW9yaXR5IFtMb3csIE1lZGl1bSBvciBIaWdoXVwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBTb2NrZXQuZW1pdCgnYnJvYWRjYXN0Q0FSRmFkZCcsIGNhcmYpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5zdGFrZWhvbGRlckxpc3QgPSBbXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuY2FyZlByaW9yaXR5TGlzdCA9IFtdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgU29ja2V0Lm9uKCdvbkJyb2FkY2FzdENBUkZyZW1vdmUnLCBmdW5jdGlvbiAoaWQpIHtcclxuICAgICAgICAgICAgc2VsZi5jYXJmTGlzdC5zcGxpY2UoaWQsMSk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIHJlbW92ZUNBUkYoaW5kZXgsY2FyZil7XHJcbiAgICAgICAgICAgIHZhciBvYmogPSB7XHJcbiAgICAgICAgICAgICAgICBpbmRleDogaW5kZXgsXHJcbiAgICAgICAgICAgICAgICBjYXJmOiBjYXJmXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIFNvY2tldC5lbWl0KCdicm9hZGNhc3RDQVJGcmVtb3ZlJywgb2JqKTtcclxuICAgICAgICB9XHJcblxyXG5cclxuICAgICAgICBmdW5jdGlvbiBzZWxlY3RQTVNWYWx1ZShwbXMpe1xyXG4gICAgICAgICAgICBpZihwbXMgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgYW5ndWxhci5mb3JFYWNoKHNlbGYuY2FyZlBNU1ZhbHVlLCBmdW5jdGlvbiAocG1zX3ZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHBtc192YWx1ZS5wbXMgPT0gcG1zKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuY2FyZi52YWx1ZXMgPSBbXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi52YWx1ZUxpc3QgPSBwbXNfdmFsdWUudmFsdWVzO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIHNldFByaW90aXR5KHByaW9yaXR5KXtcclxuICAgICAgICAgICAgc2VsZi5jYXJmLnByaW9yaXR5ID0gcHJpb3JpdHk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmdW5jdGlvbiBhZGRMaXN0VmFsdWUobmV3dmFsdWUpe1xyXG4gICAgICAgICAgIGlmKHNlbGYuY2FyZi52YWx1ZXMubGVuZ3RoID09PSAwKXtcclxuICAgICAgICAgICAgICAgIHNlbGYuY2FyZi52YWx1ZXMucHVzaChuZXd2YWx1ZSk7XHJcbiAgICAgICAgICAgIH1lbHNlIHtcclxuICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzZWxmLmNhcmYudmFsdWVzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICBpZiAobmV3dmFsdWUgPT0gc2VsZi5jYXJmLnZhbHVlc1tpXSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgIHNlbGYuY2FyZi52YWx1ZXMuc3BsaWNlKGksIDEpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICBzZWxmLmNhcmYudmFsdWVzLnB1c2gobmV3dmFsdWUpO1xyXG4gICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGFkZFN0YWtlaG9sZGVyKG5ld1N0YWtlaG9sZGVyKXtcclxuICAgICAgICAgICAgaWYoc2VsZi5jYXJmLnN0YWtlaG9sZGVycy5sZW5ndGggPT09IDApe1xyXG4gICAgICAgICAgICAgICAgc2VsZi5jYXJmLnN0YWtlaG9sZGVycy5wdXNoKG5ld1N0YWtlaG9sZGVyKTtcclxuICAgICAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgICAgICBmb3IodmFyIGk9MDsgaSA8IHNlbGYuY2FyZi5zdGFrZWhvbGRlcnMubGVuZ3RoOyBpKyspe1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKG5ld1N0YWtlaG9sZGVyID09IHNlbGYuY2FyZi5zdGFrZWhvbGRlcnNbaV0pe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmNhcmYuc3Rha2Vob2xkZXJzLnNwbGljZShpLDEpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgc2VsZi5jYXJmLnN0YWtlaG9sZGVycy5wdXNoKG5ld1N0YWtlaG9sZGVyKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgc2VsZi5sb2NhbFByaW9yaXR5TGlzdCA9IFsnTG93JywgJ01lZGl1bScsJ0hpZ2gnXTtcclxuXHJcbiAgICAgICAgc2VsZi5jYXJmUE1TVmFsdWUgPSBbXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgXCJwbXNcIjogXCJJbnRlcmFjdGlvblwiLFxyXG4gICAgICAgICAgICAgICAgICAgIFwidmFsdWVzXCI6IFtcclxuICAgICAgICAgICAgICAgICAgICAgICAgXCJJZGVudGl0eVwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBcIk5vcm1zXCJcclxuICAgICAgICAgICAgICAgICAgICBdXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIFwicG1zXCI6IFwiQXNzb2NpYXRpb25cIixcclxuICAgICAgICAgICAgICAgICAgICBcInZhbHVlc1wiOiBbXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiQ29udmVyc2F0aW9uXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiR3JvdXBzXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiUmVsYXRpb25zaGlwXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiVHJ1c3RcIlxyXG4gICAgICAgICAgICAgICAgICAgIF1cclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgXCJwbXNcIjogXCJMZWFybmluZ1wiLFxyXG4gICAgICAgICAgICAgICAgICAgIFwidmFsdWVzXCI6IFtcclxuICAgICAgICAgICAgICAgICAgICAgICAgXCJNZXRhLWNvbW11bmljYXRpb25cIlxyXG4gICAgICAgICAgICAgICAgICAgIF1cclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgXCJwbXNcIjogXCJQbGF5XCIsXHJcbiAgICAgICAgICAgICAgICAgICAgXCJ2YWx1ZXNcIjogW1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBcIkFlc3RoZXRpY3NcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgXCJFbW90aW9uIGFuZCBBZmZlY3Rpb25cIlxyXG4gICAgICAgICAgICAgICAgICAgIF1cclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgXCJwbXNcIjogXCJQcm90ZWN0aW9uXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgXCJ2YWx1ZXNcIjogW1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBcIkluZm9ybWVkIGNvbnNlcnRcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgXCJSZXB1dGF0aW9uXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiU2VjdXJpdHlcIlxyXG4gICAgICAgICAgICAgICAgICAgIF1cclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgXCJwbXNcIjogXCJFeHBsb2l0YXRpb25cIixcclxuICAgICAgICAgICAgICAgICAgICBcInZhbHVlc1wiOiBbXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiQWNjZXNzaWJpbGl0eVwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBcIk9iamVjdFwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBcIlByb3BlcnR5IChvd25lcnNoaXApXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiVXNhYmlsaXR5XCJcclxuICAgICAgICAgICAgICAgICAgICBdXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIFwicG1zXCI6IFwiVGVwb3JhbGl0eVwiLFxyXG4gICAgICAgICAgICAgICAgICAgIFwidmFsdWVzXCI6IFtcclxuICAgICAgICAgICAgICAgICAgICAgICAgXCJBdmFpbGFiaWxpdHlcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgXCJBd2FyZW5lc3NcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgXCJQcmVzZW5jZVwiXHJcbiAgICAgICAgICAgICAgICAgICAgXVxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBcInBtc1wiOiBcIlRlcnJpdG9yaWFsaXR5XCIsXHJcbiAgICAgICAgICAgICAgICAgICAgXCJ2YWx1ZXNcIjogW1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBcIlBvcnRhYmlsaXR5XCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiUHJpdmFjeVwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBcIlNjYWxhYmlsaXR5XCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiVmlzaWJpbGl0eVwiXHJcbiAgICAgICAgICAgICAgICAgICAgXVxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBcInBtc1wiOiBcIkNsYXNzaWZpY2F0aW9uXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgXCJ2YWx1ZXNcIjogW1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBcIkF1dG9ub215XCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiQ29sbGFib3JhdGlvblwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBcIlNoYXJpbmdcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgXCJBZGFwdGFiaWxpdHlcIlxyXG4gICAgICAgICAgICAgICAgICAgIF1cclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgXCJwbXNcIjogXCJTdWJzaXN0ZW5jZVwiLFxyXG4gICAgICAgICAgICAgICAgICAgIFwidmFsdWVzXCI6IFtcclxuICAgICAgICAgICAgICAgICAgICAgICAgXCJSZWNpcHJvY2l0eVwiXHJcbiAgICAgICAgICAgICAgICAgICAgXVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBdO1xyXG4gICAgfVxyXG5cclxufSkoKTsiLCIvKipcclxuICogQ3JlYXRlZCBieSBKT1NFVkFMREVSTEVJIG9uIDE1LzA3LzIwMTUuXHJcbiAqL1xyXG5cclxuKGZ1bmN0aW9uKCl7XHJcblxyXG4ndXNlIHN0cmljdCc7XHJcblxyXG5hbmd1bGFyXHJcbiAgICAubW9kdWxlKCdhcHAnKVxyXG4gICAgLmNvbnRyb2xsZXIoJ2NoYXREU0MnLGNoYXREU0MpO1xyXG5cclxuICAgIGZ1bmN0aW9uIGNoYXREU0MoJHRpbWVvdXQsIFNvY2tldCwgcHJvYmxlbVNlcnZpY2UsICR3aW5kb3cpIHtcclxuXHJcbiAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgICAgIHNlbGYubmV3bXNnID0gXCJcIjtcclxuICAgICAgICBzZWxmLm1lc3NhZ2VzID0gW107XHJcbiAgICAgICAgc2VsZi5yZXBsYXkgPSBmYWxzZTtcclxuICAgICAgICBzZWxmLm5pY2tuYW1lID0gXCJcIjtcclxuICAgICAgICBzZWxmLnVzZXJMaXN0ID0gW107XHJcbiAgICAgICAgc2VsZi5pbml0SGlzdG9yeUNoYXQgPSBpbml0SGlzdG9yeUNoYXQ7XHJcbiAgICAgICAgc2VsZi5zaG93UmVwbGF5ID0gc2hvd1JlcGxheTtcclxuICAgICAgICBzZWxmLnNlbmRNZXNzYWdlID0gc2VuZE1lc3NhZ2U7XHJcbiAgICAgICAgc2VsZi5waG90byA9IFwiXCI7XHJcbiAgICAgICAgc2VsZi5vcGVuQ2hhdCA9IG9wZW5DaGF0O1xyXG4gICAgICAgIHNlbGYuaXNPcGVuQ2hhdCA9IGZhbHNlO1xyXG5cclxuICAgICAgICBmdW5jdGlvbiBvcGVuQ2hhdCgpe1xyXG4gICAgICAgICAgICBzZWxmLmlzT3BlbkNoYXQgPSAhc2VsZi5pc09wZW5DaGF0O1xyXG4gICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbWVzc2FnZScpLmZvY3VzKClcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGluaXRIaXN0b3J5Q2hhdCgpe1xyXG4gICAgICAgICAgICBzZWxmLmlkUHJvYmxlbSA9ICR3aW5kb3cubG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3Byb2JsZW1pZCcpO1xyXG4gICAgICAgICAgICBzZWxmLm5pY2tuYW1lID0gJHdpbmRvdy5sb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnbmlja25hbWUnKTtcclxuICAgICAgICAgICAgc2VsZi5waG90byA9ICR3aW5kb3cubG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3Bob3RvJyk7XHJcbiAgICAgICAgICAgIHByb2JsZW1TZXJ2aWNlLmdldGhpc3RvcnljaGF0KHNlbGYuaWRQcm9ibGVtKVxyXG4gICAgICAgICAgICAgICAgLnN1Y2Nlc3MoZnVuY3Rpb24oZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKGRhdGEuc3VjY2Vzcykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGRhdGEuaGlzdG9yeWNoYXQubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0bXAgPSBuZXcgRGF0ZShkYXRhLmhpc3RvcnljaGF0W2ldLnRpbWUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG1zbiA9IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuaWNrbmFtZTogZGF0YS5oaXN0b3J5Y2hhdFtpXS5uaWNrbmFtZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtc2c6IGRhdGEuaGlzdG9yeWNoYXRbaV0ubXNnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpbWU6IHRtcC5nZXREYXRlKCkgKyBcIi9cIiArICh0bXAuZ2V0TW9udGgoKSArIDEgKSsgXCIvXCIgKyB0bXAuZ2V0RnVsbFllYXIoKSArIFwiIFtcIiArIHRtcC5nZXRIb3VycygpICsgXCI6XCIgKyB0bXAuZ2V0TWludXRlcygpICsgXCJdIFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5tZXNzYWdlcy5wdXNoKG1zbik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgU29ja2V0LmVtaXQoJ2NoZWNrVXNlcnMnKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIHNob3dSZXBsYXkoKXtcclxuICAgICAgICAgICAgaWYoc2VsZi5yZXBsYXkpe1xyXG4gICAgICAgICAgICAgICAgc2VsZi5yZXBsYXkgPSBmYWxzZTtcclxuICAgICAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgICAgICBzZWxmLnJlcGxheSA9IHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIFNvY2tldC5vbignb25Ccm9hZGNhc3RDaGF0JywgZnVuY3Rpb24gKG9iaikge1xyXG4gICAgICAgICAgICB2YXIgdG1wID0gbmV3IERhdGUob2JqW29iai5sZW5ndGggLTFdLnRpbWUpO1xyXG4gICAgICAgICAgICBzZWxmLm1lc3NhZ2VzLnB1c2goe1xyXG4gICAgICAgICAgICAgICAgbmlja25hbWU6IG9ialtvYmoubGVuZ3RoIC0xXS5uaWNrbmFtZSxcclxuICAgICAgICAgICAgICAgIG1zZzogb2JqW29iai5sZW5ndGggLTFdLm1zZyxcclxuICAgICAgICAgICAgICAgIHRpbWU6IHRtcC5nZXREYXRlKCkgKyBcIi9cIiArICh0bXAuZ2V0TW9udGgoKSArIDEpICsgXCIvXCIgKyB0bXAuZ2V0RnVsbFllYXIoKSArIFwiIFtcIiArIHRtcC5nZXRIb3VycygpICsgXCI6XCIgKyB0bXAuZ2V0TWludXRlcygpICsgXCJdIFwiXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBTb2NrZXQub24oJ29uQ2hlY2tVc2VycycsIGZ1bmN0aW9uICh1c2VyTGlzdCkge1xyXG4gICAgICAgICAgICBzZWxmLnVzZXJMaXN0ID0gdXNlckxpc3Q7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIHNlbmRNZXNzYWdlKGNoYXRtc2cpe1xyXG4gICAgICAgICAgICBpZihjaGF0bXNnID09PSB1bmRlZmluZWQgfHwgY2hhdG1zZy5sZW5ndGggPCAyICl7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIFNvY2tldC5lbWl0KCdicm9hZGNhc3RDaGF0JywgY2hhdG1zZyk7XHJcbiAgICAgICAgICAgIHNlbGYubmV3bXNnID0gXCJcIjtcclxuICAgICAgICB9XHJcblxyXG4gICB9XHJcblxyXG59KSgpO1xyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG4vKlxyXG52YXIgc2VsZiA9IHRoaXM7XHJcbnNlbGYubmV3bXNnID0gXCJcIjtcclxuc2VsZi5tZXNzYWdlcyA9IFtdO1xyXG5zZWxmLnJlcGxheSA9IGZhbHNlO1xyXG5zZWxmLm5pY2tuYW1lID0gXCJcIjtcclxuc2VsZi51c2VyTGlzdCA9IFtdO1xyXG5zZWxmLmluaXRIaXN0b3J5Q2hhdCA9IGluaXRIaXN0b3J5Q2hhdDtcclxuc2VsZi5jbG9zZSA9IGNsb3NlO1xyXG5zZWxmLnNob3dSZXBsYXkgPSBzaG93UmVwbGF5O1xyXG5zZWxmLnNlbmRNZXNzYWdlID0gc2VuZE1lc3NhZ2U7XHJcblxyXG5mdW5jdGlvbiBjbG9zZSgpIHtcclxuICAgICRtZFNpZGVuYXYoJ2NoYXQnKS5jbG9zZSgpXHJcbiAgICAgICAgLnRoZW4oZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAkbG9nLmRlYnVnKFwiY2xvc2UgY2hhdFwiKTtcclxuICAgICAgICB9KTtcclxufVxyXG5cclxuZnVuY3Rpb24gaW5pdEhpc3RvcnlDaGF0KCl7XHJcbiAgICBzZWxmLmlkUHJvYmxlbSA9ICR3aW5kb3cubG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3Byb2JsZW1pZCcpO1xyXG4gICAgc2VsZi5uaWNrbmFtZSA9ICR3aW5kb3cubG9jYWxTdG9yYWdlLmdldEl0ZW0oJ25pY2tuYW1lJyk7XHJcbiAgICBzZWxmLnBob3RvID0gJHdpbmRvdy5sb2NhbFN0b3JhZ2UuZ2V0SXRlbSgncGhvdG8nKTtcclxuICAgIHByb2JsZW1TZXJ2aWNlLmdldGhpc3RvcnljaGF0KHNlbGYuaWRQcm9ibGVtKVxyXG4gICAgICAgIC5zdWNjZXNzKGZ1bmN0aW9uKGRhdGEpIHtcclxuICAgICAgICAgICAgaWYoZGF0YS5zdWNjZXNzKSB7XHJcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGRhdGEuaGlzdG9yeWNoYXQubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgdG1wID0gbmV3IERhdGUoZGF0YS5oaXN0b3J5Y2hhdFtpXS50aW1lKTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgbXNuID0ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBuaWNrbmFtZTogZGF0YS5oaXN0b3J5Y2hhdFtpXS5uaWNrbmFtZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgbXNnOiBkYXRhLmhpc3RvcnljaGF0W2ldLm1zZyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGltZTogdG1wLmdldERhdGUoKSArIFwiL1wiICsgKHRtcC5nZXRNb250aCgpICsgMSApKyBcIi9cIiArIHRtcC5nZXRGdWxsWWVhcigpICsgXCIgW1wiICsgdG1wLmdldEhvdXJzKCkgKyBcIjpcIiArIHRtcC5nZXRNaW51dGVzKCkgKyBcIl0gXCJcclxuICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgICAgIHNlbGYubWVzc2FnZXMucHVzaChtc24pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICBTb2NrZXQuZW1pdCgnY2hlY2tVc2VycycpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBzaG93UmVwbGF5KCl7XHJcbiAgICBpZihzZWxmLnJlcGxheSl7XHJcbiAgICAgICAgc2VsZi5yZXBsYXkgPSBmYWxzZTtcclxuICAgIH1lbHNle1xyXG4gICAgICAgIHNlbGYucmVwbGF5ID0gdHJ1ZTtcclxuICAgIH1cclxufVxyXG5cclxuU29ja2V0Lm9uKCdvbkJyb2FkY2FzdENoYXQnLCBmdW5jdGlvbiAob2JqKSB7XHJcbiAgICB2YXIgdG1wID0gbmV3IERhdGUob2JqW29iai5sZW5ndGggLTFdLnRpbWUpO1xyXG4gICAgc2VsZi5tZXNzYWdlcy5wdXNoKHtcclxuICAgICAgICBuaWNrbmFtZTogb2JqW29iai5sZW5ndGggLTFdLm5pY2tuYW1lLFxyXG4gICAgICAgIG1zZzogb2JqW29iai5sZW5ndGggLTFdLm1zZyxcclxuICAgICAgICB0aW1lOiB0bXAuZ2V0RGF0ZSgpICsgXCIvXCIgKyAodG1wLmdldE1vbnRoKCkgKyAxKSArIFwiL1wiICsgdG1wLmdldEZ1bGxZZWFyKCkgKyBcIiBbXCIgKyB0bXAuZ2V0SG91cnMoKSArIFwiOlwiICsgdG1wLmdldE1pbnV0ZXMoKSArIFwiXSBcIlxyXG4gICAgfSk7XHJcbn0pO1xyXG5cclxuU29ja2V0Lm9uKCdvbkNoZWNrVXNlcnMnLCBmdW5jdGlvbiAodXNlckxpc3QpIHtcclxuICAgIHNlbGYudXNlckxpc3QgPSB1c2VyTGlzdDtcclxufSk7XHJcblxyXG5mdW5jdGlvbiBzZW5kTWVzc2FnZShjaGF0bXNnKXtcclxuICAgIFNvY2tldC5lbWl0KCdicm9hZGNhc3RDaGF0JywgY2hhdG1zZyk7XHJcbiAgICBzZWxmLm5ld21zZyA9IFwiXCI7XHJcbn0qL1xyXG4iLCIvKipcclxuICogQ3JlYXRlZCBieSBKT1NFVkFMREVSTEVJIG9uIDEwLzA3LzIwMTUuXHJcbiAqL1xyXG5cclxuXHJcbihmdW5jdGlvbigpe1xyXG5cclxuICAgIFwidXNlIHN0cmljdFwiO1xyXG5cclxuICAgIGFuZ3VsYXJcclxuICAgICAgICAubW9kdWxlKCdhcHAnKVxyXG4gICAgICAgIC5jb250cm9sbGVyKCdjb250cm9sbGVyQ29sbGFib3JhdG9ycycsIGNvbnRyb2xsZXJDb2xsYWJvcmF0b3JzKTtcclxuXHJcbiAgICBmdW5jdGlvbiBjb250cm9sbGVyQ29sbGFib3JhdG9ycygkd2luZG93LFNvY2tldCxwcm9ibGVtU2VydmljZSx0b2FzdEFwcCl7XHJcblxyXG4gICAgICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgICAgICBzZWxmLmlkUHJvYmxlbSA9IFwiXCI7XHJcbiAgICAgICAgc2VsZi5jb2xsYWJvcmF0b3JzID0gW107XHJcbiAgICAgICAgc2VsZi51c2VyZW1haWwgPSBcIlwiO1xyXG4gICAgICAgIHNlbGYuaW5pdENvbGxhYm9yYXRvcnMgPSBpbml0Q29sbGFib3JhdG9ycztcclxuICAgICAgICBzZWxmLmFkZENvbGxhYm9yYXRvciA9IGFkZENvbGxhYm9yYXRvcjtcclxuICAgICAgICBzZWxmLnJlbW92ZUNvbGxhYm9yYXRvciA9IHJlbW92ZUNvbGxhYm9yYXRvcjtcclxuXHJcbiAgICAgICAgZnVuY3Rpb24gaW5pdENvbGxhYm9yYXRvcnMoKXtcclxuICAgICAgICAgICAgc2VsZi5pZFByb2JsZW0gPSAkd2luZG93LmxvY2FsU3RvcmFnZS5nZXRJdGVtKCdwcm9ibGVtaWQnKTtcclxuICAgICAgICAgICAgc2VsZi51c2VyZW1haWwgPSAkd2luZG93LmxvY2FsU3RvcmFnZS5nZXRJdGVtKCd1c2VyZW1haWwnKTtcclxuICAgICAgICAgICAgcHJvYmxlbVNlcnZpY2UuZ2V0Y29sbGFib3JhdG9ycyhzZWxmLmlkUHJvYmxlbSlcclxuICAgICAgICAgICAgICAgIC5zdWNjZXNzKGZ1bmN0aW9uKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZihkYXRhLnN1Y2Nlc3MpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5jb2xsYWJvcmF0b3JzID0gZGF0YS5jb2xsYWJvcmF0b3JzO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvL1NvY2tldC5lbWl0KCdjaGVja1VzZXJzJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRvYXN0QXBwLmVycm9yTWVzc2FnZShkYXRhLm1lc3NhZ2UpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gc2VhcmNoQ2FsbGFib3JhdGlvbihlbWFpbCl7XHJcbiAgICAgICAgICAgIGZvcih2YXIgaSA9IDA7IGkgPCBzZWxmLmNvbGxhYm9yYXRvcnMubGVuZ3RoOyBpKyspe1xyXG4gICAgICAgICAgICAgICAgaWYoZW1haWwgPT0gc2VsZi5jb2xsYWJvcmF0b3JzW2ldLmVtYWlsKXtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmdW5jdGlvbiBhZGRDb2xsYWJvcmF0b3IoZW1haWwpe1xyXG4gICAgICAgICAgICBpZihzZWxmLnVzZXJlbWFpbCA9PSBlbWFpbCl7XHJcbiAgICAgICAgICAgICAgICB0b2FzdEFwcC5lcnJvck1lc3NhZ2Uoc2VsZi51c2VyZW1haWwgKyBcIiBpcyBlbWFpbCBvZiBvd25lci5cIik7XHJcbiAgICAgICAgICAgIH1lbHNlIHtcclxuICAgICAgICAgICAgICAgIGlmIChzZWFyY2hDYWxsYWJvcmF0aW9uKGVtYWlsKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRvYXN0QXBwLmVycm9yTWVzc2FnZShcIlVzdWFyaW8gQ2FkYXN0cmFkby5cIik7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBpbnZpdGUgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlkcHJvYmxlbTogc2VsZi5pZFByb2JsZW0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVtYWlsOiBlbWFpbFxyXG4gICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICAgICAgcHJvYmxlbVNlcnZpY2UuaW52aXRlKGludml0ZSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgLnN1Y2Nlc3MoZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkYXRhLnN1Y2Nlc3MpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmNvbGxhYm9yYXRvcnMgPSBkYXRhLmNvbGxhYm9yYXRvcnM7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvYXN0QXBwLmVycm9yTWVzc2FnZShkYXRhLm1lc3NhZ2UpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gcmVtb3ZlQ29sbGFib3JhdG9yKHBlb3BsZSl7XHJcbiAgICAgICAgICAgIHZhciBvYmogPSB7XHJcbiAgICAgICAgICAgICAgICBpZHByb2JsZW06IHNlbGYuaWRQcm9ibGVtLFxyXG4gICAgICAgICAgICAgICAgZW1haWw6IHBlb3BsZS5lbWFpbFxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgIHByb2JsZW1TZXJ2aWNlLnJlbW92ZWNvbGxhYm9yYXRvcnMob2JqKVxyXG4gICAgICAgICAgICAgICAgLnN1Y2Nlc3MoZnVuY3Rpb24oZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKGRhdGEuc3VjY2Vzcykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0b2FzdEFwcC5lcnJvck1lc3NhZ2UoXCJDb2xhYm9yYWRvciBmb2kgcmVtb3ZpZG8gZG8gcHJvamV0by5cIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuY29sbGFib3JhdG9ycyA9IGRhdGEuY29sbGFib3JhdG9ycztcclxuICAgICAgICAgICAgICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdG9hc3RBcHAuZXJyb3JNZXNzYWdlKGRhdGEubWVzc2FnZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKlNvY2tldC5vbignb25DaGVja1VzZXJzJywgZnVuY3Rpb24gKHVzZXJMaXN0KSB7XHJcbiAgICAgICAgICAgIGZvcih2YXIgaT0wOyBpIDwgdXNlckxpc3QubGVuZ3RoOyBpKyspe1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2codXNlckxpc3RbaV0pO1xyXG4gICAgICAgICAgICAgICAgZm9yKHZhciBqID0gMDsgaiA8IHNlbGYuY29sbGFib3JhdG9ycy5sZW5ndGg7IGorKyl7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2codXNlckxpc3RbaV0gKyAnICAgJyArIHNlbGYuY29sbGFib3JhdG9yc1tqXS5uaWNrbmFtZSlcclxuICAgICAgICAgICAgICAgICAgICBpZih1c2VyTGlzdFtpXSA9PT0gc2VsZi5jb2xsYWJvcmF0b3JzW2pdLm5pY2tuYW1lKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5jb2xsYWJvcmF0b3JzW2pdLm5pY2tuYW1lID0gc2VsZi5jb2xsYWJvcmF0b3JzW2pdLm5pY2tuYW1lICsgJyAob25saW5lKSAnO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICB9KTsqL1xyXG5cclxuICAgIH1cclxuXHJcblxyXG59KSgpOyIsIi8qKlxyXG4gKiBDcmVhdGVkIGJ5IEpPU0VWQUxERVJMRUkgb24gMjIvMDcvMjAxNS5cclxuICovXHJcblxyXG4oZnVuY3Rpb24oKXtcclxuXHJcbiAgICAndXNlIHN0cmljdCc7XHJcblxyXG5hbmd1bGFyXHJcbiAgICAubW9kdWxlKCdhcHAnKVxyXG4gICAgLmNvbnRyb2xsZXIoJ2RzY1JlcG9ydENvbnRyb2xsZXInLGRzY1JlcG9ydENvbnRyb2xsZXIpO1xyXG5cclxuZnVuY3Rpb24gZHNjUmVwb3J0Q29udHJvbGxlcigpIHtcclxuXHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICBzZWxmLmlkcHJvYmxlbSA9ICdhamZsYWpmbGphbGZqYWxqZic7XHJcbiAgICBzZWxmLmJ1aWRSZXBvcnQgPSBidWlkUmVwb3J0O1xyXG5cclxuICAgIGZ1bmN0aW9uIGJ1aWRSZXBvcnQoZWxlbWVudCkge1xyXG4gICAgICAgIHZhciBodG1sID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Byb2plY3RSZXNwb3J0Jyk7XHJcbiAgICAgICAgdmFyIHBkZiA9IG5ldyBqc1BERignbCcsJ3B4Jyk7XHJcbiAgICAgICAgcGRmLmFkZEhUTUwoXHJcbiAgICAgICAgICAgIGh0bWwsIDAsIDAsIHtcclxuICAgICAgICAgICAgICAgIHBhZ2VzcGxpdDogdHJ1ZVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBmdW5jdGlvbihkaXNwb3NlKXtcclxuICAgICAgICAgICAgICAgIHBkZi5zYXZlKCd0ZXN0LnBkZicpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgKVxyXG4gICAgfVxyXG59XHJcblxyXG59KSgpOyIsIi8qKlxyXG4gKiBDcmVhdGVkIGJ5IEpPU0VWQUxERVJMRUkgb24gMjkvMDYvMjAxNS5cclxuICovXHJcbihmdW5jdGlvbigpe1xyXG5cclxuJ3VzZSBzdHJpY3QnO1xyXG5cclxuYW5ndWxhclxyXG4gICAgLm1vZHVsZSgnYXBwJylcclxuICAgIC5jb250cm9sbGVyKCdldmFsdWF0aW9uZnJhbWV3b3JrQ29udHJvbGxlcicsZXZhbHVhdGlvbmZyYW1ld29ya0NvbnRyb2xsZXIpO1xyXG5cclxuICBmdW5jdGlvbiBldmFsdWF0aW9uZnJhbWV3b3JrQ29udHJvbGxlciAoJHdpbmRvdyxwcm9ibGVtU2VydmljZSxTb2NrZXQsdG9hc3RBcHApe1xyXG5cclxuICAgICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgICBzZWxmLmV2YWx1YXRpb25mcmFtZXdvcmtMaXN0ID1bXTtcclxuICAgICAgc2VsZi5pbml0RXZhbHVhdGlvbiA9IGluaXRFdmFsdWF0aW9uO1xyXG4gICAgICBzZWxmLnNldE9wZW5FZGl0RGlzY3V0aW9uID0gc2V0T3BlbkVkaXREaXNjdXRpb247XHJcbiAgICAgIHNlbGYuc2F2ZUZyYW1lID0gc2F2ZUZyYW1lO1xyXG5cclxuICAgICAgZnVuY3Rpb24gaW5pdEV2YWx1YXRpb24oKXtcclxuICAgICAgICAgIHNlbGYuaWRwcm9ibGVtID0gJHdpbmRvdy5sb2NhbFN0b3JhZ2UuZ2V0SXRlbSgncHJvYmxlbWlkJyk7XHJcbiAgICAgICAgIHByb2JsZW1TZXJ2aWNlLmdldGV2YWx1YXRpb24oc2VsZi5pZHByb2JsZW0pXHJcbiAgICAgICAgICAgICAgLnN1Y2Nlc3MoZnVuY3Rpb24oZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgICBpZihkYXRhLnN1Y2Nlc3MpIHtcclxuICAgICAgICAgICAgICAgICAgICAgIHNlbGYuZXZhbHVhdGlvbmZyYW1ld29ya0xpc3QgPSBkYXRhLmV2YWx1YXRpb25mcmFtZXdvcms7XHJcbiAgICAgICAgICAgICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICAgICAgICAgICAgdG9hc3RBcHAuZXJyb3JNZXNzYWdlKGRhdGEubWVzc2FnZSk7XHJcbiAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICB9KTtcclxuICAgICAgfVxyXG5cclxuICAgICAgU29ja2V0Lm9uKCdvbkJyb2FkY2FzdEZyYW1lRWRpdCcsIGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgICBjb25zb2xlLmxvZygnTyBxdWUgdmVtIGFxdWkuLi4nICsgZGF0YSlcclxuICAgICAgICAgIGFuZ3VsYXIuZm9yRWFjaChzZWxmLmV2YWx1YXRpb25mcmFtZXdvcmtMaXN0LGZ1bmN0aW9uKGV2YWx1YXRpb25mcmFtZXdvcmspe1xyXG4gICAgICAgICAgICAgaWYoIGV2YWx1YXRpb25mcmFtZXdvcmsub25pb25sYXllciA9PSBkYXRhLm9uaW9ubGF5ZXIpe1xyXG4gICAgICAgICAgICAgICAgIGFuZ3VsYXIuZm9yRWFjaChldmFsdWF0aW9uZnJhbWV3b3JrLnN0YWtlaG9sZGVycyxmdW5jdGlvbihzdGFrZWhvbGRlcil7XHJcbiAgICAgICAgICAgICAgICAgICAgIGlmIChzdGFrZWhvbGRlci5faWQgPT0gZGF0YS5faWQpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgc3Rha2Vob2xkZXIubmFtZSA9IGRhdGEubmFtZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgIHN0YWtlaG9sZGVyLm9uaW9ubGF5ZXIgPSBkYXRhLm9uaW9ubGF5ZXI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICBzdGFrZWhvbGRlci5kZXNjcmlwdGlvbiA9IGRhdGEuZGVzY3JpcHRpb247XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICBzdGFrZWhvbGRlci5vcGVuRWRpdCA9IGRhdGEub3BlbkVkaXQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICBzdGFrZWhvbGRlci5wcm9ibGVtcyA9IGRhdGEucHJvYmxlbXM7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICBzdGFrZWhvbGRlci5zb2x1dGlvbnMgPSBkYXRhLnNvbHV0aW9ucztcclxuICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfSk7XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgZnVuY3Rpb24gc2F2ZUZyYW1lKHN0YWtlaG9sZGVyKSB7XHJcbiAgICAgICAgICBTb2NrZXQuZW1pdCgnYnJvYWRjYXN0RnJhbWVTYXZlJywgc3Rha2Vob2xkZXIpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBTb2NrZXQub24oJ29uVXBkYXRlU3Rha2Vob2xkZXInLCBmdW5jdGlvbiAoc3Rha2Vob2xkZXJPbmlvbikge1xyXG4gICAgICAgICBjb25zb2xlLmxvZyhzdGFrZWhvbGRlck9uaW9uKTtcclxuXHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgZnVuY3Rpb24gc2V0T3BlbkVkaXREaXNjdXRpb24oY3VycmVudFN0YWtlaG9sZGVyKXtcclxuICAgICAgICAgIGN1cnJlbnRTdGFrZWhvbGRlci5vcGVuRWRpdCA9IHRydWU7XHJcbiAgICAgIH1cclxuICB9XHJcblxyXG59KSgpO1xyXG4iLCIoZnVuY3Rpb24oKSB7XHJcbiAgICBcInVzZSBzdHJpY3RcIjtcclxuXHJcbiAgICBhbmd1bGFyXHJcbiAgICAgICAgLm1vZHVsZSgnYXBwJylcclxuICAgICAgICAuY29udHJvbGxlcignbWVudVByb2JsZW1Db250cm9sbGVyJywgbWVudVByb2JsZW1hQ29udHJvbGxlcik7XHJcblxyXG4gICAgZnVuY3Rpb24gbWVudVByb2JsZW1hQ29udHJvbGxlcihBdXRoLCAkc3RhdGUsICR3aW5kb3csIHByb2JsZW1TZXJ2aWNlLHRvYXN0QXBwLCBTb2NrZXQpe1xyXG5cclxuICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICAgICAgLy9zZWxmLm9wZW5DaGF0ID0gYnVpbGRUb2dnbGVyKCdjaGF0Jyk7XHJcbiAgICAgICAgc2VsZi5mb3JtQWRkQ29sbGFib3JhdG9ycyA9IGZvcm1BZGRDb2xsYWJvcmF0b3JzO1xyXG4gICAgICAgIHNlbGYuZWRpdERlc2NyaXB0aW9uUHJvYmxlbSA9IGVkaXREZXNjcmlwdGlvblByb2JsZW07XHJcbiAgICAgICAgc2VsZi5kb0xvZ291dCA9IGRvTG9nb3V0O1xyXG4gICAgICAgIHNlbGYuc3lzdGVtUmV0dXJuID0gc3lzdGVtUmV0dXJuO1xyXG4gICAgICAgIHNlbGYuZm9ybVByb2JsZW1SZXBvcnQgPSBmb3JtUHJvYmxlbVJlcG9ydDtcclxuICAgICAgICBzZWxmLmdldEN1cnJlbnRQcm9ibGVtID0gZ2V0Q3VycmVudFByb2JsZW07XHJcbiAgICAgICAgc2VsZi5uaWNrbmFtZTtcclxuXHJcbiAgICAgICAgZnVuY3Rpb24gZ2V0Q3VycmVudFByb2JsZW0oKXtcclxuICAgICAgICAgICAgc2VsZi5uaWNrbmFtZSA9ICR3aW5kb3cubG9jYWxTdG9yYWdlLmdldEl0ZW0oJ25pY2tuYW1lJyk7XHJcbiAgICAgICAgICAgIHNlbGYuaWRQcm9ibGVtID0gJHdpbmRvdy5sb2NhbFN0b3JhZ2UuZ2V0SXRlbSgncHJvYmxlbWlkJyk7XHJcbiAgICAgICAgICAgIHByb2JsZW1TZXJ2aWNlLmdldHByb2JsZW0oc2VsZi5pZFByb2JsZW0pXHJcbiAgICAgICAgICAgICAgICAuc3VjY2VzcyhmdW5jdGlvbihkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYoZGF0YS5zdWNjZXNzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYucHJvYmxlbSA9IGRhdGEucHJvYmxlbTtcclxuICAgICAgICAgICAgICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdG9hc3RBcHAuZXJyb3JNZXNzYWdlKGRhdGEubWVzc2FnZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHZhciBpbml0c29ja2V0cHJvYmxlbSA9IHtcclxuICAgICAgICAgICAgICAgIFwiaWRwcm9ibGVtXCI6IHNlbGYuaWRQcm9ibGVtLFxyXG4gICAgICAgICAgICAgICAgXCJuaWNrbmFtZVwiOiBzZWxmLm5pY2tuYW1lXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIFNvY2tldC5lbWl0KCdpbml0UHJvYmxlbScsIGluaXRzb2NrZXRwcm9ibGVtKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZnVuY3Rpb24gc3lzdGVtUmV0dXJuKCl7XHJcbiAgICAgICAgICAgICRzdGF0ZS5nbygnc3RhcnRwcm9ibGVtJyk7XHJcbiAgICAgICAgfVxyXG5cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gZm9ybUFkZENvbGxhYm9yYXRvcnMoKXtcclxuICAgICAgICAgICAgJHN0YXRlLmdvKCdwcm9ibGVtLmNvbGxhYm9yYXRvcnMnKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGZvcm1Qcm9ibGVtUmVwb3J0KCl7XHJcbiAgICAgICAgICAgICRzdGF0ZS5nbygnZHNjcmVwb3J0Jyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmdW5jdGlvbiBlZGl0RGVzY3JpcHRpb25Qcm9ibGVtKCkge1xyXG4gICAgICAgICAgICAkc3RhdGUuZ28oJ3Byb2JsZW0uZGVzY3JpcHRpb24nKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGRvTG9nb3V0KCkge1xyXG4gICAgICAgICAgICBBdXRoLmxvZ291dCgpO1xyXG4gICAgICAgICAgICAkc3RhdGUuZ28oJ2luaXQubG9naW4nKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgfVxyXG59KSgpOyIsIi8qKlxyXG4gKiBDcmVhdGVkIGJ5IGplc3VzIG9uIDIxLzAzLzIwMTYuXHJcbiAqL1xyXG5cclxuKGZ1bmN0aW9uKCl7XHJcbiAgICBcInVzZSBzdHJpY3RcIjtcclxuXHJcbiAgICBhbmd1bGFyXHJcbiAgICAgICAgLm1vZHVsZSgnYXBwJylcclxuICAgICAgICAuY29udHJvbGxlcignb25pb25Db250cm9sbGVyJyxvbmlvbkNvbnRyb2xsZXIpO1xyXG5cclxuICAgIGZ1bmN0aW9uIG9uaW9uQ29udHJvbGxlcihTb2NrZXQsJHdpbmRvdyxwcm9ibGVtU2VydmljZSwkbWREaWFsb2csdG9hc3RBcHApe1xyXG4gICAgICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgICAgICBzZWxmLmlkcHJvYmxlbSA9IFwiXCI7XHJcbiAgICAgICAgc2VsZi5pbnRpTXl0T25pb24gPSBpbnRpTXl0T25pb247XHJcbiAgICAgICAgc2VsZi5zYXZlUG9zdEl0T25pb24gPSBzYXZlUG9zdEl0T25pb247XHJcbiAgICAgICAgc2VsZi5lZGl0UG9zdEl0T25pb24gPSBlZGl0UG9zdEl0T25pb247XHJcbiAgICAgICAgc2VsZi5kZWxQb3N0SXRPbmlvbiA9IGRlbFBvc3RJdE9uaW9uO1xyXG4gICAgICAgIHNlbGYuYWRkUG9zdEl0T25pb24gPSBhZGRQb3N0SXRPbmlvbjtcclxuICAgICAgICBzZWxmLm9uT25pb24gPSBvbk9uaW9uO1xyXG4gICAgICAgIHNlbGYub2ZmT25pb24gPSBvZmZPbmlvbjtcclxuXHJcblxyXG4gICAgICAgIFxyXG5cclxuXHJcblxyXG4gICAgfVxyXG59KSgpOyIsIihmdW5jdGlvbigpe1xyXG5cclxuXCJ1c2Ugc3RyaWN0XCI7XHJcblxyXG4gICAgYW5ndWxhci5tb2R1bGUoJ2FwcCcpXHJcbiAgICAuY29udHJvbGxlcignZWRpdFByb2JsZW1Db250cm9sbGVyJyxlZGl0UHJvYmxlbWFDb250cm9sbGVyKTtcclxuZWRpdFByb2JsZW1hQ29udHJvbGxlci4kaW5qZWN0cmUgPSBbJyRzY29wZScsJ1NvY2tldCddO1xyXG5cclxuZnVuY3Rpb24gZWRpdFByb2JsZW1hQ29udHJvbGxlcihTb2NrZXQsICR3YXRjaCwgJHRpbWVvdXQsdG9hc3RBcHAsJHdpbmRvdyxwcm9ibGVtU2VydmljZSkge1xyXG5cclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgIHZhciB1cGRhdGVUcnVlID0gdHJ1ZTtcclxuICAgIHNlbGYucHJvYmxlbSA9IFwiXCI7XHJcbiAgICBzZWxmLnByb2JsZW1VcGRhdGUgPSBwcm9ibGVtVXBkYXRlO1xyXG4gICAgc2VsZi5nZXRDdXJyZW50UHJvYmxlbSA9IGdldEN1cnJlbnRQcm9ibGVtO1xyXG4gICAgc2VsZi5zYXZlRGVzY3JpcHRpb24gPSBzYXZlRGVzY3JpcHRpb247XHJcbiAgICBzZWxmLm5pY2tuYW1lO1xyXG4gICAgc2VsZi5sb2NhbGNvZGUgPSAnJztcclxuXHJcblxyXG4gICAgdmFyIHNlbGVjdGVkID0gbnVsbCxcclxuICAgIHByZXZpb3VzID0gbnVsbDtcclxuXHJcbiAgICBzZWxmLnNlbGVjdGVkSW5kZXggPSAxO1xyXG4gICAgc2VsZi4kd2F0Y2goJ3NlbGVjdGVkSW5kZXgnLCBmdW5jdGlvbihjdXJyZW50LCBvbGQpe1xyXG4gICAgICAgIHByZXZpb3VzID0gc2VsZWN0ZWQ7XHJcbiAgICAgICAgc2VsZWN0ZWQgPSBhcnRlZmFjdHNbY3VycmVudF07XHJcbiAgICAgICAgaWYgKCBvbGQgKyAxICYmIChvbGQgIT0gY3VycmVudCkpIGNvbnNvbGUubG9nKCdHb29kYnllICcgKyBwcmV2aW91cy50aXRsZSArICchJyk7XHJcbiAgICAgICAgaWYgKCBjdXJyZW50ICsgMSApICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdIZWxsbyAnICsgc2VsZWN0ZWQudGl0bGUgKyAnIScpO1xyXG4gICAgfSlcclxuXHJcblxyXG4gICAgZnVuY3Rpb24gZ2V0Q3VycmVudFByb2JsZW0oKXtcclxuXHJcbiAgICAgICAgc2VsZi5uaWNrbmFtZSA9ICR3aW5kb3cubG9jYWxTdG9yYWdlLmdldEl0ZW0oJ25pY2tuYW1lJyk7XHJcbiAgICAgICAgc2VsZi5pZFByb2JsZW0gPSAkd2luZG93LmxvY2FsU3RvcmFnZS5nZXRJdGVtKCdwcm9ibGVtaWQnKTtcclxuICAgICAgICBzZWxmLmxvY2FsY29kZSA9ICAkd2luZG93LmxvY2FsU3RvcmFnZS5nZXRJdGVtKCdsb2NhbGNvZGUnKTtcclxuXHJcblxyXG4gICAgICAgIHByb2JsZW1TZXJ2aWNlLmdldHByb2JsZW0oc2VsZi5pZFByb2JsZW0pXHJcbiAgICAgICAgICAgIC5zdWNjZXNzKGZ1bmN0aW9uKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgIGlmKGRhdGEuc3VjY2Vzcykge1xyXG4gICAgICAgICAgICAgICAgICAgIHNlbGYucHJvYmxlbSA9IGRhdGEucHJvYmxlbTtcclxuICAgICAgICAgICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICAgICAgICAgIHRvYXN0QXBwLmVycm9yTWVzc2FnZShkYXRhLm1lc3NhZ2UpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB2YXIgaW5pdHNvY2tldHByb2JsZW0gPSB7XHJcbiAgICAgICAgICAgIFwiaWRwcm9ibGVtXCI6IHNlbGYuaWRQcm9ibGVtLFxyXG4gICAgICAgICAgICBcIm5pY2tuYW1lXCI6IHNlbGYubmlja25hbWVcclxuICAgICAgICB9O1xyXG4gICAgICAgIFNvY2tldC5lbWl0KCdpbml0UHJvYmxlbScsIGluaXRzb2NrZXRwcm9ibGVtKTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBzZXRVcGRhdGUoKXtcclxuICAgICAgICB1cGRhdGVUcnVlID0gdHJ1ZTtcclxuICAgIH1cclxuXHJcbiAgICBTb2NrZXQub24oJ29uQXR1YWxpemFyUHJvYmxlbWEnLCBmdW5jdGlvbiAocmV0b3Jubykge1xyXG4gICAgICAgIGlmKHNlbGYubG9jYWxjb2RlICE9PSByZXRvcm5vLmxvY2FsY29kZSkge1xyXG4gICAgICAgICAgICBzZWxmLnByb2JsZW0uZGVzY3JpcHRpb24gPSByZXRvcm5vLmRlc2NyaXB0aW9uO1xyXG4gICAgICAgIH1cclxuICAgICAgICBzZWxmLnByb2JsZW0udXBkYXRlID0gdXBkYXRlVHJ1ZTtcclxuICAgIH0pO1xyXG5cclxuICAgIGZ1bmN0aW9uIHByb2JsZW1VcGRhdGUocHJvYmxlbSkge1xyXG4gICAgICAgIHByb2JsZW0udXBkYXRlID0gdXBkYXRlVHJ1ZTtcclxuICAgICAgICBwcm9ibGVtLmxvY2FsY29kZSA9IHNlbGYubG9jYWxjb2RlO1xyXG4gICAgICAgIFNvY2tldC5lbWl0KCdhdHVhbGl6YXJQcm9ibGVtYScsIHByb2JsZW0pO1xyXG4gICAgICAgIGlmICh1cGRhdGVUcnVlKSB7XHJcbiAgICAgICAgICAgIHVwZGF0ZVRydWUgPSBmYWxzZTtcclxuICAgICAgICAgICAgJHRpbWVvdXQoc2V0VXBkYXRlLCAyMDAwKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gc2F2ZURlc2NyaXB0aW9uKHByb2JsZW0pIHtcclxuICAgICAgICBwcm9ibGVtLmxvY2FsY29kZSA9IHNlbGYubG9jYWxjb2RlO1xyXG4gICAgICAgIHByb2JsZW0udXBkYXRlID0gdXBkYXRlVHJ1ZTtcclxuICAgICAgICBTb2NrZXQuZW1pdCgnYXR1YWxpemFyUHJvYmxlbWEnLCBwcm9ibGVtKTtcclxuICAgIH1cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxufVxyXG5cclxufSkoKTsiLCIvKipcclxuICogQ3JlYXRlZCBieSBKT1NFVkFMREVSTEVJIG9uIDEyLzA4LzIwMTUuXHJcbiAqL1xyXG5cclxuKGZ1bmN0aW9uKCl7XHJcblxyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICAgIGFuZ3VsYXJcclxuICAgICAgICAubW9kdWxlKCdhcHAnKVxyXG4gICAgICAgIC5jb250cm9sbGVyKCdwcm9ibGVtUmVwb3J0Q29udHJvbGxlcicscHJvYmxlbVJlcG9ydENvbnRyb2xsZXIpO1xyXG5cclxuXHJcbiAgICAgZnVuY3Rpb24gcHJvYmxlbVJlcG9ydENvbnRyb2xsZXIoJHdpbmRvdyxwcm9ibGVtU2VydmljZSx0b2FzdEFwcCwkc3RhdGUpe1xyXG5cclxuICAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgICAgICBzZWxmLmlkUHJvYmxlbTtcclxuICAgICAgICAgc2VsZi5wcm9ibGVtO1xyXG4gICAgICAgICBzZWxmLmluaXRQcm9ibGVtUGVwb3J0ID0gaW5pdFByb2JsZW1QZXBvcnQ7XHJcbiAgICAgICAgIHNlbGYuc3lzdGVtUmV0dXJuID0gc3lzdGVtUmV0dXJuO1xyXG5cclxuICAgICAgICAgZnVuY3Rpb24gaW5pdFByb2JsZW1QZXBvcnQoKXtcclxuXHJcbiAgICAgICAgICAgICBzZWxmLmlkUHJvYmxlbSA9ICR3aW5kb3cubG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3Byb2JsZW1pZCcpO1xyXG5cclxuICAgICAgICAgICAgIHByb2JsZW1TZXJ2aWNlLmdldHByb2JsZW1yZXBvcnQoc2VsZi5pZFByb2JsZW0pXHJcbiAgICAgICAgICAgICAgICAgLnN1Y2Nlc3MoZnVuY3Rpb24oZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgICAgICBpZihkYXRhLnN1Y2Nlc3MpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYucHJvYmxlbSA9IGRhdGEucHJvYmxlbTtcclxuICAgICAgICAgICAgICAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICB0b2FzdEFwcC5lcnJvck1lc3NhZ2UoZGF0YS5tZXNzYWdlKTtcclxuICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICB9XHJcblxyXG5cclxuICAgICAgICAgZnVuY3Rpb24gc3lzdGVtUmV0dXJuKCl7XHJcbiAgICAgICAgICAgICAkc3RhdGUuZ28oJ3Byb2JsZW0uc3Rha2Vob2xkZXJzJyk7XHJcbiAgICAgICAgIH1cclxuXHJcbiAgICAgfVxyXG5cclxuXHJcbn0pKCk7IiwiKGZ1bmN0aW9uKCkge1xyXG4gICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgYW5ndWxhclxyXG4gICAgLm1vZHVsZSgnYXBwJylcclxuICAgIC5mYWN0b3J5KCdwcm9ibGVtU2VydmljZScsIHByb2JsZW1TZXJ2aWNlKTtcclxuXHJcbiAgcHJvYmxlbVNlcnZpY2UuJGluamVjdCA9IFsnJGh0dHAnLCckbG9jYXRpb24nXTtcclxuXHJcbiAgZnVuY3Rpb24gcHJvYmxlbVNlcnZpY2UoJGh0dHAsJGxvY2F0aW9uKSB7XHJcblxyXG4gICAgdmFyIEFQSV9ST1VURV9HRVRVU0VSUFJPQkxFTVMgPSAnL2FwaS9wcm9ibGVtL2dldHByb2JsZW1zJztcclxuICAgIHZhciBBUElfUk9VVEVfR0VUVVNFUlBST0JMRU1TQ09MTEFCT1JBVE9SID0gJy9hcGkvcHJvYmxlbS9nZXRwcm9ibGVtc2NvbGxhYm9yYXRvcic7XHJcbiAgICB2YXIgQVBJX1JPVVRFX05FV1BST0JMRU0gPSAnL2FwaS9wcm9ibGVtL25ld3Byb2JsZW0nO1xyXG4gICAgdmFyIEFQSV9ST1VURV9HRVRQUk9CTEVNID0gJy9hcGkvcHJvYmxlbS9nZXRwcm9ibGVtJztcclxuICAgIHZhciBBUElfUk9VVEVfR0VUUFJPQkxFTVJFUE9SVCA9ICcvYXBpL3Byb2JsZW0vZ2V0cHJvYmxlbXJlcG9ydCc7XHJcbiAgICB2YXIgQVBJX1JPVVRFX0dFVENPTExBQk9SQVRPUlMgPSAnL2FwaS9wcm9ibGVtL2dldGNvbGxhYm9yYXRvcnMnO1xyXG4gICAgdmFyIEFQSV9ST1VURV9JTlZJVEUgPSAnL2FwaS9wcm9ibGVtL2ludml0ZSc7XHJcbiAgICB2YXIgQVBJX1JPVVRFX0dFVE9OSU9OID0gJy9hcGkvcHJvYmxlbS9nZXRvbmlvbic7XHJcbiAgICB2YXIgQVBJX1JPVVRFX0dFVEVWQUxVQVRJT04gPSAnL2FwaS9wcm9ibGVtL2dldGV2YWx1YXRpb24nO1xyXG4gICAgdmFyIEFQSV9ST1VURV9HRVRTRU1JT1RJQ0ZSQU1FV09SSyA9ICcvYXBpL3Byb2JsZW0vZ2V0c2VtaW90aWMnO1xyXG4gICAgdmFyIEFQSV9ST1VURV9HRVRDQVJGID0gJy9hcGkvcHJvYmxlbS9nZXRjYXJmJztcclxuICAgIHZhciBBUElfUk9VVEVfUkVNT1ZFUFJPQkxFTSA9ICcvYXBpL3Byb2JsZW0vcmVtb3ZlcHJvYmxlbSc7XHJcbiAgICB2YXIgQVBJX1JPVVRFX1JFTU9WRUNPTExBQk9SQVRPUiA9ICcvYXBpL3Byb2JsZW0vcmVtb3ZlY29sbGFib3JhdG9yJztcclxuICAgIHZhciBBUElfUk9VVEVfR0VUSElTVE9SWUNIQVQgPSAnL2FwaS9wcm9ibGVtL2hpc3RvcnljaGF0JztcclxuXHJcbiAgICB2YXIgc2VydmljZSA9IHtcclxuICAgICAgbmV3cHJvYmxlbSAgICAgICA6IG5ld3Byb2JsZW0sXHJcbiAgICAgIGdldHVzZXJwcm9ibGVtcyAgOiBnZXR1c2VycHJvYmxlbXMsXHJcbiAgICAgIGdldHByb2JsZW0gICAgICAgOiBnZXRwcm9ibGVtLFxyXG4gICAgICBnZXRjb2xsYWJvcmF0b3JzIDogZ2V0Y29sbGFib3JhdG9ycyxcclxuICAgICAgaW52aXRlICAgICAgICAgICA6IGludml0ZSxcclxuICAgICAgZ2V0b25pb24gICAgICAgICA6IGdldG9uaW9uLFxyXG4gICAgICBnZXRldmFsdWF0aW9uICAgIDogZ2V0ZXZhbHVhdGlvbixcclxuICAgICAgZ2V0c2VtaW90aWMgICAgICA6IGdldHNlbWlvdGljLFxyXG4gICAgICBnZXRjYXJmICAgICAgICAgIDogZ2V0Y2FyZixcclxuICAgICAgcmVtb3ZlcHJvYmxlbSAgICA6IHJlbW92ZXByb2JsZW0sXHJcbiAgICAgIGdldHByb2JsZW1zY29sbGFib3JhdG9yOiBnZXRwcm9ibGVtc2NvbGxhYm9yYXRvcixcclxuICAgICAgcmVtb3ZlY29sbGFib3JhdG9ycyA6IHJlbW92ZWNvbGxhYm9yYXRvcnMsXHJcbiAgICAgIGdldGhpc3RvcnljaGF0OiBnZXRoaXN0b3J5Y2hhdCxcclxuICAgICAgZ2V0cHJvYmxlbXJlcG9ydCA6IGdldHByb2JsZW1yZXBvcnRcclxuICAgIH07XHJcblxyXG4gICAgcmV0dXJuIHNlcnZpY2U7XHJcblxyXG4gICAgZnVuY3Rpb24gbmV3cHJvYmxlbShkYXRhKSB7XHJcbiAgICAgICAgcmV0dXJuICRodHRwLnBvc3QoQVBJX1JPVVRFX05FV1BST0JMRU0sIGRhdGEpO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGdldHByb2JsZW1yZXBvcnQoZGF0YSl7XHJcbiAgICAgIHJldHVybiAkaHR0cC5nZXQoQVBJX1JPVVRFX0dFVFBST0JMRU1SRVBPUlQgKyAnP2lkcHJvYmxlbT0nICsgZGF0YSApO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGdldHByb2JsZW0oZGF0YSl7XHJcbiAgICAgIHJldHVybiAkaHR0cC5nZXQoQVBJX1JPVVRFX0dFVFBST0JMRU0gKyAnP2lkcHJvYmxlbT0nICsgZGF0YSApO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGdldHVzZXJwcm9ibGVtcyhkYXRhKXtcclxuICAgICAgcmV0dXJuICRodHRwLmdldChBUElfUk9VVEVfR0VUVVNFUlBST0JMRU1TICsgJz9lbWFpbD0nICsgZGF0YSApO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGdldGNvbGxhYm9yYXRvcnMoZGF0YSl7XHJcbiAgICAgIHJldHVybiAkaHR0cC5nZXQoQVBJX1JPVVRFX0dFVENPTExBQk9SQVRPUlMgKyAnP2lkcHJvYmxlbT0nICsgZGF0YSApO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGludml0ZShkYXRhKXtcclxuICAgICAgcmV0dXJuICRodHRwLnBvc3QoQVBJX1JPVVRFX0lOVklURSwgZGF0YSApO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGdldG9uaW9uKGRhdGEpe1xyXG4gICAgICByZXR1cm4gJGh0dHAuZ2V0KEFQSV9ST1VURV9HRVRPTklPTiArICc/aWRwcm9ibGVtPScgKyBkYXRhICk7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gZ2V0ZXZhbHVhdGlvbiAoZGF0YSl7XHJcbiAgICAgIHJldHVybiAkaHR0cC5nZXQoQVBJX1JPVVRFX0dFVEVWQUxVQVRJT04gKyAnP2lkcHJvYmxlbT0nICsgZGF0YSApO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGdldHNlbWlvdGljIChkYXRhKXtcclxuICAgICAgcmV0dXJuICRodHRwLmdldChBUElfUk9VVEVfR0VUU0VNSU9USUNGUkFNRVdPUksgKyAnP2lkcHJvYmxlbT0nICsgZGF0YSApXHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gZ2V0Y2FyZihkYXRhKXtcclxuICAgICAgcmV0dXJuICRodHRwLmdldChBUElfUk9VVEVfR0VUQ0FSRiArICc/aWRwcm9ibGVtPScgKyBkYXRhIClcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiByZW1vdmVwcm9ibGVtKGRhdGEpe1xyXG4gICAgICByZXR1cm4gJGh0dHAuZ2V0KEFQSV9ST1VURV9SRU1PVkVQUk9CTEVNICsgJz9pZHByb2JsZW09JyArIGRhdGEgKTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBnZXRwcm9ibGVtc2NvbGxhYm9yYXRvcihkYXRhKXtcclxuICAgICAgcmV0dXJuICRodHRwLmdldChBUElfUk9VVEVfR0VUVVNFUlBST0JMRU1TQ09MTEFCT1JBVE9SICsgJz9lbWFpbD0nICsgZGF0YSApO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIHJlbW92ZWNvbGxhYm9yYXRvcnMoZGF0YSl7XHJcbiAgICAgIHJldHVybiAkaHR0cC5nZXQoQVBJX1JPVVRFX1JFTU9WRUNPTExBQk9SQVRPUiArICc/aWRwcm9ibGVtPScgKyBkYXRhLmlkcHJvYmxlbSArICcmZW1haWw9JyArIGRhdGEuZW1haWwgKTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBnZXRoaXN0b3J5Y2hhdChkYXRhKXtcclxuICAgICAgcmV0dXJuICRodHRwLmdldChBUElfUk9VVEVfR0VUSElTVE9SWUNIQVQgKyAnP2lkcHJvYmxlbT0nICsgZGF0YSApO1xyXG4gICAgfVxyXG5cclxuICB9XHJcbn0pKCk7XHJcbiIsIi8qKlxyXG4gKiBDcmVhdGVkIGJ5IEpPU0VWQUxERVJMRUkgb24gMjkvMDYvMjAxNS5cclxuICovXHJcblxyXG4oZnVuY3Rpb24oKXtcclxuXHJcbid1c2Ugc3RyaWN0JztcclxuXHJcbmFuZ3VsYXJcclxuICAgIC5tb2R1bGUoJ2FwcCcpXHJcbiAgICAuY29udHJvbGxlcignc2VtaW90aWNmcmFtZXdvcmtDb250cm9sbGVyJyxzZW1pb3RpY2ZyYW1ld29ya0NvbnRyb2xsZXIpO1xyXG5cclxuZnVuY3Rpb24gc2VtaW90aWNmcmFtZXdvcmtDb250cm9sbGVyKFNvY2tldCwkd2luZG93LCBwcm9ibGVtU2VydmljZSx0b2FzdEFwcCl7XHJcblxyXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgc2VsZi5pZHByb2JsZW0gPSBcIlwiO1xyXG4gICAgc2VsZi5zYXZlU29jaWFsV29ybGQgPSBzYXZlU29jaWFsV29ybGQ7XHJcbiAgICBzZWxmLnNhdmVQcmFnbWF0aWMgPSBzYXZlUHJhZ21hdGljO1xyXG4gICAgc2VsZi5zYXZlU2VtYW50aWMgPSBzYXZlU2VtYW50aWM7XHJcbiAgICBzZWxmLnNhdmVTeW50YXRpYyA9IHNhdmVTeW50YXRpYztcclxuICAgIHNlbGYuc2F2ZUVtcGlyaWNhbCA9IHNhdmVFbXBpcmljYWw7XHJcbiAgICBzZWxmLnNhdmVQaHlzaWNhbCA9IHNhdmVQaHlzaWNhbDtcclxuICAgIHNlbGYuc2VtaW90aWNmcmFtZXdvcmsgPSBcIlwiO1xyXG4gICAgc2VsZi5pbml0U2VtaW90aWNGcmFtZXdvcmsgPSBpbml0U2VtaW90aWNGcmFtZXdvcms7XHJcblxyXG4gICAgZnVuY3Rpb24gaW5pdFNlbWlvdGljRnJhbWV3b3JrKCl7XHJcbiAgICAgICAgc2VsZi5pZHByb2JsZW0gPSAkd2luZG93LmxvY2FsU3RvcmFnZS5nZXRJdGVtKCdwcm9ibGVtaWQnKTtcclxuICAgICAgICBwcm9ibGVtU2VydmljZS5nZXRzZW1pb3RpYyhzZWxmLmlkcHJvYmxlbSlcclxuICAgICAgICAgICAgLnN1Y2Nlc3MoZnVuY3Rpb24oZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgaWYoZGF0YS5zdWNjZXNzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5zZW1pb3RpY2ZyYW1ld29yayA9IGRhdGEuc2VtaW90aWNmcmFtZXdvcms7XHJcbiAgICAgICAgICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgICAgICAgICB0b2FzdEFwcC5lcnJvck1lc3NhZ2UoZGF0YS5tZXNzYWdlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgU29ja2V0Lm9uKCdvblVwZGF0ZVNvY2lhbFdvcmxkJywgZnVuY3Rpb24gKHRleHQpIHtcclxuICAgICAgICBzZWxmLnNlbWlvdGljZnJhbWV3b3JrLnNvY2lhbHdvcmxkID0gdGV4dDtcclxuICAgIH0pO1xyXG5cclxuICAgIGZ1bmN0aW9uIHNhdmVTb2NpYWxXb3JsZCh0ZXh0LGZsYWdTYXZlKXtcclxuICAgICAgICB2YXIgb2JqID0ge1xyXG4gICAgICAgICAgICB0ZXh0OiB0ZXh0LFxyXG4gICAgICAgICAgICB1cGRhdGU6IGZsYWdTYXZlXHJcbiAgICAgICAgfTtcclxuICAgICAgICBTb2NrZXQuZW1pdCgndXBkYXRlU29jaWFsV29ybGQnLCBvYmopO1xyXG4gICAgfVxyXG5cclxuICAgIFNvY2tldC5vbignb25VcGRhdGVQcmFnbWF0aWMnLCBmdW5jdGlvbiAodGV4dCkge1xyXG4gICAgICAgIHNlbGYuc2VtaW90aWNmcmFtZXdvcmsucHJhZ21hdGljID0gdGV4dDtcclxuICAgIH0pO1xyXG5cclxuICAgIGZ1bmN0aW9uIHNhdmVQcmFnbWF0aWModGV4dCxmbGFnU2F2ZSl7XHJcbiAgICAgICAgdmFyIG9iaiA9IHtcclxuICAgICAgICAgICAgdGV4dDogdGV4dCxcclxuICAgICAgICAgICAgdXBkYXRlOiBmbGFnU2F2ZVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgU29ja2V0LmVtaXQoJ3VwZGF0ZVByYWdtYXRpYycsIG9iaik7XHJcbiAgICB9XHJcblxyXG4gICAgU29ja2V0Lm9uKCdvblVwZGF0ZVNlbWFudGljJywgZnVuY3Rpb24gKHRleHQpIHtcclxuICAgICAgICBzZWxmLnNlbWlvdGljZnJhbWV3b3JrLnNlbWlvdGljcmFtZXdvcmsgPSB0ZXh0O1xyXG4gICAgfSk7XHJcblxyXG4gICAgZnVuY3Rpb24gc2F2ZVNlbWFudGljKHRleHQsZmxhZ1NhdmUpe1xyXG4gICAgICAgIHZhciBvYmogPSB7XHJcbiAgICAgICAgICAgIHRleHQ6IHRleHQsXHJcbiAgICAgICAgICAgIHVwZGF0ZTogZmxhZ1NhdmVcclxuICAgICAgICB9O1xyXG4gICAgICAgIFNvY2tldC5lbWl0KCd1cGRhdGVTZW1hbnRpYycsIG9iaik7XHJcbiAgICB9XHJcblxyXG4gICAgU29ja2V0Lm9uKCdvblVwZGF0ZVN5bnRhdGljJywgZnVuY3Rpb24gKHRleHQsZmxhZ1NhdmUpIHtcclxuICAgICAgICBzZWxmLnNlbWlvdGljZnJhbWV3b3JrLnN5bnRhdGljID0gdGV4dDtcclxuICAgIH0pO1xyXG5cclxuICAgIGZ1bmN0aW9uIHNhdmVTeW50YXRpYyh0ZXh0LGZsYWdTYXZlKXtcclxuICAgICAgICB2YXIgb2JqID0ge1xyXG4gICAgICAgICAgICB0ZXh0OiB0ZXh0LFxyXG4gICAgICAgICAgICB1cGRhdGU6IGZsYWdTYXZlXHJcbiAgICAgICAgfTtcclxuICAgICAgICBTb2NrZXQuZW1pdCgndXBkYXRlU3ludGF0aWMnLCBvYmopO1xyXG4gICAgfVxyXG5cclxuICAgIFNvY2tldC5vbignb25VcGRhdGVFbXBpcmljYWwnLCBmdW5jdGlvbiAodGV4dCkge1xyXG4gICAgICAgIHNlbGYuc2VtaW90aWNmcmFtZXdvcmsuZW1waXJpY2FsID0gdGV4dDtcclxuICAgIH0pO1xyXG5cclxuICAgIGZ1bmN0aW9uIHNhdmVFbXBpcmljYWwodGV4dCxmbGFnU2F2ZSl7XHJcbiAgICAgICAgdmFyIG9iaiA9IHtcclxuICAgICAgICAgICAgdGV4dDogdGV4dCxcclxuICAgICAgICAgICAgdXBkYXRlOiBmbGFnU2F2ZVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgU29ja2V0LmVtaXQoJ3VwZGF0ZUVtcGlyaWNhbCcsIG9iaik7XHJcbiAgICB9XHJcblxyXG4gICAgU29ja2V0Lm9uKCdvblVwZGF0ZVBoeXNpY2FsJywgZnVuY3Rpb24gKHRleHQpIHtcclxuICAgICAgICBzZWxmLnNlbWlvdGljZnJhbWV3b3JrLnBoeXNpY2FsID0gdGV4dDtcclxuICAgIH0pO1xyXG5cclxuICAgIGZ1bmN0aW9uIHNhdmVQaHlzaWNhbCh0ZXh0LGZsYWdTYXZlKXtcclxuICAgICAgICB2YXIgb2JqID0ge1xyXG4gICAgICAgICAgICB0ZXh0OiB0ZXh0LFxyXG4gICAgICAgICAgICB1cGRhdGU6IGZsYWdTYXZlXHJcbiAgICAgICAgfTtcclxuICAgICAgICBTb2NrZXQuZW1pdCgndXBkYXRlUGh5c2ljYWwnLCBvYmopO1xyXG4gICAgfVxyXG59XHJcblxyXG59KSgpOyIsIi8qKlxyXG4gKiBDcmVhdGVkIGJ5IEpPU0VWQUxERVJMRUkgb24gMjkvMDYvMjAxNS5cclxuICovXHJcblxyXG47KGZ1bmN0aW9uKHVuZGVmaW5lZCl7XHJcblxyXG4ndXNlIHN0cmljdCc7XHJcblxyXG5hbmd1bGFyXHJcbiAgICAubW9kdWxlKCdhcHAnKVxyXG4gICAgLmNvbnRyb2xsZXIoJ3N0YWtlaG9sZGVyQ29udHJvbGxlcicsc3Rha2Vob2xkZXJDb250cm9sbGVyKTtcclxuXHJcblxyXG5mdW5jdGlvbiBzdGFrZWhvbGRlckNvbnRyb2xsZXIoU29ja2V0LCR3aW5kb3cscHJvYmxlbVNlcnZpY2UsJG1kRGlhbG9nLHRvYXN0QXBwKXtcclxuXHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICBzZWxmLmlkcHJvYmxlbSA9IFwiXCI7XHJcbiAgICBzZWxmLnN0YWtlaG9sZGVyTGlzdCA9IFtdO1xyXG4gICAgc2VsZi5zdGFrZWhvbGRlciA9IFwiXCI7XHJcbiAgICBzZWxmLmludGl0T25pb24gPSBpbnRpdE9uaW9uO1xyXG4gICAgc2VsZi5tb3ZlID0gZmFsc2U7XHJcbiAgICBzZWxmLmluUHJvY2Vzc2luZyA9IHRydWU7XHJcbiAgICBzZWxmLnNhdmVTdGFrZWhvbGRlciA9IHNhdmVTdGFrZWhvbGRlcjtcclxuICAgIHNlbGYuc2V0T3BlbkVkaXQgPSBzZXRPcGVuRWRpdDtcclxuICAgIHNlbGYuZGVsUG9zdEl0ID0gZGVsUG9zdEl0O1xyXG4gICAgc2VsZi5hZGRQb3N0SXQgPSBhZGRQb3N0SXQ7XHJcbiAgICBzZWxmLmFjZW5kZSA9IGFjZW5kZTtcclxuICAgIHNlbGYuYXBhZ2EgPSBhcGFnYTtcclxuICAgIHNlbGYubG9jYWxjb2RlID0gJyc7XHJcblxyXG4gICAgZnVuY3Rpb24gaW50aXRPbmlvbigpe1xyXG4gICAgICAgIHNlbGYuaWRwcm9ibGVtID0gJHdpbmRvdy5sb2NhbFN0b3JhZ2UuZ2V0SXRlbSgncHJvYmxlbWlkJyk7XHJcbiAgICAgICAgc2VsZi5sb2NhbGNvZGUgPSAgJHdpbmRvdy5sb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnbG9jYWxjb2RlJyk7XHJcbiAgICAgICAgcHJvYmxlbVNlcnZpY2UuZ2V0b25pb24oc2VsZi5pZHByb2JsZW0pXHJcbiAgICAgICAgICAgIC5zdWNjZXNzKGZ1bmN0aW9uKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgIGlmKGRhdGEuc3VjY2Vzcykge1xyXG4gICAgICAgICAgICAgICAgICAgIHNlbGYuc3Rha2Vob2xkZXJMaXN0ID0gZGF0YS5zdGFrZWhvbGRlcnM7XHJcbiAgICAgICAgICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgICAgICAgICB0b2FzdEFwcC5lcnJvck1lc3NhZ2UoZGF0YS5tZXNzYWdlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgc2VsZi5pblByb2Nlc3NpbmcgPSBmYWxzZTtcclxuICAgIH1cclxuXHJcbiAgICBTb2NrZXQub24oJ29uQnJvYWRjYXN0T25pb25TYXZlJywgZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICAgICAgYW5ndWxhci5mb3JFYWNoKHNlbGYuc3Rha2Vob2xkZXJMaXN0LCBmdW5jdGlvbiAoc3Rha2Vob2xkZXIpIHtcclxuICAgICAgICAgICAgaWYgKHN0YWtlaG9sZGVyLl9pZCA9PSBkYXRhLl9pZCl7XHJcbiAgICAgICAgICAgICAgICBzdGFrZWhvbGRlci5zdGFrZWhvbGRlciA9IGRhdGEuc3Rha2Vob2xkZXI7XHJcbiAgICAgICAgICAgICAgICBzdGFrZWhvbGRlci5uYW1lID0gZGF0YS5uYW1lO1xyXG4gICAgICAgICAgICAgICAgc3Rha2Vob2xkZXIuZGVzY3JpcHRpb24gPSBkYXRhLmRlc2NyaXB0aW9uO1xyXG4gICAgICAgICAgICAgICAgc3Rha2Vob2xkZXIub3BlbkVkaXQgPSBkYXRhLm9wZW5FZGl0O1xyXG4gICAgICAgICAgICAgICAgc3Rha2Vob2xkZXIueCA9IGRhdGEueDtcclxuICAgICAgICAgICAgICAgIHN0YWtlaG9sZGVyLnkgPSBkYXRhLnk7XHJcbiAgICAgICAgICAgICAgICBzdGFrZWhvbGRlci56aW5kZXggPSA5OTk5O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgfSk7XHJcblxyXG4gICAgZnVuY3Rpb24gc2F2ZVN0YWtlaG9sZGVyKHN0YWtlaG9sZGVyKSB7XHJcbiAgICAgICAgU29ja2V0LmVtaXQoJ2Jyb2FkY2FzdE9uaW9uU2F2ZScsIHN0YWtlaG9sZGVyKTtcclxuICAgIH1cclxuXHJcbiAgICBTb2NrZXQub24oJ29uQnJvYWRjYXN0T25pb25FZGl0JywgZnVuY3Rpb24gKGlkKSB7XHJcbiAgICAgICAgYW5ndWxhci5mb3JFYWNoKHNlbGYuc3Rha2Vob2xkZXJMaXN0LCBmdW5jdGlvbiAoc3Rha2Vob2xkZXIpIHtcclxuICAgICAgICAgICAgaWYoc3Rha2Vob2xkZXIuX2lkID09PSBpZCkge1xyXG4gICAgICAgICAgICAgICAgc3Rha2Vob2xkZXIub3BlbkVkaXQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgc3Rha2Vob2xkZXIuemluZGV4ID0gOTk5OTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgIH0pO1xyXG5cclxuICAgIGZ1bmN0aW9uIHNldE9wZW5FZGl0KGlkKXtcclxuICAgICAgICBTb2NrZXQuZW1pdCgnYnJvYWRjYXN0T25pb25FZGl0JywgaWQpO1xyXG4gICAgfVxyXG5cclxuICAgIFNvY2tldC5vbignb25Ccm9hZGNhc3RPbmlvblJlbW92ZScsIGZ1bmN0aW9uIChpZCkge1xyXG4gICAgICAgIHZhciBzdGFrZWhvbGRlciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwic3Rha2Vob2xkZXJcIiArc2VsZi5zdGFrZWhvbGRlckxpc3RbaWRdLl9pZCk7XHJcbiAgICAgICAgc3Rha2Vob2xkZXIuc3R5bGUuZGlzcGxheSA9ICdub25lJztcclxuICAgICAgICBzZWxmLnN0YWtlaG9sZGVyTGlzdC5zcGxpY2UoaWQsMSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBmdW5jdGlvbiByZW1vdmVQb3N0SXQoaW5kZXgsc3Rha2Vob2xkZXIpIHtcclxuXHJcbiAgICAgICAgdmFyIG9iaiA9IHtcclxuICAgICAgICAgICAgaW5kZXg6IGluZGV4LFxyXG4gICAgICAgICAgICBzdGFrZWhvbGRlcjogc3Rha2Vob2xkZXJcclxuICAgICAgICB9O1xyXG4gICAgICAgIFNvY2tldC5lbWl0KCdicm9hZGNhc3RPbmlvblJlbW92ZScsIG9iaik7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gZGVsUG9zdEl0KGV2LGluZGV4LHN0YWtlaG9sZGVyKSB7XHJcbiAgICAgICAgdmFyIGNvbmZpcm0gPSAkbWREaWFsb2cuY29uZmlybSgpXHJcbiAgICAgICAgICAgIC5wYXJlbnQoYW5ndWxhci5lbGVtZW50KGRvY3VtZW50LmJvZHkpKVxyXG4gICAgICAgICAgICAudGl0bGUoJ0RldGV0ZSBTdGFrZWhvbGRlcj8nKVxyXG4gICAgICAgICAgICAuY29udGVudCgnVGl0bGU6ICcgKyBzdGFrZWhvbGRlci5uYW1lKVxyXG4gICAgICAgICAgICAuYXJpYUxhYmVsKCdSZW1vdmUgU3Rha2Vob2xkZXInKVxyXG4gICAgICAgICAgICAub2soJ1llcyEnKVxyXG4gICAgICAgICAgICAuY2FuY2VsKCdDYW5jZWwnKVxyXG4gICAgICAgICAgICAudGFyZ2V0RXZlbnQoZXYpO1xyXG4gICAgICAgICRtZERpYWxvZy5zaG93KGNvbmZpcm0pLnRoZW4oZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIHJlbW92ZVBvc3RJdChpbmRleCxzdGFrZWhvbGRlcik7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgU29ja2V0Lm9uKCdvbkJyb2FkY2FzdE1vdmUnLCBmdW5jdGlvbiAoc3Rha2Vob2xkZXIpIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coc3Rha2Vob2xkZXIubG9jYWxjb2RlICsgJyAgJyArIHNlbGYubG9jYWxjb2RlKVxyXG4gICAgICAgICAgICBpZihzZWxmLmxvY2FsY29kZSAhPT0gc3Rha2Vob2xkZXIubG9jYWxjb2RlKSB7XHJcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc3Rha2Vob2xkZXInK3N0YWtlaG9sZGVyLl9pZCkuc3R5bGUubGVmdCA9IHN0YWtlaG9sZGVyLng7XHJcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc3Rha2Vob2xkZXInK3N0YWtlaG9sZGVyLl9pZCkuc3R5bGUudG9wID0gc3Rha2Vob2xkZXIueTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgIH0pO1xyXG5cclxuICAgIFNvY2tldC5vbignb25Ccm9hZGNhc3RPbmlvbkFkZCcsIGZ1bmN0aW9uIChyZXRvcm5vKSB7XHJcbiAgICAgICAgc2VsZi5zdGFrZWhvbGRlckxpc3QucHVzaChyZXRvcm5vKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGZ1bmN0aW9uIGFkZFBvc3RJdChlLGNhbWFkYSkge1xyXG5cclxuICAgICAgICB2YXIgbmV3U3Rha2Vob2xkZXIgPVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgXCJvbmlvbmxheWVyXCI6IGNhbWFkYSxcclxuICAgICAgICAgICAgXCJuYW1lXCI6IFwiXCIsXHJcbiAgICAgICAgICAgIFwiZGVzY3JpcHRpb25cIjogXCJcIixcclxuICAgICAgICAgICAgXCJvcGVuRWRpdFwiOiB0cnVlLFxyXG4gICAgICAgICAgICBcInhcIjogZS5wYWdlWCArICdweCcsXHJcbiAgICAgICAgICAgIFwieVwiOiAoZS5wYWdlWSkgKyAncHgnXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICBTb2NrZXQuZW1pdCgnYnJvYWRjYXN0T25pb25BZGQnLCBuZXdTdGFrZWhvbGRlcik7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gYWNlbmRlKGlkKSB7XHJcbiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJuYW1lXCIraWQpLnNldEF0dHJpYnV0ZSgnc3R5bGUnLCAndGV4dC1kZWNvcmF0aW9uOiB1bmRlcmxpbmU7Jyk7XHJcbiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJsZWdlbmRcIitpZCkuc2V0QXR0cmlidXRlKFwib3BhY2l0eVwiLCBcIjAuN1wiKTtcclxuICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChpZCkuc2V0QXR0cmlidXRlKFwib3BhY2l0eVwiLCBcIjAuN1wiKTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBhcGFnYShpZCkge1xyXG4gICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwibmFtZVwiK2lkKS5zZXRBdHRyaWJ1dGUoJ3N0eWxlJywgJ3RleHQtZGVjb3JhdGlvbjogbm9uZTsnKTtcclxuICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImxlZ2VuZFwiK2lkKS5zZXRBdHRyaWJ1dGUoXCJvcGFjaXR5XCIsIFwiMS4wXCIpO1xyXG4gICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGlkKS5zZXRBdHRyaWJ1dGUoXCJvcGFjaXR5XCIsIFwiMS4wXCIpO1xyXG4gICAgfVxyXG59XHJcblxyXG59KSh0aGlzKTsiLCJcclxuKGZ1bmN0aW9uKCl7XHJcblxyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICAgIGFuZ3VsYXJcclxuICAgICAgICAubW9kdWxlKCdhcHAnKVxyXG4gICAgICAgIC5jb250cm9sbGVyKCdzdGFydFByb2JsZW1Db250cm9sbGVyJyxzdGFydFByb2JsZW1Db250cm9sbGVyKTtcclxuXHJcbiAgICBmdW5jdGlvbiBzdGFydFByb2JsZW1Db250cm9sbGVyKCRtZERpYWxvZywgJHN0YXRlLEF1dGgsU29ja2V0LCAkd2luZG93LCBwcm9ibGVtU2VydmljZSx0b2FzdEFwcCApIHtcclxuXHJcbiAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgICAgIHNlbGYubmlja25hbWUgPSBcIlwiO1xyXG4gICAgICAgIHNlbGYudXNlcmlkID0gXCJcIjtcclxuICAgICAgICBzZWxmLnVzZXJlbWFpbCA9IFwiXCI7XHJcbiAgICAgICAgc2VsZi5wcm9ibGVtTGlzdCA9IFtdO1xyXG4gICAgICAgIHNlbGYucHJvYmxlbUNvbGxhYm9yYXRvckxpc3QgPSBbXTtcclxuICAgICAgICBzZWxmLmxvZ2luSW5Qcm9ncmVzcyA9IHRydWU7XHJcbiAgICAgICAgc2VsZi5nZXRQcm9ibGVtcyA9IGdldFByb2JsZW1zO1xyXG4gICAgICAgIHNlbGYucmV2b212ZVByb2JsZW0gPSByZXZvbXZlUHJvYmxlbTtcclxuICAgICAgICBzZWxmLnN0YXJ0TmV3UHJvYmxlbSA9IHN0YXJ0TmV3UHJvYmxlbTtcclxuICAgICAgICBzZWxmLmVkaXRQcm9ibGVtID0gZWRpdFByb2JsZW07XHJcbiAgICAgICAgc2VsZi5kb0xvZ291dCA9IGRvTG9nb3V0O1xyXG4gICAgICAgIHNlbGYubmV3UHJvYmxlbSA9IG5ld1Byb2JsZW07XHJcbiAgICAgICAgc2VsZi5lZGl0UHJvZmlsZSA9IGVkaXRQcm9maWxlO1xyXG4gICAgICAgIHNlbGYucGhvdG87XHJcblxyXG5cclxuICAgICAgICBmdW5jdGlvbiBnZXRQcm9ibGVtcygpe1xyXG4gICAgICAgICAgICBzZWxmLnVzZXJpZCA9ICR3aW5kb3cubG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3VzZXJpZCcpO1xyXG4gICAgICAgICAgICBzZWxmLm5pY2tuYW1lID0gJHdpbmRvdy5sb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnbmlja25hbWUnKTtcclxuICAgICAgICAgICAgc2VsZi51c2VyZW1haWwgPSAkd2luZG93LmxvY2FsU3RvcmFnZS5nZXRJdGVtKCd1c2VyZW1haWwnKTtcclxuICAgICAgICAgICAgc2VsZi5waG90byA9ICR3aW5kb3cubG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3Bob3RvJyk7XHJcblxyXG5cclxuXHJcbiAgICAgICAgICAgIHByb2JsZW1TZXJ2aWNlLmdldHVzZXJwcm9ibGVtcyhzZWxmLnVzZXJlbWFpbClcclxuICAgICAgICAgICAgICAgIC5zdWNjZXNzKGZ1bmN0aW9uKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZihkYXRhLnN1Y2Nlc3MpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yKHZhciBpPTA7IGkgPCBkYXRhLnByb2JsZW1zLmxlbmd0aDsgaSsrICl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhLnByb2JsZW1zW2ldLmRlc2NyaXB0aW9uID0gZGF0YS5wcm9ibGVtc1tpXS5kZXNjcmlwdGlvbi5yZXBsYWNlKC8oPChbXj5dKyk+KS9pZyxcIlwiKS5zdWJzdHJpbmcoMCw0NjApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYucHJvYmxlbUxpc3QgPSBkYXRhLnByb2JsZW1zO1xyXG4gICAgICAgICAgICAgICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0b2FzdEFwcC5lcnJvck1lc3NhZ2UoZGF0YS5tZXNzYWdlKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgcHJvYmxlbVNlcnZpY2UuZ2V0cHJvYmxlbXNjb2xsYWJvcmF0b3Ioc2VsZi51c2VyZW1haWwpXHJcbiAgICAgICAgICAgICAgICAuc3VjY2VzcyhmdW5jdGlvbihkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYoZGF0YS5zdWNjZXNzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvcih2YXIgaT0wOyBpIDwgZGF0YS5wcm9ibGVtcy5sZW5ndGg7IGkrKyApe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YS5wcm9ibGVtc1tpXS5kZXNjcmlwdGlvbiA9IGRhdGEucHJvYmxlbXNbaV0uZGVzY3JpcHRpb24ucmVwbGFjZSgvKDwoW14+XSspPikvaWcsXCJcIikuc3Vic3RyaW5nKDAsNDYwKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxmLnByb2JsZW1Db2xsYWJvcmF0b3JMaXN0ID0gZGF0YS5wcm9ibGVtcztcclxuICAgICAgICAgICAgICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdG9hc3RBcHAuZXJyb3JNZXNzYWdlKGRhdGEubWVzc2FnZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHNlbGYubG9naW5JblByb2dyZXNzID0gZmFsc2U7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmdW5jdGlvbiBkZWxldGVQcm9ibGVtKHByb2JsZW1pZCl7XHJcbiAgICAgICAgICAgIHByb2JsZW1TZXJ2aWNlLnJlbW92ZXByb2JsZW0ocHJvYmxlbWlkKVxyXG4gICAgICAgICAgICAgICAgLnN1Y2Nlc3MoZnVuY3Rpb24oZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKGRhdGEuc3VjY2Vzcykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IodmFyIGk9MDsgaSA8IHNlbGYucHJvYmxlbUxpc3QubGVuZ3RoOyBpKyspe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoc2VsZi5wcm9ibGVtTGlzdFtpXS5faWQgPT0gcHJvYmxlbWlkKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLnByb2JsZW1MaXN0LnNwbGljZShpLDEpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRvYXN0QXBwLmVycm9yTWVzc2FnZShkYXRhLm1lc3NhZ2UpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gcmV2b212ZVByb2JsZW0oZXYscHJvYmxlbSkge1xyXG4gICAgICAgICAgICAvLyBBcHBlbmRpbmcgZGlhbG9nIHRvIGRvY3VtZW50LmJvZHkgdG8gY292ZXIgc2lkZW5hdiBpbiBkb2NzIGFwcFxyXG4gICAgICAgICAgICB2YXIgY29uZmlybSA9ICRtZERpYWxvZy5jb25maXJtKClcclxuICAgICAgICAgICAgICAgIC5wYXJlbnQoYW5ndWxhci5lbGVtZW50KGRvY3VtZW50LmJvZHkpKVxyXG4gICAgICAgICAgICAgICAgLnRpdGxlKCdEZXRldGUgUHJvYmxlbT8nKVxyXG4gICAgICAgICAgICAgICAgLmNvbnRlbnQoJ1RpdGxlOiAnICsgcHJvYmxlbS50aXRsZSlcclxuICAgICAgICAgICAgICAgIC5hcmlhTGFiZWwoJ1JlbW92ZSBQcm9ibGVtJylcclxuICAgICAgICAgICAgICAgIC5vaygnRGVzZWpvIHJlbW92ZXIhJylcclxuICAgICAgICAgICAgICAgIC5jYW5jZWwoJ0NhbmNlbCcpXHJcbiAgICAgICAgICAgICAgICAudGFyZ2V0RXZlbnQoZXYpO1xyXG4gICAgICAgICAgICAkbWREaWFsb2cuc2hvdyhjb25maXJtKS50aGVuKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgZGVsZXRlUHJvYmxlbShwcm9ibGVtLl9pZCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gc3RhcnROZXdQcm9ibGVtKG5ld3Byb2JsZW0pe1xyXG4gICAgICAgICAgICBuZXdwcm9ibGVtLnVzZXJpZCA9IHNlbGYudXNlcmlkO1xyXG4gICAgICAgICAgICBwcm9ibGVtU2VydmljZS5uZXdwcm9ibGVtKG5ld3Byb2JsZW0pXHJcbiAgICAgICAgICAgICAgICAuc3VjY2VzcyhmdW5jdGlvbihkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYoZGF0YS5zdWNjZXNzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuZWRpdFByb2JsZW0oZGF0YS5wcm9ibGVtKTtcclxuICAgICAgICAgICAgICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdG9hc3RBcHAuZXJyb3JNZXNzYWdlKGRhdGEubWVzc2FnZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmdW5jdGlvbiBlZGl0UHJvYmxlbShwcm9ibGVtKSB7XHJcbiAgICAgICAgICAgICR3aW5kb3cubG9jYWxTdG9yYWdlLnNldEl0ZW0oXCJwcm9ibGVtaWRcIixwcm9ibGVtLl9pZCk7XHJcbiAgICAgICAgICAgIHZhciBpbml0c29ja2V0cHJvYmxlbSA9IHtcclxuICAgICAgICAgICAgICAgIFwiaWRwcm9ibGVtXCI6cHJvYmxlbS5faWQsXHJcbiAgICAgICAgICAgICAgICBcIm5pY2tuYW1lXCI6IHNlbGYubmlja25hbWVcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgU29ja2V0LmVtaXQoJ2luaXRQcm9ibGVtJywgaW5pdHNvY2tldHByb2JsZW0pO1xyXG4gICAgICAgICAgICAkc3RhdGUuZ28oJ3Byb2JsZW0uc3Rha2Vob2xkZXJzJyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmdW5jdGlvbiBkb0xvZ291dCgpIHtcclxuICAgICAgICAgICAgQXV0aC5sb2dvdXQoKTtcclxuICAgICAgICAgICAgJHN0YXRlLmdvKCdpbml0LmxvZ2luJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGZ1bmN0aW9uIGVkaXRQcm9maWxlKCkge1xyXG4gICAgICAgICAgICAkc3RhdGUuZ28oJ3Byb2ZpbGUnKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIG5ld1Byb2JsZW0oZXYpIHtcclxuICAgICAgICAgICAgICAgICRtZERpYWxvZy5zaG93KHtcclxuICAgICAgICAgICAgICAgICAgICBjb250cm9sbGVyOiBEaWFsb2dDb250cm9sbGVyLFxyXG4gICAgICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAndmlld3MvcGFnZXMvbmV3cHJvYmxlbS5odG1sJyxcclxuICAgICAgICAgICAgICAgICAgICBwYXJlbnQ6IGFuZ3VsYXIuZWxlbWVudChkb2N1bWVudC5ib2R5KSxcclxuICAgICAgICAgICAgICAgICAgICB0YXJnZXRFdmVudDogZXZcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIERpYWxvZ0NvbnRyb2xsZXIoJHNjb3BlLCAkbWREaWFsb2cpIHtcclxuICAgICAgICAgICAgICAgICRzY29wZS5oaWRlID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJG1kRGlhbG9nLmhpZGUoKTtcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuY2FuY2VsID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJG1kRGlhbG9nLmNhbmNlbCgpO1xyXG4gICAgICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuYWRkTmV3UHJvYmxlbSA9IGZ1bmN0aW9uKHByb2JsZW0pIHtcclxuICAgICAgICAgICAgICAgICAgICBzZWxmLnN0YXJ0TmV3UHJvYmxlbShwcm9ibGVtKTtcclxuICAgICAgICAgICAgICAgICAgICAkbWREaWFsb2cuY2FuY2VsKCk7XHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgJHNjb3BlLmFkZEFydGlmYWN0ID0gZnVuY3Rpb24gYWRkQXJ0aWZhY3QodmFsb3Ipe1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2codmFsb3IpXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuXHJcblxyXG4gICAgfVxyXG59KSgpO1xyXG5cclxuIiwiLyoqXHJcbiAqIENyZWF0ZWQgYnkgSk9TRVZBTERFUkxFSSBvbiAyMi8wNy8yMDE1LlxyXG4gKi9cclxuKGZ1bmN0aW9uKCl7XHJcblxyXG4gICAgXCJ1c2Ugc3RyaWN0XCI7XHJcbmFuZ3VsYXJcclxuICAgIC5tb2R1bGUoJ2FwcCcpXHJcbiAgICAuY29udHJvbGxlcigndmFsdWVJZGVudGlmaWNhdGlvbkZyYW1lQ29udHJvbGxlcicsIHZhbHVlSWRlbnRpZmljYXRpb25GcmFtZUNvbnRyb2xsZXIpO1xyXG5cclxuZnVuY3Rpb24gdmFsdWVJZGVudGlmaWNhdGlvbkZyYW1lQ29udHJvbGxlcigkd2luZG93LHByb2JsZW1TZXJ2aWNlLHRvYXN0QXBwLFNvY2tldCl7XHJcblxyXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgc2VsZi5pblByb2Nlc3NpbmcgPSB0cnVlO1xyXG4gICAgc2VsZi5pZFByb2JsZW0gPSBcIlwiO1xyXG4gICAgc2VsZi51c2VyZW1haWwgPSBcIlwiO1xyXG4gICAgc2VsZi5uZXd2YWx1ZXMgPSBcIlwiO1xyXG4gICAgc2VsZi5pbml0VmFsdWVJZGVudGlmaWNhdGlvbkZyYW1lID0gaW5pdFZhbHVlSWRlbnRpZmljYXRpb25GcmFtZTtcclxuICAgIHNlbGYuc2V0U3VnZ2VzdGlvblNob3cgPSBzZXRTdWdnZXN0aW9uU2hvdztcclxuICAgIHNlbGYubGVhdmVTdWdnZXN0aW9uU2hvdyA9IGxlYXZlU3VnZ2VzdGlvblNob3c7XHJcbiAgICBzZWxmLnJlbW92ZVZhbHVlSWRlbnRpY2F0aW9uID0gcmVtb3ZlVmFsdWVJZGVudGljYXRpb247XHJcbiAgICBzZWxmLnNldFZhbHVlSWRlbnRpY2F0aW9uID0gc2V0VmFsdWVJZGVudGljYXRpb247XHJcbiAgICBzZWxmLnN1Z2VzdGlvblZhbHVlcyA9IFwiXCI7XHJcbiAgICBzZWxmLnN0YWtlaG9sZGVyTGlzdCA9IFtcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIG9uaW9ubGF5ZXI6IFwiQ29tbXVuaXR5XCIsXHJcbiAgICAgICAgICAgIHN0YWtlaG9sZGVyczogW11cclxuICAgICAgICB9LFxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgb25pb25sYXllcjogXCJNYXJrZXRcIixcclxuICAgICAgICAgICAgc3Rha2Vob2xkZXJzOiBbXVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBvbmlvbmxheWVyOiBcIlNvdXJjZVwiLFxyXG4gICAgICAgICAgICBzdGFrZWhvbGRlcnM6IFtdXHJcbiAgICAgICAgfSxcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIG9uaW9ubGF5ZXI6IFwiQ29udHJpYnV0aW9uXCIsXHJcbiAgICAgICAgICAgIHN0YWtlaG9sZGVyczogW11cclxuICAgICAgICB9LFxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgb25pb25sYXllcjogXCJUZWNobmljb1wiLFxyXG4gICAgICAgICAgICBzdGFrZWhvbGRlcnM6IFtdXHJcbiAgICAgICAgfVxyXG4gICAgXTtcclxuICAgIHNlbGYuc3VnZXN0aW9uVmFsdWVzQXJyYXkgPSBbXHJcbiAgICAgICAgJ0FjZXNzaWJpbGlkYWRlJywnQWRhcHRhYmlsaWRhZGUnLCdFc3TDqXRpY2EnLCdBdXRvbm9taWEnLCAnRGlzcG9uaWJpbGlkYWRlJywgJ0NvbnNjacOqbmNpYScsICdDb2xhYm9yYcOnw6NvJyxcclxuICAgICAgICAnQ29udmVyc2HDp8OjbycsICdFbW/Dp8OjbyBlIEFmZXRvJywgJ0dydXBvcycsICdJZGVudGlkYWRlJywgJ0NvbnNlbnRpbWVudG8gaW5mb3JtYWRvJywgJ01ldGEtY29tdW5pY2HDp8OjbycsICdOb3JtYXMnLFxyXG4gICAgICAgICdPYmpldG8nLCAnUG9ydGFiaWxpZGFkZScsICdQcmVzZW7Dp2EnLCAnUHJpdmFjaWRhZGUnLCAnUHJvcHJpZWRhZGUnLCAnUmVjaXByb2NpZGFkZSwgUmVsYWNpb25hbWVudG8sIFJlcHV0YcOnw6NvJyxcclxuICAgICAgICAnRXNjYWxhYmlsaWRhZGUnLCAnU2VndXJhbsOnYScsICdDb21wYXJ0aWxoYW1lbnRvJywgJ0NvbmZpYW7Dp2EnLCAnVXNhYmlsaWRhZGUnLCAnVmlzaWJpbGlkYWRlJ107XHJcblxyXG4gICAgZnVuY3Rpb24gaW5pdFZhbHVlSWRlbnRpZmljYXRpb25GcmFtZSgpe1xyXG4gICAgICAgIHNlbGYuaWRwcm9ibGVtID0gJHdpbmRvdy5sb2NhbFN0b3JhZ2UuZ2V0SXRlbSgncHJvYmxlbWlkJyk7XHJcbiAgICAgICAgcHJvYmxlbVNlcnZpY2UuZ2V0b25pb24oc2VsZi5pZHByb2JsZW0pXHJcbiAgICAgICAgICAgIC5zdWNjZXNzKGZ1bmN0aW9uKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgIGlmKGRhdGEuc3VjY2Vzcykge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKGRhdGEuc3Rha2Vob2xkZXJzLmxlbmd0aCA+IDApe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yKHZhciBrID0gMTsgayA8IHNlbGYuc3VnZXN0aW9uVmFsdWVzQXJyYXkubGVuZ3RoOyBrKyspe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuc3VnZXN0aW9uVmFsdWVzICs9IHNlbGYuc3VnZXN0aW9uVmFsdWVzQXJyYXlba10gKyAgXCIsIFwiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxmLnN1Z2VzdGlvblZhbHVlc1tzZWxmLnN1Z2VzdGlvblZhbHVlc0FycmF5W3NlbGYuc3VnZXN0aW9uVmFsdWVzQXJyYXkubGVuZ3RoLTFdXSArICcuJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvcih2YXIgaSA9IDA7IGkgPCBkYXRhLnN0YWtlaG9sZGVycy5sZW5ndGg7IGkrKyl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yKHZhciBqID0gMDsgaiA8IHNlbGYuc3Rha2Vob2xkZXJMaXN0Lmxlbmd0aDsgaisrKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHN0YWtlaG9sZGVyID0ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2lkIDogZGF0YS5zdGFrZWhvbGRlcnNbaV0uX2lkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25pb25sYXllciA6IGRhdGEuc3Rha2Vob2xkZXJzW2ldLm9uaW9ubGF5ZXIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZXMgOiBkYXRhLnN0YWtlaG9sZGVyc1tpXS52YWx1ZXMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lIDogZGF0YS5zdGFrZWhvbGRlcnNbaV0ubmFtZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uIDogZGF0YS5zdGFrZWhvbGRlcnNbaV0uZGVzY3JpcHRpb24sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcGVuRWRpdCA6IGRhdGEuc3Rha2Vob2xkZXJzW2ldLm9wZW5FZGl0LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeCA6IGRhdGEuc3Rha2Vob2xkZXJzW2ldLngsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB5IDogZGF0YS5zdGFrZWhvbGRlcnNbaV0ueSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ld1ZhbHVlcyA6IFtdXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihkYXRhLnN0YWtlaG9sZGVyc1tpXS5vbmlvbmxheWVyID09IHNlbGYuc3Rha2Vob2xkZXJMaXN0W2pdLm9uaW9ubGF5ZXIpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5zdGFrZWhvbGRlckxpc3Rbal0uc3Rha2Vob2xkZXJzLnB1c2goc3Rha2Vob2xkZXIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5pblByb2Nlc3NpbmcgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICAgICAgICAgIHRvYXN0QXBwLmVycm9yTWVzc2FnZShkYXRhLm1lc3NhZ2UpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBTb2NrZXQub24oJ29uQnJvYWRjYXN0T25pb25TYXZlJywgZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICBhbmd1bGFyLmZvckVhY2goc2VsZi5zdGFrZWhvbGRlckxpc3QsIGZ1bmN0aW9uIChzdGFrZWhvbGRlcikge1xyXG4gICAgICAgICAgICBpZiAoc3Rha2Vob2xkZXIuX2lkID09IGRhdGEuX2lkKXtcclxuICAgICAgICAgICAgICAgIHN0YWtlaG9sZGVyLnN0YWtlaG9sZGVyID0gZGF0YS5zdGFrZWhvbGRlcjtcclxuICAgICAgICAgICAgICAgIHN0YWtlaG9sZGVyLm5hbWUgPSBkYXRhLm5hbWU7XHJcbiAgICAgICAgICAgICAgICBzdGFrZWhvbGRlci5kZXNjcmlwdGlvbiA9IGRhdGEuZGVzY3JpcHRpb247XHJcbiAgICAgICAgICAgICAgICBzdGFrZWhvbGRlci5vcGVuRWRpdCA9IGRhdGEub3BlbkVkaXQ7XHJcbiAgICAgICAgICAgICAgICBzdGFrZWhvbGRlci54ID0gZGF0YS54O1xyXG4gICAgICAgICAgICAgICAgc3Rha2Vob2xkZXIueSA9IGRhdGEueTtcclxuICAgICAgICAgICAgICAgIHN0YWtlaG9sZGVyLm5ld1ZhbHVlcyA9IFtdO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBmdW5jdGlvbiBzZXRTdWdnZXN0aW9uU2hvdyhzdGFrZWhvbGRlcil7XHJcbiAgICAgICAgc3Rha2Vob2xkZXIub3BlbkVkaXQgPSB0cnVlO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGxlYXZlU3VnZ2VzdGlvblNob3coc3Rha2Vob2xkZXIpe1xyXG4gICAgICAgIHN0YWtlaG9sZGVyLm9wZW5FZGl0ID0gZmFsc2U7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gcmVtb3ZlVmFsdWVJZGVudGljYXRpb24odmFsdWUsc3Rha2Vob2xkZXIpe1xyXG4gICAgICAgIHZhciBuZXdMaXN0ID0gW107XHJcbiAgICAgICAgZm9yKHZhciBpID0gMDsgaSA8IHN0YWtlaG9sZGVyLnZhbHVlcy5sZW5ndGg7IGkrKyl7XHJcbiAgICAgICAgICAgIGlmKHN0YWtlaG9sZGVyLnZhbHVlc1tpXSAhPSB2YWx1ZSl7XHJcbiAgICAgICAgICAgICAgICBuZXdMaXN0LnB1c2goc3Rha2Vob2xkZXIudmFsdWVzW2ldKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBzdGFrZWhvbGRlci52YWx1ZXMgPSBuZXdMaXN0O1xyXG4gICAgICAgIFNvY2tldC5lbWl0KCdicm9hZGNhc3RPbmlvblNhdmUnLCBzdGFrZWhvbGRlcik7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gc2V0VmFsdWVJZGVudGljYXRpb24oc3Rha2Vob2xkZXIpIHtcclxuICAgICAgICBpZigoc3Rha2Vob2xkZXIubmV3VmFsdWVzID09PSBcIlwiKSB8fCAoc3Rha2Vob2xkZXIubmV3VmFsdWVzID09PSB1bmRlZmluZWQpKXtcclxuICAgICAgICAgICAgdG9hc3RBcHAuZXJyb3JNZXNzYWdlKCdWYWxvciBuw6NvIGVzcGVjaWZpY2Fkby4nKTtcclxuICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgdmFyIHZhbHVlc0xpc3QgPSBzdGFrZWhvbGRlci5uZXdWYWx1ZXMuc3BsaXQoJywnKTtcclxuICAgICAgICAgICAgZm9yKHZhciBpPTA7IGkgPCB2YWx1ZXNMaXN0Lmxlbmd0aDsgaSsrKXtcclxuICAgICAgICAgICAgICAgIGlmKGZpbmRWYWx1ZShzdGFrZWhvbGRlci52YWx1ZXMsIHZhbHVlc0xpc3RbaV0pKXtcclxuICAgICAgICAgICAgICAgICAgICB0b2FzdEFwcC5lcnJvck1lc3NhZ2UoXCJEdXBsaWNhdGUgdmFsdWU6IFwiICsgdmFsdWVzTGlzdFtpXSk7XHJcbiAgICAgICAgICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgICAgICAgICBzdGFrZWhvbGRlci52YWx1ZXMucHVzaCh2YWx1ZXNMaXN0W2ldKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBzdGFrZWhvbGRlci5uZXdWYWx1ZXMgPSBcIlwiO1xyXG4gICAgICAgICAgICBzdGFrZWhvbGRlci5vcGVuRWRpdCA9IGZhbHNlO1xyXG4gICAgICAgICAgICBTb2NrZXQuZW1pdCgnYnJvYWRjYXN0T25pb25TYXZlJywgc3Rha2Vob2xkZXIpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gZmluZFZhbHVlKGxpc3QsIHZhbHVlKXtcclxuICAgICAgICBmb3IodmFyIGk9MDsgaSA8IGxpc3QubGVuZ3RoOyBpKyspe1xyXG4gICAgICAgICAgICBpZih2YWx1ZSA9PT0gbGlzdFtpXSl7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbn1cclxuXHJcbn0pKCk7XHJcbiIsIi8qKlxyXG4gKiBDcmVhdGVkIGJ5IEpPU0VWQUxERVJMRUkgb24gMjgvMDcvMjAxNS5cclxuICovXHJcblxyXG4oZnVuY3Rpb24oKXtcclxuXHJcbiAgICAndXNlIHN0cmljdCc7XHJcblxyXG4gICAgYW5ndWxhclxyXG4gICAgICAgIC5tb2R1bGUoJ2FwcCcpXHJcbiAgICAgICAgLmNvbnRyb2xsZXIoJ3Byb2ZpbGVDb250cm9sbGVyJyxwcm9maWxlQ29udHJvbGxlcik7XHJcblxyXG4gICAgZnVuY3Rpb24gcHJvZmlsZUNvbnRyb2xsZXIoJHdpbmRvdywkc3RhdGUsICRzY29wZSxzaWdudXBTZXJ2aWNlKXtcclxuICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICAgICAgc2VsZi5zdGFydFByb2ZpbGUgPSBzdGFydFByb2ZpbGU7XHJcbiAgICAgICAgc2VsZi51cGxvYWRJblByb2dyZXNzID0gdHJ1ZTtcclxuICAgICAgICBzZWxmLnVwbG9hZFByb2dyZXNzID0gMDtcclxuICAgICAgICBzZWxmLnVzZXJpZDtcclxuICAgICAgICBzZWxmLnNhdmVQaG90byA9IHNhdmVQaG90bztcclxuICAgICAgICBzZWxmLnN5c3RlbVJldHVybiA9IHN5c3RlbVJldHVybjtcclxuXHJcbiAgICAgICAgZnVuY3Rpb24gc3lzdGVtUmV0dXJuKCl7XHJcbiAgICAgICAgICAgICRzdGF0ZS5nbygnc3RhcnRwcm9ibGVtJyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBzZWxmLm15SW1hZ2U9Jyc7XHJcbiAgICAgICAgc2VsZi5teUNyb3BwZWRJbWFnZT0nJztcclxuXHJcbiAgICAgICAgdmFyIGhhbmRsZUZpbGVTZWxlY3QgPSBmdW5jdGlvbihldnQpIHtcclxuICAgICAgICAgICAgdmFyIGZpbGUgPSBldnQuY3VycmVudFRhcmdldC5maWxlc1swXTtcclxuICAgICAgICAgICAgdmFyIHJlYWRlciA9IG5ldyBGaWxlUmVhZGVyKCk7XHJcbiAgICAgICAgICAgIHJlYWRlci5vbmxvYWQgPSBmdW5jdGlvbiAoZXZ0KSB7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuJGFwcGx5KGZ1bmN0aW9uKCRzY29wZSl7XHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLm15SW1hZ2UgPSBldnQudGFyZ2V0LnJlc3VsdDtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICByZWFkZXIucmVhZEFzRGF0YVVSTChmaWxlKTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIGFuZ3VsYXIuZWxlbWVudChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjZmlsZUlucHV0JykpLm9uKCdjaGFuZ2UnLGhhbmRsZUZpbGVTZWxlY3QpO1xyXG5cclxuICAgICAgICBmdW5jdGlvbiBzdGFydFByb2ZpbGUoKXtcclxuICAgICAgICAgICAgc2VsZi51c2VyaWQgPSAkd2luZG93LmxvY2FsU3RvcmFnZS5nZXRJdGVtKFwidXNlcmlkXCIpO1xyXG4gICAgICAgICAgICBpZihzZWxmLnVzZXJpZCAhPT0gdW5kZWZpbmVkKXtcclxuXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgZnVuY3Rpb24gc2F2ZVBob3RvKG15aW1hZ2Upe1xyXG4gICAgICAgICAgICB2YXIgdXNlclBob3RvID17XHJcbiAgICAgICAgICAgICAgICB1c2VyaWQgOiAkd2luZG93LmxvY2FsU3RvcmFnZS5nZXRJdGVtKFwidXNlcmlkXCIpLFxyXG4gICAgICAgICAgICAgICAgcGhvdG8gOiBteWltYWdlXHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHNpZ251cFNlcnZpY2UudXBsb2FkUGhvdG8odXNlclBob3RvKVxyXG4gICAgICAgICAgICAgICAgLnN1Y2Nlc3MoZnVuY3Rpb24oZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKGRhdGEuc3VjY2Vzcykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkd2luZG93LmxvY2FsU3RvcmFnZS5zZXRJdGVtKFwicGhvdG9cIixteWltYWdlKTtcclxuICAgICAgICAgICAgICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdG9hc3RBcHAuZXJyb3JNZXNzYWdlKFwiLS0tLS1cIik7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59KSgpO1xyXG5cclxuIiwiKGZ1bmN0aW9uKCkge1xyXG4gICd1c2Ugc3RyaWN0JztcclxuICBhbmd1bGFyXHJcbiAgICAubW9kdWxlKCdhcHAnKVxyXG4gICAgLmNvbnRyb2xsZXIoJ3NpZ251cENvbnRyb2xsZXInLCBzaWdudXBDb250cm9sbGVyKTtcclxuICAgIHNpZ251cENvbnRyb2xsZXIuJGluamVjdCA9IFsnJHRyYW5zbGF0ZScsJyR3aW5kb3cnLCdzaWdudXBTZXJ2aWNlJywnJHN0YXRlJywndG9hc3RBcHAnLCdBdXRoVG9rZW4nLCdBdXRoJywnJGZpbHRlcicsJyRzdGF0ZVBhcmFtcyddO1xyXG5cclxuICBmdW5jdGlvbiBzaWdudXBDb250cm9sbGVyKCR0cmFuc2xhdGUsICR3aW5kb3csIHNpZ251cFNlcnZpY2UsJHN0YXRlLHRvYXN0QXBwLEF1dGhUb2tlbixBdXRoLCRmaWx0ZXIsJHN0YXRlUGFyYW1zKXtcclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgIHNlbGYubWVzc2FnZSAgPSAnJztcclxuICAgIHNlbGYuc2F2ZVVzZXIgICA9IHNhdmVVc2VyO1xyXG4gICAgc2VsZi5yZXNjdWVQYXNzd29yZCA9IHJlc2N1ZVBhc3N3b3JkO1xyXG4gICAgc2VsZi5jaGFuZ2VQYXNzd29yZCA9IGNoYW5nZVBhc3N3b3JkO1xyXG4gICAgc2VsZi5zZXRMYW5nID0gc2V0TGFuZztcclxuICAgIHNlbGYubG9naW5JblByb2dyZXNzID0gZmFsc2U7XHJcblxyXG4gICAgZnVuY3Rpb24gc2F2ZVVzZXIodXNlcikge1xyXG4gICAgICBzaWdudXBTZXJ2aWNlLmNyZWF0ZSh1c2VyKVxyXG4gICAgICAgICAgLnN1Y2Nlc3MoZnVuY3Rpb24oZGF0YSkge1xyXG4gICAgICAgICAgICBpZihkYXRhLnN1Y2Nlc3MpIHtcclxuICAgICAgICAgICAgICAgICAgdG9hc3RBcHAuZXJyb3JNZXNzYWdlKCRmaWx0ZXIoJ3RyYW5zbGF0ZScpKCdXRUxDT01FX1NZU1RFTScpICsgdXNlci5uaWNrbmFtZSk7XHJcbiAgICAgICAgICAgICAgICAgICAkc3RhdGUuZ28oJ2luaXQubG9naW4nKTtcclxuICAgICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICAgIHRvYXN0QXBwLmVycm9yTWVzc2FnZShcIkVtYWlsIErDoSBjYWRhc3RyYWRvXCIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9KTtcclxuICAgICAgIH1cclxuXHJcbiAgICAgIGZ1bmN0aW9uIHNldExhbmcobGFuZ0tleSkge1xyXG4gICAgICAgICAgJHRyYW5zbGF0ZS51c2UobGFuZ0tleSk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGZ1bmN0aW9uIHJlc2N1ZVBhc3N3b3JkKHVzZXJFbWFpbCl7XHJcbiAgICAgICAgICBzaWdudXBTZXJ2aWNlLnJlc2N1ZVBhc3N3b3JkKHVzZXJFbWFpbClcclxuICAgICAgICAgICAgICAuc3VjY2VzcyhmdW5jdGlvbihkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAgIGlmKGRhdGEuc3VjY2Vzcykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgdG9hc3RBcHAuZXJyb3JNZXNzYWdlKFwiRW1haWwgY29tIGluc3RydcOnw7VlcyBlbnZpYWRvIHBhcmEgXCIgKyB1c2VyRW1haWwuZW1haWwpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgJHN0YXRlLmdvKCdpbml0LmxvZ2luJyk7XHJcbiAgICAgICAgICAgICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICAgICAgICAgICAgdG9hc3RBcHAuZXJyb3JNZXNzYWdlKFwiRXJyb3JcIik7XHJcbiAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICB9KTtcclxuICAgICAgfVxyXG5cclxuICAgICAgZnVuY3Rpb24gY2hhbmdlUGFzc3dvcmQodXNlcil7XHJcbiAgICAgICAgICBzaWdudXBTZXJ2aWNlLmNoYW5nZVBhc3N3b3JkKHVzZXIpXHJcbiAgICAgICAgICAgICAgLnN1Y2Nlc3MoZnVuY3Rpb24oZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgICBpZihkYXRhLnN1Y2Nlc3MpIHtcclxuICAgICAgICAgICAgICAgICAgICAgIHRvYXN0QXBwLmVycm9yTWVzc2FnZShcIlNlbmhhIGFsdGVyYWRhIGNvbSBzdWNlc3NvLiBGYcOnYSBsb2dpbiBjb20gYSBub3ZhIHNlbmhhLlwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICRzdGF0ZS5nbygnaW5pdC5sb2dpbicpO1xyXG4gICAgICAgICAgICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgICAgICAgICAgIHRvYXN0QXBwLmVycm9yTWVzc2FnZShcIkVycm9yXCIpO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgIH0pO1xyXG4gICAgICB9XHJcbiAgfVxyXG5cclxufSkoKTsiLCIoZnVuY3Rpb24oKSB7XHJcbiAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICBhbmd1bGFyXHJcbiAgICAubW9kdWxlKCdhcHAnKVxyXG4gICAgLmZhY3RvcnkoJ3NpZ251cFNlcnZpY2UnLCBzaWdudXBTZXJ2aWNlKTtcclxuXHJcbiAgc2lnbnVwU2VydmljZS4kaW5qZWN0ID0gWyckaHR0cCcsJyRsb2NhdGlvbiddO1xyXG5cclxuICBmdW5jdGlvbiBzaWdudXBTZXJ2aWNlKCRodHRwLCRsb2NhdGlvbikge1xyXG5cclxuICAgIHZhciBBUElfUk9VVEVfVVNFUiA9ICcvYXBpL3NpZ251cC8nO1xyXG4gICAgdmFyIEFQSV9ST1VURV9SRVNDVUVQQVNTV09SRCA9ICcvYXBpL3Jlc2N1ZXBhc3N3ZC8nO1xyXG4gICAgdmFyIEFQSV9ST1VURV9TRVRORVdQQVNTV09SRCA9ICcvYXBpL3Jlc2N1ZXBhc3N3ZC9uZXdwYXNzd2QvJztcclxuICAgIHZhciBBUElfUk9VVEVfVVBEQVRFUEhPVE8gPSAnL2FwaS9wcm9maWxlL3Bob3RvLyc7XHJcblxyXG5cclxuICAgIHZhciBzZXJ2aWNlID0ge1xyXG4gICAgICBjcmVhdGUgICAgICAgICA6IGNyZWF0ZSxcclxuICAgICAgcmVzY3VlUGFzc3dvcmQgOiByZXNjdWVQYXNzd29yZCxcclxuICAgICAgY2hhbmdlUGFzc3dvcmQgOiBjaGFuZ2VQYXNzd29yZCxcclxuICAgICAgdXBsb2FkUGhvdG86IHVwbG9hZFBob3RvXHJcbiAgICB9O1xyXG5cclxuICAgIHJldHVybiBzZXJ2aWNlO1xyXG5cclxuICAgIGZ1bmN0aW9uIGNyZWF0ZShkYXRhKSB7XHJcbiAgICAgICAgcmV0dXJuICRodHRwLnBvc3QoQVBJX1JPVVRFX1VTRVIsIGRhdGEpO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIHJlc2N1ZVBhc3N3b3JkKGRhdGEpe1xyXG4gICAgICByZXR1cm4gJGh0dHAucG9zdChBUElfUk9VVEVfUkVTQ1VFUEFTU1dPUkQsIGRhdGEpO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGNoYW5nZVBhc3N3b3JkKGRhdGEpe1xyXG4gICAgICB2YXIgbXl0b2tlblVSTCA9ICRsb2NhdGlvbi5zZWFyY2goKTtcclxuICAgICAgcmV0dXJuICRodHRwLmdldChBUElfUk9VVEVfU0VUTkVXUEFTU1dPUkQgKyAnP215dG9rZW49JyArIG15dG9rZW5VUkwubXl0b2tlbisnJnBhc3N3b3JkPScrZGF0YS5wYXNzd29yZCk7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gdXBsb2FkUGhvdG8oZGF0YSkge1xyXG4gICAgICByZXR1cm4gJGh0dHAucG9zdChBUElfUk9VVEVfVVBEQVRFUEhPVE8sIGRhdGEpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbn0pKCk7XHJcbiIsIi8qKlxyXG4gKiBDcmVhdGVkIGJ5IEpPU0VWQUxERVJMRUkgb24gMjUvMDYvMjAxNS5cclxuICovXHJcblxyXG4oZnVuY3Rpb24oKXtcclxuXHJcbiAgICAndXNlIHN0cmljdCc7XHJcblxyXG4gICAgYW5ndWxhclxyXG4gICAgICAgIC5tb2R1bGUoJ2FwcCcpXHJcbiAgICAgICAgLmNvbmZpZyhhcHBDb25maWcpO1xyXG5cclxuICAgIGFwcENvbmZpZy4kaW5qZWN0ID0gWyckbWRUaGVtaW5nUHJvdmlkZXInLCckbG9jYXRpb25Qcm92aWRlciddO1xyXG5cclxuICAgLyogZnVuY3Rpb24gYXBwQ29uZmlnICgkbWRUaGVtaW5nUHJvdmlkZXIsJGxvY2F0aW9uUHJvdmlkZXIpIHtcclxuXHJcbiAgICAgICAgIC8vJGxvY2F0aW9uUHJvdmlkZXIuaHRtbDVNb2RlKHRydWUpO1xyXG4gICAgICAgIHZhciBjdXN0b21HcmVlbk1hcCA9ICRtZFRoZW1pbmdQcm92aWRlci5leHRlbmRQYWxldHRlKCd0ZWFsJywge1xyXG4gICAgICAgICAgICAnY29udHJhc3REZWZhdWx0Q29sb3InOiAnbGlnaHQnLFxyXG4gICAgICAgICAgICAnY29udHJhc3REYXJrQ29sb3JzJzogWyc1MCddLFxyXG4gICAgICAgICAgICAnNTAnOiAnRTBGMkYxJ1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAkbWRUaGVtaW5nUHJvdmlkZXIuZGVmaW5lUGFsZXR0ZSgnY3VzdG9tR3JlZW4nLCBjdXN0b21HcmVlbk1hcCk7XHJcbiAgICAgICAgJG1kVGhlbWluZ1Byb3ZpZGVyLnRoZW1lKCdkZWZhdWx0JylcclxuICAgICAgICAgICAgLnByaW1hcnlQYWxldHRlKCdjdXN0b21HcmVlbicsIHtcclxuICAgICAgICAgICAgICAgICdkZWZhdWx0JzogJzUwMCcsXHJcbiAgICAgICAgICAgICAgICAnaHVlLTEnOiAnNTAnXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5hY2NlbnRQYWxldHRlKCd0ZWFsJyk7XHJcbiAgICAgICAgJG1kVGhlbWluZ1Byb3ZpZGVyLnRoZW1lKCdpbnB1dCcsICdkZWZhdWx0JylcclxuICAgICAgICAgICAgLnByaW1hcnlQYWxldHRlKCdncmVlbicpO1xyXG5cclxuICAgIH07Ki9cclxuXHJcbiAgICBmdW5jdGlvbiBhcHBDb25maWcoJG1kVGhlbWluZ1Byb3ZpZGVyKSB7XHJcbiAgICAgICAgLy8gRXh0ZW5kIHRoZSByZWQgdGhlbWUgd2l0aCBhIGZldyBkaWZmZXJlbnQgY29sb3JzXHJcbiAgICAgICAgdmFyIG5lb25SZWRNYXAgPSAkbWRUaGVtaW5nUHJvdmlkZXIuZXh0ZW5kUGFsZXR0ZSgndGVhbCcsIHtcclxuICAgICAgICAgICAgJzUwJzogJ0UwRjJGMScsXHJcbiAgICAgICAgICAgICcxMDAnOiAnQjJERkRCJyxcclxuICAgICAgICAgICAgJzIwMCc6ICc4MENCQzQnLFxyXG4gICAgICAgICAgICAnMzAwJzogJzREQjZBQycsXHJcbiAgICAgICAgICAgICc0MDAnOiAnMjZBNjlBJyxcclxuICAgICAgICAgICAgJzUwMCc6ICcwMDk2ODgnLFxyXG4gICAgICAgICAgICAnNjAwJzogJzAwODk3QicsXHJcbiAgICAgICAgICAgICc3MDAnOiAnMDA3OTZCJyxcclxuICAgICAgICAgICAgJzgwMCc6ICcwMDY5NUMnLFxyXG4gICAgICAgICAgICAnOTAwJzogJzAwNEQ0MCcsXHJcbiAgICAgICAgICAgICdBMTAwJzogJ0E3RkZFQicsXHJcbiAgICAgICAgICAgICdBMjAwJzogJzY0RkZEQScsXHJcbiAgICAgICAgICAgICdBNDAwJzogJzFERTlCNicsXHJcbiAgICAgICAgICAgICdBNzAwJzogJzAwQkZBNScsXHJcbiAgICAgICAgICAgICdjb250cmFzdERlZmF1bHRDb2xvcic6ICdsaWdodCcsICAgIC8vIHdoZXRoZXIsIGJ5IGRlZmF1bHQsIHRleHQgKGNvbnRyYXN0KVxyXG4gICAgICAgICAgICAvLyBvbiB0aGlzIHBhbGV0dGUgc2hvdWxkIGJlIGRhcmsgb3IgbGlnaHRcclxuICAgICAgICAgICAgJ2NvbnRyYXN0RGFya0NvbG9ycyc6IFsnNTAnLCAnMTAwJywgLy9odWVzIHdoaWNoIGNvbnRyYXN0IHNob3VsZCBiZSAnZGFyaycgYnkgZGVmYXVsdFxyXG4gICAgICAgICAgICAgICAgJzIwMCcsICczMDAnLCAnNDAwJywgJ0ExMDAnXSxcclxuICAgICAgICAgICAgJ2NvbnRyYXN0TGlnaHRDb2xvcnMnOiB1bmRlZmluZWRcclxuICAgICAgICB9KTtcclxuICAgICAgICAvLyBSZWdpc3RlciB0aGUgbmV3IGNvbG9yIHBhbGV0dGUgbWFwIHdpdGggdGhlIG5hbWUgPGNvZGU+bmVvblJlZDwvY29kZT5cclxuICAgICAgICAkbWRUaGVtaW5nUHJvdmlkZXIuZGVmaW5lUGFsZXR0ZSgndGVhbCcsIG5lb25SZWRNYXApO1xyXG4gICAgICAgIC8vIFVzZSB0aGF0IHRoZW1lIGZvciB0aGUgcHJpbWFyeSBpbnRlbnRpb25zXHJcbiAgICAgICAgJG1kVGhlbWluZ1Byb3ZpZGVyLnRoZW1lKCdkZWZhdWx0JylcclxuICAgICAgICAgICAgLnByaW1hcnlQYWxldHRlKCd0ZWFsJylcclxuICAgICAgICAgICAgLmFjY2VudFBhbGV0dGUoJ2dyZWVuJyk7XHJcbiAgICB9XHJcblxyXG5cclxufSkoKTsiLCJcclxuKGZ1bmN0aW9uKCl7XHJcblxyXG5cdFwidXNlIHN0cmljdFwiO1xyXG5cclxuXHRhbmd1bGFyXHJcblx0XHQubW9kdWxlKCdhdXRoU2VydmljZScsIFtdKVxyXG5cdFx0LmZhY3RvcnkoJ0F1dGgnLCBmdW5jdGlvbigkaHR0cCwgJHEsIEF1dGhUb2tlbikge1xyXG5cdFx0XHR2YXIgYXV0aEZhY3RvcnkgPSB7fTtcclxuXHRcdFx0YXV0aEZhY3RvcnkubG9naW4gPSBmdW5jdGlvbihlbWFpbCwgcGFzc3dvcmQpIHtcclxuXHRcdFx0XHRyZXR1cm4gJGh0dHAucG9zdCgnL2FwaS9sb2dpbicsIHtcclxuXHRcdFx0XHRcdGVtYWlsOiBlbWFpbCxcclxuXHRcdFx0XHRcdHBhc3N3b3JkOiBwYXNzd29yZFxyXG5cdFx0XHRcdH0pXHJcblx0XHRcdFx0XHQuc3VjY2VzcyhmdW5jdGlvbihkYXRhKSB7XHJcblx0XHRcdFx0XHRcdEF1dGhUb2tlbi5zZXRUb2tlbihkYXRhLnRva2VuKTtcclxuXHRcdFx0XHRcdFx0cmV0dXJuIGRhdGE7XHJcblx0XHRcdFx0XHR9KTtcclxuXHRcdFx0fTtcclxuXHJcblx0XHRcdGF1dGhGYWN0b3J5LmxvZ291dCA9IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdEF1dGhUb2tlbi5zZXRUb2tlbigpO1xyXG5cdFx0XHR9O1xyXG5cclxuXHRcdFx0YXV0aEZhY3RvcnkuaXNMb2dnZWRJbiA9IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdGlmKEF1dGhUb2tlbi5nZXRUb2tlbigpKSB7XHJcblx0XHRcdFx0XHRyZXR1cm4gdHJ1ZTtcclxuXHRcdFx0XHR9ZWxzZSB7XHJcblx0XHRcdFx0XHRyZXR1cm4gZmFsc2U7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9O1xyXG5cclxuXHRcdFx0YXV0aEZhY3RvcnkuZ2V0VXNlciA9IGZ1bmN0aW9uKGlkKSB7XHJcblx0XHRcdFx0aWYoQXV0aFRva2VuLmdldFRva2VuKCkpIHtcclxuXHRcdFx0XHRcdHJldHVybiAkaHR0cC5nZXQoJy9hcGkvbWUvP3VzZXJpZD0nICsgaWQpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRlbHNlIHtcclxuXHRcdFx0XHRcdHJldHVybiAkcS5yZWplY3Qoe21lc3NhZ2U6IFwiVXNlciBoYXMgbm8gdG9rZW5cIn0pO1xyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdH07XHJcblx0XHRcdHJldHVybiBhdXRoRmFjdG9yeTtcclxuXHRcdH0pXHJcblx0XHQuZmFjdG9yeSgnQXV0aFRva2VuJywgZnVuY3Rpb24oJHdpbmRvdykge1xyXG5cclxuXHRcdFx0dmFyIGF1dGhUb2tlbkZhY3RvcnkgPSB7fTtcclxuXHJcblx0XHRcdGF1dGhUb2tlbkZhY3RvcnkuZ2V0VG9rZW4gPSBmdW5jdGlvbigpIHtcclxuXHRcdFx0XHRyZXR1cm4gJHdpbmRvdy5sb2NhbFN0b3JhZ2UuZ2V0SXRlbSgndG9rZW4nKTtcclxuXHRcdFx0fTtcclxuXHJcblx0XHRcdGF1dGhUb2tlbkZhY3Rvcnkuc2V0VG9rZW4gPSBmdW5jdGlvbih0b2tlbikge1xyXG5cclxuXHRcdFx0XHRpZiAodG9rZW4pIHtcclxuXHRcdFx0XHRcdCR3aW5kb3cubG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3Rva2VuJywgdG9rZW4pO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRlbHNle1xyXG5cdFx0XHRcdFx0JHdpbmRvdy5sb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgndG9rZW4nKTtcclxuXHRcdFx0XHR9XHJcblxyXG5cdFx0XHR9O1xyXG5cdFx0XHRyZXR1cm4gYXV0aFRva2VuRmFjdG9yeTtcclxuXHRcdH0pXHJcblx0XHQuZmFjdG9yeSgnQXV0aEludGVyY2VwdG9yJywgZnVuY3Rpb24oJHEsICRsb2NhdGlvbiwgQXV0aFRva2VuKSB7XHJcblx0XHRcdHZhciBpbnRlcmNlcHRvckZhY3RvcnkgPSB7fTtcclxuXHRcdFx0aW50ZXJjZXB0b3JGYWN0b3J5LnJlcXVlc3QgPSBmdW5jdGlvbihjb25maWcpIHtcclxuXHRcdFx0XHR2YXIgdG9rZW4gPSBBdXRoVG9rZW4uZ2V0VG9rZW4oKTtcclxuXHRcdFx0XHRpZih0b2tlbikge1xyXG5cdFx0XHRcdFx0Y29uZmlnLmhlYWRlcnNbJ3gtYWNjZXNzLXRva2VuJ10gPSB0b2tlbjtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0cmV0dXJuIGNvbmZpZztcclxuXHRcdFx0fTtcclxuXHRcdFx0cmV0dXJuIGludGVyY2VwdG9yRmFjdG9yeTtcclxuXHRcdH0pO1xyXG59KSgpOyIsIlxyXG5cclxuYW5ndWxhci5tb2R1bGUoJ0Ryb3BEU0MnLFtdKVxyXG4gICAgLmRpcmVjdGl2ZSgnZHJhZ2dhYmxlJywgZnVuY3Rpb24oJGRvY3VtZW50LFNvY2tldCwkd2luZG93KSB7XHJcbiAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIHJlc3RyaWN0OiAnQScsXHJcbiAgICAgICAgICAgIHJlcGxhY2U6IHRydWUsXHJcbiAgICAgICAgICAgIGxpbms6IGZ1bmN0aW9uKHNjb3BlLCBlbGVtZW50LCBhdHRyKSB7XHJcbiAgICAgICAgICAgICAgICAgIGVsZW1lbnQub24oJ21vdXNlZG93bicsIGZ1bmN0aW9uKGV2ZW50KSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgaWYoZXZlbnQudGFyZ2V0LmlkLnN1YnN0cmluZygwLDExKSA9PSBcInN0YWtlaG9sZGVyXCIpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFByZXZlbnQgZGVmYXVsdCBkcmFnZ2luZyBvZiBzZWxlY3RlZCBjb250ZW50XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgc2NvcGUuc3Rha2Vob2xkZXIubG9jYWxjb2RlID0gICR3aW5kb3cubG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2xvY2FsY29kZScpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgJGRvY3VtZW50LmJpbmQoJ21vdXNlbW92ZScsIG1vdXNlbW92ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgJGRvY3VtZW50LmJpbmQoJ21vdXNldXAnLCBtb3VzZXVwKTtcclxuICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gbW91c2Vtb3ZlKGV2ZW50KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICB2YXIgaWRfZGl2ID0gZXZlbnQudGFyZ2V0LmlkO1xyXG4gICAgICAgICAgICAgICAgICAgICAgaWYgKGlkX2RpdiA9PSAnc3ZnJykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGlkX2RpdiA9IFwiXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICBzY29wZS5zdGFrZWhvbGRlci5vbmlvbmxheWVyID0gaWRfZGl2O1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgIHkgPSBldmVudC5wYWdlWTtcclxuICAgICAgICAgICAgICAgICAgICAgIHggPSBldmVudC5wYWdlWDtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50LmNzcyh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgdG9wOiB5ICsgJ3B4JyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICBsZWZ0OiAgeCArICdweCdcclxuICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgLypTb2NrZXQub24oJ29uQnJvYWRjYXN0T25pb25Qb3NpdGlvbicsIGZ1bmN0aW9uIChzdGFrZWhvbGRlcikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQuY3NzKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9wOiBzdGFrZWhvbGRlci55LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZWZ0OiAgc3Rha2Vob2xkZXIueFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgfSk7Ki9cclxuICAgICAgICAgICAgICAgICAgICAgIHNjb3BlLnN0YWtlaG9sZGVyLnggPSB4ICsgJ3B4JztcclxuICAgICAgICAgICAgICAgICAgICAgIHNjb3BlLnN0YWtlaG9sZGVyLnkgPSB5ICsgJ3B4JztcclxuICAgICAgICAgICAgICAgICAgICAgIC8vU29ja2V0LmVtaXQoJ2Jyb2FkY2FzdE9uaW9uUG9zaXRpb24nLCBzY29wZS5zdGFrZWhvbGRlcik7XHJcblxyXG4gICAgICAgICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gbW91c2V1cCgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICRkb2N1bWVudC51bmJpbmQoJ21vdXNlbW92ZScsIG1vdXNlbW92ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAkZG9jdW1lbnQudW5iaW5kKCdtb3VzZXVwJywgbW91c2V1cCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICBTb2NrZXQuZW1pdCgnYnJvYWRjYXN0TW92ZScsIHNjb3BlLnN0YWtlaG9sZGVyKTtcclxuICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICB9KTtcclxuIiwiLyoqXHJcbiAqIENyZWF0ZWQgYnkgamVzdXMgb24gMjEvMDMvMjAxNi5cclxuICovXHJcbjsoZnVuY3Rpb24gKHVuZGVmaW5lZCkge1xyXG4gICAgYW5ndWxhci5tb2R1bGUoJ2FwcFJ4RHJhZycsIFsncngnXSlcclxuICAgICAgICAuZGlyZWN0aXZlKCdyeGRyYWdnYWJsZScsIGZ1bmN0aW9uKCRkb2N1bWVudCwgJHdpbmRvdywgcngsIFNvY2tldCkge1xyXG4gICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24oc2NvcGUsIGVsZW1lbnQsIGF0dHJzKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBHZXQgdGhlIHRocmVlIG1ham9yIGV2ZW50c1xyXG4gICAgICAgICAgICAgICAgdmFyIGxvY2FsY29kZSA9ICAkd2luZG93LmxvY2FsU3RvcmFnZS5nZXRJdGVtKCdsb2NhbGNvZGUnKTtcclxuICAgICAgICAgICAgICAgIHZhciBtb3VzZXVwICAgPSByeC5PYnNlcnZhYmxlLmZyb21FdmVudChlbGVtZW50LCAgICdtb3VzZXVwJyk7XHJcbiAgICAgICAgICAgICAgICB2YXIgbW91c2Vtb3ZlID0gcnguT2JzZXJ2YWJsZS5mcm9tRXZlbnQoJGRvY3VtZW50LCAnbW91c2Vtb3ZlJyk7XHJcbiAgICAgICAgICAgICAgICB2YXIgbW91c2Vkb3duID0gcnguT2JzZXJ2YWJsZS5mcm9tRXZlbnQoZWxlbWVudCwgICAnbW91c2Vkb3duJykubWFwKGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIGNhbGN1bGF0ZSBvZmZzZXRzIHdoZW4gbW91c2UgZG93blxyXG4gICAgICAgICAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGVmdDogZXZlbnQuY2xpZW50WCAtIGVsZW1lbnRbMF0uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkubGVmdCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdG9wOiAgZXZlbnQuY2xpZW50WSAtIGVsZW1lbnRbMF0uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkudG9wLFxyXG4gICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICAvLyBDb21iaW5lIG1vdXNlIGRvd24gd2l0aCBtb3VzZSBtb3ZlIHVudGlsIG1vdXNlIHVwXHJcbiAgICAgICAgICAgICAgICB2YXIgbW91c2VkcmFnID0gbW91c2Vkb3duLnNlbGVjdE1hbnkoZnVuY3Rpb24oaW1hZ2VPZmZzZXQpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbW91c2Vtb3ZlLm1hcChmdW5jdGlvbiAocG9zKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNhbGN1bGF0ZSBvZmZzZXRzIGZyb20gbW91c2UgZG93biB0byBtb3VzZSBtb3Zlc1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGVmdDogcG9zLmNsaWVudFggLSBpbWFnZU9mZnNldC5sZWZ0LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9wOiAgcG9zLmNsaWVudFkgLSBpbWFnZU9mZnNldC50b3BcclxuICAgICAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgICAgICB9KS50YWtlVW50aWwobW91c2V1cCk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICBtb3VzZWRyYWcuc3Vic2NyaWJlIChmdW5jdGlvbiAocG9zKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gVXBkYXRlIHBvc2l0aW9uXHJcbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5jc3Moe3RvcDogcG9zLnRvcCArICdweCcsIGxlZnQ6IHBvcy5sZWZ0ICsgJ3B4J30pO1xyXG4gICAgICAgICAgICAgICAgICAgIHBvcy5sb2NhbGNvZGUgPSBsb2NhbGNvZGU7XHJcbiAgICAgICAgICAgICAgICAgICAgU29ja2V0LmVtaXQoJ2Jyb2FkY2FzdE1vdmUnLHBvcyk7XHJcblxyXG4gICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH0pO1xyXG5cclxufS5jYWxsKHRoaXMpKTsiLCIvKipcclxuICogQ3JlYXRlZCBieSBKT1NFVkFMREVSTEVJIG9uIDI1LzA2LzIwMTUuXHJcbiAqL1xyXG5cclxuKGZ1bmN0aW9uKCkge1xyXG5cclxuICAgICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgICBhbmd1bGFyXHJcbiAgICAgICAgLm1vZHVsZSgnYXBwJylcclxuICAgICAgICAuY29udHJvbGxlcignbG9naW5Db250cm9sbGVyJyxsb2dpbkNvbnRyb2xsZXIpO1xyXG5cclxuICAgICAgICBmdW5jdGlvbiBsb2dpbkNvbnRyb2xsZXIoJHRyYW5zbGF0ZSwgJHJvb3RTY29wZSwgJHN0YXRlLCBBdXRoLCAkd2luZG93LCAkZmlsdGVyLCB0b2FzdEFwcCkge1xyXG4gICAgICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICAgICAgICAgIHNlbGYuaW5Qcm9jZXNzaW5nID0gZmFsc2U7XHJcbiAgICAgICAgICAgIHNlbGYuc2V0TGFuZyA9IHNldExhbmc7XHJcbiAgICAgICAgICAgIHNlbGYuZG9Mb2dvdXQgPSBkb0xvZ291dDtcclxuICAgICAgICAgICAgc2VsZi5kb0xvZ2luID0gZG9Mb2dpbjtcclxuXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIHNldExhbmcobGFuZ0tleSkge1xyXG4gICAgICAgICAgICAgICAgICR0cmFuc2xhdGUudXNlKGxhbmdLZXkpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBmdW5jdGlvbiBnZXRMb2NhbENvZGUoKXtcclxuICAgICAgICAgICAgICAgIHJldHVybiBNYXRoLnJhbmRvbSgpICsgTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMTApO1xyXG5cclxuICAgICAgICAgICAgfVxyXG5cclxuXHJcbiAgICAgICAgICAgIHNlbGYubG9nZ2VkSW4gPSBBdXRoLmlzTG9nZ2VkSW4oKTtcclxuXHJcbiAgICAgICAgICAgICRyb290U2NvcGUuJG9uKCckcm91dGVDaGFuZ2VTdGFydCcsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgc2VsZi5sb2dnZWRJbiA9IEF1dGguaXNMb2dnZWRJbigpO1xyXG4gICAgICAgICAgICAgICAgQXV0aC5nZXRVc2VyKClcclxuICAgICAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbihkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYudXNlciA9IGRhdGEuZGF0YTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICBmdW5jdGlvbiBkb0xvZ2luKHVzZXIpIHtcclxuICAgICAgICAgICAgICAgIHNlbGYuaW5Qcm9jZXNzaW5nID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIHNlbGYuZXJyb3IgPSAnJztcclxuICAgICAgICAgICAgICAgIEF1dGgubG9naW4odXNlci5lbWFpbCwgdXNlci5wYXNzd29yZClcclxuICAgICAgICAgICAgICAgICAgICAuc3VjY2VzcyhmdW5jdGlvbihkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICR3aW5kb3cubG9jYWxTdG9yYWdlLnNldEl0ZW0oXCJ1c2VyZW1haWxcIixkYXRhLmVtYWlsKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJHdpbmRvdy5sb2NhbFN0b3JhZ2Uuc2V0SXRlbShcInVzZXJpZFwiLGRhdGEuaWQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkd2luZG93LmxvY2FsU3RvcmFnZS5zZXRJdGVtKFwibG9jYWxjb2RlXCIsZGF0YS5pZCArICctJyArIGdldExvY2FsQ29kZSgpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJHdpbmRvdy5sb2NhbFN0b3JhZ2Uuc2V0SXRlbShcIm5pY2tuYW1lXCIsZGF0YS5uaWNrbmFtZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuc2V0TGFuZyhkYXRhLmxhbmd1YWdlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5pblByb2Nlc3NpbmcgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgQXV0aC5nZXRVc2VyKGRhdGEuaWQpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbih1c2VyRGF0YSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvYXN0QXBwLmVycm9yTWVzc2FnZSgkZmlsdGVyKCd0cmFuc2xhdGUnKSgnV0VMQ09NRV9TWVNURU0nKSArIFwiOiBcIiArIGRhdGEubmlja25hbWUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZihkYXRhLnN1Y2Nlc3MpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICR3aW5kb3cubG9jYWxTdG9yYWdlLnNldEl0ZW0oXCJwaG90b1wiLHVzZXJEYXRhLmRhdGEucGhvdG8pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJHN0YXRlLmdvKCdzdGFydHByb2JsZW0nKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvYXN0QXBwLmVycm9yTWVzc2FnZShcIlVzdcOhcmlvIGUgc2VuaGEgbsOjbyBjb25mZXJlbS5cIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBmdW5jdGlvbiBkb0xvZ291dCgpIHtcclxuICAgICAgICAgICAgICAgIEF1dGgubG9nb3V0KCk7XHJcbiAgICAgICAgICAgICAgICAkc3RhdGUoJ2luaXQnKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICB9XHJcblxyXG5cclxufSkoKTtcclxuIiwiLyoqXHJcbiAqIENyZWF0ZWQgYnkgSk9TRVZBTERFUkxFSSBvbiAyMS8wNi8yMDE1LlxyXG4gKi9cclxuXHJcbihmdW5jdGlvbigpe1xyXG5cclxuICAgICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgICBhbmd1bGFyXHJcbiAgICAgICAgLm1vZHVsZSgnYXBwJylcclxuICAgICAgICAuc2VydmljZSgnU29ja2V0JyxcclxuICAgICAgICBbJyRsb2NhdGlvbicsICckdGltZW91dCcsXHJcbiAgICBmdW5jdGlvbigkbG9jYXRpb24sICR0aW1lb3V0KSB7XHJcbiAgICAgICAgaWYgKHRydWUpIHtcclxuICAgICAgICAgICAgdGhpcy5zb2NrZXQgPSBpbygpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICRsb2NhdGlvbi5wYXRoKCcvJyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLm9uID0gZnVuY3Rpb24oZXZlbnROYW1lLCBjYWxsYmFjaykge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5zb2NrZXQpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuc29ja2V0Lm9uKGV2ZW50TmFtZSwgZnVuY3Rpb24oZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgICAgICR0aW1lb3V0KGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYWxsYmFjayhkYXRhKTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgdGhpcy5lbWl0ID0gZnVuY3Rpb24oZXZlbnROYW1lLCBkYXRhKSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLnNvY2tldCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zb2NrZXQuZW1pdChldmVudE5hbWUsIGRhdGEpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgdGhpcy5yZW1vdmVMaXN0ZW5lciA9IGZ1bmN0aW9uKGV2ZW50TmFtZSkge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5zb2NrZXQpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuc29ja2V0LnJlbW92ZUxpc3RlbmVyKGV2ZW50TmFtZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgfVxyXG5dKVxyXG5cclxufSkoKTtcclxuIl0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9
