!function(){"use strict";angular.module("app",["toastService","textAngular","luegg.directives","DropDSC","authService","ui.router","ngMaterial","ngMdIcons","ngCookies","pascalprecht.translate"]).config(["$httpProvider",function(e){e.interceptors.push("AuthInterceptor")}])}(),function(){"use strict";function e(e){function t(t){this.message=t,e.show({controller:"toastController",controllerAs:"vm",templateUrl:"views/pages/dsctoast.html",action:"OK",highlightAction:!0,position:"top left",hideDelay:5e3})}var o={message:"",errorMessage:t};return o}angular.module("toastService",[]).controller("toastController",["$mdToast","toastApp",function(e,t){var o=this;o.message=t.message,o.closeToast=function(){e.hide()}}]).factory("toastApp",e),e.$inject=["$mdToast"]}(),function(){"use strict";function e(e,t){e.state("init",{url:"/",templateUrl:"views/pages/initpage.html",controller:"loginController as vm"}).state("init.login",{url:"login",views:{"content-tab":{templateUrl:"views/pages/userlogin.html",controller:"loginController as vm"}}}).state("init.signup",{url:"signup",views:{"content-tab":{templateUrl:"views/pages/signup.html",controller:"signupController as vm"}}}).state("init.rescuepassword",{url:"rescuepassword",views:{"content-tab":{templateUrl:"views/pages/rescuepassword.html",controller:"signupController as vm"}}}).state("startproblem",{url:"/startproblem",templateUrl:"views/pages/startproblem.html",controller:"startProblemController as vm"}).state("newpassword",{url:"/newpassword/:mytoken",templateUrl:"views/pages/newpassword.html",controller:"signupController as vm"}).state("problem",{url:"/problem",templateUrl:"views/pages/problem.html",controller:"menuProblemController as vm"}).state("problem.dscreport",{url:"/dscreport",views:{"problem-description":{templateUrl:"views/pages/dscreport.html",controller:"dscReportController as vm"}}}).state("problem.description",{url:"/description",views:{"problem-description":{templateUrl:"views/pages/problemdescription.html",controller:"editProblemController as vm"}}}).state("problem.collaborators",{url:"/collaborators",views:{"problem-description":{templateUrl:"views/pages/collaborators.html",controller:"controllerCollaborators as vm"}}}).state("problem.stakeholders",{url:"stakeholders",views:{"dsc-artifact":{templateUrl:"views/pages/stakeholders.html",controller:"stakeholderController as vm"}}}).state("problem.evaluationframework",{url:"evaluationframework",views:{"dsc-artifact":{templateUrl:"views/pages/evaluationframework.html",controller:"evaluationframeworkController as vm"}}}).state("problem.semioticframework",{url:"semioticframework",views:{"dsc-artifact":{templateUrl:"views/pages/semioticframework.html",controller:"semioticframeworkController as vm"}}}).state("problem.carf",{url:"carf",views:{"dsc-artifact":{templateUrl:"views/pages/carf.html",controller:"carfController as vm"}}}).state("problem.vif",{url:"vif",views:{"dsc-artifact":{templateUrl:"views/pages/vif.html",controller:"valueIdentificationFrameController as vm"}}}),t.otherwise("/login")}angular.module("app").config(e),e.$inject=["$stateProvider","$urlRouterProvider"]}(),function(){"use strict";function e(e){e.useStaticFilesLoader({prefix:"app/language/lang-",suffix:".json"}),e.preferredLanguage("en"),e.useSanitizeValueStrategy("escaped"),e.useLocalStorage()}function t(e){function t(t){e.use(t)}var o=this;o.setLang=t}function o(){return{templateUrl:"app/language/changeLanguage.html",restrict:"E"}}angular.module("app").config(e).controller("languageController",t).directive("changeLanguage",o),e.$inject=["$translateProvider"],t.$inject=["$translate"]}(),function(){"use strict";function e(e,t,o,r){function a(){d.idProblem=e.localStorage.getItem("problemid"),o.getcarf(d.idProblem).success(function(e){e.success&&(d.localStakeholders=e.stakeholders,d.stakeholderList=d.localStakeholders,d.carfList=e.carf,d.carfPriorityList=d.localPriorityList)}),d.inProcessing=!1}function n(){d.carf={_id:"",pms:"",values:[],priority:"",requirement:"",stakeholders:[]},d.valueList=[]}function i(e){""===e.pms?r.errorMessage("Select PMS"):e.values.length<1?r.errorMessage("Select one or more Value"):e.stakeholders.length<1?r.errorMessage("Select one or more Stakeholder(s)"):""===e.priority?r.errorMessage("Select priority [Low, Medium or High]"):(t.emit("broadcastCARFadd",e),d.stakeholderList=[],d.carfPriorityList=[])}function s(e,o){var r={index:e,carf:o};t.emit("broadcastCARFremove",r)}function l(e){void 0!==e&&angular.forEach(d.carfPMSValue,function(t){return t.pms==e?(d.carf.values=[],void(d.valueList=t.values)):void 0})}function c(e){d.carf.priority=e}function u(e){if(0===d.carf.values.length)d.carf.values.push(e);else{for(var t=0;t<d.carf.values.length;t++)if(e==d.carf.values[t])return void d.carf.values.splice(t,1);d.carf.values.push(e)}}function m(e){if(0===d.carf.stakeholders.length)d.carf.stakeholders.push(e);else{for(var t=0;t<d.carf.stakeholders.length;t++)if(e==d.carf.stakeholders[t])return void d.carf.stakeholders.splice(t,1);d.carf.stakeholders.push(e)}}var d=this;d.idProblem="",d.inProcessing=!0,d.valueList=[],d.stakeholderList=[],d.localStakeholders=[],d.addpmsvalue=i,d.removeCARF=s,d.selectPMSValue=l,d.setPriotity=c,d.addListValue=u,d.addStakeholder=m,d.carf={pms:"",values:[],priority:"",requirement:"",stakeholders:[]},d.initCarf=a,d.carfList=[],d.carfPriorityList=[],t.on("onBroadcastCARFadd",function(e){d.carfList.push(e),n(),d.stakeholderList=d.localStakeholders,d.carfPriorityList=d.localPriorityList}),t.on("onBroadcastCARFremove",function(e){d.carfList.splice(e,1)}),d.localPriorityList=["Low","Medium","High"],d.carfPMSValue=[{pms:"Interaction",values:["Identity","Norms"]},{pms:"Association",values:["Conversation","Groups","Relationship","Trust"]},{pms:"Learning",values:["Meta-communication"]},{pms:"Play",values:["Aesthetics","Emotion and Affection"]},{pms:"Protection",values:["Informed consert","Reputation","Security"]},{pms:"Exploitation",values:["Accessibility","Object","Property (ownership)","Usability"]},{pms:"Teporality",values:["Availability","Awareness","Presence"]},{pms:"Territoriality",values:["Portability","Privacy","Scalability","Visibility"]},{pms:"Classification",values:["Autonomy","Collaboration","Sharing","Adaptability"]},{pms:"Subsistence",values:["Reciprocity"]}]}angular.module("app").controller("carfController",e),e.$inject=["$window","Socket","problemService","toastApp"]}(),function(){"use strict";function e(e,t,o,r,a,n){function i(){o("chat").close().then(function(){r.debug("close chat")})}function s(){u.idProblem=n.localStorage.getItem("problemid"),u.nickname=n.localStorage.getItem("nickname"),a.gethistorychat(u.idProblem).success(function(e){if(e.success)for(var t=0;t<e.historychat.length;t++){var o=new Date(e.historychat[t].time),r={nickname:e.historychat[t].nickname,msg:e.historychat[t].msg,time:o.getDate()+"/"+(o.getMonth()+1)+"/"+o.getFullYear()+" ["+o.getHours()+":"+o.getMinutes()+"] "};u.messages.push(r)}}),t.emit("checkUsers")}function l(){u.replay=u.replay?!1:!0}function c(e){t.emit("broadcastChat",e),u.newmsg=""}var u=this;u.newmsg="",u.messages=[],u.replay=!1,u.nickname="",u.userList=[],u.initHistoryChat=s,u.close=i,u.showReplay=l,u.sendMessage=c,t.on("onBroadcastChat",function(e){var t=new Date(e[e.length-1].time);u.messages.push({nickname:e[e.length-1].nickname,msg:e[e.length-1].msg,time:t.getDate()+"/"+(t.getMonth()+1)+"/"+t.getFullYear()+" ["+t.getHours()+":"+t.getMinutes()+"] "})}),t.on("onCheckUsers",function(e){u.userList=e})}angular.module("app").controller("chatDSC",e),e.$inject=["$timeout","Socket","$mdSidenav","$log","problemService","$window"]}(),function(){"use strict";function e(e,t,o){function r(){s.idProblem=e.localStorage.getItem("problemid"),s.useremail=e.localStorage.getItem("useremail"),t.getcollaborators(s.idProblem).success(function(e){e.success?s.collaborators=e.collaborators:o.errorMessage(e.message)})}function a(e){for(var t=0;t<s.collaborators.length;t++)if(e==s.collaborators[t].email)return!0;return!1}function n(e){if(s.useremail==e)o.errorMessage(s.useremail+" is email of owner.");else if(a(e))o.errorMessage("Usuario Cadastrado.");else{var r={idproblem:s.idProblem,email:e};t.invite(r).success(function(e){e.success?s.collaborators=e.collaborators:o.errorMessage(e.message)})}}function i(e){var r={idproblem:s.idProblem,email:e.email};t.removecollaborators(r).success(function(e){e.success?(o.errorMessage("Colaborador foi removido do projeto."),s.collaborators=e.collaborators):o.errorMessage(e.message)})}var s=this;s.idProblem="",s.collaborators=[],s.useremail="",s.initCollaborators=r,s.addCollaborator=n,s.removeCollaborator=i}angular.module("app").controller("controllerCollaborators",e),e.$inject=["$window","problemService","toastApp"]}(),function(){function e(){function e(e){var t=document.getElementById("projectResport"),o=new jsPDF("l","px");o.addHTML(t,0,0,{pagesplit:!0},function(e){o.save("test.pdf")})}var t=this;t.idproblem="ajflajfljalfjaljf",t.buidReport=e}angular.module("app").controller("dscReportController",e)}(),function(){"use strict";function e(e,t,o,r){function a(){s.idproblem=e.localStorage.getItem("problemid"),t.getevaluation(s.idproblem).success(function(e){e.success?s.evaluationframeworkList=e.evaluationframework:r.errorMessage(e.message)})}function n(e){o.emit("broadcastFrameSave",e)}function i(e){e.openEdit=!0}var s=this;s.evaluationframeworkList=[],s.initEvaluation=a,s.setOpenEditDiscution=i,s.saveDiscution=n,o.on("onBroadcastFrameSave",function(e){angular.forEach(s.evaluationframeworkList,function(t){t.onionlayer==e.onionlayer&&angular.forEach(t.stakeholders,function(t){t._id==e._id&&(t.name=e.name,t.onionlayer=e.onionlayer,t.description=e.description,t.openEdit=e.openEdit,t.problems=e.problems,t.solutions=e.solutions)})})}),o.on("onUpdateStakeholder",function(e){console.log(e)})}angular.module("app").controller("evaluationframeworkController",e),e.$inject=["$window","problemService","Socket","toastApp"]}(),function(){"use strict";function e(e,t,o,r,a,n){function i(e){var t=a.debounce(function(){r(e).toggle().then(function(){n.debug("toggle "+e+" is done")})},300);return t}function s(){o.go("problem.collaborators")}function l(){o.go("problem.description")}function c(){e.logout(),o.go("init.login")}var u=this;u.openChat=i("chat"),u.formAddCollaborators=s,u.editDescriptionProblem=l,u.doLogout=c}angular.module("app").controller("menuProblemController",e),e.$inject=["Auth","$timeout","$state","$mdSidenav","$mdUtil","$log"]}(),function(){"use strict";function e(e,t,o,r,a){function n(){c.idProblem=r.localStorage.getItem("problemid"),a.getproblem(c.idProblem).success(function(e){e.success?c.problem=e.problem:o.errorMessage(e.message)})}function i(){u=!0}function s(o){o.update=u,e.emit("atualizarProblema",o),u&&(u=!1,t(i,2e3))}function l(t){t.update=u,e.emit("atualizarProblema",t)}var c=this,u=!0;c.problem="",c.problemUpdate=s,c.getCurrentProblem=n,c.saveDescription=l,e.on("onAtualizarProblema",function(e){c.problem.description=e.description,c.problem.update=u})}angular.module("app").controller("editProblemController",e),e.$injectre=["$scope","Socket"],e.$inject=["Socket","$timeout","toastApp","$window","problemService"]}(),function(){"use strict";function e(e,t){function o(t){return e.post(h,t)}function r(t){return e.get(b+"?idproblem="+t)}function a(t){return e.get(f+"?email="+t)}function n(t){return e.get(k+"?idproblem="+t)}function i(t){return e.post(w,t)}function s(t){return e.get(y+"?idproblem="+t)}function l(t){return e.get(S+"?idproblem="+t)}function c(t){return e.get(P+"?idproblem="+t)}function u(t){return e.get($+"?idproblem="+t)}function m(t){return e.get(C+"?idproblem="+t)}function d(t){return e.get(v+"?email="+t)}function p(t){return e.get(L+"?idproblem="+t.idproblem+"&email="+t.email)}function g(t){return e.get(A+"?idproblem="+t)}var f="/api/problem/getproblems",v="/api/problem/getproblemscollaborator",h="/api/problem/newproblem",b="/api/problem/getproblem",k="/api/problem/getcollaborators",w="/api/problem/invite",y="/api/problem/getonion",S="/api/problem/getevaluation",P="/api/problem/getsemiotic",$="/api/problem/getcarf",C="/api/problem/removeproblem",L="/api/problem/removecollaborator",A="/api/problem/historychat",E={newproblem:o,getuserproblems:a,getproblem:r,getcollaborators:n,invite:i,getonion:s,getevaluation:l,getsemiotic:c,getcarf:u,removeproblem:m,getproblemscollaborator:d,removecollaborators:p,gethistorychat:g};return E}angular.module("app").factory("problemService",e),e.$inject=["$http","$location"]}(),function(){"use strict";function e(e,t,o,r){function a(){m.idproblem=t.localStorage.getItem("problemid"),o.getsemiotic(m.idproblem).success(function(e){e.success?m.semioticframework=e.semioticframework:r.errorMessage(e.message)})}function n(t,o){var r={text:t,update:o};e.emit("updateSocialWorld",r)}function i(t,o){var r={text:t,update:o};e.emit("updatePragmatic",r)}function s(t,o){var r={text:t,update:o};e.emit("updateSemantic",r)}function l(t,o){var r={text:t,update:o};e.emit("updateSyntatic",r)}function c(t,o){var r={text:t,update:o};e.emit("updateEmpirical",r)}function u(t,o){var r={text:t,update:o};e.emit("updatePhysical",r)}var m=this;m.idproblem="",m.saveSocialWorld=n,m.savePragmatic=i,m.saveSemantic=s,m.saveSyntatic=l,m.saveEmpirical=c,m.savePhysical=u,m.semioticframework="",m.initSemioticFramework=a,e.on("onUpdateSocialWorld",function(e){m.semioticframework.socialworld=e}),e.on("onUpdatePragmatic",function(e){m.semioticframework.pragmatic=e}),e.on("onUpdateSemantic",function(e){m.semioticframework.semioticramework=e}),e.on("onUpdateSyntatic",function(e,t){m.semioticframework.syntatic=e}),e.on("onUpdateEmpirical",function(e){m.semioticframework.empirical=e}),e.on("onUpdatePhysical",function(e){m.semioticframework.physical=e})}angular.module("app").controller("semioticframeworkController",e),e.$inject=["Socket","$window","problemService","toastApp"]}(),function(){"use strict";function e(e,t,o,r){function a(){m.idproblem=t.localStorage.getItem("problemid"),o.getonion(m.idproblem).success(function(e){e.success?m.stakeholderList=e.stakeholders:r.errorMessage(e.message)}),m.inProcessing=!1}function n(t){console.log("Salvar...."+t.name),console.log("Salvar...."+t.description),e.emit("broadcastOnionSave",t)}function i(t){e.emit("broadcastOnionEdit",t)}function s(t,o){var r={index:t,stakeholder:o};e.emit("broadcastOnionRemove",r)}function l(t,o){var r={onionlayer:o,name:"",description:"",openEdit:!0,x:t.pageX+"px",y:t.pageY+"px"};e.emit("broadcastOnionAdd",r)}function c(e){document.getElementById("name"+e).setAttribute("style","text-decoration: underline;"),document.getElementById("legend"+e).setAttribute("opacity","0.8"),document.getElementById(e).setAttribute("opacity","0.8")}function u(e){document.getElementById("name"+e).setAttribute("style","text-decoration: none;"),document.getElementById("legend"+e).setAttribute("opacity","1.0"),document.getElementById(e).setAttribute("opacity","1.0")}var m=this;m.idproblem="",m.stakeholderList=[],m.stakeholder="",m.intitOnion=a,m.move=!1,m.inProcessing=!0,m.saveStakeholder=n,m.setOpenEdit=i,m.delPostIt=s,m.addPostIt=l,m.acende=c,m.apaga=u,e.on("onBroadcastOnionSave",function(e){angular.forEach(m.stakeholderList,function(t){t._id==e._id&&(t.stakeholder=e.stakeholder,t.name=e.name,t.description=e.description,t.openEdit=e.openEdit,t.x=e.x,t.y=e.y)})}),e.on("onBroadcastOnionEdit",function(e){angular.forEach(m.stakeholderList,function(t){t._id===e&&(t.openEdit=!0)})}),e.on("onBroadcastOnionRemove",function(e){var t=document.getElementById("stakeholder"+m.stakeholderList[e]._id);t.style.display="none",m.stakeholderList.splice(e,1)}),e.on("onBroadcastOnionAdd",function(e){m.stakeholderList.push(e)})}angular.module("app").controller("stakeholderController",e),e.$inject=["Socket","$window","problemService","toastApp"]}(),function(){"use strict";function e(e,t,o,r,a,n,i){function s(){f.userid=a.localStorage.getItem("userid"),f.nickname=a.localStorage.getItem("nickname"),f.useremail=a.localStorage.getItem("useremail"),n.getuserproblems(f.useremail).success(function(e){if(e.success){for(var t=0;t<e.problems.length;t++)e.problems[t].description=e.problems[t].description.replace(/(<([^>]+)>)/gi,"").substring(0,460);f.problemList=e.problems}else i.errorMessage(e.message)}),n.getproblemscollaborator(f.useremail).success(function(e){if(e.success){for(var t=0;t<e.problems.length;t++)e.problems[t].description=e.problems[t].description.replace(/(<([^>]+)>)/gi,"").substring(0,460);f.problemCollaboratorList=e.problems}else i.errorMessage(e.message)}),f.loginInProgress=!1}function l(e){n.removeproblem(e).success(function(t){if(t.success){for(var o=0;o<f.problemList.length;o++)if(f.problemList[o]._id==e){f.problemList.splice(o,1);break}}else i.errorMessage(t.message)})}function c(t,o){var r=e.confirm().parent(angular.element(document.body)).title("Detete Problem?").content("Title: "+o.title).ariaLabel("Remove Problem").ok("Desejo remover!").cancel("Cancel").targetEvent(t);e.show(r).then(function(){l(o._id)})}function u(e){e.userid=f.userid,n.newproblem(e).success(function(e){e.success?f.editProblem(e.problem):i.errorMessage(e.message)})}function m(e){a.localStorage.setItem("problemid",e._id);var o={idproblem:e._id,nickname:f.nickname};r.emit("initProblem",o),t.go("problem.stakeholders")}function d(){o.logout(),t.go("init.login")}function p(t){e.show({controller:g,templateUrl:"views/pages/newproblem.html",parent:angular.element(document.body),targetEvent:t})}function g(e,t){e.hide=function(){t.hide()},e.cancel=function(){t.cancel()},e.addNewProblem=function(e){f.startNewProblem(e),t.cancel()}}var f=this;f.nickname="",f.userid="",f.useremail="",f.problemList=[],f.problemCollaboratorList=[],f.loginInProgress=!0,f.getProblems=s,f.revomveProblem=c,f.startNewProblem=u,f.editProblem=m,f.doLogout=d,f.newProblem=p,g.$inject=["$scope","$mdDialog"]}angular.module("app").controller("startProblemController",e),e.$inject=["$mdDialog","$state","Auth","Socket","$window","problemService","toastApp"]}(),function(){"use strict";function e(e,t,o,r){function a(){u.idproblem=e.localStorage.getItem("problemid"),t.getonion(u.idproblem).success(function(e){if(e.success){if(e.stakeholders.length>0){for(var t=1;t<u.sugestionValuesArray.length;t++)u.sugestionValues+=u.sugestionValuesArray[t]+", ";u.sugestionValues[u.sugestionValuesArray[u.sugestionValuesArray.length-1]]+".";for(var r=0;r<e.stakeholders.length;r++)for(var a=0;a<u.stakeholderList.length;a++){var n={_id:e.stakeholders[r]._id,onionlayer:e.stakeholders[r].onionlayer,values:e.stakeholders[r].values,name:e.stakeholders[r].name,description:e.stakeholders[r].description,openEdit:e.stakeholders[r].openEdit,x:e.stakeholders[r].x,y:e.stakeholders[r].y,newValues:[]};e.stakeholders[r].onionlayer!=u.stakeholderList[a].onionlayer||u.stakeholderList[a].stakeholders.push(n)}}u.inProcessing=!1}else o.errorMessage(e.message)})}function n(e){e.openEdit=!0}function i(e){e.openEdit=!1}function s(e,t){for(var o=[],a=0;a<t.values.length;a++)t.values[a]!=e&&o.push(t.values[a]);t.values=o,r.emit("broadcastOnionSave",t)}function l(e){if(""===e.newValues||void 0===e.newValues)o.errorMessage("Valor n�o especificado.");else{for(var t=e.newValues.split(","),a=0;a<t.length;a++)c(e.values,t[a])?o.errorMessage("Duplicate value: "+t[a]):e.values.push(t[a]);e.newValues="",e.openEdit=!1,r.emit("broadcastOnionSave",e)}}function c(e,t){for(var o=0;o<e.length;o++)if(t===e[o])return!0;return!1}var u=this;u.inProcessing=!0,u.idProblem="",u.useremail="",u.newvalues="",u.initValueIdentificationFrame=a,u.setSuggestionShow=n,u.leaveSuggestionShow=i,u.removeValueIdentication=s,u.setValueIdentication=l,u.sugestionValues="",u.stakeholderList=[{onionlayer:"Community",stakeholders:[]},{onionlayer:"Market",stakeholders:[]},{onionlayer:"Source",stakeholders:[]},{onionlayer:"Contruibuition",stakeholders:[]},{onionlayer:"Technico",stakeholders:[]}],u.sugestionValuesArray=["Acessibilidade","Adaptabilidade","Estética","Autonomia","Disponibilidade","Consciência","Colaboração","Conversação","Emoção e Afeto","Grupos","Identidade","Consentimento informado","Meta-comunicação","Normas","Objeto","Portabilidade","Presença","Privacidade","Propriedade","Reciprocidade, Relacionamento, Reputação","Escalabilidade","Segurança","Compartilhamento","Confiança","Usabilidade","Visibilidade"],r.on("onBroadcastOnionSave",function(e){console.log(e),angular.forEach(u.stakeholderList,function(t){t._id==e._id&&(t.stakeholder=e.stakeholder,t.name=e.name,t.description=e.description,t.openEdit=e.openEdit,t.x=e.x,t.y=e.y,t.newValues=[])})})}angular.module("app").controller("valueIdentificationFrameController",e),e.$inject=["$window","problemService","toastApp","Socket"]}(),function(){"use strict";function e(e,t,o,r,a,n,i,s,l){function c(e){o.create(e).success(function(o){o.success?(n.setToken(o.token),i.getUser().then(function(o){p.user=o.data,p.loginInProgress=!1,t.localStorage.setItem("useremail",e.email),t.localStorage.setItem("userid",e.id),t.localStorage.setItem("nickname",e.nickname),p.setLang(e.language),a.errorMessage(s("translate")("WELCOME_SYSTEM")+": "+p.user.nickname),r.go("startproblem")})):a.errorMessage("Email Já cadastrado")})}function u(t){e.use(t)}function m(e){o.rescuePassword(e).success(function(e){console.log(e),a.errorMessage(e.success?"Email com instruções enviado":"Error")})}function d(e){o.changePassword(e).success(function(e){e.success?(a.errorMessage("Senha alterada com sucesso. Faça login com a nova senha."),r.go("init")):a.errorMessage("Error")})}var p=this;p.message="",p.save=c,p.rescuePassword=m,p.changePassword=d,p.setLang=u,p.loginInProgress=!1}angular.module("app").controller("signupController",e),e.$inject=["$translate","$window","signupService","$state","toastApp","AuthToken","Auth","$filter","$stateParams"]}(),function(){"use strict";function e(e,t){function o(t){return e.post(n,t)}function r(t){return e.post(i,t)}function a(o){var r=t.search();return e.get(s+"?mytoken="+r.mytoken+"&password="+o.password)}var n="/api/signup/",i="/api/rescuepasswd/",s="/api/rescuepasswd/newpasswd/",l={create:o,rescuePassword:r,changePassword:a};return l}angular.module("app").factory("signupService",e),e.$inject=["$http","$location"]}(),function(){"use strict";function e(e,t){var o=e.extendPalette("teal",{contrastDefaultColor:"light",contrastDarkColors:["50"],50:"E0F2F1"});e.definePalette("customGreen",o),e.theme("default").primaryPalette("customGreen",{"default":"500","hue-1":"50"}).accentPalette("teal"),e.theme("input","default").primaryPalette("green")}angular.module("app").config(e),e.$inject=["$mdThemingProvider","$locationProvider"]}(),function(){"use strict";angular.module("authService",[]).factory("Auth",["$http","$q","AuthToken",function(e,t,o){var r={};return r.login=function(t,r){return e.post("/api/login",{email:t,password:r}).success(function(e){return o.setToken(e.token),e})},r.logout=function(){o.setToken()},r.isLoggedIn=function(){return o.getToken()?!0:!1},r.getUser=function(){return o.getToken()?e.get("/api/me"):t.reject({message:"User has no token"})},r}]).factory("AuthToken",["$window",function(e){var t={};return t.getToken=function(){return e.localStorage.getItem("token")},t.setToken=function(t){t?e.localStorage.setItem("token",t):e.localStorage.removeItem("token")},t}]).factory("AuthInterceptor",["$q","$location","AuthToken",function(e,t,o){var r={};return r.request=function(e){var t=o.getToken();return t&&(e.headers["x-access-token"]=t),e},r}])}(),angular.module("DropDSC",[]).directive("draggable",["$document","Socket",function(e,t){return{restrict:"A",replace:!0,link:function(t,o,r){function a(e){var r=e.target.id;"svg"==r&&(r=""),t.stakeholder.onionlayer=r,y=e.pageY,x=e.pageX,o.css({top:y+"px",left:x+"px"}),t.stakeholder.x=x+"px",t.stakeholder.y=y+"px"}function n(){e.unbind("mousemove",a),e.unbind("mouseup",n)}o.on("mousedown",function(t){"stakeholder"==t.target.id.substring(0,11)&&(t.preventDefault(),e.bind("mousemove",a),e.bind("mouseup",n))})}}}]),function(){"use strict";function e(e,t,o,r,a,n,i){function s(t){e.use(t)}function l(e){u.inProcessing=!0,u.error="",r.login(e.email,e.password).success(function(e){a.localStorage.setItem("useremail",e.email),a.localStorage.setItem("userid",e.id),a.localStorage.setItem("nickname",e.nickname),u.setLang(e.language),r.getUser().then(function(e){u.user=e.data,i.errorMessage(n("translate")("WELCOME_SYSTEM")+": "+u.user.nickname),u.inProcessing=!1}),e.success?o.go("startproblem"):u.error=e.message})}function c(){r.logout(),o("init")}var u=this;u.inProcessing=!1,u.setLang=s,u.doLogout=c,u.doLogin=l,u.loggedIn=r.isLoggedIn(),t.$on("$routeChangeStart",function(){u.loggedIn=r.isLoggedIn(),r.getUser().then(function(e){u.user=e.data})})}angular.module("app").controller("loginController",e),e.$inject=["$translate","$rootScope","$state","Auth","$window","$filter","toastApp"]}(),function(){"use strict";angular.module("app").service("Socket",["$location","$timeout",function(e,t){this.socket=io(),this.on=function(e,o){this.socket&&this.socket.on(e,function(e){t(function(){o(e)})})},this.emit=function(e,t){this.socket&&this.socket.emit(e,t)},this.removeListener=function(e){this.socket&&this.socket.removeListener(e)}}])}();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImRzYy5hcHAuanMiLCJ0b2FzdC5zZXJ2aWNlLmpzIiwicm91dGVyLmFwcC5qcyIsImFwcC5kc2MubWluLmpzIiwibGFuZ3VhZ2UvdHJhbnNsYXRlLmNvbnRyb2xsZXIuanMiLCJwcm9ibGVtL2NhcmYuY29udHJvbGxlci5qcyIsInByb2JsZW0vY2hhdC5jb250cm9sbGVyLmpzIiwicHJvYmxlbS9jb2xsYWJvcmF0b3JzLmNvbnRyb2xsZXIuanMiLCJwcm9ibGVtL2RzY3Jlc3BvcnQuY29udHJvbGxlci5qcyIsInByb2JsZW0vZXZhbHVhdGlvbmZyYW1ld29yay5jb250cm9sbGVyLmpzIiwicHJvYmxlbS9tZW51LnByb2JsZW0uY29udHJvbGxlci5qcyIsInByb2JsZW0vcHJvYmxlbS5lZGl0LmNvbnRyb2xsZXIuanMiLCJwcm9ibGVtL3Byb2JsZW0uc2VydmljZS5qcyIsInByb2JsZW0vc2VtaW90aWNmcmFtZXdvcmsuZWRpdC5jb250cm9sbGVyLmpzIiwicHJvYmxlbS9zdGFrZWhvbGRlci5lZGl0LmNvbnRyb2xsZXIuanMiLCJwcm9ibGVtL3N0YXJ0LnByb2JsZW0uY29udHJvbGxlci5qcyIsInByb2JsZW0vdmFsdWVkZW50aWZpY2F0aW9uZnJhbWUuY29udHJvbGxlci5qcyIsInVzZXIvc2lnbnVwLmNvbnRyb2xsZXIuanMiLCJ1c2VyL3NpZ251cC5zZXJ2aWNlLmpzIiwiYXBwLmNvbmZpZy5qcyIsImF1dGguc2VydmljZS5qcyIsImRyYWcuZHNjLmpzIiwibG9naW4uY29udHJvbGxlci5qcyIsInNvY2tldC5zZXJ2aWNlLmpzIl0sIm5hbWVzIjpbImFuZ3VsYXIiLCJtb2R1bGUiLCJjb25maWciLCIkaHR0cFByb3ZpZGVyIiwiaW50ZXJjZXB0b3JzIiwicHVzaCIsInRvYXN0QXBwIiwiJG1kVG9hc3QiLCJlcnJvck1lc3NhZ2UiLCJ0aGlzIiwibWVzc2FnZSIsInNob3ciLCJjb250cm9sbGVyIiwiY29udHJvbGxlckFzIiwidGVtcGxhdGVVcmwiLCJhY3Rpb24iLCJoaWdobGlnaHRBY3Rpb24iLCJwb3NpdGlvbiIsImhpZGVEZWxheSIsInNlcnZpY2UiLCJzZWxmIiwiY2xvc2VUb2FzdCIsImhpZGUiLCJmYWN0b3J5IiwiJGluamVjdCIsInJvdXRlcyIsIiRzdGF0ZVByb3ZpZGVyIiwiJHVybFJvdXRlclByb3ZpZGVyIiwic3RhdGUiLCJ1cmwiLCJ2aWV3cyIsImNvbnRlbnQtdGFiIiwicHJvYmxlbS1kZXNjcmlwdGlvbiIsImRzYy1hcnRpZmFjdCIsIm90aGVyd2lzZSIsImluaXRMYW5ndWFnZSIsIiR0cmFuc2xhdGVQcm92aWRlciIsInVzZVN0YXRpY0ZpbGVzTG9hZGVyIiwicHJlZml4Iiwic3VmZml4IiwicHJlZmVycmVkTGFuZ3VhZ2UiLCJ1c2VTYW5pdGl6ZVZhbHVlU3RyYXRlZ3kiLCJ1c2VMb2NhbFN0b3JhZ2UiLCJsYW5ndWFnZUNvbnRyb2xsZXIiLCIkdHJhbnNsYXRlIiwic2V0TGFuZyIsImxhbmdLZXkiLCJ1c2UiLCJjaGFuZ2VMYW5ndWFnZSIsInJlc3RyaWN0IiwiZGlyZWN0aXZlIiwiY2FyZkNvbnRyb2xsZXIiLCIkd2luZG93IiwiU29ja2V0IiwicHJvYmxlbVNlcnZpY2UiLCJpbml0Q2FyZiIsImlkUHJvYmxlbSIsImxvY2FsU3RvcmFnZSIsImdldEl0ZW0iLCJnZXRjYXJmIiwic3VjY2VzcyIsImRhdGEiLCJsb2NhbFN0YWtlaG9sZGVycyIsInN0YWtlaG9sZGVycyIsInN0YWtlaG9sZGVyTGlzdCIsImNhcmZMaXN0IiwiY2FyZiIsImNhcmZQcmlvcml0eUxpc3QiLCJsb2NhbFByaW9yaXR5TGlzdCIsImluUHJvY2Vzc2luZyIsInJlc2V0Q2FyZiIsIl9pZCIsInBtcyIsInZhbHVlcyIsInByaW9yaXR5IiwicmVxdWlyZW1lbnQiLCJ2YWx1ZUxpc3QiLCJhZGRwbXN2YWx1ZSIsImxlbmd0aCIsImVtaXQiLCJyZW1vdmVDQVJGIiwiaW5kZXgiLCJvYmoiLCJzZWxlY3RQTVNWYWx1ZSIsInVuZGVmaW5lZCIsImZvckVhY2giLCJjYXJmUE1TVmFsdWUiLCJwbXNfdmFsdWUiLCJzZXRQcmlvdGl0eSIsImFkZExpc3RWYWx1ZSIsIm5ld3ZhbHVlIiwiaSIsInNwbGljZSIsImFkZFN0YWtlaG9sZGVyIiwibmV3U3Rha2Vob2xkZXIiLCJvbiIsImlkIiwiY2hhdERTQyIsIiR0aW1lb3V0IiwiJG1kU2lkZW5hdiIsIiRsb2ciLCJjbG9zZSIsInRoZW4iLCJkZWJ1ZyIsImluaXRIaXN0b3J5Q2hhdCIsIm5pY2tuYW1lIiwiZ2V0aGlzdG9yeWNoYXQiLCJoaXN0b3J5Y2hhdCIsInRtcCIsIkRhdGUiLCJ0aW1lIiwibXNuIiwibXNnIiwiZ2V0RGF0ZSIsImdldE1vbnRoIiwiZ2V0RnVsbFllYXIiLCJnZXRIb3VycyIsImdldE1pbnV0ZXMiLCJtZXNzYWdlcyIsInNob3dSZXBsYXkiLCJyZXBsYXkiLCJzZW5kTWVzc2FnZSIsImNoYXRtc2ciLCJuZXdtc2ciLCJ1c2VyTGlzdCIsImNvbnRyb2xsZXJDb2xsYWJvcmF0b3JzIiwiaW5pdENvbGxhYm9yYXRvcnMiLCJ1c2VyZW1haWwiLCJnZXRjb2xsYWJvcmF0b3JzIiwiY29sbGFib3JhdG9ycyIsInNlYXJjaENhbGxhYm9yYXRpb24iLCJlbWFpbCIsImFkZENvbGxhYm9yYXRvciIsImludml0ZSIsImlkcHJvYmxlbSIsInJlbW92ZUNvbGxhYm9yYXRvciIsInBlb3BsZSIsInJlbW92ZWNvbGxhYm9yYXRvcnMiLCJkc2NSZXBvcnRDb250cm9sbGVyIiwiYnVpZFJlcG9ydCIsImVsZW1lbnQiLCJodG1sIiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsInBkZiIsImpzUERGIiwiYWRkSFRNTCIsInBhZ2VzcGxpdCIsImRpc3Bvc2UiLCJzYXZlIiwiZXZhbHVhdGlvbmZyYW1ld29ya0NvbnRyb2xsZXIiLCJpbml0RXZhbHVhdGlvbiIsImdldGV2YWx1YXRpb24iLCJldmFsdWF0aW9uZnJhbWV3b3JrTGlzdCIsImV2YWx1YXRpb25mcmFtZXdvcmsiLCJzYXZlRGlzY3V0aW9uIiwic3Rha2Vob2xkZXIiLCJzZXRPcGVuRWRpdERpc2N1dGlvbiIsImN1cnJlbnRTdGFrZWhvbGRlciIsIm9wZW5FZGl0Iiwib25pb25sYXllciIsIm5hbWUiLCJkZXNjcmlwdGlvbiIsInByb2JsZW1zIiwic29sdXRpb25zIiwic3Rha2Vob2xkZXJPbmlvbiIsImNvbnNvbGUiLCJsb2ciLCJtZW51UHJvYmxlbWFDb250cm9sbGVyIiwiQXV0aCIsIiRzdGF0ZSIsIiRtZFV0aWwiLCJidWlsZFRvZ2dsZXIiLCJuYXZJRCIsImRlYm91bmNlRm4iLCJkZWJvdW5jZSIsInRvZ2dsZSIsImZvcm1BZGRDb2xsYWJvcmF0b3JzIiwiZ28iLCJlZGl0RGVzY3JpcHRpb25Qcm9ibGVtIiwiZG9Mb2dvdXQiLCJsb2dvdXQiLCJvcGVuQ2hhdCIsImVkaXRQcm9ibGVtYUNvbnRyb2xsZXIiLCJnZXRDdXJyZW50UHJvYmxlbSIsImdldHByb2JsZW0iLCJwcm9ibGVtIiwic2V0VXBkYXRlIiwidXBkYXRlVHJ1ZSIsInByb2JsZW1VcGRhdGUiLCJ1cGRhdGUiLCJzYXZlRGVzY3JpcHRpb24iLCJyZXRvcm5vIiwiJGluamVjdHJlIiwiJGh0dHAiLCIkbG9jYXRpb24iLCJuZXdwcm9ibGVtIiwicG9zdCIsIkFQSV9ST1VURV9ORVdQUk9CTEVNIiwiZ2V0IiwiQVBJX1JPVVRFX0dFVFBST0JMRU0iLCJnZXR1c2VycHJvYmxlbXMiLCJBUElfUk9VVEVfR0VUVVNFUlBST0JMRU1TIiwiQVBJX1JPVVRFX0dFVENPTExBQk9SQVRPUlMiLCJBUElfUk9VVEVfSU5WSVRFIiwiZ2V0b25pb24iLCJBUElfUk9VVEVfR0VUT05JT04iLCJBUElfUk9VVEVfR0VURVZBTFVBVElPTiIsImdldHNlbWlvdGljIiwiQVBJX1JPVVRFX0dFVFNFTUlPVElDRlJBTUVXT1JLIiwiQVBJX1JPVVRFX0dFVENBUkYiLCJyZW1vdmVwcm9ibGVtIiwiQVBJX1JPVVRFX1JFTU9WRVBST0JMRU0iLCJnZXRwcm9ibGVtc2NvbGxhYm9yYXRvciIsIkFQSV9ST1VURV9HRVRVU0VSUFJPQkxFTVNDT0xMQUJPUkFUT1IiLCJBUElfUk9VVEVfUkVNT1ZFQ09MTEFCT1JBVE9SIiwiQVBJX1JPVVRFX0dFVEhJU1RPUllDSEFUIiwic2VtaW90aWNmcmFtZXdvcmtDb250cm9sbGVyIiwiaW5pdFNlbWlvdGljRnJhbWV3b3JrIiwic2VtaW90aWNmcmFtZXdvcmsiLCJzYXZlU29jaWFsV29ybGQiLCJ0ZXh0IiwiZmxhZ1NhdmUiLCJzYXZlUHJhZ21hdGljIiwic2F2ZVNlbWFudGljIiwic2F2ZVN5bnRhdGljIiwic2F2ZUVtcGlyaWNhbCIsInNhdmVQaHlzaWNhbCIsInNvY2lhbHdvcmxkIiwicHJhZ21hdGljIiwic2VtaW90aWNyYW1ld29yayIsInN5bnRhdGljIiwiZW1waXJpY2FsIiwicGh5c2ljYWwiLCJzdGFrZWhvbGRlckNvbnRyb2xsZXIiLCJpbnRpdE9uaW9uIiwic2F2ZVN0YWtlaG9sZGVyIiwic2V0T3BlbkVkaXQiLCJkZWxQb3N0SXQiLCJhZGRQb3N0SXQiLCJlIiwiY2FtYWRhIiwieCIsInBhZ2VYIiwieSIsInBhZ2VZIiwiYWNlbmRlIiwic2V0QXR0cmlidXRlIiwiYXBhZ2EiLCJtb3ZlIiwic3R5bGUiLCJkaXNwbGF5Iiwic3RhcnRQcm9ibGVtQ29udHJvbGxlciIsIiRtZERpYWxvZyIsImdldFByb2JsZW1zIiwidXNlcmlkIiwicmVwbGFjZSIsInN1YnN0cmluZyIsInByb2JsZW1MaXN0IiwicHJvYmxlbUNvbGxhYm9yYXRvckxpc3QiLCJsb2dpbkluUHJvZ3Jlc3MiLCJkZWxldGVQcm9ibGVtIiwicHJvYmxlbWlkIiwicmV2b212ZVByb2JsZW0iLCJldiIsImNvbmZpcm0iLCJwYXJlbnQiLCJib2R5IiwidGl0bGUiLCJjb250ZW50IiwiYXJpYUxhYmVsIiwib2siLCJjYW5jZWwiLCJ0YXJnZXRFdmVudCIsInN0YXJ0TmV3UHJvYmxlbSIsImVkaXRQcm9ibGVtIiwic2V0SXRlbSIsImluaXRzb2NrZXRwcm9ibGVtIiwibmV3UHJvYmxlbSIsIkRpYWxvZ0NvbnRyb2xsZXIiLCIkc2NvcGUiLCJhZGROZXdQcm9ibGVtIiwidmFsdWVJZGVudGlmaWNhdGlvbkZyYW1lQ29udHJvbGxlciIsImluaXRWYWx1ZUlkZW50aWZpY2F0aW9uRnJhbWUiLCJrIiwic3VnZXN0aW9uVmFsdWVzQXJyYXkiLCJzdWdlc3Rpb25WYWx1ZXMiLCJqIiwibmV3VmFsdWVzIiwic2V0U3VnZ2VzdGlvblNob3ciLCJsZWF2ZVN1Z2dlc3Rpb25TaG93IiwicmVtb3ZlVmFsdWVJZGVudGljYXRpb24iLCJ2YWx1ZSIsIm5ld0xpc3QiLCJzZXRWYWx1ZUlkZW50aWNhdGlvbiIsInZhbHVlc0xpc3QiLCJzcGxpdCIsImZpbmRWYWx1ZSIsImxpc3QiLCJuZXd2YWx1ZXMiLCJzaWdudXBDb250cm9sbGVyIiwic2lnbnVwU2VydmljZSIsIkF1dGhUb2tlbiIsIiRmaWx0ZXIiLCIkc3RhdGVQYXJhbXMiLCJzYXZlVXNlciIsInVzZXIiLCJjcmVhdGUiLCJzZXRUb2tlbiIsInRva2VuIiwiZ2V0VXNlciIsImxhbmd1YWdlIiwicmVzY3VlUGFzc3dvcmQiLCJ1c2VyRW1haWwiLCJjaGFuZ2VQYXNzd29yZCIsIkFQSV9ST1VURV9VU0VSIiwiQVBJX1JPVVRFX1JFU0NVRVBBU1NXT1JEIiwibXl0b2tlblVSTCIsInNlYXJjaCIsIkFQSV9ST1VURV9TRVRORVdQQVNTV09SRCIsIm15dG9rZW4iLCJwYXNzd29yZCIsImFwcENvbmZpZyIsIiRtZFRoZW1pbmdQcm92aWRlciIsIiRsb2NhdGlvblByb3ZpZGVyIiwiY3VzdG9tR3JlZW5NYXAiLCJleHRlbmRQYWxldHRlIiwiY29udHJhc3REZWZhdWx0Q29sb3IiLCJjb250cmFzdERhcmtDb2xvcnMiLCI1MCIsImRlZmluZVBhbGV0dGUiLCJ0aGVtZSIsInByaW1hcnlQYWxldHRlIiwiZGVmYXVsdCIsImh1ZS0xIiwiYWNjZW50UGFsZXR0ZSIsIiRxIiwiYXV0aEZhY3RvcnkiLCJsb2dpbiIsImlzTG9nZ2VkSW4iLCJnZXRUb2tlbiIsInJlamVjdCIsImF1dGhUb2tlbkZhY3RvcnkiLCJyZW1vdmVJdGVtIiwiaW50ZXJjZXB0b3JGYWN0b3J5IiwicmVxdWVzdCIsImhlYWRlcnMiLCIkZG9jdW1lbnQiLCJsaW5rIiwic2NvcGUiLCJhdHRyIiwibW91c2Vtb3ZlIiwiZXZlbnQiLCJpZF9kaXYiLCJ0YXJnZXQiLCJjc3MiLCJ0b3AiLCJsZWZ0IiwibW91c2V1cCIsInVuYmluZCIsInByZXZlbnREZWZhdWx0IiwiYmluZCIsImxvZ2luQ29udHJvbGxlciIsIiRyb290U2NvcGUiLCJkb0xvZ2luIiwiZXJyb3IiLCJsb2dnZWRJbiIsIiRvbiIsInNvY2tldCIsImlvIiwiZXZlbnROYW1lIiwiY2FsbGJhY2siLCJyZW1vdmVMaXN0ZW5lciJdLCJtYXBwaW5ncyI6IkNBR0EsV0FDQSxZQUVBQSxTQUNBQyxPQUFBLE9BQUEsZUFBQSxjQUFBLG1CQUFBLFVBQUEsY0FBQSxZQUFBLGFBQUEsWUFBQSxZQUFBLDJCQUNBQyxRQUFBLGdCQUFBLFNBQUFDLEdBQ0FBLEVBQUFDLGFBQUFDLEtBQUEseUJDTkEsV0FFQSxZQWNBLFNBQUFDLEdBQUFDLEdBT0EsUUFBQUMsR0FBQUEsR0FDQUMsS0FBQUMsUUFBQUYsRUFDQUQsRUFBQUksTUFFQUMsV0FBQSxrQkFDQUMsYUFBQSxLQUNBQyxZQUFBLDRCQUNBQyxPQUFBLEtBQ0FDLGlCQUFBLEVBQ0FDLFNBQUEsV0FDQUMsVUFBQSxNQWhCQSxHQUFBQyxJQUNBVCxRQUFBLEdBQ0FGLGFBQUFBLEVBRUEsT0FBQVcsR0FqQkFuQixRQUFBQyxPQUFBLG1CQUNBVyxXQUFBLG1CQUFBLFdBQUEsV0FBQSxTQUFBTCxFQUFBRCxHQUNBLEdBQUFjLEdBQUFYLElBQ0FXLEdBQUFWLFFBQUFKLEVBQUFJLFFBQ0FVLEVBQUFDLFdBQUEsV0FDQWQsRUFBQWUsV0FHQUMsUUFBQSxXQUFBakIsR0FFQUEsRUFBQWtCLFNBQUEsZUNkQSxXQUNBLFlBTUEsU0FBQUMsR0FBQUMsRUFBQUMsR0FFQUQsRUFBQUUsTUFBQSxRQUNBQyxJQUFBLElBQ0FmLFlBQUEsNEJBQ0FGLFdBQUEsMEJB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KiBDcmVhdGVkIGJ5IEpPU0VWQUxERVJMRUkgb24gMjUvMDYvMjAxNS5cclxuICovXHJcbihmdW5jdGlvbiAoKSB7XHJcbiAgICBcInVzZSBzdHJpY3RcIjtcclxuXHJcbmFuZ3VsYXJcclxuICAgIC5tb2R1bGUoJ2FwcCcsWyd0b2FzdFNlcnZpY2UnLCd0ZXh0QW5ndWxhcicsJ2x1ZWdnLmRpcmVjdGl2ZXMnLCAnRHJvcERTQycsJ2F1dGhTZXJ2aWNlJywndWkucm91dGVyJywnbmdNYXRlcmlhbCcsJ25nTWRJY29ucycsJ25nQ29va2llcycsJ3Bhc2NhbHByZWNodC50cmFuc2xhdGUnXSlcclxuICAgICAgICAuY29uZmlnKGZ1bmN0aW9uKCRodHRwUHJvdmlkZXIpIHtcclxuICAgICAgICAgICAgJGh0dHBQcm92aWRlci5pbnRlcmNlcHRvcnMucHVzaCgnQXV0aEludGVyY2VwdG9yJyk7XHJcbiAgICAgICAgfSlcclxuXHJcbn0pKCk7XHJcblxyXG5cclxuIiwiLyoqXHJcbiAqIENyZWF0ZWQgYnkgSk9TRVZBTERFUkxFSSBvbiAyNy8wNi8yMDE1LlxyXG4gKi9cclxuKGZ1bmN0aW9uKCl7XHJcblxyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICAgIGFuZ3VsYXIubW9kdWxlKCd0b2FzdFNlcnZpY2UnLFtdKVxyXG4gICAgICAgIC5jb250cm9sbGVyKCd0b2FzdENvbnRyb2xsZXInLCBmdW5jdGlvbigkbWRUb2FzdCx0b2FzdEFwcCkge1xyXG4gICAgICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICAgICAgICAgIHNlbGYubWVzc2FnZSA9ICB0b2FzdEFwcC5tZXNzYWdlO1xyXG4gICAgICAgICAgICBzZWxmLmNsb3NlVG9hc3QgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICRtZFRvYXN0LmhpZGUoKTtcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9KVxyXG4gICAgICAgIC5mYWN0b3J5KCAndG9hc3RBcHAnLCB0b2FzdEFwcCApO1xyXG5cclxuICAgIHRvYXN0QXBwLiRpbmplY3QgPSBbICckbWRUb2FzdCcgXTtcclxuXHJcbiAgICBmdW5jdGlvbiB0b2FzdEFwcCAoJG1kVG9hc3QpIHtcclxuICAgICAgICB2YXIgc2VydmljZSA9IHtcclxuICAgICAgICAgICAgbWVzc2FnZTogJycsXHJcbiAgICAgICAgICAgIGVycm9yTWVzc2FnZTogZXJyb3JNZXNzYWdlXHJcbiAgICAgICAgfTtcclxuICAgICAgICByZXR1cm4gc2VydmljZTtcclxuXHJcbiAgICAgICAgZnVuY3Rpb24gZXJyb3JNZXNzYWdlKGVycm9yTWVzc2FnZSkge1xyXG4gICAgICAgICAgICB0aGlzLm1lc3NhZ2UgPSBlcnJvck1lc3NhZ2U7XHJcbiAgICAgICAgICAgICRtZFRvYXN0LnNob3coXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29udHJvbGxlcjogJ3RvYXN0Q29udHJvbGxlcicsXHJcbiAgICAgICAgICAgICAgICAgICAgY29udHJvbGxlckFzOiAndm0nLFxyXG4gICAgICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAndmlld3MvcGFnZXMvZHNjdG9hc3QuaHRtbCcsXHJcbiAgICAgICAgICAgICAgICAgICAgYWN0aW9uOiBcIk9LXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgaGlnaGxpZ2h0QWN0aW9uOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uOiBcInRvcCBsZWZ0XCIsXHJcbiAgICAgICAgICAgICAgICAgICAgaGlkZURlbGF5OiA1MDAwXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxufSkoKTtcclxuXHJcblxyXG5cclxuXHJcblxyXG4iLCIvKipcclxuICogQ3JlYXRlZCBieSBKT1NFVkFMREVSTEVJIG9uIDI1LzA2LzIwMTUuXHJcbiAqL1xyXG4oZnVuY3Rpb24oKXtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgICBhbmd1bGFyXHJcbiAgICAgICAgLm1vZHVsZSgnYXBwJylcclxuICAgICAgICAuY29uZmlnKHJvdXRlcyk7XHJcblxyXG4gICAgZnVuY3Rpb24gcm91dGVzKCRzdGF0ZVByb3ZpZGVyLCAkdXJsUm91dGVyUHJvdmlkZXIpIHtcclxuXHJcbiAgICAgICAgJHN0YXRlUHJvdmlkZXIuc3RhdGUoJ2luaXQnLCB7XHJcbiAgICAgICAgICAgIHVybDogJy8nLFxyXG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ3ZpZXdzL3BhZ2VzL2luaXRwYWdlLmh0bWwnLFxyXG4gICAgICAgICAgICBjb250cm9sbGVyOiAnbG9naW5Db250cm9sbGVyIGFzIHZtJ1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5zdGF0ZSgnaW5pdC5sb2dpbicsIHtcclxuICAgICAgICAgICAgICAgIHVybDogJ2xvZ2luJyxcclxuICAgICAgICAgICAgICAgIHZpZXdzOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgJ2NvbnRlbnQtdGFiJzoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ3ZpZXdzL3BhZ2VzL3VzZXJsb2dpbi5odG1sJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29udHJvbGxlcjogJ2xvZ2luQ29udHJvbGxlciBhcyB2bSdcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5zdGF0ZSgnaW5pdC5zaWdudXAnLCB7XHJcbiAgICAgICAgICAgICAgICB1cmw6ICdzaWdudXAnLFxyXG4gICAgICAgICAgICAgICAgdmlld3M6IHtcclxuICAgICAgICAgICAgICAgICAgICAnY29udGVudC10YWInOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAndmlld3MvcGFnZXMvc2lnbnVwLmh0bWwnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb250cm9sbGVyOiAnc2lnbnVwQ29udHJvbGxlciBhcyB2bSdcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5zdGF0ZSgnaW5pdC5yZXNjdWVwYXNzd29yZCcsIHtcclxuICAgICAgICAgICAgICAgIHVybDogJ3Jlc2N1ZXBhc3N3b3JkJyxcclxuICAgICAgICAgICAgICAgIHZpZXdzOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgJ2NvbnRlbnQtdGFiJzoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ3ZpZXdzL3BhZ2VzL3Jlc2N1ZXBhc3N3b3JkLmh0bWwnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb250cm9sbGVyOiAnc2lnbnVwQ29udHJvbGxlciBhcyB2bSdcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5zdGF0ZSgnc3RhcnRwcm9ibGVtJywge1xyXG4gICAgICAgICAgICAgICAgdXJsOiAnL3N0YXJ0cHJvYmxlbScsXHJcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ3ZpZXdzL3BhZ2VzL3N0YXJ0cHJvYmxlbS5odG1sJyxcclxuICAgICAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdzdGFydFByb2JsZW1Db250cm9sbGVyIGFzIHZtJ1xyXG5cclxuICAgICAgICAgICAgfSlcclxuXHJcbiAgICAgICAgICAgIC5zdGF0ZSgnbmV3cGFzc3dvcmQnLCB7XHJcbiAgICAgICAgICAgICAgICB1cmw6ICcvbmV3cGFzc3dvcmQvOm15dG9rZW4nLFxyXG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICd2aWV3cy9wYWdlcy9uZXdwYXNzd29yZC5odG1sJyxcclxuICAgICAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdzaWdudXBDb250cm9sbGVyIGFzIHZtJyxcclxuICAgICAgICAgICAgfSlcclxuXHJcblxyXG4gICAgICAgICAgICAuc3RhdGUoJ3Byb2JsZW0nLCB7XHJcbiAgICAgICAgICAgICAgICB1cmw6ICcvcHJvYmxlbScsXHJcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ3ZpZXdzL3BhZ2VzL3Byb2JsZW0uaHRtbCcsXHJcbiAgICAgICAgICAgICAgICBjb250cm9sbGVyOiAnbWVudVByb2JsZW1Db250cm9sbGVyIGFzIHZtJ1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAuc3RhdGUoJ3Byb2JsZW0uZHNjcmVwb3J0Jywge1xyXG4gICAgICAgICAgICAgICAgdXJsOiAnL2RzY3JlcG9ydCcsXHJcbiAgICAgICAgICAgICAgICB2aWV3czoge1xyXG4gICAgICAgICAgICAgICAgICAgICdwcm9ibGVtLWRlc2NyaXB0aW9uJzoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ3ZpZXdzL3BhZ2VzL2RzY3JlcG9ydC5odG1sJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29udHJvbGxlcjogJ2RzY1JlcG9ydENvbnRyb2xsZXIgYXMgdm0nXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAuc3RhdGUoJ3Byb2JsZW0uZGVzY3JpcHRpb24nLCB7XHJcbiAgICAgICAgICAgICAgICB1cmw6ICcvZGVzY3JpcHRpb24nLFxyXG4gICAgICAgICAgICAgICAgdmlld3M6IHtcclxuICAgICAgICAgICAgICAgICAgICAncHJvYmxlbS1kZXNjcmlwdGlvbic6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICd2aWV3cy9wYWdlcy9wcm9ibGVtZGVzY3JpcHRpb24uaHRtbCcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdlZGl0UHJvYmxlbUNvbnRyb2xsZXIgYXMgdm0nXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAuc3RhdGUoJ3Byb2JsZW0uY29sbGFib3JhdG9ycycsIHtcclxuICAgICAgICAgICAgICAgIHVybDogJy9jb2xsYWJvcmF0b3JzJyxcclxuICAgICAgICAgICAgICAgIHZpZXdzOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgJ3Byb2JsZW0tZGVzY3JpcHRpb24nOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAndmlld3MvcGFnZXMvY29sbGFib3JhdG9ycy5odG1sJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29udHJvbGxlcjogJ2NvbnRyb2xsZXJDb2xsYWJvcmF0b3JzIGFzIHZtJ1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLnN0YXRlKCdwcm9ibGVtLnN0YWtlaG9sZGVycycsIHtcclxuICAgICAgICAgICAgICAgIHVybDogJ3N0YWtlaG9sZGVycycsXHJcbiAgICAgICAgICAgICAgICB2aWV3czoge1xyXG4gICAgICAgICAgICAgICAgICAgICdkc2MtYXJ0aWZhY3QnOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAndmlld3MvcGFnZXMvc3Rha2Vob2xkZXJzLmh0bWwnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb250cm9sbGVyOiAnc3Rha2Vob2xkZXJDb250cm9sbGVyIGFzIHZtJ1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLnN0YXRlKCdwcm9ibGVtLmV2YWx1YXRpb25mcmFtZXdvcmsnLCB7XHJcbiAgICAgICAgICAgICAgICB1cmw6ICdldmFsdWF0aW9uZnJhbWV3b3JrJyxcclxuICAgICAgICAgICAgICAgIHZpZXdzOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgJ2RzYy1hcnRpZmFjdCc6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICd2aWV3cy9wYWdlcy9ldmFsdWF0aW9uZnJhbWV3b3JrLmh0bWwnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb250cm9sbGVyOiAnZXZhbHVhdGlvbmZyYW1ld29ya0NvbnRyb2xsZXIgYXMgdm0nXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KVxyXG5cclxuICAgICAgICAgICAgLnN0YXRlKCdwcm9ibGVtLnNlbWlvdGljZnJhbWV3b3JrJywge1xyXG4gICAgICAgICAgICAgICAgdXJsOiAnc2VtaW90aWNmcmFtZXdvcmsnLFxyXG4gICAgICAgICAgICAgICAgdmlld3M6IHtcclxuICAgICAgICAgICAgICAgICAgICAnZHNjLWFydGlmYWN0Jzoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ3ZpZXdzL3BhZ2VzL3NlbWlvdGljZnJhbWV3b3JrLmh0bWwnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb250cm9sbGVyOiAnc2VtaW90aWNmcmFtZXdvcmtDb250cm9sbGVyIGFzIHZtJ1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLnN0YXRlKCdwcm9ibGVtLmNhcmYnLCB7XHJcbiAgICAgICAgICAgICAgICB1cmw6ICdjYXJmJyxcclxuICAgICAgICAgICAgICAgIHZpZXdzOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgJ2RzYy1hcnRpZmFjdCc6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICd2aWV3cy9wYWdlcy9jYXJmLmh0bWwnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb250cm9sbGVyOiAnY2FyZkNvbnRyb2xsZXIgYXMgdm0nXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAuc3RhdGUoJ3Byb2JsZW0udmlmJywge1xyXG4gICAgICAgICAgICAgICAgdXJsOiAndmlmJyxcclxuICAgICAgICAgICAgICAgIHZpZXdzOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgJ2RzYy1hcnRpZmFjdCc6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICd2aWV3cy9wYWdlcy92aWYuaHRtbCcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRyb2xsZXI6ICd2YWx1ZUlkZW50aWZpY2F0aW9uRnJhbWVDb250cm9sbGVyIGFzIHZtJ1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgJHVybFJvdXRlclByb3ZpZGVyLm90aGVyd2lzZSgnL2xvZ2luJyk7XHJcbiAgICB9XHJcblxyXG59KSgpO1xyXG4iLG51bGwsIi8qKlxyXG4gKiBDcmVhdGVkIGJ5IEpPU0VWQUxERVJMRUkgb24gMTkvMDYvMjAxNS5cclxuICovXHJcbihmdW5jdGlvbigpe1xyXG5cclxuJ3VzZSBzdHJpY3QnO1xyXG5cclxuICAgIGFuZ3VsYXJcclxuICAgIC5tb2R1bGUoJ2FwcCcpXHJcbiAgICAuY29uZmlnKGluaXRMYW5ndWFnZSlcclxuICAgIC5jb250cm9sbGVyKCdsYW5ndWFnZUNvbnRyb2xsZXInLGxhbmd1YWdlQ29udHJvbGxlcilcclxuICAgIC5kaXJlY3RpdmUoJ2NoYW5nZUxhbmd1YWdlJyxjaGFuZ2VMYW5ndWFnZSk7XHJcblxyXG5pbml0TGFuZ3VhZ2UuJGluamVjdCA9IFsnJHRyYW5zbGF0ZVByb3ZpZGVyJ107XHJcbmxhbmd1YWdlQ29udHJvbGxlci4kaW5qZWN0ID0gWyckdHJhbnNsYXRlJ107XHJcblxyXG5mdW5jdGlvbiBpbml0TGFuZ3VhZ2UgKCR0cmFuc2xhdGVQcm92aWRlcikge1xyXG4gICAgICAgICR0cmFuc2xhdGVQcm92aWRlci51c2VTdGF0aWNGaWxlc0xvYWRlcih7XHJcbiAgICAgICAgICAgIHByZWZpeDogJ2FwcC9sYW5ndWFnZS9sYW5nLScsXHJcbiAgICAgICAgICAgIHN1ZmZpeDogJy5qc29uJ1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgICR0cmFuc2xhdGVQcm92aWRlci5wcmVmZXJyZWRMYW5ndWFnZSgnZW4nKTtcclxuICAgICAgICAkdHJhbnNsYXRlUHJvdmlkZXIudXNlU2FuaXRpemVWYWx1ZVN0cmF0ZWd5KCdlc2NhcGVkJyk7XHJcbiAgICAgICAgJHRyYW5zbGF0ZVByb3ZpZGVyLnVzZUxvY2FsU3RvcmFnZSgpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBsYW5ndWFnZUNvbnRyb2xsZXIgKCR0cmFuc2xhdGUpIHtcclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgIHNlbGYuc2V0TGFuZyA9IHNldExhbmc7XHJcbiAgICBmdW5jdGlvbiBzZXRMYW5nKGxhbmdLZXkpIHtcclxuICAgICAgICAgICAgJHRyYW5zbGF0ZS51c2UobGFuZ0tleSk7XHJcbiAgICB9XHJcbn1cclxuXHJcblxyXG5cclxuXHJcbmZ1bmN0aW9uIGNoYW5nZUxhbmd1YWdlKCl7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIHRlbXBsYXRlVXJsIDogXCJhcHAvbGFuZ3VhZ2UvY2hhbmdlTGFuZ3VhZ2UuaHRtbFwiLFxyXG4gICAgICAgIHJlc3RyaWN0OiBcIkVcIlxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcblxyXG59KSgpOyIsIi8qKlxyXG4gKiBDcmVhdGVkIGJ5IEpPU0VWQUxERVJMRUkgb24gMTQvMDcvMjAxNS5cclxuICovXHJcbihmdW5jdGlvbigpe1xyXG5cclxuICAgIFwidXNlIHN0cmljdFwiO1xyXG5cclxuICAgIGFuZ3VsYXIubW9kdWxlKCdhcHAnKVxyXG4gICAgICAgIC5jb250cm9sbGVyKFwiY2FyZkNvbnRyb2xsZXJcIixjYXJmQ29udHJvbGxlcik7XHJcblxyXG4gICAgZnVuY3Rpb24gY2FyZkNvbnRyb2xsZXIoJHdpbmRvdyxTb2NrZXQscHJvYmxlbVNlcnZpY2UsdG9hc3RBcHApe1xyXG5cclxuICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICAgICAgc2VsZi5pZFByb2JsZW0gPSBcIlwiO1xyXG4gICAgICAgIHNlbGYuaW5Qcm9jZXNzaW5nID0gdHJ1ZTtcclxuICAgICAgICBzZWxmLnZhbHVlTGlzdCA9IFtdO1xyXG4gICAgICAgIHNlbGYuc3Rha2Vob2xkZXJMaXN0ID0gW107XHJcbiAgICAgICAgc2VsZi5sb2NhbFN0YWtlaG9sZGVycyA9IFtdO1xyXG4gICAgICAgIHNlbGYuYWRkcG1zdmFsdWUgPSBhZGRwbXN2YWx1ZTtcclxuICAgICAgICBzZWxmLnJlbW92ZUNBUkYgPSByZW1vdmVDQVJGO1xyXG4gICAgICAgIHNlbGYuc2VsZWN0UE1TVmFsdWUgPSBzZWxlY3RQTVNWYWx1ZTtcclxuICAgICAgICBzZWxmLnNldFByaW90aXR5ID0gc2V0UHJpb3RpdHk7XHJcbiAgICAgICAgc2VsZi5hZGRMaXN0VmFsdWUgPSBhZGRMaXN0VmFsdWU7XHJcbiAgICAgICAgc2VsZi5hZGRTdGFrZWhvbGRlciA9IGFkZFN0YWtlaG9sZGVyO1xyXG4gICAgICAgIHNlbGYuY2FyZiA9IHtcclxuICAgICAgICAgICAgcG1zOiBcIlwiLFxyXG4gICAgICAgICAgICB2YWx1ZXM6IFtdLFxyXG4gICAgICAgICAgICBwcmlvcml0eTogXCJcIixcclxuICAgICAgICAgICAgcmVxdWlyZW1lbnQ6IFwiXCIsXHJcbiAgICAgICAgICAgIHN0YWtlaG9sZGVyczogW11cclxuICAgICAgICAgICAgfTtcclxuICAgICAgICBzZWxmLmluaXRDYXJmID0gaW5pdENhcmY7XHJcbiAgICAgICAgc2VsZi5jYXJmTGlzdCA9IFtdO1xyXG4gICAgICAgIHNlbGYuY2FyZlByaW9yaXR5TGlzdCA9IFtdO1xyXG5cclxuICAgICAgICBmdW5jdGlvbiBpbml0Q2FyZigpe1xyXG4gICAgICAgICAgICBzZWxmLmlkUHJvYmxlbSA9ICR3aW5kb3cubG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3Byb2JsZW1pZCcpO1xyXG4gICAgICAgICAgICBwcm9ibGVtU2VydmljZS5nZXRjYXJmKHNlbGYuaWRQcm9ibGVtKVxyXG4gICAgICAgICAgICAgICAgLnN1Y2Nlc3MoZnVuY3Rpb24oZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKGRhdGEuc3VjY2Vzcykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmxvY2FsU3Rha2Vob2xkZXJzID0gZGF0YS5zdGFrZWhvbGRlcnM7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuc3Rha2Vob2xkZXJMaXN0ID0gc2VsZi5sb2NhbFN0YWtlaG9sZGVycztcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5jYXJmTGlzdCA9IGRhdGEuY2FyZjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5jYXJmUHJpb3JpdHlMaXN0ID0gc2VsZi5sb2NhbFByaW9yaXR5TGlzdDtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgc2VsZi5pblByb2Nlc3NpbmcgPSBmYWxzZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIHJlc2V0Q2FyZigpe1xyXG4gICAgICAgICAgICBzZWxmLmNhcmYgPSB7XHJcbiAgICAgICAgICAgICAgICBfaWQ6IFwiXCIsXHJcbiAgICAgICAgICAgICAgICBwbXM6IFwiXCIsXHJcbiAgICAgICAgICAgICAgICB2YWx1ZXM6IFtdLFxyXG4gICAgICAgICAgICAgICAgcHJpb3JpdHk6IFwiXCIsXHJcbiAgICAgICAgICAgICAgICByZXF1aXJlbWVudDogXCJcIixcclxuICAgICAgICAgICAgICAgIHN0YWtlaG9sZGVyczogW11cclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgc2VsZi52YWx1ZUxpc3QgPSBbXTtcclxuXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBTb2NrZXQub24oJ29uQnJvYWRjYXN0Q0FSRmFkZCcsIGZ1bmN0aW9uIChjYXJmKSB7XHJcbiAgICAgICAgICAgIHNlbGYuY2FyZkxpc3QucHVzaChjYXJmKTtcclxuICAgICAgICAgICAgcmVzZXRDYXJmKCk7XHJcbiAgICAgICAgICAgIHNlbGYuc3Rha2Vob2xkZXJMaXN0ID0gc2VsZi5sb2NhbFN0YWtlaG9sZGVycztcclxuICAgICAgICAgICAgc2VsZi5jYXJmUHJpb3JpdHlMaXN0ID0gc2VsZi5sb2NhbFByaW9yaXR5TGlzdDtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgZnVuY3Rpb24gYWRkcG1zdmFsdWUoY2FyZil7XHJcblxyXG4gICAgICAgICAgICBpZihjYXJmLnBtcyA9PT0gXCJcIil7XHJcbiAgICAgICAgICAgICAgICB0b2FzdEFwcC5lcnJvck1lc3NhZ2UoXCJTZWxlY3QgUE1TXCIpO1xyXG4gICAgICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgICAgIGlmKGNhcmYudmFsdWVzLmxlbmd0aCA8IDEgKXtcclxuICAgICAgICAgICAgICAgICAgICB0b2FzdEFwcC5lcnJvck1lc3NhZ2UoXCJTZWxlY3Qgb25lIG9yIG1vcmUgVmFsdWVcIik7XHJcbiAgICAgICAgICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgICAgICAgICBpZihjYXJmLnN0YWtlaG9sZGVycy5sZW5ndGggPCAxKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdG9hc3RBcHAuZXJyb3JNZXNzYWdlKFwiU2VsZWN0IG9uZSBvciBtb3JlIFN0YWtlaG9sZGVyKHMpXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZihjYXJmLnByaW9yaXR5ID09PSBcIlwiKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvYXN0QXBwLmVycm9yTWVzc2FnZShcIlNlbGVjdCBwcmlvcml0eSBbTG93LCBNZWRpdW0gb3IgSGlnaF1cIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgU29ja2V0LmVtaXQoJ2Jyb2FkY2FzdENBUkZhZGQnLCBjYXJmKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuc3Rha2Vob2xkZXJMaXN0ID0gW107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmNhcmZQcmlvcml0eUxpc3QgPSBbXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIFNvY2tldC5vbignb25Ccm9hZGNhc3RDQVJGcmVtb3ZlJywgZnVuY3Rpb24gKGlkKSB7XHJcbiAgICAgICAgICAgIHNlbGYuY2FyZkxpc3Quc3BsaWNlKGlkLDEpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBmdW5jdGlvbiByZW1vdmVDQVJGKGluZGV4LGNhcmYpe1xyXG4gICAgICAgICAgICB2YXIgb2JqID0ge1xyXG4gICAgICAgICAgICAgICAgaW5kZXg6IGluZGV4LFxyXG4gICAgICAgICAgICAgICAgY2FyZjogY2FyZlxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICBTb2NrZXQuZW1pdCgnYnJvYWRjYXN0Q0FSRnJlbW92ZScsIG9iaik7XHJcbiAgICAgICAgfVxyXG5cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gc2VsZWN0UE1TVmFsdWUocG1zKXtcclxuICAgICAgICAgICAgaWYocG1zICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgIGFuZ3VsYXIuZm9yRWFjaChzZWxmLmNhcmZQTVNWYWx1ZSwgZnVuY3Rpb24gKHBtc192YWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChwbXNfdmFsdWUucG1zID09IHBtcykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmNhcmYudmFsdWVzID0gW107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYudmFsdWVMaXN0ID0gcG1zX3ZhbHVlLnZhbHVlcztcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmdW5jdGlvbiBzZXRQcmlvdGl0eShwcmlvcml0eSl7XHJcbiAgICAgICAgICAgIHNlbGYuY2FyZi5wcmlvcml0eSA9IHByaW9yaXR5O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gYWRkTGlzdFZhbHVlKG5ld3ZhbHVlKXtcclxuICAgICAgICAgICBpZihzZWxmLmNhcmYudmFsdWVzLmxlbmd0aCA9PT0gMCl7XHJcbiAgICAgICAgICAgICAgICBzZWxmLmNhcmYudmFsdWVzLnB1c2gobmV3dmFsdWUpO1xyXG4gICAgICAgICAgICB9ZWxzZSB7XHJcbiAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc2VsZi5jYXJmLnZhbHVlcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgaWYgKG5ld3ZhbHVlID09IHNlbGYuY2FyZi52YWx1ZXNbaV0pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmNhcmYudmFsdWVzLnNwbGljZShpLCAxKTtcclxuICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgc2VsZi5jYXJmLnZhbHVlcy5wdXNoKG5ld3ZhbHVlKTtcclxuICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmdW5jdGlvbiBhZGRTdGFrZWhvbGRlcihuZXdTdGFrZWhvbGRlcil7XHJcbiAgICAgICAgICAgIGlmKHNlbGYuY2FyZi5zdGFrZWhvbGRlcnMubGVuZ3RoID09PSAwKXtcclxuICAgICAgICAgICAgICAgIHNlbGYuY2FyZi5zdGFrZWhvbGRlcnMucHVzaChuZXdTdGFrZWhvbGRlcik7XHJcbiAgICAgICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICAgICAgZm9yKHZhciBpPTA7IGkgPCBzZWxmLmNhcmYuc3Rha2Vob2xkZXJzLmxlbmd0aDsgaSsrKXtcclxuICAgICAgICAgICAgICAgICAgICBpZihuZXdTdGFrZWhvbGRlciA9PSBzZWxmLmNhcmYuc3Rha2Vob2xkZXJzW2ldKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5jYXJmLnN0YWtlaG9sZGVycy5zcGxpY2UoaSwxKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHNlbGYuY2FyZi5zdGFrZWhvbGRlcnMucHVzaChuZXdTdGFrZWhvbGRlcik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHNlbGYubG9jYWxQcmlvcml0eUxpc3QgPSBbJ0xvdycsICdNZWRpdW0nLCdIaWdoJ107XHJcblxyXG4gICAgICAgIHNlbGYuY2FyZlBNU1ZhbHVlID0gW1xyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIFwicG1zXCI6IFwiSW50ZXJhY3Rpb25cIixcclxuICAgICAgICAgICAgICAgICAgICBcInZhbHVlc1wiOiBbXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiSWRlbnRpdHlcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgXCJOb3Jtc1wiXHJcbiAgICAgICAgICAgICAgICAgICAgXVxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBcInBtc1wiOiBcIkFzc29jaWF0aW9uXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgXCJ2YWx1ZXNcIjogW1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBcIkNvbnZlcnNhdGlvblwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBcIkdyb3Vwc1wiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBcIlJlbGF0aW9uc2hpcFwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBcIlRydXN0XCJcclxuICAgICAgICAgICAgICAgICAgICBdXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIFwicG1zXCI6IFwiTGVhcm5pbmdcIixcclxuICAgICAgICAgICAgICAgICAgICBcInZhbHVlc1wiOiBbXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiTWV0YS1jb21tdW5pY2F0aW9uXCJcclxuICAgICAgICAgICAgICAgICAgICBdXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIFwicG1zXCI6IFwiUGxheVwiLFxyXG4gICAgICAgICAgICAgICAgICAgIFwidmFsdWVzXCI6IFtcclxuICAgICAgICAgICAgICAgICAgICAgICAgXCJBZXN0aGV0aWNzXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiRW1vdGlvbiBhbmQgQWZmZWN0aW9uXCJcclxuICAgICAgICAgICAgICAgICAgICBdXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIFwicG1zXCI6IFwiUHJvdGVjdGlvblwiLFxyXG4gICAgICAgICAgICAgICAgICAgIFwidmFsdWVzXCI6IFtcclxuICAgICAgICAgICAgICAgICAgICAgICAgXCJJbmZvcm1lZCBjb25zZXJ0XCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiUmVwdXRhdGlvblwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBcIlNlY3VyaXR5XCJcclxuICAgICAgICAgICAgICAgICAgICBdXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIFwicG1zXCI6IFwiRXhwbG9pdGF0aW9uXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgXCJ2YWx1ZXNcIjogW1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBcIkFjY2Vzc2liaWxpdHlcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgXCJPYmplY3RcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgXCJQcm9wZXJ0eSAob3duZXJzaGlwKVwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBcIlVzYWJpbGl0eVwiXHJcbiAgICAgICAgICAgICAgICAgICAgXVxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBcInBtc1wiOiBcIlRlcG9yYWxpdHlcIixcclxuICAgICAgICAgICAgICAgICAgICBcInZhbHVlc1wiOiBbXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiQXZhaWxhYmlsaXR5XCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiQXdhcmVuZXNzXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiUHJlc2VuY2VcIlxyXG4gICAgICAgICAgICAgICAgICAgIF1cclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgXCJwbXNcIjogXCJUZXJyaXRvcmlhbGl0eVwiLFxyXG4gICAgICAgICAgICAgICAgICAgIFwidmFsdWVzXCI6IFtcclxuICAgICAgICAgICAgICAgICAgICAgICAgXCJQb3J0YWJpbGl0eVwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBcIlByaXZhY3lcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgXCJTY2FsYWJpbGl0eVwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBcIlZpc2liaWxpdHlcIlxyXG4gICAgICAgICAgICAgICAgICAgIF1cclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgXCJwbXNcIjogXCJDbGFzc2lmaWNhdGlvblwiLFxyXG4gICAgICAgICAgICAgICAgICAgIFwidmFsdWVzXCI6IFtcclxuICAgICAgICAgICAgICAgICAgICAgICAgXCJBdXRvbm9teVwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBcIkNvbGxhYm9yYXRpb25cIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgXCJTaGFyaW5nXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiQWRhcHRhYmlsaXR5XCJcclxuICAgICAgICAgICAgICAgICAgICBdXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIFwicG1zXCI6IFwiU3Vic2lzdGVuY2VcIixcclxuICAgICAgICAgICAgICAgICAgICBcInZhbHVlc1wiOiBbXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiUmVjaXByb2NpdHlcIlxyXG4gICAgICAgICAgICAgICAgICAgIF1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgXTtcclxuICAgIH1cclxuXHJcbn0pKCk7IiwiLyoqXHJcbiAqIENyZWF0ZWQgYnkgSk9TRVZBTERFUkxFSSBvbiAxNS8wNy8yMDE1LlxyXG4gKi9cclxuKGZ1bmN0aW9uKCl7XHJcblxyXG4ndXNlIHN0cmljdCc7XHJcblxyXG5hbmd1bGFyXHJcbiAgICAubW9kdWxlKCdhcHAnKVxyXG4gICAgLmNvbnRyb2xsZXIoJ2NoYXREU0MnLGNoYXREU0MpO1xyXG5cclxuICAgIGZ1bmN0aW9uIGNoYXREU0MoJHRpbWVvdXQsIFNvY2tldCwgJG1kU2lkZW5hdiwgJGxvZyxwcm9ibGVtU2VydmljZSwkd2luZG93KSB7XHJcblxyXG4gICAgICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgICAgICBzZWxmLm5ld21zZyA9IFwiXCI7XHJcbiAgICAgICAgc2VsZi5tZXNzYWdlcyA9IFtdO1xyXG4gICAgICAgIHNlbGYucmVwbGF5ID0gZmFsc2U7XHJcbiAgICAgICAgc2VsZi5uaWNrbmFtZSA9IFwiXCI7XHJcbiAgICAgICAgc2VsZi51c2VyTGlzdCA9IFtdO1xyXG4gICAgICAgIHNlbGYuaW5pdEhpc3RvcnlDaGF0ID0gaW5pdEhpc3RvcnlDaGF0O1xyXG4gICAgICAgIHNlbGYuY2xvc2UgPSBjbG9zZTtcclxuICAgICAgICBzZWxmLnNob3dSZXBsYXkgPSBzaG93UmVwbGF5O1xyXG4gICAgICAgIHNlbGYuc2VuZE1lc3NhZ2UgPSBzZW5kTWVzc2FnZTtcclxuXHJcbiAgICAgICAgZnVuY3Rpb24gY2xvc2UoKSB7XHJcbiAgICAgICAgICAgICRtZFNpZGVuYXYoJ2NoYXQnKS5jbG9zZSgpXHJcbiAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJGxvZy5kZWJ1ZyhcImNsb3NlIGNoYXRcIik7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGluaXRIaXN0b3J5Q2hhdCgpe1xyXG4gICAgICAgICAgICBzZWxmLmlkUHJvYmxlbSA9ICR3aW5kb3cubG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3Byb2JsZW1pZCcpO1xyXG4gICAgICAgICAgICBzZWxmLm5pY2tuYW1lID0gJHdpbmRvdy5sb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnbmlja25hbWUnKTtcclxuICAgICAgICAgICAgcHJvYmxlbVNlcnZpY2UuZ2V0aGlzdG9yeWNoYXQoc2VsZi5pZFByb2JsZW0pXHJcbiAgICAgICAgICAgICAgICAuc3VjY2VzcyhmdW5jdGlvbihkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYoZGF0YS5zdWNjZXNzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZGF0YS5oaXN0b3J5Y2hhdC5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRtcCA9IG5ldyBEYXRlKGRhdGEuaGlzdG9yeWNoYXRbaV0udGltZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbXNuID0ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5pY2tuYW1lOiBkYXRhLmhpc3RvcnljaGF0W2ldLm5pY2tuYW1lLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1zZzogZGF0YS5oaXN0b3J5Y2hhdFtpXS5tc2csXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGltZTogdG1wLmdldERhdGUoKSArIFwiL1wiICsgKHRtcC5nZXRNb250aCgpICsgMSApKyBcIi9cIiArIHRtcC5nZXRGdWxsWWVhcigpICsgXCIgW1wiICsgdG1wLmdldEhvdXJzKCkgKyBcIjpcIiArIHRtcC5nZXRNaW51dGVzKCkgKyBcIl0gXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLm1lc3NhZ2VzLnB1c2gobXNuKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBTb2NrZXQuZW1pdCgnY2hlY2tVc2VycycpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gc2hvd1JlcGxheSgpe1xyXG4gICAgICAgICAgICBpZihzZWxmLnJlcGxheSl7XHJcbiAgICAgICAgICAgICAgICBzZWxmLnJlcGxheSA9IGZhbHNlO1xyXG4gICAgICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgICAgIHNlbGYucmVwbGF5ID0gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgU29ja2V0Lm9uKCdvbkJyb2FkY2FzdENoYXQnLCBmdW5jdGlvbiAob2JqKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgdG1wID0gbmV3IERhdGUob2JqW29iai5sZW5ndGggLTFdLnRpbWUpO1xyXG4gICAgICAgICAgICAgICAgc2VsZi5tZXNzYWdlcy5wdXNoKHtcclxuICAgICAgICAgICAgICAgICAgICBuaWNrbmFtZTogb2JqW29iai5sZW5ndGggLTFdLm5pY2tuYW1lLFxyXG4gICAgICAgICAgICAgICAgICAgIG1zZzogb2JqW29iai5sZW5ndGggLTFdLm1zZyxcclxuICAgICAgICAgICAgICAgICAgICB0aW1lOiB0bXAuZ2V0RGF0ZSgpICsgXCIvXCIgKyAodG1wLmdldE1vbnRoKCkgKyAxKSArIFwiL1wiICsgdG1wLmdldEZ1bGxZZWFyKCkgKyBcIiBbXCIgKyB0bXAuZ2V0SG91cnMoKSArIFwiOlwiICsgdG1wLmdldE1pbnV0ZXMoKSArIFwiXSBcIlxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIFNvY2tldC5vbignb25DaGVja1VzZXJzJywgZnVuY3Rpb24gKHVzZXJMaXN0KSB7XHJcbiAgICAgICAgICAgIHNlbGYudXNlckxpc3QgPSB1c2VyTGlzdDtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgZnVuY3Rpb24gc2VuZE1lc3NhZ2UoY2hhdG1zZyl7XHJcbiAgICAgICAgICAgICBTb2NrZXQuZW1pdCgnYnJvYWRjYXN0Q2hhdCcsIGNoYXRtc2cpO1xyXG4gICAgICAgICAgICBzZWxmLm5ld21zZyA9IFwiXCI7XHJcbiAgICAgICAgfVxyXG5cclxuICAgIH1cclxuXHJcbn0pKCk7XHJcbiIsIi8qKlxyXG4gKiBDcmVhdGVkIGJ5IEpPU0VWQUxERVJMRUkgb24gMTAvMDcvMjAxNS5cclxuICovXHJcblxyXG5cclxuKGZ1bmN0aW9uKCl7XHJcblxyXG4gICAgXCJ1c2Ugc3RyaWN0XCI7XHJcblxyXG4gICAgYW5ndWxhclxyXG4gICAgICAgIC5tb2R1bGUoJ2FwcCcpXHJcbiAgICAgICAgLmNvbnRyb2xsZXIoJ2NvbnRyb2xsZXJDb2xsYWJvcmF0b3JzJywgY29udHJvbGxlckNvbGxhYm9yYXRvcnMpO1xyXG5cclxuICAgIGZ1bmN0aW9uIGNvbnRyb2xsZXJDb2xsYWJvcmF0b3JzKCR3aW5kb3cscHJvYmxlbVNlcnZpY2UsdG9hc3RBcHApe1xyXG5cclxuICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICAgICAgc2VsZi5pZFByb2JsZW0gPSBcIlwiO1xyXG4gICAgICAgIHNlbGYuY29sbGFib3JhdG9ycyA9IFtdO1xyXG4gICAgICAgIHNlbGYudXNlcmVtYWlsID0gXCJcIjtcclxuICAgICAgICBzZWxmLmluaXRDb2xsYWJvcmF0b3JzID0gaW5pdENvbGxhYm9yYXRvcnM7XHJcbiAgICAgICAgc2VsZi5hZGRDb2xsYWJvcmF0b3IgPSBhZGRDb2xsYWJvcmF0b3I7XHJcbiAgICAgICAgc2VsZi5yZW1vdmVDb2xsYWJvcmF0b3IgPSByZW1vdmVDb2xsYWJvcmF0b3I7XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGluaXRDb2xsYWJvcmF0b3JzKCl7XHJcbiAgICAgICAgICAgIHNlbGYuaWRQcm9ibGVtID0gJHdpbmRvdy5sb2NhbFN0b3JhZ2UuZ2V0SXRlbSgncHJvYmxlbWlkJyk7XHJcbiAgICAgICAgICAgIHNlbGYudXNlcmVtYWlsID0gJHdpbmRvdy5sb2NhbFN0b3JhZ2UuZ2V0SXRlbSgndXNlcmVtYWlsJyk7XHJcbiAgICAgICAgICAgIHByb2JsZW1TZXJ2aWNlLmdldGNvbGxhYm9yYXRvcnMoc2VsZi5pZFByb2JsZW0pXHJcbiAgICAgICAgICAgICAgICAuc3VjY2VzcyhmdW5jdGlvbihkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYoZGF0YS5zdWNjZXNzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuY29sbGFib3JhdG9ycyA9IGRhdGEuY29sbGFib3JhdG9ycztcclxuICAgICAgICAgICAgICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdG9hc3RBcHAuZXJyb3JNZXNzYWdlKGRhdGEubWVzc2FnZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmdW5jdGlvbiBzZWFyY2hDYWxsYWJvcmF0aW9uKGVtYWlsKXtcclxuICAgICAgICAgICAgZm9yKHZhciBpID0gMDsgaSA8IHNlbGYuY29sbGFib3JhdG9ycy5sZW5ndGg7IGkrKyl7XHJcbiAgICAgICAgICAgICAgICBpZihlbWFpbCA9PSBzZWxmLmNvbGxhYm9yYXRvcnNbaV0uZW1haWwpe1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGFkZENvbGxhYm9yYXRvcihlbWFpbCl7XHJcbiAgICAgICAgICAgIGlmKHNlbGYudXNlcmVtYWlsID09IGVtYWlsKXtcclxuICAgICAgICAgICAgICAgIHRvYXN0QXBwLmVycm9yTWVzc2FnZShzZWxmLnVzZXJlbWFpbCArIFwiIGlzIGVtYWlsIG9mIG93bmVyLlwiKTtcclxuICAgICAgICAgICAgfWVsc2Uge1xyXG4gICAgICAgICAgICAgICAgaWYgKHNlYXJjaENhbGxhYm9yYXRpb24oZW1haWwpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdG9hc3RBcHAuZXJyb3JNZXNzYWdlKFwiVXN1YXJpbyBDYWRhc3RyYWRvLlwiKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGludml0ZSA9IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWRwcm9ibGVtOiBzZWxmLmlkUHJvYmxlbSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZW1haWw6IGVtYWlsXHJcbiAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgICAgICBwcm9ibGVtU2VydmljZS5pbnZpdGUoaW52aXRlKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAuc3VjY2VzcyhmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGRhdGEuc3VjY2Vzcykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuY29sbGFib3JhdG9ycyA9IGRhdGEuY29sbGFib3JhdG9ycztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9hc3RBcHAuZXJyb3JNZXNzYWdlKGRhdGEubWVzc2FnZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmdW5jdGlvbiByZW1vdmVDb2xsYWJvcmF0b3IocGVvcGxlKXtcclxuICAgICAgICAgICAgdmFyIG9iaiA9IHtcclxuICAgICAgICAgICAgICAgIGlkcHJvYmxlbTogc2VsZi5pZFByb2JsZW0sXHJcbiAgICAgICAgICAgICAgICBlbWFpbDogcGVvcGxlLmVtYWlsXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgcHJvYmxlbVNlcnZpY2UucmVtb3ZlY29sbGFib3JhdG9ycyhvYmopXHJcbiAgICAgICAgICAgICAgICAuc3VjY2VzcyhmdW5jdGlvbihkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYoZGF0YS5zdWNjZXNzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRvYXN0QXBwLmVycm9yTWVzc2FnZShcIkNvbGFib3JhZG9yIGZvaSByZW1vdmlkbyBkbyBwcm9qZXRvLlwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5jb2xsYWJvcmF0b3JzID0gZGF0YS5jb2xsYWJvcmF0b3JzO1xyXG4gICAgICAgICAgICAgICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0b2FzdEFwcC5lcnJvck1lc3NhZ2UoZGF0YS5tZXNzYWdlKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG59KSgpOyIsIi8qKlxyXG4gKiBDcmVhdGVkIGJ5IEpPU0VWQUxERVJMRUkgb24gMjIvMDcvMjAxNS5cclxuICovXHJcblxyXG4oZnVuY3Rpb24oKXtcclxuXHJcbmFuZ3VsYXJcclxuICAgIC5tb2R1bGUoJ2FwcCcpXHJcbiAgICAuY29udHJvbGxlcignZHNjUmVwb3J0Q29udHJvbGxlcicsZHNjUmVwb3J0Q29udHJvbGxlcik7XHJcblxyXG5mdW5jdGlvbiBkc2NSZXBvcnRDb250cm9sbGVyKCkge1xyXG5cclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgIHNlbGYuaWRwcm9ibGVtID0gJ2FqZmxhamZsamFsZmphbGpmJztcclxuICAgIHNlbGYuYnVpZFJlcG9ydCA9IGJ1aWRSZXBvcnQ7XHJcblxyXG4gICAgZnVuY3Rpb24gYnVpZFJlcG9ydChlbGVtZW50KSB7XHJcbiAgICAgICAgdmFyIGh0bWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncHJvamVjdFJlc3BvcnQnKTtcclxuICAgICAgICB2YXIgcGRmID0gbmV3IGpzUERGKCdsJywncHgnKTtcclxuICAgICAgICBwZGYuYWRkSFRNTChcclxuICAgICAgICAgICAgaHRtbCwgMCwgMCwge1xyXG4gICAgICAgICAgICAgICAgcGFnZXNwbGl0OiB0cnVlXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uKGRpc3Bvc2Upe1xyXG4gICAgICAgICAgICAgICAgcGRmLnNhdmUoJ3Rlc3QucGRmJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICApXHJcbiAgICB9XHJcbn1cclxuXHJcbn0pKCk7IiwiLyoqXHJcbiAqIENyZWF0ZWQgYnkgSk9TRVZBTERFUkxFSSBvbiAyOS8wNi8yMDE1LlxyXG4gKi9cclxuKGZ1bmN0aW9uKCl7XHJcblxyXG4ndXNlIHN0cmljdCc7XHJcblxyXG5hbmd1bGFyXHJcbiAgICAubW9kdWxlKCdhcHAnKVxyXG4gICAgLmNvbnRyb2xsZXIoJ2V2YWx1YXRpb25mcmFtZXdvcmtDb250cm9sbGVyJyxldmFsdWF0aW9uZnJhbWV3b3JrQ29udHJvbGxlcik7XHJcblxyXG4gIGZ1bmN0aW9uIGV2YWx1YXRpb25mcmFtZXdvcmtDb250cm9sbGVyICgkd2luZG93LHByb2JsZW1TZXJ2aWNlLFNvY2tldCx0b2FzdEFwcCl7XHJcblxyXG4gICAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICAgIHNlbGYuZXZhbHVhdGlvbmZyYW1ld29ya0xpc3QgPVtdO1xyXG4gICAgICBzZWxmLmluaXRFdmFsdWF0aW9uID0gaW5pdEV2YWx1YXRpb247XHJcbiAgICAgIHNlbGYuc2V0T3BlbkVkaXREaXNjdXRpb24gPSBzZXRPcGVuRWRpdERpc2N1dGlvbjtcclxuICAgICAgc2VsZi5zYXZlRGlzY3V0aW9uID0gc2F2ZURpc2N1dGlvbjtcclxuXHJcbiAgICAgIGZ1bmN0aW9uIGluaXRFdmFsdWF0aW9uKCl7XHJcbiAgICAgICAgICBzZWxmLmlkcHJvYmxlbSA9ICR3aW5kb3cubG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3Byb2JsZW1pZCcpO1xyXG4gICAgICAgICBwcm9ibGVtU2VydmljZS5nZXRldmFsdWF0aW9uKHNlbGYuaWRwcm9ibGVtKVxyXG4gICAgICAgICAgICAgIC5zdWNjZXNzKGZ1bmN0aW9uKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgICAgaWYoZGF0YS5zdWNjZXNzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICBzZWxmLmV2YWx1YXRpb25mcmFtZXdvcmtMaXN0ID0gZGF0YS5ldmFsdWF0aW9uZnJhbWV3b3JrO1xyXG4gICAgICAgICAgICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgICAgICAgICAgIHRvYXN0QXBwLmVycm9yTWVzc2FnZShkYXRhLm1lc3NhZ2UpO1xyXG4gICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgfSk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIFNvY2tldC5vbignb25Ccm9hZGNhc3RGcmFtZVNhdmUnLCBmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgICAgYW5ndWxhci5mb3JFYWNoKHNlbGYuZXZhbHVhdGlvbmZyYW1ld29ya0xpc3QsZnVuY3Rpb24oZXZhbHVhdGlvbmZyYW1ld29yayl7XHJcbiAgICAgICAgICAgICBpZiggZXZhbHVhdGlvbmZyYW1ld29yay5vbmlvbmxheWVyID09IGRhdGEub25pb25sYXllcil7XHJcbiAgICAgICAgICAgICAgICAgYW5ndWxhci5mb3JFYWNoKGV2YWx1YXRpb25mcmFtZXdvcmsuc3Rha2Vob2xkZXJzLGZ1bmN0aW9uKHN0YWtlaG9sZGVyKXtcclxuICAgICAgICAgICAgICAgICAgICAgaWYgKHN0YWtlaG9sZGVyLl9pZCA9PSBkYXRhLl9pZCl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICBzdGFrZWhvbGRlci5uYW1lID0gZGF0YS5uYW1lO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgc3Rha2Vob2xkZXIub25pb25sYXllciA9IGRhdGEub25pb25sYXllcjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgIHN0YWtlaG9sZGVyLmRlc2NyaXB0aW9uID0gZGF0YS5kZXNjcmlwdGlvbjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgIHN0YWtlaG9sZGVyLm9wZW5FZGl0ID0gZGF0YS5vcGVuRWRpdDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgIHN0YWtlaG9sZGVyLnByb2JsZW1zID0gZGF0YS5wcm9ibGVtcztcclxuICAgICAgICAgICAgICAgICAgICAgICAgIHN0YWtlaG9sZGVyLnNvbHV0aW9ucyA9IGRhdGEuc29sdXRpb25zO1xyXG4gICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICB9XHJcbiAgICAgICAgICB9KTtcclxuICAgICAgfSk7XHJcblxyXG4gICAgICBmdW5jdGlvbiBzYXZlRGlzY3V0aW9uKHN0YWtlaG9sZGVyKSB7XHJcbiAgICAgICAgICBTb2NrZXQuZW1pdCgnYnJvYWRjYXN0RnJhbWVTYXZlJywgc3Rha2Vob2xkZXIpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBTb2NrZXQub24oJ29uVXBkYXRlU3Rha2Vob2xkZXInLCBmdW5jdGlvbiAoc3Rha2Vob2xkZXJPbmlvbikge1xyXG4gICAgICAgICBjb25zb2xlLmxvZyhzdGFrZWhvbGRlck9uaW9uKTtcclxuXHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgZnVuY3Rpb24gc2V0T3BlbkVkaXREaXNjdXRpb24oY3VycmVudFN0YWtlaG9sZGVyKXtcclxuICAgICAgICAgIGN1cnJlbnRTdGFrZWhvbGRlci5vcGVuRWRpdCA9IHRydWU7XHJcbiAgICAgIH1cclxuICB9XHJcblxyXG59KSgpO1xyXG4iLCIoZnVuY3Rpb24oKSB7XHJcblxyXG4gICAgXCJ1c2Ugc3RyaWN0XCI7XHJcblxyXG4gICAgYW5ndWxhclxyXG4gICAgICAgIC5tb2R1bGUoJ2FwcCcpXHJcbiAgICAgICAgLmNvbnRyb2xsZXIoJ21lbnVQcm9ibGVtQ29udHJvbGxlcicsIG1lbnVQcm9ibGVtYUNvbnRyb2xsZXIpO1xyXG5cclxuICAgIGZ1bmN0aW9uIG1lbnVQcm9ibGVtYUNvbnRyb2xsZXIoQXV0aCwgJHRpbWVvdXQsICRzdGF0ZSwgJG1kU2lkZW5hdiAsJG1kVXRpbCwkbG9nKXtcclxuXHJcbiAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgICAgIHNlbGYub3BlbkNoYXQgPSBidWlsZFRvZ2dsZXIoJ2NoYXQnKTtcclxuICAgICAgICBzZWxmLmZvcm1BZGRDb2xsYWJvcmF0b3JzID0gZm9ybUFkZENvbGxhYm9yYXRvcnM7XHJcbiAgICAgICAgc2VsZi5lZGl0RGVzY3JpcHRpb25Qcm9ibGVtID0gZWRpdERlc2NyaXB0aW9uUHJvYmxlbTtcclxuICAgICAgICBzZWxmLmRvTG9nb3V0ID0gZG9Mb2dvdXQ7XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGJ1aWxkVG9nZ2xlcihuYXZJRCkge1xyXG4gICAgICAgICAgICB2YXIgZGVib3VuY2VGbiA9ICAkbWRVdGlsLmRlYm91bmNlKGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgICAgICAkbWRTaWRlbmF2KG5hdklEKVxyXG4gICAgICAgICAgICAgICAgICAgIC50b2dnbGUoKVxyXG4gICAgICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJGxvZy5kZWJ1ZyhcInRvZ2dsZSBcIiArIG5hdklEICsgXCIgaXMgZG9uZVwiKTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSwzMDApO1xyXG4gICAgICAgICAgICByZXR1cm4gZGVib3VuY2VGbjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGZvcm1BZGRDb2xsYWJvcmF0b3JzKCl7XHJcbiAgICAgICAgICAgICRzdGF0ZS5nbygncHJvYmxlbS5jb2xsYWJvcmF0b3JzJyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmdW5jdGlvbiBlZGl0RGVzY3JpcHRpb25Qcm9ibGVtKCkge1xyXG4gICAgICAgICAgICAkc3RhdGUuZ28oJ3Byb2JsZW0uZGVzY3JpcHRpb24nKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGRvTG9nb3V0KCkge1xyXG4gICAgICAgICAgICBBdXRoLmxvZ291dCgpO1xyXG4gICAgICAgICAgICAkc3RhdGUuZ28oJ2luaXQubG9naW4nKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgfVxyXG59KSgpOyIsIihmdW5jdGlvbigpe1xyXG5cclxuXCJ1c2Ugc3RyaWN0XCI7XHJcblxyXG4gICAgYW5ndWxhci5tb2R1bGUoJ2FwcCcpXHJcbiAgICAuY29udHJvbGxlcignZWRpdFByb2JsZW1Db250cm9sbGVyJyxlZGl0UHJvYmxlbWFDb250cm9sbGVyKTtcclxuZWRpdFByb2JsZW1hQ29udHJvbGxlci4kaW5qZWN0cmUgPSBbJyRzY29wZScsJ1NvY2tldCddO1xyXG5cclxuZnVuY3Rpb24gZWRpdFByb2JsZW1hQ29udHJvbGxlcihTb2NrZXQsICR0aW1lb3V0LHRvYXN0QXBwLCR3aW5kb3cscHJvYmxlbVNlcnZpY2UpIHtcclxuXHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICB2YXIgdXBkYXRlVHJ1ZSA9IHRydWU7XHJcbiAgICBzZWxmLnByb2JsZW0gPSBcIlwiO1xyXG4gICAgc2VsZi5wcm9ibGVtVXBkYXRlID0gcHJvYmxlbVVwZGF0ZTtcclxuICAgIHNlbGYuZ2V0Q3VycmVudFByb2JsZW0gPSBnZXRDdXJyZW50UHJvYmxlbTtcclxuICAgIHNlbGYuc2F2ZURlc2NyaXB0aW9uID0gc2F2ZURlc2NyaXB0aW9uO1xyXG5cclxuICAgIGZ1bmN0aW9uIGdldEN1cnJlbnRQcm9ibGVtKCl7XHJcbiAgICAgICAgc2VsZi5pZFByb2JsZW0gPSAkd2luZG93LmxvY2FsU3RvcmFnZS5nZXRJdGVtKCdwcm9ibGVtaWQnKTtcclxuICAgICAgICBwcm9ibGVtU2VydmljZS5nZXRwcm9ibGVtKHNlbGYuaWRQcm9ibGVtKVxyXG4gICAgICAgICAgICAuc3VjY2VzcyhmdW5jdGlvbihkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICBpZihkYXRhLnN1Y2Nlc3MpIHtcclxuICAgICAgICAgICAgICAgICAgICBzZWxmLnByb2JsZW0gPSBkYXRhLnByb2JsZW07XHJcbiAgICAgICAgICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgICAgICAgICB0b2FzdEFwcC5lcnJvck1lc3NhZ2UoZGF0YS5tZXNzYWdlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gc2V0VXBkYXRlKCl7XHJcbiAgICAgICAgdXBkYXRlVHJ1ZSA9IHRydWU7XHJcbiAgICB9XHJcblxyXG4gICAgU29ja2V0Lm9uKCdvbkF0dWFsaXphclByb2JsZW1hJywgZnVuY3Rpb24gKHJldG9ybm8pIHtcclxuICAgICAgICBzZWxmLnByb2JsZW0uZGVzY3JpcHRpb24gPSByZXRvcm5vLmRlc2NyaXB0aW9uO1xyXG4gICAgICAgIHNlbGYucHJvYmxlbS51cGRhdGUgPSB1cGRhdGVUcnVlO1xyXG4gICAgfSk7XHJcblxyXG4gICAgZnVuY3Rpb24gcHJvYmxlbVVwZGF0ZShwcm9ibGVtKSB7XHJcbiAgICAgICAgcHJvYmxlbS51cGRhdGUgPSB1cGRhdGVUcnVlO1xyXG4gICAgICAgIFNvY2tldC5lbWl0KCdhdHVhbGl6YXJQcm9ibGVtYScsIHByb2JsZW0pO1xyXG4gICAgICAgIGlmICh1cGRhdGVUcnVlKSB7XHJcbiAgICAgICAgICAgIHVwZGF0ZVRydWUgPSBmYWxzZTtcclxuICAgICAgICAgICAgJHRpbWVvdXQoc2V0VXBkYXRlLCAyMDAwKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gc2F2ZURlc2NyaXB0aW9uKHByb2JsZW0pIHtcclxuICAgICAgICBwcm9ibGVtLnVwZGF0ZSA9IHVwZGF0ZVRydWU7XHJcbiAgICAgICAgU29ja2V0LmVtaXQoJ2F0dWFsaXphclByb2JsZW1hJywgcHJvYmxlbSk7XHJcbiAgICB9XHJcblxyXG59XHJcblxyXG59KSgpOyIsIihmdW5jdGlvbigpIHtcclxuICAndXNlIHN0cmljdCc7XHJcblxyXG4gIGFuZ3VsYXJcclxuICAgIC5tb2R1bGUoJ2FwcCcpXHJcbiAgICAuZmFjdG9yeSgncHJvYmxlbVNlcnZpY2UnLCBwcm9ibGVtU2VydmljZSk7XHJcblxyXG4gIHByb2JsZW1TZXJ2aWNlLiRpbmplY3QgPSBbJyRodHRwJywnJGxvY2F0aW9uJ107XHJcblxyXG4gIGZ1bmN0aW9uIHByb2JsZW1TZXJ2aWNlKCRodHRwLCRsb2NhdGlvbikge1xyXG5cclxuICAgIHZhciBBUElfUk9VVEVfR0VUVVNFUlBST0JMRU1TID0gJy9hcGkvcHJvYmxlbS9nZXRwcm9ibGVtcyc7XHJcbiAgICB2YXIgQVBJX1JPVVRFX0dFVFVTRVJQUk9CTEVNU0NPTExBQk9SQVRPUiA9ICcvYXBpL3Byb2JsZW0vZ2V0cHJvYmxlbXNjb2xsYWJvcmF0b3InO1xyXG4gICAgdmFyIEFQSV9ST1VURV9ORVdQUk9CTEVNID0gJy9hcGkvcHJvYmxlbS9uZXdwcm9ibGVtJztcclxuICAgIHZhciBBUElfUk9VVEVfR0VUUFJPQkxFTSA9ICcvYXBpL3Byb2JsZW0vZ2V0cHJvYmxlbSc7XHJcbiAgICB2YXIgQVBJX1JPVVRFX0dFVENPTExBQk9SQVRPUlMgPSAnL2FwaS9wcm9ibGVtL2dldGNvbGxhYm9yYXRvcnMnO1xyXG4gICAgdmFyIEFQSV9ST1VURV9JTlZJVEUgPSAnL2FwaS9wcm9ibGVtL2ludml0ZSc7XHJcbiAgICB2YXIgQVBJX1JPVVRFX0dFVE9OSU9OID0gJy9hcGkvcHJvYmxlbS9nZXRvbmlvbic7XHJcbiAgICB2YXIgQVBJX1JPVVRFX0dFVEVWQUxVQVRJT04gPSAnL2FwaS9wcm9ibGVtL2dldGV2YWx1YXRpb24nO1xyXG4gICAgdmFyIEFQSV9ST1VURV9HRVRTRU1JT1RJQ0ZSQU1FV09SSyA9ICcvYXBpL3Byb2JsZW0vZ2V0c2VtaW90aWMnO1xyXG4gICAgdmFyIEFQSV9ST1VURV9HRVRDQVJGID0gJy9hcGkvcHJvYmxlbS9nZXRjYXJmJztcclxuICAgIHZhciBBUElfUk9VVEVfUkVNT1ZFUFJPQkxFTSA9ICcvYXBpL3Byb2JsZW0vcmVtb3ZlcHJvYmxlbSc7XHJcbiAgICB2YXIgQVBJX1JPVVRFX1JFTU9WRUNPTExBQk9SQVRPUiA9ICcvYXBpL3Byb2JsZW0vcmVtb3ZlY29sbGFib3JhdG9yJztcclxuICAgIHZhciBBUElfUk9VVEVfR0VUSElTVE9SWUNIQVQgPSAnL2FwaS9wcm9ibGVtL2hpc3RvcnljaGF0JztcclxuXHJcbiAgICB2YXIgc2VydmljZSA9IHtcclxuICAgICAgbmV3cHJvYmxlbSAgICAgICA6IG5ld3Byb2JsZW0sXHJcbiAgICAgIGdldHVzZXJwcm9ibGVtcyAgOiBnZXR1c2VycHJvYmxlbXMsXHJcbiAgICAgIGdldHByb2JsZW0gICAgICAgOiBnZXRwcm9ibGVtLFxyXG4gICAgICBnZXRjb2xsYWJvcmF0b3JzIDogZ2V0Y29sbGFib3JhdG9ycyxcclxuICAgICAgaW52aXRlICAgICAgICAgICA6IGludml0ZSxcclxuICAgICAgZ2V0b25pb24gICAgICAgICA6IGdldG9uaW9uLFxyXG4gICAgICBnZXRldmFsdWF0aW9uICAgIDogZ2V0ZXZhbHVhdGlvbixcclxuICAgICAgZ2V0c2VtaW90aWMgICAgICA6IGdldHNlbWlvdGljLFxyXG4gICAgICBnZXRjYXJmICAgICAgICAgIDogZ2V0Y2FyZixcclxuICAgICAgcmVtb3ZlcHJvYmxlbSAgICA6IHJlbW92ZXByb2JsZW0sXHJcbiAgICAgIGdldHByb2JsZW1zY29sbGFib3JhdG9yOiBnZXRwcm9ibGVtc2NvbGxhYm9yYXRvcixcclxuICAgICAgcmVtb3ZlY29sbGFib3JhdG9ycyA6IHJlbW92ZWNvbGxhYm9yYXRvcnMsXHJcbiAgICAgIGdldGhpc3RvcnljaGF0OiBnZXRoaXN0b3J5Y2hhdFxyXG4gICAgfTtcclxuXHJcbiAgICByZXR1cm4gc2VydmljZTtcclxuXHJcbiAgICBmdW5jdGlvbiBuZXdwcm9ibGVtKGRhdGEpIHtcclxuICAgICAgICByZXR1cm4gJGh0dHAucG9zdChBUElfUk9VVEVfTkVXUFJPQkxFTSwgZGF0YSk7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gZ2V0cHJvYmxlbShkYXRhKXtcclxuICAgICAgcmV0dXJuICRodHRwLmdldChBUElfUk9VVEVfR0VUUFJPQkxFTSArICc/aWRwcm9ibGVtPScgKyBkYXRhICk7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIGZ1bmN0aW9uIGdldHVzZXJwcm9ibGVtcyhkYXRhKXtcclxuICAgICAgcmV0dXJuICRodHRwLmdldChBUElfUk9VVEVfR0VUVVNFUlBST0JMRU1TICsgJz9lbWFpbD0nICsgZGF0YSApO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGdldGNvbGxhYm9yYXRvcnMoZGF0YSl7XHJcbiAgICAgIHJldHVybiAkaHR0cC5nZXQoQVBJX1JPVVRFX0dFVENPTExBQk9SQVRPUlMgKyAnP2lkcHJvYmxlbT0nICsgZGF0YSApO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGludml0ZShkYXRhKXtcclxuICAgICAgcmV0dXJuICRodHRwLnBvc3QoQVBJX1JPVVRFX0lOVklURSwgZGF0YSApO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGdldG9uaW9uKGRhdGEpe1xyXG4gICAgICByZXR1cm4gJGh0dHAuZ2V0KEFQSV9ST1VURV9HRVRPTklPTiArICc/aWRwcm9ibGVtPScgKyBkYXRhICk7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gZ2V0ZXZhbHVhdGlvbiAoZGF0YSl7XHJcbiAgICAgIHJldHVybiAkaHR0cC5nZXQoQVBJX1JPVVRFX0dFVEVWQUxVQVRJT04gKyAnP2lkcHJvYmxlbT0nICsgZGF0YSApO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGdldHNlbWlvdGljIChkYXRhKXtcclxuICAgICAgcmV0dXJuICRodHRwLmdldChBUElfUk9VVEVfR0VUU0VNSU9USUNGUkFNRVdPUksgKyAnP2lkcHJvYmxlbT0nICsgZGF0YSApXHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gZ2V0Y2FyZihkYXRhKXtcclxuICAgICAgcmV0dXJuICRodHRwLmdldChBUElfUk9VVEVfR0VUQ0FSRiArICc/aWRwcm9ibGVtPScgKyBkYXRhIClcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiByZW1vdmVwcm9ibGVtKGRhdGEpe1xyXG4gICAgICByZXR1cm4gJGh0dHAuZ2V0KEFQSV9ST1VURV9SRU1PVkVQUk9CTEVNICsgJz9pZHByb2JsZW09JyArIGRhdGEgKTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBnZXRwcm9ibGVtc2NvbGxhYm9yYXRvcihkYXRhKXtcclxuICAgICAgcmV0dXJuICRodHRwLmdldChBUElfUk9VVEVfR0VUVVNFUlBST0JMRU1TQ09MTEFCT1JBVE9SICsgJz9lbWFpbD0nICsgZGF0YSApO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIHJlbW92ZWNvbGxhYm9yYXRvcnMoZGF0YSl7XHJcbiAgICAgIHJldHVybiAkaHR0cC5nZXQoQVBJX1JPVVRFX1JFTU9WRUNPTExBQk9SQVRPUiArICc/aWRwcm9ibGVtPScgKyBkYXRhLmlkcHJvYmxlbSArICcmZW1haWw9JyArIGRhdGEuZW1haWwgKTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBnZXRoaXN0b3J5Y2hhdChkYXRhKXtcclxuICAgICAgcmV0dXJuICRodHRwLmdldChBUElfUk9VVEVfR0VUSElTVE9SWUNIQVQgKyAnP2lkcHJvYmxlbT0nICsgZGF0YSApO1xyXG4gICAgfVxyXG5cclxuICB9XHJcbn0pKCk7XHJcbiIsIi8qKlxyXG4gKiBDcmVhdGVkIGJ5IEpPU0VWQUxERVJMRUkgb24gMjkvMDYvMjAxNS5cclxuICovXHJcblxyXG4oZnVuY3Rpb24oKXtcclxuXHJcbid1c2Ugc3RyaWN0JztcclxuXHJcbmFuZ3VsYXJcclxuICAgIC5tb2R1bGUoJ2FwcCcpXHJcbiAgICAuY29udHJvbGxlcignc2VtaW90aWNmcmFtZXdvcmtDb250cm9sbGVyJyxzZW1pb3RpY2ZyYW1ld29ya0NvbnRyb2xsZXIpO1xyXG5cclxuZnVuY3Rpb24gc2VtaW90aWNmcmFtZXdvcmtDb250cm9sbGVyKFNvY2tldCwkd2luZG93LCBwcm9ibGVtU2VydmljZSx0b2FzdEFwcCl7XHJcblxyXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgc2VsZi5pZHByb2JsZW0gPSBcIlwiO1xyXG4gICAgc2VsZi5zYXZlU29jaWFsV29ybGQgPSBzYXZlU29jaWFsV29ybGQ7XHJcbiAgICBzZWxmLnNhdmVQcmFnbWF0aWMgPSBzYXZlUHJhZ21hdGljO1xyXG4gICAgc2VsZi5zYXZlU2VtYW50aWMgPSBzYXZlU2VtYW50aWM7XHJcbiAgICBzZWxmLnNhdmVTeW50YXRpYyA9IHNhdmVTeW50YXRpYztcclxuICAgIHNlbGYuc2F2ZUVtcGlyaWNhbCA9IHNhdmVFbXBpcmljYWw7XHJcbiAgICBzZWxmLnNhdmVQaHlzaWNhbCA9IHNhdmVQaHlzaWNhbDtcclxuICAgIHNlbGYuc2VtaW90aWNmcmFtZXdvcmsgPSBcIlwiO1xyXG4gICAgc2VsZi5pbml0U2VtaW90aWNGcmFtZXdvcmsgPSBpbml0U2VtaW90aWNGcmFtZXdvcms7XHJcblxyXG4gICAgZnVuY3Rpb24gaW5pdFNlbWlvdGljRnJhbWV3b3JrKCl7XHJcbiAgICAgICAgc2VsZi5pZHByb2JsZW0gPSAkd2luZG93LmxvY2FsU3RvcmFnZS5nZXRJdGVtKCdwcm9ibGVtaWQnKTtcclxuICAgICAgICBwcm9ibGVtU2VydmljZS5nZXRzZW1pb3RpYyhzZWxmLmlkcHJvYmxlbSlcclxuICAgICAgICAgICAgLnN1Y2Nlc3MoZnVuY3Rpb24oZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgaWYoZGF0YS5zdWNjZXNzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5zZW1pb3RpY2ZyYW1ld29yayA9IGRhdGEuc2VtaW90aWNmcmFtZXdvcms7XHJcbiAgICAgICAgICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgICAgICAgICB0b2FzdEFwcC5lcnJvck1lc3NhZ2UoZGF0YS5tZXNzYWdlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgU29ja2V0Lm9uKCdvblVwZGF0ZVNvY2lhbFdvcmxkJywgZnVuY3Rpb24gKHRleHQpIHtcclxuICAgICAgICBzZWxmLnNlbWlvdGljZnJhbWV3b3JrLnNvY2lhbHdvcmxkID0gdGV4dDtcclxuICAgIH0pO1xyXG5cclxuICAgIGZ1bmN0aW9uIHNhdmVTb2NpYWxXb3JsZCh0ZXh0LGZsYWdTYXZlKXtcclxuICAgICAgICB2YXIgb2JqID0ge1xyXG4gICAgICAgICAgICB0ZXh0OiB0ZXh0LFxyXG4gICAgICAgICAgICB1cGRhdGU6IGZsYWdTYXZlXHJcbiAgICAgICAgfTtcclxuICAgICAgICBTb2NrZXQuZW1pdCgndXBkYXRlU29jaWFsV29ybGQnLCBvYmopO1xyXG4gICAgfVxyXG5cclxuICAgIFNvY2tldC5vbignb25VcGRhdGVQcmFnbWF0aWMnLCBmdW5jdGlvbiAodGV4dCkge1xyXG4gICAgICAgIHNlbGYuc2VtaW90aWNmcmFtZXdvcmsucHJhZ21hdGljID0gdGV4dDtcclxuICAgIH0pO1xyXG5cclxuICAgIGZ1bmN0aW9uIHNhdmVQcmFnbWF0aWModGV4dCxmbGFnU2F2ZSl7XHJcbiAgICAgICAgdmFyIG9iaiA9IHtcclxuICAgICAgICAgICAgdGV4dDogdGV4dCxcclxuICAgICAgICAgICAgdXBkYXRlOiBmbGFnU2F2ZVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgU29ja2V0LmVtaXQoJ3VwZGF0ZVByYWdtYXRpYycsIG9iaik7XHJcbiAgICB9XHJcblxyXG4gICAgU29ja2V0Lm9uKCdvblVwZGF0ZVNlbWFudGljJywgZnVuY3Rpb24gKHRleHQpIHtcclxuICAgICAgICBzZWxmLnNlbWlvdGljZnJhbWV3b3JrLnNlbWlvdGljcmFtZXdvcmsgPSB0ZXh0O1xyXG4gICAgfSk7XHJcblxyXG4gICAgZnVuY3Rpb24gc2F2ZVNlbWFudGljKHRleHQsZmxhZ1NhdmUpe1xyXG4gICAgICAgIHZhciBvYmogPSB7XHJcbiAgICAgICAgICAgIHRleHQ6IHRleHQsXHJcbiAgICAgICAgICAgIHVwZGF0ZTogZmxhZ1NhdmVcclxuICAgICAgICB9O1xyXG4gICAgICAgIFNvY2tldC5lbWl0KCd1cGRhdGVTZW1hbnRpYycsIG9iaik7XHJcbiAgICB9XHJcblxyXG4gICAgU29ja2V0Lm9uKCdvblVwZGF0ZVN5bnRhdGljJywgZnVuY3Rpb24gKHRleHQsZmxhZ1NhdmUpIHtcclxuICAgICAgICBzZWxmLnNlbWlvdGljZnJhbWV3b3JrLnN5bnRhdGljID0gdGV4dDtcclxuICAgIH0pO1xyXG5cclxuICAgIGZ1bmN0aW9uIHNhdmVTeW50YXRpYyh0ZXh0LGZsYWdTYXZlKXtcclxuICAgICAgICB2YXIgb2JqID0ge1xyXG4gICAgICAgICAgICB0ZXh0OiB0ZXh0LFxyXG4gICAgICAgICAgICB1cGRhdGU6IGZsYWdTYXZlXHJcbiAgICAgICAgfTtcclxuICAgICAgICBTb2NrZXQuZW1pdCgndXBkYXRlU3ludGF0aWMnLCBvYmopO1xyXG4gICAgfVxyXG5cclxuICAgIFNvY2tldC5vbignb25VcGRhdGVFbXBpcmljYWwnLCBmdW5jdGlvbiAodGV4dCkge1xyXG4gICAgICAgIHNlbGYuc2VtaW90aWNmcmFtZXdvcmsuZW1waXJpY2FsID0gdGV4dDtcclxuICAgIH0pO1xyXG5cclxuICAgIGZ1bmN0aW9uIHNhdmVFbXBpcmljYWwodGV4dCxmbGFnU2F2ZSl7XHJcbiAgICAgICAgdmFyIG9iaiA9IHtcclxuICAgICAgICAgICAgdGV4dDogdGV4dCxcclxuICAgICAgICAgICAgdXBkYXRlOiBmbGFnU2F2ZVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgU29ja2V0LmVtaXQoJ3VwZGF0ZUVtcGlyaWNhbCcsIG9iaik7XHJcbiAgICB9XHJcblxyXG4gICAgU29ja2V0Lm9uKCdvblVwZGF0ZVBoeXNpY2FsJywgZnVuY3Rpb24gKHRleHQpIHtcclxuICAgICAgICBzZWxmLnNlbWlvdGljZnJhbWV3b3JrLnBoeXNpY2FsID0gdGV4dDtcclxuICAgIH0pO1xyXG5cclxuICAgIGZ1bmN0aW9uIHNhdmVQaHlzaWNhbCh0ZXh0LGZsYWdTYXZlKXtcclxuICAgICAgICB2YXIgb2JqID0ge1xyXG4gICAgICAgICAgICB0ZXh0OiB0ZXh0LFxyXG4gICAgICAgICAgICB1cGRhdGU6IGZsYWdTYXZlXHJcbiAgICAgICAgfTtcclxuICAgICAgICBTb2NrZXQuZW1pdCgndXBkYXRlUGh5c2ljYWwnLCBvYmopO1xyXG4gICAgfVxyXG59XHJcblxyXG59KSgpOyIsIi8qKlxyXG4gKiBDcmVhdGVkIGJ5IEpPU0VWQUxERVJMRUkgb24gMjkvMDYvMjAxNS5cclxuICovXHJcblxyXG4oZnVuY3Rpb24oKXtcclxuXHJcbid1c2Ugc3RyaWN0JztcclxuXHJcbmFuZ3VsYXJcclxuICAgIC5tb2R1bGUoJ2FwcCcpXHJcbiAgICAuY29udHJvbGxlcignc3Rha2Vob2xkZXJDb250cm9sbGVyJyxzdGFrZWhvbGRlckNvbnRyb2xsZXIpO1xyXG5cclxuXHJcbmZ1bmN0aW9uIHN0YWtlaG9sZGVyQ29udHJvbGxlcihTb2NrZXQsJHdpbmRvdyxwcm9ibGVtU2VydmljZSx0b2FzdEFwcCl7XHJcblxyXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgc2VsZi5pZHByb2JsZW0gPSBcIlwiO1xyXG4gICAgc2VsZi5zdGFrZWhvbGRlckxpc3QgPSBbXTtcclxuICAgIHNlbGYuc3Rha2Vob2xkZXIgPSBcIlwiO1xyXG4gICAgc2VsZi5pbnRpdE9uaW9uID0gaW50aXRPbmlvbjtcclxuICAgIHNlbGYubW92ZSA9IGZhbHNlO1xyXG4gICAgc2VsZi5pblByb2Nlc3NpbmcgPSB0cnVlO1xyXG4gICAgc2VsZi5zYXZlU3Rha2Vob2xkZXIgPSBzYXZlU3Rha2Vob2xkZXI7XHJcbiAgICBzZWxmLnNldE9wZW5FZGl0ID0gc2V0T3BlbkVkaXQ7XHJcbiAgICBzZWxmLmRlbFBvc3RJdCA9IGRlbFBvc3RJdDtcclxuICAgIHNlbGYuYWRkUG9zdEl0ID0gYWRkUG9zdEl0O1xyXG4gICAgc2VsZi5hY2VuZGUgPSBhY2VuZGU7XHJcbiAgICBzZWxmLmFwYWdhID0gYXBhZ2E7XHJcblxyXG4gICAgZnVuY3Rpb24gaW50aXRPbmlvbigpe1xyXG4gICAgICAgIHNlbGYuaWRwcm9ibGVtID0gJHdpbmRvdy5sb2NhbFN0b3JhZ2UuZ2V0SXRlbSgncHJvYmxlbWlkJyk7XHJcbiAgICAgICAgcHJvYmxlbVNlcnZpY2UuZ2V0b25pb24oc2VsZi5pZHByb2JsZW0pXHJcbiAgICAgICAgICAgIC5zdWNjZXNzKGZ1bmN0aW9uKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgIGlmKGRhdGEuc3VjY2Vzcykge1xyXG4gICAgICAgICAgICAgICAgICAgIHNlbGYuc3Rha2Vob2xkZXJMaXN0ID0gZGF0YS5zdGFrZWhvbGRlcnM7XHJcbiAgICAgICAgICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgICAgICAgICB0b2FzdEFwcC5lcnJvck1lc3NhZ2UoZGF0YS5tZXNzYWdlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgc2VsZi5pblByb2Nlc3NpbmcgPSBmYWxzZTtcclxuICAgIH1cclxuXHJcbiAgICBTb2NrZXQub24oJ29uQnJvYWRjYXN0T25pb25TYXZlJywgZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICAgIGFuZ3VsYXIuZm9yRWFjaChzZWxmLnN0YWtlaG9sZGVyTGlzdCwgZnVuY3Rpb24gKHN0YWtlaG9sZGVyKSB7XHJcbiAgICAgICAgICAgIGlmIChzdGFrZWhvbGRlci5faWQgPT0gZGF0YS5faWQpe1xyXG4gICAgICAgICAgICAgICAgc3Rha2Vob2xkZXIuc3Rha2Vob2xkZXIgPSBkYXRhLnN0YWtlaG9sZGVyO1xyXG4gICAgICAgICAgICAgICAgc3Rha2Vob2xkZXIubmFtZSA9IGRhdGEubmFtZTtcclxuICAgICAgICAgICAgICAgIHN0YWtlaG9sZGVyLmRlc2NyaXB0aW9uID0gZGF0YS5kZXNjcmlwdGlvbjtcclxuICAgICAgICAgICAgICAgIHN0YWtlaG9sZGVyLm9wZW5FZGl0ID0gZGF0YS5vcGVuRWRpdDtcclxuICAgICAgICAgICAgICAgIHN0YWtlaG9sZGVyLnggPSBkYXRhLng7XHJcbiAgICAgICAgICAgICAgICBzdGFrZWhvbGRlci55ID0gZGF0YS55O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgfSk7XHJcblxyXG4gICAgZnVuY3Rpb24gc2F2ZVN0YWtlaG9sZGVyKHN0YWtlaG9sZGVyKSB7XHJcbiAgICAgICAgY29uc29sZS5sb2coJ1NhbHZhci4uLi4nICsgc3Rha2Vob2xkZXIubmFtZSk7XHJcbiAgICAgICAgY29uc29sZS5sb2coJ1NhbHZhci4uLi4nICsgc3Rha2Vob2xkZXIuZGVzY3JpcHRpb24pO1xyXG4gICAgICAgIFNvY2tldC5lbWl0KCdicm9hZGNhc3RPbmlvblNhdmUnLCBzdGFrZWhvbGRlcik7XHJcbiAgICB9XHJcblxyXG4gICAgU29ja2V0Lm9uKCdvbkJyb2FkY2FzdE9uaW9uRWRpdCcsIGZ1bmN0aW9uIChpZCkge1xyXG4gICAgICAgIGFuZ3VsYXIuZm9yRWFjaChzZWxmLnN0YWtlaG9sZGVyTGlzdCwgZnVuY3Rpb24gKHN0YWtlaG9sZGVyKSB7XHJcbiAgICAgICAgICAgIGlmKHN0YWtlaG9sZGVyLl9pZCA9PT0gaWQpIHtcclxuICAgICAgICAgICAgICAgIHN0YWtlaG9sZGVyLm9wZW5FZGl0ID0gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgIH0pO1xyXG5cclxuICAgIGZ1bmN0aW9uIHNldE9wZW5FZGl0KGlkKXtcclxuICAgICAgICBTb2NrZXQuZW1pdCgnYnJvYWRjYXN0T25pb25FZGl0JywgaWQpO1xyXG4gICAgfVxyXG5cclxuICAgIFNvY2tldC5vbignb25Ccm9hZGNhc3RPbmlvblJlbW92ZScsIGZ1bmN0aW9uIChpZCkge1xyXG4gICAgICAgIHZhciBzdGFrZWhvbGRlciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwic3Rha2Vob2xkZXJcIiArc2VsZi5zdGFrZWhvbGRlckxpc3RbaWRdLl9pZCk7XHJcbiAgICAgICAgc3Rha2Vob2xkZXIuc3R5bGUuZGlzcGxheSA9ICdub25lJztcclxuICAgICAgICBzZWxmLnN0YWtlaG9sZGVyTGlzdC5zcGxpY2UoaWQsMSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBmdW5jdGlvbiBkZWxQb3N0SXQoaW5kZXgsc3Rha2Vob2xkZXIpIHtcclxuICAgICAgICB2YXIgb2JqID0ge1xyXG4gICAgICAgICAgICBpbmRleDogaW5kZXgsXHJcbiAgICAgICAgICAgIHN0YWtlaG9sZGVyOiBzdGFrZWhvbGRlclxyXG4gICAgICAgIH07XHJcbiAgICAgICAgU29ja2V0LmVtaXQoJ2Jyb2FkY2FzdE9uaW9uUmVtb3ZlJywgb2JqKTtcclxuICAgIH1cclxuXHJcbiAgICBTb2NrZXQub24oJ29uQnJvYWRjYXN0T25pb25BZGQnLCBmdW5jdGlvbiAocmV0b3Jubykge1xyXG4gICAgICAgIHNlbGYuc3Rha2Vob2xkZXJMaXN0LnB1c2gocmV0b3Jubyk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBmdW5jdGlvbiBhZGRQb3N0SXQoZSxjYW1hZGEpIHtcclxuICAgICAgICB2YXIgbmV3U3Rha2Vob2xkZXIgPVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgXCJvbmlvbmxheWVyXCI6IGNhbWFkYSxcclxuICAgICAgICAgICAgXCJuYW1lXCI6IFwiXCIsXHJcbiAgICAgICAgICAgIFwiZGVzY3JpcHRpb25cIjogXCJcIixcclxuICAgICAgICAgICAgXCJvcGVuRWRpdFwiOiB0cnVlLFxyXG4gICAgICAgICAgICBcInhcIjogZS5wYWdlWCArICdweCcsXHJcbiAgICAgICAgICAgIFwieVwiOiBlLnBhZ2VZICsgJ3B4J1xyXG4gICAgICAgIH07XHJcbiAgICAgICBTb2NrZXQuZW1pdCgnYnJvYWRjYXN0T25pb25BZGQnLCBuZXdTdGFrZWhvbGRlcik7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gYWNlbmRlKGlkKSB7XHJcbiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJuYW1lXCIraWQpLnNldEF0dHJpYnV0ZSgnc3R5bGUnLCAndGV4dC1kZWNvcmF0aW9uOiB1bmRlcmxpbmU7JylcclxuICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImxlZ2VuZFwiK2lkKS5zZXRBdHRyaWJ1dGUoXCJvcGFjaXR5XCIsIFwiMC44XCIpO1xyXG4gICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGlkKS5zZXRBdHRyaWJ1dGUoXCJvcGFjaXR5XCIsIFwiMC44XCIpO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGFwYWdhKGlkKSB7XHJcbiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJuYW1lXCIraWQpLnNldEF0dHJpYnV0ZSgnc3R5bGUnLCAndGV4dC1kZWNvcmF0aW9uOiBub25lOycpXHJcbiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJsZWdlbmRcIitpZCkuc2V0QXR0cmlidXRlKFwib3BhY2l0eVwiLCBcIjEuMFwiKTtcclxuICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChpZCkuc2V0QXR0cmlidXRlKFwib3BhY2l0eVwiLCBcIjEuMFwiKTtcclxuICAgIH1cclxufVxyXG5cclxufSkoKTsiLCJcclxuKGZ1bmN0aW9uKCl7XHJcblxyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICAgIGFuZ3VsYXJcclxuICAgICAgICAubW9kdWxlKCdhcHAnKVxyXG4gICAgICAgIC5jb250cm9sbGVyKCdzdGFydFByb2JsZW1Db250cm9sbGVyJyxzdGFydFByb2JsZW1Db250cm9sbGVyKTtcclxuXHJcbiAgICBmdW5jdGlvbiBzdGFydFByb2JsZW1Db250cm9sbGVyKCRtZERpYWxvZywgJHN0YXRlLEF1dGgsU29ja2V0LCAkd2luZG93LCBwcm9ibGVtU2VydmljZSx0b2FzdEFwcCApIHtcclxuXHJcbiAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgICAgIHNlbGYubmlja25hbWUgPSBcIlwiO1xyXG4gICAgICAgIHNlbGYudXNlcmlkID0gXCJcIjtcclxuICAgICAgICBzZWxmLnVzZXJlbWFpbCA9IFwiXCI7XHJcbiAgICAgICAgc2VsZi5wcm9ibGVtTGlzdCA9IFtdO1xyXG4gICAgICAgIHNlbGYucHJvYmxlbUNvbGxhYm9yYXRvckxpc3QgPSBbXTtcclxuICAgICAgICBzZWxmLmxvZ2luSW5Qcm9ncmVzcyA9IHRydWU7XHJcbiAgICAgICAgc2VsZi5nZXRQcm9ibGVtcyA9IGdldFByb2JsZW1zO1xyXG4gICAgICAgIHNlbGYucmV2b212ZVByb2JsZW0gPSByZXZvbXZlUHJvYmxlbTtcclxuICAgICAgICBzZWxmLnN0YXJ0TmV3UHJvYmxlbSA9IHN0YXJ0TmV3UHJvYmxlbTtcclxuICAgICAgICBzZWxmLmVkaXRQcm9ibGVtID0gZWRpdFByb2JsZW07XHJcbiAgICAgICAgc2VsZi5kb0xvZ291dCA9IGRvTG9nb3V0O1xyXG4gICAgICAgIHNlbGYubmV3UHJvYmxlbSA9IG5ld1Byb2JsZW07XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGdldFByb2JsZW1zKCl7XHJcbiAgICAgICAgICAgIHNlbGYudXNlcmlkID0gJHdpbmRvdy5sb2NhbFN0b3JhZ2UuZ2V0SXRlbSgndXNlcmlkJyk7XHJcbiAgICAgICAgICAgIHNlbGYubmlja25hbWUgPSAkd2luZG93LmxvY2FsU3RvcmFnZS5nZXRJdGVtKCduaWNrbmFtZScpO1xyXG4gICAgICAgICAgICBzZWxmLnVzZXJlbWFpbCA9ICR3aW5kb3cubG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3VzZXJlbWFpbCcpO1xyXG4gICAgICAgICAgICBwcm9ibGVtU2VydmljZS5nZXR1c2VycHJvYmxlbXMoc2VsZi51c2VyZW1haWwpXHJcbiAgICAgICAgICAgICAgICAuc3VjY2VzcyhmdW5jdGlvbihkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYoZGF0YS5zdWNjZXNzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvcih2YXIgaT0wOyBpIDwgZGF0YS5wcm9ibGVtcy5sZW5ndGg7IGkrKyApe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YS5wcm9ibGVtc1tpXS5kZXNjcmlwdGlvbiA9IGRhdGEucHJvYmxlbXNbaV0uZGVzY3JpcHRpb24ucmVwbGFjZSgvKDwoW14+XSspPikvaWcsXCJcIikuc3Vic3RyaW5nKDAsNDYwKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxmLnByb2JsZW1MaXN0ID0gZGF0YS5wcm9ibGVtcztcclxuICAgICAgICAgICAgICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdG9hc3RBcHAuZXJyb3JNZXNzYWdlKGRhdGEubWVzc2FnZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHByb2JsZW1TZXJ2aWNlLmdldHByb2JsZW1zY29sbGFib3JhdG9yKHNlbGYudXNlcmVtYWlsKVxyXG4gICAgICAgICAgICAgICAgLnN1Y2Nlc3MoZnVuY3Rpb24oZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKGRhdGEuc3VjY2Vzcykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IodmFyIGk9MDsgaSA8IGRhdGEucHJvYmxlbXMubGVuZ3RoOyBpKysgKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEucHJvYmxlbXNbaV0uZGVzY3JpcHRpb24gPSBkYXRhLnByb2JsZW1zW2ldLmRlc2NyaXB0aW9uLnJlcGxhY2UoLyg8KFtePl0rKT4pL2lnLFwiXCIpLnN1YnN0cmluZygwLDQ2MCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5wcm9ibGVtQ29sbGFib3JhdG9yTGlzdCA9IGRhdGEucHJvYmxlbXM7XHJcbiAgICAgICAgICAgICAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRvYXN0QXBwLmVycm9yTWVzc2FnZShkYXRhLm1lc3NhZ2UpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBzZWxmLmxvZ2luSW5Qcm9ncmVzcyA9IGZhbHNlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gZGVsZXRlUHJvYmxlbShwcm9ibGVtaWQpe1xyXG4gICAgICAgICAgICBwcm9ibGVtU2VydmljZS5yZW1vdmVwcm9ibGVtKHByb2JsZW1pZClcclxuICAgICAgICAgICAgICAgIC5zdWNjZXNzKGZ1bmN0aW9uKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZihkYXRhLnN1Y2Nlc3MpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yKHZhciBpPTA7IGkgPCBzZWxmLnByb2JsZW1MaXN0Lmxlbmd0aDsgaSsrKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKHNlbGYucHJvYmxlbUxpc3RbaV0uX2lkID09IHByb2JsZW1pZCl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5wcm9ibGVtTGlzdC5zcGxpY2UoaSwxKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0b2FzdEFwcC5lcnJvck1lc3NhZ2UoZGF0YS5tZXNzYWdlKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIHJldm9tdmVQcm9ibGVtKGV2LHByb2JsZW0pIHtcclxuICAgICAgICAgICAgLy8gQXBwZW5kaW5nIGRpYWxvZyB0byBkb2N1bWVudC5ib2R5IHRvIGNvdmVyIHNpZGVuYXYgaW4gZG9jcyBhcHBcclxuICAgICAgICAgICAgdmFyIGNvbmZpcm0gPSAkbWREaWFsb2cuY29uZmlybSgpXHJcbiAgICAgICAgICAgICAgICAucGFyZW50KGFuZ3VsYXIuZWxlbWVudChkb2N1bWVudC5ib2R5KSlcclxuICAgICAgICAgICAgICAgIC50aXRsZSgnRGV0ZXRlIFByb2JsZW0/JylcclxuICAgICAgICAgICAgICAgIC5jb250ZW50KCdUaXRsZTogJyArIHByb2JsZW0udGl0bGUpXHJcbiAgICAgICAgICAgICAgICAuYXJpYUxhYmVsKCdSZW1vdmUgUHJvYmxlbScpXHJcbiAgICAgICAgICAgICAgICAub2soJ0Rlc2VqbyByZW1vdmVyIScpXHJcbiAgICAgICAgICAgICAgICAuY2FuY2VsKCdDYW5jZWwnKVxyXG4gICAgICAgICAgICAgICAgLnRhcmdldEV2ZW50KGV2KTtcclxuICAgICAgICAgICAgJG1kRGlhbG9nLnNob3coY29uZmlybSkudGhlbihmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgIGRlbGV0ZVByb2JsZW0ocHJvYmxlbS5faWQpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIHN0YXJ0TmV3UHJvYmxlbShuZXdwcm9ibGVtKXtcclxuICAgICAgICAgICAgbmV3cHJvYmxlbS51c2VyaWQgPSBzZWxmLnVzZXJpZDtcclxuICAgICAgICAgICAgcHJvYmxlbVNlcnZpY2UubmV3cHJvYmxlbShuZXdwcm9ibGVtKVxyXG4gICAgICAgICAgICAgICAgLnN1Y2Nlc3MoZnVuY3Rpb24oZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKGRhdGEuc3VjY2Vzcykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmVkaXRQcm9ibGVtKGRhdGEucHJvYmxlbSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRvYXN0QXBwLmVycm9yTWVzc2FnZShkYXRhLm1lc3NhZ2UpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gZWRpdFByb2JsZW0ocHJvYmxlbSkge1xyXG4gICAgICAgICAgICAkd2luZG93LmxvY2FsU3RvcmFnZS5zZXRJdGVtKFwicHJvYmxlbWlkXCIscHJvYmxlbS5faWQpO1xyXG4gICAgICAgICAgICB2YXIgaW5pdHNvY2tldHByb2JsZW0gPSB7XHJcbiAgICAgICAgICAgICAgICBcImlkcHJvYmxlbVwiOnByb2JsZW0uX2lkLFxyXG4gICAgICAgICAgICAgICAgXCJuaWNrbmFtZVwiOiBzZWxmLm5pY2tuYW1lXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIFNvY2tldC5lbWl0KCdpbml0UHJvYmxlbScsIGluaXRzb2NrZXRwcm9ibGVtKTtcclxuICAgICAgICAgICAgJHN0YXRlLmdvKCdwcm9ibGVtLnN0YWtlaG9sZGVycycpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gZG9Mb2dvdXQoKSB7XHJcbiAgICAgICAgICAgIEF1dGgubG9nb3V0KCk7XHJcbiAgICAgICAgICAgICRzdGF0ZS5nbygnaW5pdC5sb2dpbicpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gbmV3UHJvYmxlbShldikge1xyXG4gICAgICAgICAgICAgICAgJG1kRGlhbG9nLnNob3coe1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnRyb2xsZXI6IERpYWxvZ0NvbnRyb2xsZXIsXHJcbiAgICAgICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICd2aWV3cy9wYWdlcy9uZXdwcm9ibGVtLmh0bWwnLFxyXG4gICAgICAgICAgICAgICAgICAgIHBhcmVudDogYW5ndWxhci5lbGVtZW50KGRvY3VtZW50LmJvZHkpLFxyXG4gICAgICAgICAgICAgICAgICAgIHRhcmdldEV2ZW50OiBldlxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gRGlhbG9nQ29udHJvbGxlcigkc2NvcGUsICRtZERpYWxvZykge1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLmhpZGUgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICAgICAkbWREaWFsb2cuaGlkZSgpO1xyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgICRzY29wZS5jYW5jZWwgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICAgICAkbWREaWFsb2cuY2FuY2VsKCk7XHJcbiAgICAgICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgICAgICRzY29wZS5hZGROZXdQcm9ibGVtID0gZnVuY3Rpb24ocHJvYmxlbSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHNlbGYuc3RhcnROZXdQcm9ibGVtKHByb2JsZW0pO1xyXG4gICAgICAgICAgICAgICAgICAgICRtZERpYWxvZy5jYW5jZWwoKTtcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIH1cclxuICAgIH1cclxufSkoKTtcclxuXHJcbiIsIi8qKlxyXG4gKiBDcmVhdGVkIGJ5IEpPU0VWQUxERVJMRUkgb24gMjIvMDcvMjAxNS5cclxuICovXHJcbihmdW5jdGlvbigpe1xyXG5cclxuICAgIFwidXNlIHN0cmljdFwiO1xyXG5hbmd1bGFyXHJcbiAgICAubW9kdWxlKCdhcHAnKVxyXG4gICAgLmNvbnRyb2xsZXIoJ3ZhbHVlSWRlbnRpZmljYXRpb25GcmFtZUNvbnRyb2xsZXInLCB2YWx1ZUlkZW50aWZpY2F0aW9uRnJhbWVDb250cm9sbGVyKTtcclxuXHJcbmZ1bmN0aW9uIHZhbHVlSWRlbnRpZmljYXRpb25GcmFtZUNvbnRyb2xsZXIoJHdpbmRvdyxwcm9ibGVtU2VydmljZSx0b2FzdEFwcCxTb2NrZXQpe1xyXG5cclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgIHNlbGYuaW5Qcm9jZXNzaW5nID0gdHJ1ZTtcclxuICAgIHNlbGYuaWRQcm9ibGVtID0gXCJcIjtcclxuICAgIHNlbGYudXNlcmVtYWlsID0gXCJcIjtcclxuICAgIHNlbGYubmV3dmFsdWVzID0gXCJcIjtcclxuICAgIHNlbGYuaW5pdFZhbHVlSWRlbnRpZmljYXRpb25GcmFtZSA9IGluaXRWYWx1ZUlkZW50aWZpY2F0aW9uRnJhbWU7XHJcbiAgICBzZWxmLnNldFN1Z2dlc3Rpb25TaG93ID0gc2V0U3VnZ2VzdGlvblNob3c7XHJcbiAgICBzZWxmLmxlYXZlU3VnZ2VzdGlvblNob3cgPSBsZWF2ZVN1Z2dlc3Rpb25TaG93O1xyXG4gICAgc2VsZi5yZW1vdmVWYWx1ZUlkZW50aWNhdGlvbiA9IHJlbW92ZVZhbHVlSWRlbnRpY2F0aW9uO1xyXG4gICAgc2VsZi5zZXRWYWx1ZUlkZW50aWNhdGlvbiA9IHNldFZhbHVlSWRlbnRpY2F0aW9uO1xyXG4gICAgc2VsZi5zdWdlc3Rpb25WYWx1ZXMgPSBcIlwiO1xyXG4gICAgc2VsZi5zdGFrZWhvbGRlckxpc3QgPSBbXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBvbmlvbmxheWVyOiBcIkNvbW11bml0eVwiLFxyXG4gICAgICAgICAgICBzdGFrZWhvbGRlcnM6IFtdXHJcbiAgICAgICAgfSxcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIG9uaW9ubGF5ZXI6IFwiTWFya2V0XCIsXHJcbiAgICAgICAgICAgIHN0YWtlaG9sZGVyczogW11cclxuICAgICAgICB9LFxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgb25pb25sYXllcjogXCJTb3VyY2VcIixcclxuICAgICAgICAgICAgc3Rha2Vob2xkZXJzOiBbXVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBvbmlvbmxheWVyOiBcIkNvbnRydWlidWl0aW9uXCIsXHJcbiAgICAgICAgICAgIHN0YWtlaG9sZGVyczogW11cclxuICAgICAgICB9LFxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgb25pb25sYXllcjogXCJUZWNobmljb1wiLFxyXG4gICAgICAgICAgICBzdGFrZWhvbGRlcnM6IFtdXHJcbiAgICAgICAgfVxyXG4gICAgXTtcclxuICAgIHNlbGYuc3VnZXN0aW9uVmFsdWVzQXJyYXkgPSBbXHJcbiAgICAgICAgJ0FjZXNzaWJpbGlkYWRlJywnQWRhcHRhYmlsaWRhZGUnLCdFc3TDqXRpY2EnLCdBdXRvbm9taWEnLCAnRGlzcG9uaWJpbGlkYWRlJywgJ0NvbnNjacOqbmNpYScsICdDb2xhYm9yYcOnw6NvJyxcclxuICAgICAgICAnQ29udmVyc2HDp8OjbycsICdFbW/Dp8OjbyBlIEFmZXRvJywgJ0dydXBvcycsICdJZGVudGlkYWRlJywgJ0NvbnNlbnRpbWVudG8gaW5mb3JtYWRvJywgJ01ldGEtY29tdW5pY2HDp8OjbycsICdOb3JtYXMnLFxyXG4gICAgICAgICdPYmpldG8nLCAnUG9ydGFiaWxpZGFkZScsICdQcmVzZW7Dp2EnLCAnUHJpdmFjaWRhZGUnLCAnUHJvcHJpZWRhZGUnLCAnUmVjaXByb2NpZGFkZSwgUmVsYWNpb25hbWVudG8sIFJlcHV0YcOnw6NvJyxcclxuICAgICAgICAnRXNjYWxhYmlsaWRhZGUnLCAnU2VndXJhbsOnYScsICdDb21wYXJ0aWxoYW1lbnRvJywgJ0NvbmZpYW7Dp2EnLCAnVXNhYmlsaWRhZGUnLCAnVmlzaWJpbGlkYWRlJ107XHJcblxyXG4gICAgZnVuY3Rpb24gaW5pdFZhbHVlSWRlbnRpZmljYXRpb25GcmFtZSgpe1xyXG4gICAgICAgIHNlbGYuaWRwcm9ibGVtID0gJHdpbmRvdy5sb2NhbFN0b3JhZ2UuZ2V0SXRlbSgncHJvYmxlbWlkJyk7XHJcbiAgICAgICAgcHJvYmxlbVNlcnZpY2UuZ2V0b25pb24oc2VsZi5pZHByb2JsZW0pXHJcbiAgICAgICAgICAgIC5zdWNjZXNzKGZ1bmN0aW9uKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgIGlmKGRhdGEuc3VjY2Vzcykge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKGRhdGEuc3Rha2Vob2xkZXJzLmxlbmd0aCA+IDApe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yKHZhciBrID0gMTsgayA8IHNlbGYuc3VnZXN0aW9uVmFsdWVzQXJyYXkubGVuZ3RoOyBrKyspe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuc3VnZXN0aW9uVmFsdWVzICs9IHNlbGYuc3VnZXN0aW9uVmFsdWVzQXJyYXlba10gKyAgXCIsIFwiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxmLnN1Z2VzdGlvblZhbHVlc1tzZWxmLnN1Z2VzdGlvblZhbHVlc0FycmF5W3NlbGYuc3VnZXN0aW9uVmFsdWVzQXJyYXkubGVuZ3RoLTFdXSArICcuJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvcih2YXIgaSA9IDA7IGkgPCBkYXRhLnN0YWtlaG9sZGVycy5sZW5ndGg7IGkrKyl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yKHZhciBqID0gMDsgaiA8IHNlbGYuc3Rha2Vob2xkZXJMaXN0Lmxlbmd0aDsgaisrKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHN0YWtlaG9sZGVyID0ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2lkIDogZGF0YS5zdGFrZWhvbGRlcnNbaV0uX2lkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25pb25sYXllciA6IGRhdGEuc3Rha2Vob2xkZXJzW2ldLm9uaW9ubGF5ZXIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZXMgOiBkYXRhLnN0YWtlaG9sZGVyc1tpXS52YWx1ZXMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lIDogZGF0YS5zdGFrZWhvbGRlcnNbaV0ubmFtZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uIDogZGF0YS5zdGFrZWhvbGRlcnNbaV0uZGVzY3JpcHRpb24sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcGVuRWRpdCA6IGRhdGEuc3Rha2Vob2xkZXJzW2ldLm9wZW5FZGl0LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeCA6IGRhdGEuc3Rha2Vob2xkZXJzW2ldLngsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB5IDogZGF0YS5zdGFrZWhvbGRlcnNbaV0ueSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ld1ZhbHVlcyA6IFtdXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihkYXRhLnN0YWtlaG9sZGVyc1tpXS5vbmlvbmxheWVyID09IHNlbGYuc3Rha2Vob2xkZXJMaXN0W2pdLm9uaW9ubGF5ZXIpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5zdGFrZWhvbGRlckxpc3Rbal0uc3Rha2Vob2xkZXJzLnB1c2goc3Rha2Vob2xkZXIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5pblByb2Nlc3NpbmcgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICAgICAgICAgIHRvYXN0QXBwLmVycm9yTWVzc2FnZShkYXRhLm1lc3NhZ2UpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBTb2NrZXQub24oJ29uQnJvYWRjYXN0T25pb25TYXZlJywgZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICBjb25zb2xlLmxvZyhkYXRhKTtcclxuICAgICAgICBhbmd1bGFyLmZvckVhY2goc2VsZi5zdGFrZWhvbGRlckxpc3QsIGZ1bmN0aW9uIChzdGFrZWhvbGRlcikge1xyXG4gICAgICAgICAgICBpZiAoc3Rha2Vob2xkZXIuX2lkID09IGRhdGEuX2lkKXtcclxuICAgICAgICAgICAgICAgIHN0YWtlaG9sZGVyLnN0YWtlaG9sZGVyID0gZGF0YS5zdGFrZWhvbGRlcjtcclxuICAgICAgICAgICAgICAgIHN0YWtlaG9sZGVyLm5hbWUgPSBkYXRhLm5hbWU7XHJcbiAgICAgICAgICAgICAgICBzdGFrZWhvbGRlci5kZXNjcmlwdGlvbiA9IGRhdGEuZGVzY3JpcHRpb247XHJcbiAgICAgICAgICAgICAgICBzdGFrZWhvbGRlci5vcGVuRWRpdCA9IGRhdGEub3BlbkVkaXQ7XHJcbiAgICAgICAgICAgICAgICBzdGFrZWhvbGRlci54ID0gZGF0YS54O1xyXG4gICAgICAgICAgICAgICAgc3Rha2Vob2xkZXIueSA9IGRhdGEueTtcclxuICAgICAgICAgICAgICAgIHN0YWtlaG9sZGVyLm5ld1ZhbHVlcyA9IFtdO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBmdW5jdGlvbiBzZXRTdWdnZXN0aW9uU2hvdyhzdGFrZWhvbGRlcil7XHJcbiAgICAgICAgc3Rha2Vob2xkZXIub3BlbkVkaXQgPSB0cnVlO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGxlYXZlU3VnZ2VzdGlvblNob3coc3Rha2Vob2xkZXIpe1xyXG4gICAgICAgIHN0YWtlaG9sZGVyLm9wZW5FZGl0ID0gZmFsc2U7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gcmVtb3ZlVmFsdWVJZGVudGljYXRpb24odmFsdWUsc3Rha2Vob2xkZXIpe1xyXG4gICAgICAgIHZhciBuZXdMaXN0ID0gW107XHJcbiAgICAgICAgZm9yKHZhciBpID0gMDsgaSA8IHN0YWtlaG9sZGVyLnZhbHVlcy5sZW5ndGg7IGkrKyl7XHJcbiAgICAgICAgICAgIGlmKHN0YWtlaG9sZGVyLnZhbHVlc1tpXSAhPSB2YWx1ZSl7XHJcbiAgICAgICAgICAgICAgICBuZXdMaXN0LnB1c2goc3Rha2Vob2xkZXIudmFsdWVzW2ldKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBzdGFrZWhvbGRlci52YWx1ZXMgPSBuZXdMaXN0O1xyXG4gICAgICAgIFNvY2tldC5lbWl0KCdicm9hZGNhc3RPbmlvblNhdmUnLCBzdGFrZWhvbGRlcik7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gc2V0VmFsdWVJZGVudGljYXRpb24oc3Rha2Vob2xkZXIpIHtcclxuICAgICAgICBpZigoc3Rha2Vob2xkZXIubmV3VmFsdWVzID09PSBcIlwiKSB8fCAoc3Rha2Vob2xkZXIubmV3VmFsdWVzID09PSB1bmRlZmluZWQpKXtcclxuICAgICAgICAgICAgdG9hc3RBcHAuZXJyb3JNZXNzYWdlKCdWYWxvciBu77+9byBlc3BlY2lmaWNhZG8uJyk7XHJcbiAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgIHZhciB2YWx1ZXNMaXN0ID0gc3Rha2Vob2xkZXIubmV3VmFsdWVzLnNwbGl0KCcsJyk7XHJcbiAgICAgICAgICAgIGZvcih2YXIgaT0wOyBpIDwgdmFsdWVzTGlzdC5sZW5ndGg7IGkrKyl7XHJcbiAgICAgICAgICAgICAgICBpZihmaW5kVmFsdWUoc3Rha2Vob2xkZXIudmFsdWVzLCB2YWx1ZXNMaXN0W2ldKSl7XHJcbiAgICAgICAgICAgICAgICAgICAgdG9hc3RBcHAuZXJyb3JNZXNzYWdlKFwiRHVwbGljYXRlIHZhbHVlOiBcIiArIHZhbHVlc0xpc3RbaV0pO1xyXG4gICAgICAgICAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgICAgICAgICAgc3Rha2Vob2xkZXIudmFsdWVzLnB1c2godmFsdWVzTGlzdFtpXSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgc3Rha2Vob2xkZXIubmV3VmFsdWVzID0gXCJcIjtcclxuICAgICAgICAgICAgc3Rha2Vob2xkZXIub3BlbkVkaXQgPSBmYWxzZTtcclxuICAgICAgICAgICAgU29ja2V0LmVtaXQoJ2Jyb2FkY2FzdE9uaW9uU2F2ZScsIHN0YWtlaG9sZGVyKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGZpbmRWYWx1ZShsaXN0LCB2YWx1ZSl7XHJcbiAgICAgICAgZm9yKHZhciBpPTA7IGkgPCBsaXN0Lmxlbmd0aDsgaSsrKXtcclxuICAgICAgICAgICAgaWYodmFsdWUgPT09IGxpc3RbaV0pe1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG59XHJcblxyXG59KSgpO1xyXG4iLCIoZnVuY3Rpb24oKSB7XHJcbiAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICBhbmd1bGFyXHJcbiAgICAubW9kdWxlKCdhcHAnKVxyXG4gICAgLmNvbnRyb2xsZXIoJ3NpZ251cENvbnRyb2xsZXInLCBzaWdudXBDb250cm9sbGVyKTtcclxuICAgIHNpZ251cENvbnRyb2xsZXIuJGluamVjdCA9IFsnJHRyYW5zbGF0ZScsJyR3aW5kb3cnLCdzaWdudXBTZXJ2aWNlJywnJHN0YXRlJywndG9hc3RBcHAnLCdBdXRoVG9rZW4nLCdBdXRoJywnJGZpbHRlcicsJyRzdGF0ZVBhcmFtcyddO1xyXG5cclxuICBmdW5jdGlvbiBzaWdudXBDb250cm9sbGVyKCR0cmFuc2xhdGUsICR3aW5kb3csIHNpZ251cFNlcnZpY2UsJHN0YXRlLHRvYXN0QXBwLEF1dGhUb2tlbixBdXRoLCRmaWx0ZXIsJHN0YXRlUGFyYW1zKXtcclxuXHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICBzZWxmLm1lc3NhZ2UgID0gJyc7XHJcbiAgICBzZWxmLnNhdmUgICA9IHNhdmVVc2VyO1xyXG4gICAgc2VsZi5yZXNjdWVQYXNzd29yZCA9IHJlc2N1ZVBhc3N3b3JkO1xyXG4gICAgc2VsZi5jaGFuZ2VQYXNzd29yZCA9IGNoYW5nZVBhc3N3b3JkO1xyXG4gICAgc2VsZi5zZXRMYW5nID0gc2V0TGFuZztcclxuICAgIHNlbGYubG9naW5JblByb2dyZXNzID0gZmFsc2U7XHJcblxyXG4gICAgZnVuY3Rpb24gc2F2ZVVzZXIodXNlcikge1xyXG4gICAgICBzaWdudXBTZXJ2aWNlLmNyZWF0ZSh1c2VyKVxyXG4gICAgICAgICAgLnN1Y2Nlc3MoZnVuY3Rpb24oZGF0YSkge1xyXG4gICAgICAgICAgICBpZihkYXRhLnN1Y2Nlc3MpIHtcclxuICAgICAgICAgICAgICBBdXRoVG9rZW4uc2V0VG9rZW4oZGF0YS50b2tlbik7XHJcbiAgICAgICAgICAgICAgQXV0aC5nZXRVc2VyKClcclxuICAgICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24oZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHNlbGYudXNlciA9IGRhdGEuZGF0YTtcclxuICAgICAgICAgICAgICAgICAgICAgIHNlbGYubG9naW5JblByb2dyZXNzID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAkd2luZG93LmxvY2FsU3RvcmFnZS5zZXRJdGVtKFwidXNlcmVtYWlsXCIsdXNlci5lbWFpbCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAkd2luZG93LmxvY2FsU3RvcmFnZS5zZXRJdGVtKFwidXNlcmlkXCIsdXNlci5pZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAkd2luZG93LmxvY2FsU3RvcmFnZS5zZXRJdGVtKFwibmlja25hbWVcIix1c2VyLm5pY2tuYW1lKTtcclxuICAgICAgICAgICAgICAgICAgICAgIHNlbGYuc2V0TGFuZyh1c2VyLmxhbmd1YWdlKTtcclxuICAgICAgICAgICAgICAgICAgICB0b2FzdEFwcC5lcnJvck1lc3NhZ2UoJGZpbHRlcigndHJhbnNsYXRlJykoJ1dFTENPTUVfU1lTVEVNJykgKyBcIjogXCIgKyBzZWxmLnVzZXIubmlja25hbWUpO1xyXG4gICAgICAgICAgICAgICAgICAgICRzdGF0ZS5nbygnc3RhcnRwcm9ibGVtJyk7XHJcbiAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgICAgdG9hc3RBcHAuZXJyb3JNZXNzYWdlKFwiRW1haWwgSsOhIGNhZGFzdHJhZG9cIik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgfVxyXG5cclxuICAgICAgZnVuY3Rpb24gc2V0TGFuZyhsYW5nS2V5KSB7XHJcbiAgICAgICAgICAkdHJhbnNsYXRlLnVzZShsYW5nS2V5KTtcclxuICAgICAgfVxyXG5cclxuICAgICAgZnVuY3Rpb24gcmVzY3VlUGFzc3dvcmQodXNlckVtYWlsKXtcclxuICAgICAgICAgIHNpZ251cFNlcnZpY2UucmVzY3VlUGFzc3dvcmQodXNlckVtYWlsKVxyXG4gICAgICAgICAgICAgIC5zdWNjZXNzKGZ1bmN0aW9uKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coZGF0YSk7XHJcbiAgICAgICAgICAgICAgICAgIGlmKGRhdGEuc3VjY2Vzcykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgdG9hc3RBcHAuZXJyb3JNZXNzYWdlKFwiRW1haWwgY29tIGluc3RydcOnw7VlcyBlbnZpYWRvXCIpO1xyXG4gICAgICAgICAgICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgICAgICAgICAgIHRvYXN0QXBwLmVycm9yTWVzc2FnZShcIkVycm9yXCIpO1xyXG4gICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgfSk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGZ1bmN0aW9uIGNoYW5nZVBhc3N3b3JkKHVzZXIpe1xyXG4gICAgICAgICAgc2lnbnVwU2VydmljZS5jaGFuZ2VQYXNzd29yZCh1c2VyKVxyXG4gICAgICAgICAgICAgIC5zdWNjZXNzKGZ1bmN0aW9uKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgICAgaWYoZGF0YS5zdWNjZXNzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICB0b2FzdEFwcC5lcnJvck1lc3NhZ2UoXCJTZW5oYSBhbHRlcmFkYSBjb20gc3VjZXNzby4gRmHDp2EgbG9naW4gY29tIGEgbm92YSBzZW5oYS5cIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAkc3RhdGUuZ28oJ2luaXQnKTtcclxuICAgICAgICAgICAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgICAgICAgICAgICB0b2FzdEFwcC5lcnJvck1lc3NhZ2UoXCJFcnJvclwiKTtcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICB9KTtcclxuICAgICAgfVxyXG5cclxuXHJcbiAgfVxyXG59KSgpOyIsIihmdW5jdGlvbigpIHtcclxuICAndXNlIHN0cmljdCc7XHJcblxyXG4gIGFuZ3VsYXJcclxuICAgIC5tb2R1bGUoJ2FwcCcpXHJcbiAgICAuZmFjdG9yeSgnc2lnbnVwU2VydmljZScsIHNpZ251cFNlcnZpY2UpO1xyXG5cclxuICBzaWdudXBTZXJ2aWNlLiRpbmplY3QgPSBbJyRodHRwJywnJGxvY2F0aW9uJ107XHJcblxyXG4gIGZ1bmN0aW9uIHNpZ251cFNlcnZpY2UoJGh0dHAsJGxvY2F0aW9uKSB7XHJcblxyXG4gICAgdmFyIEFQSV9ST1VURV9VU0VSID0gJy9hcGkvc2lnbnVwLyc7XHJcbiAgICB2YXIgQVBJX1JPVVRFX1JFU0NVRVBBU1NXT1JEID0gJy9hcGkvcmVzY3VlcGFzc3dkLyc7XHJcbiAgICB2YXIgQVBJX1JPVVRFX1NFVE5FV1BBU1NXT1JEID0gJy9hcGkvcmVzY3VlcGFzc3dkL25ld3Bhc3N3ZC8nO1xyXG5cclxuXHJcbiAgICB2YXIgc2VydmljZSA9IHtcclxuICAgICAgY3JlYXRlICAgICAgICAgOiBjcmVhdGUsXHJcbiAgICAgIHJlc2N1ZVBhc3N3b3JkIDogcmVzY3VlUGFzc3dvcmQsXHJcbiAgICAgIGNoYW5nZVBhc3N3b3JkIDogY2hhbmdlUGFzc3dvcmRcclxuICAgIH07XHJcblxyXG4gICAgcmV0dXJuIHNlcnZpY2U7XHJcblxyXG4gICAgZnVuY3Rpb24gY3JlYXRlKGRhdGEpIHtcclxuICAgICAgICByZXR1cm4gJGh0dHAucG9zdChBUElfUk9VVEVfVVNFUiwgZGF0YSk7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gcmVzY3VlUGFzc3dvcmQoZGF0YSl7XHJcbiAgICAgIHJldHVybiAkaHR0cC5wb3N0KEFQSV9ST1VURV9SRVNDVUVQQVNTV09SRCwgZGF0YSk7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gY2hhbmdlUGFzc3dvcmQoZGF0YSl7XHJcbiAgICAgIHZhciBteXRva2VuVVJMID0gJGxvY2F0aW9uLnNlYXJjaCgpO1xyXG4gICAgICByZXR1cm4gJGh0dHAuZ2V0KEFQSV9ST1VURV9TRVRORVdQQVNTV09SRCArICc/bXl0b2tlbj0nICsgbXl0b2tlblVSTC5teXRva2VuKycmcGFzc3dvcmQ9JytkYXRhLnBhc3N3b3JkKTtcclxuICAgIH1cclxuICB9XHJcblxyXG59KSgpO1xyXG4iLCIvKipcclxuICogQ3JlYXRlZCBieSBKT1NFVkFMREVSTEVJIG9uIDI1LzA2LzIwMTUuXHJcbiAqL1xyXG5cclxuKGZ1bmN0aW9uKCl7XHJcblxyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICAgIGFuZ3VsYXJcclxuICAgICAgICAubW9kdWxlKCdhcHAnKVxyXG4gICAgICAgIC5jb25maWcoYXBwQ29uZmlnKTtcclxuXHJcbiAgICBhcHBDb25maWcuJGluamVjdCA9IFsnJG1kVGhlbWluZ1Byb3ZpZGVyJywnJGxvY2F0aW9uUHJvdmlkZXInXTtcclxuXHJcbiAgICBmdW5jdGlvbiBhcHBDb25maWcgKCRtZFRoZW1pbmdQcm92aWRlciwkbG9jYXRpb25Qcm92aWRlcikge1xyXG5cclxuICAgICAgICAgLy8kbG9jYXRpb25Qcm92aWRlci5odG1sNU1vZGUodHJ1ZSk7XHJcbiAgICAgICAgdmFyIGN1c3RvbUdyZWVuTWFwID0gJG1kVGhlbWluZ1Byb3ZpZGVyLmV4dGVuZFBhbGV0dGUoJ3RlYWwnLCB7XHJcbiAgICAgICAgICAgICdjb250cmFzdERlZmF1bHRDb2xvcic6ICdsaWdodCcsXHJcbiAgICAgICAgICAgICdjb250cmFzdERhcmtDb2xvcnMnOiBbJzUwJ10sXHJcbiAgICAgICAgICAgICc1MCc6ICdFMEYyRjEnXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICRtZFRoZW1pbmdQcm92aWRlci5kZWZpbmVQYWxldHRlKCdjdXN0b21HcmVlbicsIGN1c3RvbUdyZWVuTWFwKTtcclxuICAgICAgICAkbWRUaGVtaW5nUHJvdmlkZXIudGhlbWUoJ2RlZmF1bHQnKVxyXG4gICAgICAgICAgICAucHJpbWFyeVBhbGV0dGUoJ2N1c3RvbUdyZWVuJywge1xyXG4gICAgICAgICAgICAgICAgJ2RlZmF1bHQnOiAnNTAwJyxcclxuICAgICAgICAgICAgICAgICdodWUtMSc6ICc1MCdcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLmFjY2VudFBhbGV0dGUoJ3RlYWwnKTtcclxuICAgICAgICAkbWRUaGVtaW5nUHJvdmlkZXIudGhlbWUoJ2lucHV0JywgJ2RlZmF1bHQnKVxyXG4gICAgICAgICAgICAucHJpbWFyeVBhbGV0dGUoJ2dyZWVuJyk7XHJcblxyXG4gICAgfTtcclxuXHJcblxyXG59KSgpOyIsIlxyXG4oZnVuY3Rpb24oKXtcclxuXHJcblx0XCJ1c2Ugc3RyaWN0XCI7XHJcblxyXG5cdGFuZ3VsYXJcclxuXHRcdC5tb2R1bGUoJ2F1dGhTZXJ2aWNlJywgW10pXHJcblx0XHQuZmFjdG9yeSgnQXV0aCcsIGZ1bmN0aW9uKCRodHRwLCAkcSwgQXV0aFRva2VuKSB7XHJcblx0XHRcdHZhciBhdXRoRmFjdG9yeSA9IHt9O1xyXG5cdFx0XHRhdXRoRmFjdG9yeS5sb2dpbiA9IGZ1bmN0aW9uKGVtYWlsLCBwYXNzd29yZCkge1xyXG5cdFx0XHRcdHJldHVybiAkaHR0cC5wb3N0KCcvYXBpL2xvZ2luJywge1xyXG5cdFx0XHRcdFx0ZW1haWw6IGVtYWlsLFxyXG5cdFx0XHRcdFx0cGFzc3dvcmQ6IHBhc3N3b3JkXHJcblx0XHRcdFx0fSlcclxuXHRcdFx0XHRcdC5zdWNjZXNzKGZ1bmN0aW9uKGRhdGEpIHtcclxuXHRcdFx0XHRcdFx0QXV0aFRva2VuLnNldFRva2VuKGRhdGEudG9rZW4pO1xyXG5cdFx0XHRcdFx0XHRyZXR1cm4gZGF0YTtcclxuXHRcdFx0XHRcdH0pO1xyXG5cdFx0XHR9O1xyXG5cclxuXHRcdFx0YXV0aEZhY3RvcnkubG9nb3V0ID0gZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0QXV0aFRva2VuLnNldFRva2VuKCk7XHJcblx0XHRcdH07XHJcblxyXG5cdFx0XHRhdXRoRmFjdG9yeS5pc0xvZ2dlZEluID0gZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0aWYoQXV0aFRva2VuLmdldFRva2VuKCkpIHtcclxuXHRcdFx0XHRcdHJldHVybiB0cnVlO1xyXG5cdFx0XHRcdH1lbHNlIHtcclxuXHRcdFx0XHRcdHJldHVybiBmYWxzZTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH07XHJcblxyXG5cdFx0XHRhdXRoRmFjdG9yeS5nZXRVc2VyID0gZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0aWYoQXV0aFRva2VuLmdldFRva2VuKCkpIHtcclxuXHRcdFx0XHRcdHJldHVybiAkaHR0cC5nZXQoJy9hcGkvbWUnKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0ZWxzZSB7XHJcblx0XHRcdFx0XHRyZXR1cm4gJHEucmVqZWN0KHttZXNzYWdlOiBcIlVzZXIgaGFzIG5vIHRva2VuXCJ9KTtcclxuXHRcdFx0XHR9XHJcblxyXG5cdFx0XHR9O1xyXG5cdFx0XHRyZXR1cm4gYXV0aEZhY3Rvcnk7XHJcblx0XHR9KVxyXG5cdFx0LmZhY3RvcnkoJ0F1dGhUb2tlbicsIGZ1bmN0aW9uKCR3aW5kb3cpIHtcclxuXHJcblx0XHRcdHZhciBhdXRoVG9rZW5GYWN0b3J5ID0ge307XHJcblxyXG5cdFx0XHRhdXRoVG9rZW5GYWN0b3J5LmdldFRva2VuID0gZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0cmV0dXJuICR3aW5kb3cubG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3Rva2VuJyk7XHJcblx0XHRcdH07XHJcblxyXG5cdFx0XHRhdXRoVG9rZW5GYWN0b3J5LnNldFRva2VuID0gZnVuY3Rpb24odG9rZW4pIHtcclxuXHJcblx0XHRcdFx0aWYgKHRva2VuKSB7XHJcblx0XHRcdFx0XHQkd2luZG93LmxvY2FsU3RvcmFnZS5zZXRJdGVtKCd0b2tlbicsIHRva2VuKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0ZWxzZXtcclxuXHRcdFx0XHRcdCR3aW5kb3cubG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oJ3Rva2VuJyk7XHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0fTtcclxuXHRcdFx0cmV0dXJuIGF1dGhUb2tlbkZhY3Rvcnk7XHJcblx0XHR9KVxyXG5cdFx0LmZhY3RvcnkoJ0F1dGhJbnRlcmNlcHRvcicsIGZ1bmN0aW9uKCRxLCAkbG9jYXRpb24sIEF1dGhUb2tlbikge1xyXG5cdFx0XHR2YXIgaW50ZXJjZXB0b3JGYWN0b3J5ID0ge307XHJcblx0XHRcdGludGVyY2VwdG9yRmFjdG9yeS5yZXF1ZXN0ID0gZnVuY3Rpb24oY29uZmlnKSB7XHJcblx0XHRcdFx0dmFyIHRva2VuID0gQXV0aFRva2VuLmdldFRva2VuKCk7XHJcblx0XHRcdFx0aWYodG9rZW4pIHtcclxuXHRcdFx0XHRcdGNvbmZpZy5oZWFkZXJzWyd4LWFjY2Vzcy10b2tlbiddID0gdG9rZW47XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdHJldHVybiBjb25maWc7XHJcblx0XHRcdH07XHJcblx0XHRcdHJldHVybiBpbnRlcmNlcHRvckZhY3Rvcnk7XHJcblx0XHR9KTtcclxufSkoKTsiLCJcclxuYW5ndWxhci5tb2R1bGUoJ0Ryb3BEU0MnLFtdKVxyXG4gICAgLmRpcmVjdGl2ZSgnZHJhZ2dhYmxlJywgZnVuY3Rpb24oJGRvY3VtZW50LFNvY2tldCkge1xyXG4gICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICByZXN0cmljdDogJ0EnLFxyXG4gICAgICAgICAgICByZXBsYWNlOiB0cnVlLFxyXG4gICAgICAgICAgICBsaW5rOiBmdW5jdGlvbihzY29wZSwgZWxlbWVudCwgYXR0cikge1xyXG4gICAgICAgICAgICAgICAgICBlbGVtZW50Lm9uKCdtb3VzZWRvd24nLCBmdW5jdGlvbihldmVudCkge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgIGlmKGV2ZW50LnRhcmdldC5pZC5zdWJzdHJpbmcoMCwxMSkgPT0gXCJzdGFrZWhvbGRlclwiKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBQcmV2ZW50IGRlZmF1bHQgZHJhZ2dpbmcgb2Ygc2VsZWN0ZWQgY29udGVudFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgJGRvY3VtZW50LmJpbmQoJ21vdXNlbW92ZScsIG1vdXNlbW92ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgJGRvY3VtZW50LmJpbmQoJ21vdXNldXAnLCBtb3VzZXVwKTtcclxuICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICBmdW5jdGlvbiBtb3VzZW1vdmUoZXZlbnQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgIHZhciBpZF9kaXYgPSBldmVudC50YXJnZXQuaWQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICBpZiAoaWRfZGl2ID09ICdzdmcnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgaWRfZGl2ID0gXCJcIjtcclxuICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICBzY29wZS5zdGFrZWhvbGRlci5vbmlvbmxheWVyID0gaWRfZGl2O1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgIHkgPSBldmVudC5wYWdlWTtcclxuICAgICAgICAgICAgICAgICAgICAgIHggPSBldmVudC5wYWdlWDtcclxuICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQuY3NzKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICB0b3A6IHkgKyAncHgnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGxlZnQ6ICB4ICsgJ3B4J1xyXG4gICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAvKlNvY2tldC5vbignb25Ccm9hZGNhc3RPbmlvblBvc2l0aW9uJywgZnVuY3Rpb24gKHN0YWtlaG9sZGVyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5jc3Moe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b3A6IHN0YWtlaG9sZGVyLnksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxlZnQ6ICBzdGFrZWhvbGRlci54XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICB9KTsqL1xyXG4gICAgICAgICAgICAgICAgICAgICAgc2NvcGUuc3Rha2Vob2xkZXIueCA9IHggKyAncHgnO1xyXG4gICAgICAgICAgICAgICAgICAgICAgc2NvcGUuc3Rha2Vob2xkZXIueSA9IHkgKyAncHgnO1xyXG4gICAgICAgICAgICAgICAgICAgICAgLy9Tb2NrZXQuZW1pdCgnYnJvYWRjYXN0T25pb25Qb3NpdGlvbicsIHNjb3BlLnN0YWtlaG9sZGVyKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAgICAgICBmdW5jdGlvbiBtb3VzZXVwKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgJGRvY3VtZW50LnVuYmluZCgnbW91c2Vtb3ZlJywgbW91c2Vtb3ZlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICRkb2N1bWVudC51bmJpbmQoJ21vdXNldXAnLCBtb3VzZXVwKTtcclxuICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICB9KTsiLCIvKipcclxuICogQ3JlYXRlZCBieSBKT1NFVkFMREVSTEVJIG9uIDI1LzA2LzIwMTUuXHJcbiAqL1xyXG5cclxuKGZ1bmN0aW9uKCkge1xyXG5cclxuICAgICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgICBhbmd1bGFyXHJcbiAgICAgICAgLm1vZHVsZSgnYXBwJylcclxuICAgICAgICAuY29udHJvbGxlcignbG9naW5Db250cm9sbGVyJyxsb2dpbkNvbnRyb2xsZXIpO1xyXG5cclxuICAgICAgICBmdW5jdGlvbiBsb2dpbkNvbnRyb2xsZXIoJHRyYW5zbGF0ZSwgJHJvb3RTY29wZSwgJHN0YXRlLCBBdXRoLCAkd2luZG93LCAkZmlsdGVyLCB0b2FzdEFwcCkge1xyXG4gICAgICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICAgICAgICAgIHNlbGYuaW5Qcm9jZXNzaW5nID0gZmFsc2U7XHJcbiAgICAgICAgICAgIHNlbGYuc2V0TGFuZyA9IHNldExhbmc7XHJcbiAgICAgICAgICAgIHNlbGYuZG9Mb2dvdXQgPSBkb0xvZ291dDtcclxuICAgICAgICAgICAgc2VsZi5kb0xvZ2luID0gZG9Mb2dpbjtcclxuXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIHNldExhbmcobGFuZ0tleSkge1xyXG4gICAgICAgICAgICAgICAgICR0cmFuc2xhdGUudXNlKGxhbmdLZXkpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBzZWxmLmxvZ2dlZEluID0gQXV0aC5pc0xvZ2dlZEluKCk7XHJcblxyXG4gICAgICAgICAgICAkcm9vdFNjb3BlLiRvbignJHJvdXRlQ2hhbmdlU3RhcnQnLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgIHNlbGYubG9nZ2VkSW4gPSBBdXRoLmlzTG9nZ2VkSW4oKTtcclxuICAgICAgICAgICAgICAgIEF1dGguZ2V0VXNlcigpXHJcbiAgICAgICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24oZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxmLnVzZXIgPSBkYXRhLmRhdGE7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgZnVuY3Rpb24gZG9Mb2dpbih1c2VyKSB7XHJcbiAgICAgICAgICAgICAgICBzZWxmLmluUHJvY2Vzc2luZyA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICBzZWxmLmVycm9yID0gJyc7XHJcbiAgICAgICAgICAgICAgICBBdXRoLmxvZ2luKHVzZXIuZW1haWwsIHVzZXIucGFzc3dvcmQpXHJcbiAgICAgICAgICAgICAgICAgICAgLnN1Y2Nlc3MoZnVuY3Rpb24oZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkd2luZG93LmxvY2FsU3RvcmFnZS5zZXRJdGVtKFwidXNlcmVtYWlsXCIsZGF0YS5lbWFpbCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICR3aW5kb3cubG9jYWxTdG9yYWdlLnNldEl0ZW0oXCJ1c2VyaWRcIixkYXRhLmlkKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJHdpbmRvdy5sb2NhbFN0b3JhZ2Uuc2V0SXRlbShcIm5pY2tuYW1lXCIsZGF0YS5uaWNrbmFtZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuc2V0TGFuZyhkYXRhLmxhbmd1YWdlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgQXV0aC5nZXRVc2VyKClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLnVzZXIgPSBkYXRhLmRhdGE7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9hc3RBcHAuZXJyb3JNZXNzYWdlKCRmaWx0ZXIoJ3RyYW5zbGF0ZScpKCdXRUxDT01FX1NZU1RFTScpICsgXCI6IFwiICsgc2VsZi51c2VyLm5pY2tuYW1lKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmluUHJvY2Vzc2luZyA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKGRhdGEuc3VjY2Vzcykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJHN0YXRlLmdvKCdzdGFydHByb2JsZW0nKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmVycm9yID0gZGF0YS5tZXNzYWdlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBmdW5jdGlvbiBkb0xvZ291dCgpIHtcclxuICAgICAgICAgICAgICAgIEF1dGgubG9nb3V0KCk7XHJcbiAgICAgICAgICAgICAgICAkc3RhdGUoJ2luaXQnKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICB9XHJcblxyXG59KSgpO1xyXG4iLCIvKipcclxuICogQ3JlYXRlZCBieSBKT1NFVkFMREVSTEVJIG9uIDIxLzA2LzIwMTUuXHJcbiAqL1xyXG5cclxuKGZ1bmN0aW9uKCl7XHJcblxyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICAgIGFuZ3VsYXJcclxuICAgICAgICAubW9kdWxlKCdhcHAnKVxyXG4gICAgICAgIC5zZXJ2aWNlKCdTb2NrZXQnLFxyXG4gICAgICAgIFsnJGxvY2F0aW9uJywgJyR0aW1lb3V0JyxcclxuICAgIGZ1bmN0aW9uKCRsb2NhdGlvbiwgJHRpbWVvdXQpIHtcclxuICAgICAgICBpZiAodHJ1ZSkge1xyXG4gICAgICAgICAgICB0aGlzLnNvY2tldCA9IGlvKCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgJGxvY2F0aW9uLnBhdGgoJy8nKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMub24gPSBmdW5jdGlvbihldmVudE5hbWUsIGNhbGxiYWNrKSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLnNvY2tldCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zb2NrZXQub24oZXZlbnROYW1lLCBmdW5jdGlvbihkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJHRpbWVvdXQoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrKGRhdGEpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICB0aGlzLmVtaXQgPSBmdW5jdGlvbihldmVudE5hbWUsIGRhdGEpIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuc29ja2V0KSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNvY2tldC5lbWl0KGV2ZW50TmFtZSwgZGF0YSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICB0aGlzLnJlbW92ZUxpc3RlbmVyID0gZnVuY3Rpb24oZXZlbnROYW1lKSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLnNvY2tldCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zb2NrZXQucmVtb3ZlTGlzdGVuZXIoZXZlbnROYW1lKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcbl0pXHJcblxyXG59KSgpO1xyXG4iXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=