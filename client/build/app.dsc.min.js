function toastApp(e){function o(o){this.message=o,e.show({controller:"toastController",controllerAs:"vm",templateUrl:"views/pages/dsctoast.html",action:"OK",highlightAction:!0,position:"top left",hideDelay:5e3})}var t={message:"",errorMessage:o};return t}function chatDSC(e,o,t,r,a,n){var i=this;i.newmsg="",i.messages=[],i.replay=!1,i.nickname="",i.close=function(){t("chat").close().then(function(){r.debug("close chat")})},i.initHistoryChat=function(){i.idProblem=n.localStorage.getItem("problemid"),i.nickname=n.localStorage.getItem("nickname"),a.gethistorychat(i.idProblem).success(function(e){if(e.success)for(var o=0;o<e.historychat.length;o++){var t=new Date(e.historychat[o].time),r={nickname:e.historychat[o].nickname,msg:e.historychat[o].msg,time:t.getDate()+"/"+(t.getMonth()+1)+"/"+t.getFullYear()+" ["+t.getHours()+":"+t.getMinutes()+"] "};i.messages.push(r)}})},i.showReplay=function(){i.replay=i.replay?!1:!0},o.on("onBroadcastChat",function(e){var o=new Date(e[e.length-1].time);i.messages.push({nickname:e[e.length-1].nickname,msg:e[e.length-1].msg,time:o.getDate()+"/"+(o.getMonth()+1)+"/"+o.getFullYear()+" ["+o.getHours()+":"+o.getMinutes()+"] "})}),i.sendMessage=function(e){o.emit("broadcastChat",e),i.newmsg=""}}function dscReportController(){function e(e){var o=document.getElementById("projectResport"),t=new jsPDF("l","px");t.addHTML(o,0,0,{pagesplit:!0},function(e){t.save("test.pdf")})}var o=this;o.idproblem="ajflajfljalfjaljf",o.buidReport=e}function evaluationframeworkController(e,o,t,r){function a(){n.idproblem=e.localStorage.getItem("problemid"),o.getevaluation(n.idproblem).success(function(e){e.success?n.evaluationframeworkList=e.evaluationframework:toastApp.errorMessage(e.message)})}var n=this;n.evaluationframeworkList=[],n.initEvaluation=a,t.on("onBroadcastFrameSave",function(e){angular.forEach(n.evaluationframeworkList,function(o){o.onionlayer==e.onionlayer&&angular.forEach(o.stakeholders,function(o){o._id==e._id&&(o.name=e.name,o.onionlayer=e.onionlayer,o.description=e.description,o.openEdit=e.openEdit,o.problems=e.problems,o.solutions=e.solutions)})})}),r.saveDiscution=function(e){t.emit("broadcastFrameSave",e)},t.on("onUpdateStakeholder",function(e){console.log(e)}),r.setOpenEditDiscution=function(e){e.openEdit=!0}}function semioticframeworkController(e,o,t){function r(){u.idproblem=o.localStorage.getItem("problemid"),t.getsemiotic(u.idproblem).success(function(e){e.success?u.semioticframework=e.semioticframework:toastApp.errorMessage(e.message)})}function a(o,t){var r={text:o,update:t};e.emit("updateSocialWorld",r)}function n(o,t){var r={text:o,update:t};e.emit("updatePragmatic",r)}function i(o,t){var r={text:o,update:t};e.emit("updateSemantic",r)}function s(o,t){var r={text:o,update:t};e.emit("updateSyntatic",r)}function l(o,t){var r={text:o,update:t};e.emit("updateEmpirical",r)}function c(o,t){var r={text:o,update:t};e.emit("updatePhysical",r)}var u=this;u.idproblem="",u.saveSocialWorld=a,u.savePragmatic=n,u.saveSemantic=i,u.saveSyntatic=s,u.saveEmpirical=l,u.savePhysical=c,u.semioticframework="",u.initSemioticFramework=r,e.on("onUpdateSocialWorld",function(e){u.semioticframework.socialworld=e}),e.on("onUpdatePragmatic",function(e){u.semioticframework.pragmatic=e}),e.on("onUpdateSemantic",function(e){u.semioticframework.semioticramework=e}),e.on("onUpdateSyntatic",function(e,o){u.semioticframework.syntatic=e}),e.on("onUpdateEmpirical",function(e){u.semioticframework.empirical=e}),e.on("onUpdatePhysical",function(e){u.semioticframework.physical=e})}function stakeholderController(e,o,t,r){function a(){n.idproblem=t.localStorage.getItem("problemid"),r.getonion(n.idproblem).success(function(e){e.success?n.stakeholderList=e.stakeholders:toastApp.errorMessage(e.message)}),n.inProcessing=!1}var n=this;n.idproblem="",n.stakeholderList=[],n.stakeholder="",n.intitOnion=a,n.move=!1,n.inProcessing=!0,e.on("onBroadcastOnionSave",function(e){angular.forEach(n.stakeholderList,function(o){o._id==e._id&&(o.stakeholder=e.stakeholder,o.name=e.name,o.description=e.description,o.openEdit=e.dadaopenEdit,o.x=e.x,o.y=e.y)})}),o.saveStakeholder=function(o){e.emit("broadcastOnionSave",o)},e.on("onBroadcastOnionEdit",function(e){angular.forEach(n.stakeholderList,function(o){o._id==e&&(o.openEdit=!0)})}),o.setOpenEdit=function(o){e.emit("broadcastOnionEdit",o)},e.on("onBroadcastOnionRemove",function(e){var o=document.getElementById("stakeholder"+n.stakeholderList[e]._id);o.style.display="none",n.stakeholderList.splice(e,1)}),o.delPostIt=function(o,t){var r={index:o,stakeholder:t};e.emit("broadcastOnionRemove",r)},e.on("onBroadcastOnionAdd",function(e){n.stakeholderList.push(e)}),o.addPostIt=function(o,t){var r={onionlayer:t,name:"",description:"",openEdit:!0,x:o.pageX+"px",y:o.pageY+"px"};e.emit("broadcastOnionAdd",r)},n.acende=function(e){e.target.setAttribute("opacity","0.8")},n.apaga=function(e){e.target.setAttribute("opacity","1.0")}}function valueIdentificationFrameController(e,o,t,r){function a(e,o){for(var t=0;t<e.length;t++)if(o===e[t])return!0;return!1}var n=this;n.inProcessing=!0,n.idProblem="",n.useremail="",n.newvalues="",n.stakeholderList=[{onionlayer:"Community",stakeholders:[]},{onionlayer:"Market",stakeholders:[]},{onionlayer:"Source",stakeholders:[]},{onionlayer:"Contruibuition",stakeholders:[]},{onionlayer:"Technico",stakeholders:[]}],n.sugestionValues="",n.sugestionValuesArray=["Acessibilidade","Adaptabilidade","Est�tica","Autonomia","Disponibilidade","Consci�ncia","Colabora��o","Conversa��o","Emo��o e Afeto","Grupos","Identidade","Consentimento informado","Meta-comunica��o","Normas","Objeto","Portabilidade","Presen�a","Privacidade","Propriedade","Reciprocidade, Relacionamento, Reputa��o,Escalabilidade","Seguran�a","Compartilhamento","Confian�a","Usabilidade","Visibilidade"],n.initValueIdentificationFrame=function(){n.idproblem=e.localStorage.getItem("problemid"),o.getonion(n.idproblem).success(function(e){if(e.success){if(e.stakeholders.length>0){for(var o=1;o<n.sugestionValuesArray.length;o++)n.sugestionValues+=n.sugestionValuesArray[o]+", ";n.sugestionValues[n.sugestionValuesArray[n.sugestionValuesArray.length-1]]+".";for(var r=0;r<e.stakeholders.length;r++)for(var a=0;a<n.stakeholderList.length;a++){var i={_id:e.stakeholders[r]._id,onionlayer:e.stakeholders[r].onionlayer,values:e.stakeholders[r].values,name:e.stakeholders[r].name,description:e.stakeholders[r].description,openEdit:e.stakeholders[r].openEdit,x:e.stakeholders[r].x,y:e.stakeholders[r].y,newValues:[]};console.log(i),e.stakeholders[r].onionlayer!=n.stakeholderList[a].onionlayer||n.stakeholderList[a].stakeholders.push(i)}}n.inProcessing=!1}else t.errorMessage(e.message)})},r.on("onBroadcastOnionSave",function(e){console.log(e),angular.forEach(n.stakeholderList,function(o){o._id==e._id&&(o.stakeholder=e.stakeholder,o.name=e.name,o.description=e.description,o.openEdit=e.openEdit,o.x=e.x,o.y=e.y,o.newValues=[])})}),n.setSuggestionShow=function(e){e.openEdit=!0},n.leaveSuggestionShow=function(e){e.openEdit=!1},n.removeValueIdentication=function(e,o){for(var t=[],a=0;a<o.values.length;a++)o.values[a]!=e&&t.push(o.values[a]);o.values=t,r.emit("broadcastOnionSave",o)},n.setValueIdentication=function(e){if(console.log(e.newValues),""===e.newValues||void 0===e.newValues)t.errorMessage("Valor n�o especificado.");else{for(var o=e.newValues.split(","),n=0;n<o.length;n++)a(e.values,o[n])?t.errorMessage("Duplicate value: "+o[n]):e.values.push(o[n]);console.log(e.values),e.newValues="",e.openEdit=!1,r.emit("broadcastOnionSave",e)}}}!function(){"use strict";angular.module("app",["toastService","textAngular","luegg.directives","DropDSC","authService","ui.router","ngMaterial","ngMdIcons","ngCookies","pascalprecht.translate"]).config(["$httpProvider",function(e){e.interceptors.push("AuthInterceptor")}])}(),angular.module("toastService",[]).controller("toastController",["$mdToast","toastApp",function(e,o){var t=this;t.message=o.message,t.closeToast=function(){e.hide()}}]).factory("toastApp",toastApp),toastApp.$inject=["$mdToast"],function(){"use strict";function e(e,o){e.state("init",{url:"/",templateUrl:"views/pages/initpage.html",controller:"loginController as vm"}).state("init.login",{url:"login",views:{"content-tab":{templateUrl:"views/pages/userlogin.html",controller:"loginController as vm"}}}).state("init.signup",{url:"signup",views:{"content-tab":{templateUrl:"views/pages/signup.html",controller:"signupController as vm"}}}).state("init.rescuepassword",{url:"rescuepassword",views:{"content-tab":{templateUrl:"views/pages/rescuepassword.html",controller:"signupController as vm"}}}).state("startproblem",{url:"/startproblem",templateUrl:"views/pages/startproblem.html",controller:"startProblemController as vm"}).state("newpassword",{url:"/newpassword/:mytoken",templateUrl:"views/pages/newpassword.html",controller:"signupController as vm"}).state("problem",{url:"/problem",templateUrl:"views/pages/problem.html",controller:"menuProblemController as vm"}).state("problem.dscreport",{url:"/dscreport",views:{"problem-description":{templateUrl:"views/pages/dscreport.html",controller:"dscReportController as vm"}}}).state("problem.description",{url:"/description",views:{"problem-description":{templateUrl:"views/pages/problemdescription.html",controller:"editProblemController as vm"}}}).state("problem.collaborators",{url:"/collaborators",views:{"problem-description":{templateUrl:"views/pages/collaborators.html",controller:"controllerCollaborators as vm"}}}).state("problem.stakeholders",{url:"stakeholders",views:{"dsc-artifact":{templateUrl:"views/pages/stakeholders.html",controller:"stakeholderController as vm"}}}).state("problem.evaluationframework",{url:"evaluationframework",views:{"dsc-artifact":{templateUrl:"views/pages/evaluationframework.html",controller:"evaluationframeworkController as vm"}}}).state("problem.semioticframework",{url:"semioticframework",views:{"dsc-artifact":{templateUrl:"views/pages/semioticframework.html",controller:"semioticframeworkController as vm"}}}).state("problem.carf",{url:"carf",views:{"dsc-artifact":{templateUrl:"views/pages/carf.html",controller:"carfController as vm"}}}).state("problem.vif",{url:"vif",views:{"dsc-artifact":{templateUrl:"views/pages/vif.html",controller:"valueIdentificationFrameController as vm"}}}),o.otherwise("/login")}angular.module("app").config(e),e.$inject=["$stateProvider","$urlRouterProvider"]}(),function(){"use strict";function e(e){e.useStaticFilesLoader({prefix:"app/language/lang-",suffix:".json"}),e.preferredLanguage("en"),e.useSanitizeValueStrategy("escaped"),e.useLocalStorage()}function o(e){this.setLang=function(o){e.use(o)}}function t(){return{templateUrl:"app/language/changeLanguage.html",restrict:"E"}}angular.module("app").config(e).controller("languageController",o).directive("changeLanguage",t),e.$inject=["$translateProvider"],o.$inject=["$translate"]}(),function(){"use strict";function e(e,o,t,r){function a(){i.idProblem=e.localStorage.getItem("problemid"),t.getcarf(i.idProblem).success(function(e){e.success&&(i.localStakeholders=e.stakeholders,i.stakeholderList=i.localStakeholders,i.carfList=e.carf,i.carfPriorityList=i.localPriorityList)}),i.inProcessing=!1}function n(){i.carf={_id:"",pms:"",values:[],priority:"",requirement:"",stakeholders:[]},i.valueList=[]}var i=this;i.idProblem="",i.inProcessing=!0,i.valueList=[],i.stakeholderList=[],i.localStakeholders=[],i.carf={pms:"",values:[],priority:"",requirement:"",stakeholders:[]},i.initCarf=a,i.carfList=[],i.carfPriorityList=[],o.on("onBroadcastCARFadd",function(e){i.carfList.push(e),n(),i.stakeholderList=i.localStakeholders,i.carfPriorityList=i.localPriorityList}),i.addpmsvalue=function(e){""==e.pms?r.errorMessage("Select PMS"):e.values.length<1?r.errorMessage("Select one or more Value"):e.stakeholders.length<1?r.errorMessage("Select one or more Stakeholder(s)"):""==e.priority?r.errorMessage("Select priority [Low, Medium or High]"):(o.emit("broadcastCARFadd",e),i.stakeholderList=[],i.carfPriorityList=[])},o.on("onBroadcastCARFremove",function(e){i.carfList.splice(e,1)}),i.removeCARF=function(e,t){var r={index:e,carf:t};o.emit("broadcastCARFremove",r)},i.selectPMSValue=function(e){void 0!=e&&angular.forEach(i.carfPMSValue,function(o){return o.pms==e?(i.carf.values=[],void(i.valueList=o.values)):void 0})},i.setPriotity=function(e){i.carf.priority=e},i.addListValue=function(e){if(0==i.carf.values.length)i.carf.values.push(e);else{for(var o=0;o<i.carf.values.length;o++)if(e==i.carf.values[o])return void i.carf.values.splice(o,1);i.carf.values.push(e)}},i.addStakeholder=function(e){if(0==i.carf.stakeholders.length)i.carf.stakeholders.push(e);else{for(var o=0;o<i.carf.stakeholders.length;o++)if(e==i.carf.stakeholders[o])return void i.carf.stakeholders.splice(o,1);i.carf.stakeholders.push(e)}},i.localPriorityList=["Low","Medium","High"],i.carfPMSValue=[{pms:"Interaction",values:["Identity","Norms"]},{pms:"Association",values:["Conversation","Groups","Relationship","Trust"]},{pms:"Learning",values:["Meta-communication"]},{pms:"Play",values:["Aesthetics","Emotion and Affection"]},{pms:"Protection",values:["Informed consert","Reputation","Security"]},{pms:"Exploitation",values:["Accessibility","Object","Property (ownership)","Usability"]},{pms:"Teporality",values:["Availability","Awareness","Presence"]},{pms:"Territoriality",values:["Portability","Privacy","Scalability","Visibility"]},{pms:"Classification",values:["Autonomy","Collaboration","Sharing","Adaptability"]},{pms:"Subsistence",values:["Reciprocity"]}]}angular.module("app").controller("carfController",e),e.$inject=["$window","Socket","problemService","toastApp"]}(),angular.module("app").controller("chatDSC",chatDSC),chatDSC.$inject=["$timeout","Socket","$mdSidenav","$log","problemService","$window"],function(){"use strict";function e(e,o,t){function r(e){for(var o=0;o<a.collaborators.length;o++)if(e==a.collaborators[o].email)return!0;return!1}var a=this;a.idProblem="",a.collaborators=[],a.useremail="",a.initCollaborators=function(){a.idProblem=e.localStorage.getItem("problemid"),a.useremail=e.localStorage.getItem("useremail"),o.getcollaborators(a.idProblem).success(function(e){e.success?a.collaborators=e.collaborators:t.errorMessage(e.message)})},a.addCollaborator=function(e){if(a.useremail==e)t.errorMessage(a.useremail+" is email of owner.");else if(r(e))t.errorMessage("Usuario Cadastrado.");else{var n={idproblem:a.idProblem,email:e};o.invite(n).success(function(e){e.success?a.collaborators=e.collaborators:t.errorMessage(e.message)})}},a.removeCollaborator=function(e){var r={idproblem:a.idProblem,email:e.email};o.removecollaborators(r).success(function(e){e.success?(t.errorMessage("Colaborador foi removido do projeto."),a.collaborators=e.collaborators):t.errorMessage(e.message)})}}angular.module("app").controller("controllerCollaborators",e),e.$inject=["$window","problemService","toastApp"]}(),angular.module("app").controller("dscReportController",dscReportController),angular.module("app").controller("evaluationframeworkController",evaluationframeworkController),evaluationframeworkController.$inject=["$window","problemService","Socket","$scope"],function(){"use strict";function e(e,o,t,r,a,n){function i(e){var o=a.debounce(function(){r(e).toggle().then(function(){n.debug("toggle "+e+" is done")})},300);return o}var s=this;s.openChat=i("chat"),s.formAddCollaborators=function(){t.go("problem.collaborators")},s.openReport=function(){t.go("problem.dscreport")},s.editDescriptionProblem=function(){t.go("problem.description")},s.doLogout=function(){e.logout(),t.go("init.login")}}angular.module("app").controller("menuProblemController",e),e.$inject=["Auth","$timeout","$state","$mdSidenav","$mdUtil","$log"]}(),function(){"use strict";function e(e,o,t,r,a,n){var i=this,s=!0;i.problem="",i.tabsdsc=['<md-tab data-ui-sref="problem.stakeholders" md-active="$state.is(\'problem.stakeholders\')" label="{{\'LABEL_ARTIFACT_STAKEHOLDER\' | translate }}"></md-tab>','<md-tab data-ui-sref="problem.evaluationframework" md-active="$state.is(\'problem.evaluationframework\')" label="{{\'LABEL_ARTIFACT_EVALUATION_FRAMEWORK\' | translate }}"></md-tab>','<md-tab data-ui-sref="problem.semioticframework" md-active="$state.is(\'problem.semioticframework\')" label="{{\'LABEL_ARTIFACT_SEMIOTIC_FRAMEWORK\' | translate }}"></md-tab>','<md-tab data-ui-sref="problem.carf" md-active="$state.is(\'problem.carf\')" label="CARF"></md-tab></md-tabs>'],i.getCurrentProblem=function(){i.idProblem=a.localStorage.getItem("problemid"),n.getproblem(i.idProblem).success(function(e){e.success?i.problem=e.problem:r.errorMessage(e.message)})};var l=function(){s=!0};o.on("onAtualizarProblema",function(e){console.log("=========================================================================retorno...."+e),i.problem.description=e.description,i.problem.update=s}),e.problemUpdate=function(e){e.update=s,o.emit("atualizarProblema",e),s&&(s=!1,t(l,2e3))},e.saveDescription=function(e){console.log("============================================================================="),e.update=s,o.emit("atualizarProblema",e)}}angular.module("app").controller("editProblemController",e),e.$injectre=["$scope","Socket"],e.$inject=["$scope","Socket","$timeout","toastApp","$window","problemService"]}(),function(){"use strict";function e(e,o){function t(o){return e.post(v,o)}function r(o){return e.get(h+"?idproblem="+o)}function a(o){return e.get(f+"?email="+o)}function n(o){return e.get(k+"?idproblem="+o)}function i(o){return e.post(w,o)}function s(o){return e.get(S+"?idproblem="+o)}function l(o){return e.get(y+"?idproblem="+o)}function c(o){return e.get(P+"?idproblem="+o)}function u(o){return e.get(C+"?idproblem="+o)}function m(o){return e.get($+"?idproblem="+o)}function p(o){return e.get(b+"?email="+o)}function d(o){return e.get(L+"?idproblem="+o.idproblem+"&email="+o.email)}function g(o){return e.get(A+"?idproblem="+o)}var f="/api/problem/getproblems",b="/api/problem/getproblemscollaborator",v="/api/problem/newproblem",h="/api/problem/getproblem",k="/api/problem/getcollaborators",w="/api/problem/invite",S="/api/problem/getonion",y="/api/problem/getevaluation",P="/api/problem/getsemiotic",C="/api/problem/getcarf",$="/api/problem/removeproblem",L="/api/problem/removecollaborator",A="/api/problem/historychat",E={newproblem:t,getuserproblems:a,getproblem:r,getcollaborators:n,invite:i,getonion:s,getevaluation:l,getsemiotic:c,getcarf:u,removeproblem:m,getproblemscollaborator:p,removecollaborators:d,gethistorychat:g};return E}angular.module("app").factory("problemService",e),e.$inject=["$http","$location"]}(),angular.module("app").controller("semioticframeworkController",semioticframeworkController),semioticframeworkController.$inject=["Socket","$window","problemService"],angular.module("app").controller("stakeholderController",stakeholderController),stakeholderController.$inject=["Socket","$scope","$window","problemService"],function(){"use strict";function e(e,o,t,r,a,n,i){function s(e){n.removeproblem(e).success(function(o){if(o.success){for(var t=0;t<c.problemList.length;t++)if(c.problemList[t]._id==e){c.problemList.splice(t,1);break}}else i.errorMessage(o.message)})}function l(e,o){e.hide=function(){o.hide()},e.cancel=function(){o.cancel()},e.addNewProblem=function(e){c.startNewProblem(e),o.cancel()}}var c=this;c.nickname="",c.userid="",c.useremail="",c.problemList=[],c.problemCollaboratorList=[],c.loginInProgress=!0,c.getProblems=function(){c.userid=a.localStorage.getItem("userid"),c.nickname=a.localStorage.getItem("nickname"),c.useremail=a.localStorage.getItem("useremail"),n.getuserproblems(c.useremail).success(function(e){if(e.success){for(var o=0;o<e.problems.length;o++)e.problems[o].description=e.problems[o].description.replace(/(<([^>]+)>)/gi,"").substring(0,460);c.problemList=e.problems}else i.errorMessage(e.message)}),n.getproblemscollaborator(c.useremail).success(function(e){if(e.success){for(var o=0;o<e.problems.length;o++)e.problems[o].description=e.problems[o].description.replace(/(<([^>]+)>)/gi,"").substring(0,460);c.problemCollaboratorList=e.problems}else i.errorMessage(e.message)}),c.loginInProgress=!1},c.revomveProblem=function(o,t){var r=e.confirm().parent(angular.element(document.body)).title("Detete Problem?").content("Title: "+t.title).ariaLabel("Remove Problem").ok("Desejo remover!").cancel("Cancel").targetEvent(o);e.show(r).then(function(){s(t._id)})},c.startNewProblem=function(e){e.userid=c.userid,n.newproblem(e).success(function(e){e.success?c.editProblem(e.problem):i.errorMessage(e.message)})},c.editProblem=function(e){a.localStorage.setItem("problemid",e._id);var t={idproblem:e._id,nickname:c.nickname};r.emit("initProblem",t),o.go("problem.stakeholders")},c.doLogout=function(){t.logout(),o.go("init.login")},c.newProblem=function(o){e.show({controller:l,templateUrl:"views/pages/newproblem.html",parent:angular.element(document.body),targetEvent:o})},l.$inject=["$scope","$mdDialog"]}angular.module("app").controller("startProblemController",e),e.$inject=["$mdDialog","$state","Auth","Socket","$window","problemService","toastApp"]}(),angular.module("app").controller("valueIdentificationFrameController",valueIdentificationFrameController),valueIdentificationFrameController.$inject=["$window","problemService","toastApp","Socket"],function(){"use strict";function e(e,o,t,r,a,n,i,s,l){function c(e){t.create(e).success(function(t){t.success?(n.setToken(t.token),i.getUser().then(function(t){d.user=t.data,d.loginInProgress=!1,o.localStorage.setItem("useremail",e.email),o.localStorage.setItem("userid",e.id),o.localStorage.setItem("nickname",e.nickname),d.setLang(e.language),a.errorMessage(s("translate")("WELCOME_SYSTEM")+": "+d.user.nickname),r.go("startproblem")})):a.errorMessage("Email Já cadastrado")})}function u(o){e.use(o)}function m(e){t.rescuePassword(e).success(function(e){console.log(e),a.errorMessage(e.success?"Email com instruções enviado":"Error")})}function p(e){t.changePassword(e).success(function(e){e.success?(a.errorMessage("Senha alterada com sucesso. Faça login com a nova senha."),r.go("init")):a.errorMessage("Error")})}var d=this;d.message="",d.save=c,d.rescuePassword=m,d.changePassword=p,d.setLang=u,d.loginInProgress=!1}angular.module("app").controller("signupController",e),e.$inject=["$translate","$window","signupService","$state","toastApp","AuthToken","Auth","$filter","$stateParams"]}(),function(){"use strict";function e(e,o){function t(o){return e.post(n,o)}function r(o){return e.post(i,o)}function a(t){var r=o.search();return e.get(s+"?mytoken="+r.mytoken+"&password="+t.password)}var n="/api/signup/",i="/api/rescuepasswd/",s="/api/rescuepasswd/newpasswd/",l={create:t,rescuePassword:r,changePassword:a};return l}angular.module("app").factory("signupService",e),e.$inject=["$http","$location"]}(),function(){"use strict";function e(e,o){var t=e.extendPalette("teal",{contrastDefaultColor:"light",contrastDarkColors:["50"],50:"E0F2F1"});e.definePalette("customGreen",t),e.theme("default").primaryPalette("customGreen",{"default":"500","hue-1":"50"}).accentPalette("teal"),e.theme("input","default").primaryPalette("green")}angular.module("app").config(e),e.$inject=["$mdThemingProvider","$locationProvider"]}(),function(){"use strict";angular.module("authService",[]).factory("Auth",["$http","$q","AuthToken",function(e,o,t){var r={};return r.login=function(o,r){return e.post("/api/login",{email:o,password:r}).success(function(e){return t.setToken(e.token),e})},r.logout=function(){t.setToken()},r.isLoggedIn=function(){return t.getToken()?!0:!1},r.getUser=function(){return t.getToken()?e.get("/api/me"):o.reject({message:"User has no token"})},r}]).factory("AuthToken",["$window",function(e){var o={};return o.getToken=function(){return e.localStorage.getItem("token")},o.setToken=function(o){o?e.localStorage.setItem("token",o):e.localStorage.removeItem("token")},o}]).factory("AuthInterceptor",["$q","$location","AuthToken",function(e,o,t){var r={};return r.request=function(e){var o=t.getToken();return o&&(e.headers["x-access-token"]=o),e},r}])}(),angular.module("DropDSC",[]).directive("draggable",["$document","Socket",function(e,o){return{restrict:"A",replace:!0,link:function(o,t,r){function a(e){var r=e.target.id;"svg"==r&&(r=""),o.stakeholder.onionlayer=r,y=e.pageY,x=e.pageX,t.css({top:y+"px",left:x+"px"}),o.stakeholder.x=x+"px",o.stakeholder.y=y+"px"}function n(){e.unbind("mousemove",a),e.unbind("mouseup",n)}t.on("mousedown",function(o){"stakeholder"==o.target.id.substring(0,11)&&(o.preventDefault(),e.bind("mousemove",a),e.bind("mouseup",n))})}}}]),function(){"use strict";function e(e,o,t,r,a,n,i){var s=this;s.inProgress=!1,s.setLang=function(o){e.use(o)},s.loggedIn=r.isLoggedIn(),o.$on("$routeChangeStart",function(){s.loggedIn=r.isLoggedIn(),r.getUser().then(function(e){s.user=e.data})}),s.doLogin=function(e){s.inProgress=!0,s.error="",r.login(e.email,e.password).success(function(e){a.localStorage.setItem("useremail",e.email),a.localStorage.setItem("userid",e.id),a.localStorage.setItem("nickname",e.nickname),s.setLang(e.language),s.inProgress=!1,r.getUser().then(function(e){s.user=e.data,i.errorMessage(n("translate")("WELCOME_SYSTEM")+": "+s.user.nickname)}),e.success?t.go("startproblem"):s.error=e.message})},s.doLogout=function(){r.logout(),t("init")}}angular.module("app").controller("loginController",e),e.$inject=["$translate","$rootScope","$state","Auth","$window","$filter","toastApp"]}(),angular.module("app").service("Socket",["$location","$timeout",function(e,o){this.socket=io(),this.on=function(e,t){this.socket&&this.socket.on(e,function(e){o(function(){t(e)})})},this.emit=function(e,o){this.socket&&this.socket.emit(e,o)},this.removeListener=function(e){this.socket&&this.socket.removeListener(e)}}]);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInRvYXN0LnNlcnZpY2UuanMiLCJwcm9ibGVtL2NoYXQuY29udHJvbGxlci5qcyIsInByb2JsZW0vZHNjcmVzcG9ydC5jb250cm9sbGVyLmpzIiwicHJvYmxlbS9ldmFsdWF0aW9uZnJhbWV3b3JrLmNvbnRyb2xsZXIuanMiLCJwcm9ibGVtL3NlbWlvdGljZnJhbWV3b3JrLmVkaXQuY29udHJvbGxlci5qcyIsInByb2JsZW0vc3Rha2Vob2xkZXIuZWRpdC5jb250cm9sbGVyLmpzIiwicHJvYmxlbS92YWx1ZWRlbnRpZmljYXRpb25mcmFtZS5jb250cm9sbGVyLmpzIiwiZHNjLmFwcC5qcyIsInJvdXRlci5hcHAuanMiLCJhcHAuZHNjLm1pbi5qcyIsImxhbmd1YWdlL3RyYW5zbGF0ZS5jb250cm9sbGVyLmpzIiwicHJvYmxlbS9jYXJmLmNvbnRyb2xsZXIuanMiLCJwcm9ibGVtL2NvbGxhYm9yYXRvcnMuY29udHJvbGxlci5qcyIsInByb2JsZW0vbWVudS5wcm9ibGVtLmNvbnRyb2xsZXIuanMiLCJwcm9ibGVtL3Byb2JsZW0uZWRpdC5jb250cm9sbGVyLmpzIiwicHJvYmxlbS9wcm9ibGVtLnNlcnZpY2UuanMiLCJwcm9ibGVtL3N0YXJ0LnByb2JsZW0uY29udHJvbGxlci5qcyIsInVzZXIvc2lnbnVwLmNvbnRyb2xsZXIuanMiLCJ1c2VyL3NpZ251cC5zZXJ2aWNlLmpzIiwiYXBwLmNvbmZpZy5qcyIsImF1dGguc2VydmljZS5qcyIsImRyYWcuZHNjLmpzIiwibG9naW4uY29udHJvbGxlci5qcyIsInNvY2tldC5zZXJ2aWNlLmpzIl0sIm5hbWVzIjpbInRvYXN0QXBwIiwiJG1kVG9hc3QiLCJlcnJvck1lc3NhZ2UiLCJ0aGlzIiwibWVzc2FnZSIsInNob3ciLCJjb250cm9sbGVyIiwiY29udHJvbGxlckFzIiwidGVtcGxhdGVVcmwiLCJhY3Rpb24iLCJoaWdobGlnaHRBY3Rpb24iLCJwb3NpdGlvbiIsImhpZGVEZWxheSIsInNlcnZpY2UiLCJjaGF0RFNDIiwiJHRpbWVvdXQiLCJTb2NrZXQiLCIkbWRTaWRlbmF2IiwiJGxvZyIsInByb2JsZW1TZXJ2aWNlIiwiJHdpbmRvdyIsInZtIiwibmV3bXNnIiwibWVzc2FnZXMiLCJyZXBsYXkiLCJuaWNrbmFtZSIsImNsb3NlIiwidGhlbiIsImRlYnVnIiwiaW5pdEhpc3RvcnlDaGF0IiwiaWRQcm9ibGVtIiwibG9jYWxTdG9yYWdlIiwiZ2V0SXRlbSIsImdldGhpc3RvcnljaGF0Iiwic3VjY2VzcyIsImRhdGEiLCJpIiwiaGlzdG9yeWNoYXQiLCJsZW5ndGgiLCJ0bXAiLCJEYXRlIiwidGltZSIsIm1zbiIsIm1zZyIsImdldERhdGUiLCJnZXRNb250aCIsImdldEZ1bGxZZWFyIiwiZ2V0SG91cnMiLCJnZXRNaW51dGVzIiwicHVzaCIsInNob3dSZXBsYXkiLCJvbiIsIm9iaiIsInNlbmRNZXNzYWdlIiwiY2hhdG1zZyIsImVtaXQiLCJkc2NSZXBvcnRDb250cm9sbGVyIiwiYnVpZFJlcG9ydCIsImVsZW1lbnQiLCJodG1sIiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsInBkZiIsImpzUERGIiwiYWRkSFRNTCIsInBhZ2VzcGxpdCIsImRpc3Bvc2UiLCJzYXZlIiwiaWRwcm9ibGVtIiwiZXZhbHVhdGlvbmZyYW1ld29ya0NvbnRyb2xsZXIiLCIkc2NvcGUiLCJpbml0RXZhbHVhdGlvbiIsImdldGV2YWx1YXRpb24iLCJldmFsdWF0aW9uZnJhbWV3b3JrTGlzdCIsImV2YWx1YXRpb25mcmFtZXdvcmsiLCJhbmd1bGFyIiwiZm9yRWFjaCIsIm9uaW9ubGF5ZXIiLCJzdGFrZWhvbGRlcnMiLCJzdGFrZWhvbGRlciIsIl9pZCIsIm5hbWUiLCJkZXNjcmlwdGlvbiIsIm9wZW5FZGl0IiwicHJvYmxlbXMiLCJzb2x1dGlvbnMiLCJzYXZlRGlzY3V0aW9uIiwic3Rha2Vob2xkZXJPbmlvbiIsImNvbnNvbGUiLCJsb2ciLCJzZXRPcGVuRWRpdERpc2N1dGlvbiIsImN1cnJlbnRTdGFrZWhvbGRlciIsInNlbWlvdGljZnJhbWV3b3JrQ29udHJvbGxlciIsImluaXRTZW1pb3RpY0ZyYW1ld29yayIsImdldHNlbWlvdGljIiwic2VtaW90aWNmcmFtZXdvcmsiLCJzYXZlU29jaWFsV29ybGQiLCJ0ZXh0IiwiZmxhZ1NhdmUiLCJ1cGRhdGUiLCJzYXZlUHJhZ21hdGljIiwic2F2ZVNlbWFudGljIiwic2F2ZVN5bnRhdGljIiwic2F2ZUVtcGlyaWNhbCIsInNhdmVQaHlzaWNhbCIsInNvY2lhbHdvcmxkIiwicHJhZ21hdGljIiwic2VtaW90aWNyYW1ld29yayIsInN5bnRhdGljIiwiZW1waXJpY2FsIiwicGh5c2ljYWwiLCJzdGFrZWhvbGRlckNvbnRyb2xsZXIiLCJpbnRpdE9uaW9uIiwiZ2V0b25pb24iLCJzdGFrZWhvbGRlckxpc3QiLCJpblByb2Nlc3NpbmciLCJtb3ZlIiwiZGFkYW9wZW5FZGl0IiwieCIsInkiLCJzYXZlU3Rha2Vob2xkZXIiLCJpZCIsInNldE9wZW5FZGl0Iiwic3R5bGUiLCJkaXNwbGF5Iiwic3BsaWNlIiwiZGVsUG9zdEl0IiwiaW5kZXgiLCJyZXRvcm5vIiwiYWRkUG9zdEl0IiwiZSIsImNhbWFkYSIsIm5ld1N0YWtlaG9sZGVyIiwicGFnZVgiLCJwYWdlWSIsImFjZW5kZSIsImV2dCIsInRhcmdldCIsInNldEF0dHJpYnV0ZSIsImFwYWdhIiwidmFsdWVJZGVudGlmaWNhdGlvbkZyYW1lQ29udHJvbGxlciIsImZpbmRWYWx1ZSIsImxpc3QiLCJ2YWx1ZSIsInNlbGYiLCJ1c2VyZW1haWwiLCJuZXd2YWx1ZXMiLCJzdWdlc3Rpb25WYWx1ZXMiLCJzdWdlc3Rpb25WYWx1ZXNBcnJheSIsImluaXRWYWx1ZUlkZW50aWZpY2F0aW9uRnJhbWUiLCJrIiwiaiIsInZhbHVlcyIsIm5ld1ZhbHVlcyIsInNldFN1Z2dlc3Rpb25TaG93IiwibGVhdmVTdWdnZXN0aW9uU2hvdyIsInJlbW92ZVZhbHVlSWRlbnRpY2F0aW9uIiwibmV3TGlzdCIsInNldFZhbHVlSWRlbnRpY2F0aW9uIiwidW5kZWZpbmVkIiwidmFsdWVzTGlzdCIsInNwbGl0IiwibW9kdWxlIiwiY29uZmlnIiwiJGh0dHBQcm92aWRlciIsImludGVyY2VwdG9ycyIsImNsb3NlVG9hc3QiLCJoaWRlIiwiZmFjdG9yeSIsIiRpbmplY3QiLCJyb3V0ZXMiLCIkc3RhdGVQcm92aWRlciIsIiR1cmxSb3V0ZXJQcm92aWRlciIsInN0YXRlIiwidXJsIiwidmlld3MiLCJjb250ZW50LXRhYiIsInByb2JsZW0tZGVzY3JpcHRpb24iLCJkc2MtYXJ0aWZhY3QiLCJvdGhlcndpc2UiLCJpbml0TGFuZ3VhZ2UiLCIkdHJhbnNsYXRlUHJvdmlkZXIiLCJ1c2VTdGF0aWNGaWxlc0xvYWRlciIsInByZWZpeCIsInN1ZmZpeCIsInByZWZlcnJlZExhbmd1YWdlIiwidXNlU2FuaXRpemVWYWx1ZVN0cmF0ZWd5IiwidXNlTG9jYWxTdG9yYWdlIiwibGFuZ3VhZ2VDb250cm9sbGVyIiwiJHRyYW5zbGF0ZSIsInNldExhbmciLCJsYW5nS2V5IiwidXNlIiwiY2hhbmdlTGFuZ3VhZ2UiLCJyZXN0cmljdCIsImRpcmVjdGl2ZSIsImNhcmZDb250cm9sbGVyIiwiaW5pdENhcmYiLCJnZXRjYXJmIiwibG9jYWxTdGFrZWhvbGRlcnMiLCJjYXJmTGlzdCIsImNhcmYiLCJjYXJmUHJpb3JpdHlMaXN0IiwibG9jYWxQcmlvcml0eUxpc3QiLCJyZXNldENhcmYiLCJwbXMiLCJwcmlvcml0eSIsInJlcXVpcmVtZW50IiwidmFsdWVMaXN0IiwiYWRkcG1zdmFsdWUiLCJyZW1vdmVDQVJGIiwic2VsZWN0UE1TVmFsdWUiLCJjYXJmUE1TVmFsdWUiLCJwbXNfdmFsdWUiLCJzZXRQcmlvdGl0eSIsImFkZExpc3RWYWx1ZSIsIm5ld3ZhbHVlIiwiYWRkU3Rha2Vob2xkZXIiLCJjb250cm9sbGVyQ29sbGFib3JhdG9ycyIsInNlYXJjaENhbGxhYm9yYXRpb24iLCJlbWFpbCIsImNvbGxhYm9yYXRvcnMiLCJpbml0Q29sbGFib3JhdG9ycyIsImdldGNvbGxhYm9yYXRvcnMiLCJhZGRDb2xsYWJvcmF0b3IiLCJpbnZpdGUiLCJyZW1vdmVDb2xsYWJvcmF0b3IiLCJwZW9wbGUiLCJyZW1vdmVjb2xsYWJvcmF0b3JzIiwibWVudVByb2JsZW1hQ29udHJvbGxlciIsIkF1dGgiLCIkc3RhdGUiLCIkbWRVdGlsIiwiYnVpbGRUb2dnbGVyIiwibmF2SUQiLCJkZWJvdW5jZUZuIiwiZGVib3VuY2UiLCJ0b2dnbGUiLCJvcGVuQ2hhdCIsImZvcm1BZGRDb2xsYWJvcmF0b3JzIiwiZ28iLCJvcGVuUmVwb3J0IiwiZWRpdERlc2NyaXB0aW9uUHJvYmxlbSIsImRvTG9nb3V0IiwibG9nb3V0IiwiZWRpdFByb2JsZW1hQ29udHJvbGxlciIsInVwZGF0ZVRydWUiLCJwcm9ibGVtIiwidGFic2RzYyIsImdldEN1cnJlbnRQcm9ibGVtIiwiZ2V0cHJvYmxlbSIsInNldFVwZGF0ZSIsInByb2JsZW1VcGRhdGUiLCJzYXZlRGVzY3JpcHRpb24iLCIkaW5qZWN0cmUiLCIkaHR0cCIsIiRsb2NhdGlvbiIsIm5ld3Byb2JsZW0iLCJwb3N0IiwiQVBJX1JPVVRFX05FV1BST0JMRU0iLCJnZXQiLCJBUElfUk9VVEVfR0VUUFJPQkxFTSIsImdldHVzZXJwcm9ibGVtcyIsIkFQSV9ST1VURV9HRVRVU0VSUFJPQkxFTVMiLCJBUElfUk9VVEVfR0VUQ09MTEFCT1JBVE9SUyIsIkFQSV9ST1VURV9JTlZJVEUiLCJBUElfUk9VVEVfR0VUT05JT04iLCJBUElfUk9VVEVfR0VURVZBTFVBVElPTiIsIkFQSV9ST1VURV9HRVRTRU1JT1RJQ0ZSQU1FV09SSyIsIkFQSV9ST1VURV9HRVRDQVJGIiwicmVtb3ZlcHJvYmxlbSIsIkFQSV9ST1VURV9SRU1PVkVQUk9CTEVNIiwiZ2V0cHJvYmxlbXNjb2xsYWJvcmF0b3IiLCJBUElfUk9VVEVfR0VUVVNFUlBST0JMRU1TQ09MTEFCT1JBVE9SIiwiQVBJX1JPVVRFX1JFTU9WRUNPTExBQk9SQVRPUiIsIkFQSV9ST1VURV9HRVRISVNUT1JZQ0hBVCIsInN0YXJ0UHJvYmxlbUNvbnRyb2xsZXIiLCIkbWREaWFsb2ciLCJyZW1vdmVQcm9ibGVtIiwicHJvYmxlbWlkIiwicHJvYmxlbUxpc3QiLCJEaWFsb2dDb250cm9sbGVyIiwiY2FuY2VsIiwiYWRkTmV3UHJvYmxlbSIsInN0YXJ0TmV3UHJvYmxlbSIsInVzZXJpZCIsInByb2JsZW1Db2xsYWJvcmF0b3JMaXN0IiwibG9naW5JblByb2dyZXNzIiwiZ2V0UHJvYmxlbXMiLCJyZXBsYWNlIiwic3Vic3RyaW5nIiwicmV2b212ZVByb2JsZW0iLCJldiIsImNvbmZpcm0iLCJwYXJlbnQiLCJib2R5IiwidGl0bGUiLCJjb250ZW50IiwiYXJpYUxhYmVsIiwib2siLCJ0YXJnZXRFdmVudCIsImVkaXRQcm9ibGVtIiwic2V0SXRlbSIsImluaXRzb2NrZXRwcm9ibGVtIiwibmV3UHJvYmxlbSIsInNpZ251cENvbnRyb2xsZXIiLCJzaWdudXBTZXJ2aWNlIiwiQXV0aFRva2VuIiwiJGZpbHRlciIsIiRzdGF0ZVBhcmFtcyIsInNhdmVVc2VyIiwidXNlciIsImNyZWF0ZSIsInNldFRva2VuIiwidG9rZW4iLCJnZXRVc2VyIiwibGFuZ3VhZ2UiLCJyZXNjdWVQYXNzd29yZCIsInVzZXJFbWFpbCIsImNoYW5nZVBhc3N3b3JkIiwiQVBJX1JPVVRFX1VTRVIiLCJBUElfUk9VVEVfUkVTQ1VFUEFTU1dPUkQiLCJteXRva2VuVVJMIiwic2VhcmNoIiwiQVBJX1JPVVRFX1NFVE5FV1BBU1NXT1JEIiwibXl0b2tlbiIsInBhc3N3b3JkIiwiYXBwQ29uZmlnIiwiJG1kVGhlbWluZ1Byb3ZpZGVyIiwiJGxvY2F0aW9uUHJvdmlkZXIiLCJjdXN0b21HcmVlbk1hcCIsImV4dGVuZFBhbGV0dGUiLCJjb250cmFzdERlZmF1bHRDb2xvciIsImNvbnRyYXN0RGFya0NvbG9ycyIsIjUwIiwiZGVmaW5lUGFsZXR0ZSIsInRoZW1lIiwicHJpbWFyeVBhbGV0dGUiLCJkZWZhdWx0IiwiaHVlLTEiLCJhY2NlbnRQYWxldHRlIiwiJHEiLCJhdXRoRmFjdG9yeSIsImxvZ2luIiwiaXNMb2dnZWRJbiIsImdldFRva2VuIiwicmVqZWN0IiwiYXV0aFRva2VuRmFjdG9yeSIsInJlbW92ZUl0ZW0iLCJpbnRlcmNlcHRvckZhY3RvcnkiLCJyZXF1ZXN0IiwiaGVhZGVycyIsIiRkb2N1bWVudCIsImxpbmsiLCJzY29wZSIsImF0dHIiLCJtb3VzZW1vdmUiLCJldmVudCIsImlkX2RpdiIsImNzcyIsInRvcCIsImxlZnQiLCJtb3VzZXVwIiwidW5iaW5kIiwicHJldmVudERlZmF1bHQiLCJiaW5kIiwibG9naW5Db250cm9sbGVyIiwiJHJvb3RTY29wZSIsImluUHJvZ3Jlc3MiLCJsb2dnZWRJbiIsIiRvbiIsImRvTG9naW4iLCJlcnJvciIsInNvY2tldCIsImlvIiwiZXZlbnROYW1lIiwiY2FsbGJhY2siLCJyZW1vdmVMaXN0ZW5lciJdLCJtYXBwaW5ncyI6IkFBbUJBLFFBQUFBLFVBQUFDLEdBVUEsUUFBQUMsR0FBQUEsR0FDQUMsS0FBQUMsUUFBQUYsRUFDQUQsRUFBQUksTUFFQUMsV0FBQSxrQkFDQUMsYUFBQSxLQUNBQyxZQUFBLDRCQUNBQyxPQUFBLEtBQ0FDLGlCQUFBLEVBQ0FDLFNBQUEsV0FDQUMsVUFBQSxNQWpCQSxHQUFBQyxJQUNBVCxRQUFBLEdBQ0FGLGFBQUFBLEVBR0EsT0FBQVcsR0NsQkEsUUFBQUMsU0FBQUMsRUFBQUMsRUFBQUMsRUFBQUMsRUFBQUMsRUFBQUMsR0FDQSxHQUFBQyxHQUFBbEIsSUFDQWtCLEdBQUFDLE9BQUEsR0FDQUQsRUFBQUUsWUFDQUYsRUFBQUcsUUFBQSxFQUNBSCxFQUFBSSxTQUFBLEdBQ0FKLEVBQUFLLE1BQUEsV0FDQVQsRUFBQSxRQUFBUyxRQUNBQyxLQUFBLFdBQ0FULEVBQUFVLE1BQUEsaUJBSUFQLEVBQUFRLGdCQUFBLFdBQ0FSLEVBQUFTLFVBQUFWLEVBQUFXLGFBQUFDLFFBQUEsYUFDQVgsRUFBQUksU0FBQUwsRUFBQVcsYUFBQUMsUUFBQSxZQUNBYixFQUFBYyxlQUFBWixFQUFBUyxXQUNBSSxRQUFBLFNBQUFDLEdBQ0EsR0FBQUEsRUFB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VixRQUtBaEMsS0FBQW9ELEtBQUEsU0FBQWdVLEVBQUFwVixHQUNBaEMsS0FBQWtYLFFBQ0FsWCxLQUFBa1gsT0FBQTlULEtBQUFnVSxFQUFBcFYsSUFJQWhDLEtBQUFzWCxlQUFBLFNBQUFGLEdBQ0FwWCxLQUFBa1gsUUFDQWxYLEtBQUFrWCxPQUFBSSxlQUFBRiIsImZpbGUiOiJhcHAuZHNjLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxyXG4gKiBDcmVhdGVkIGJ5IEpPU0VWQUxERVJMRUkgb24gMjcvMDYvMjAxNS5cclxuICovXHJcbid1c2Ugc3RyaWN0JztcclxuXHJcbmFuZ3VsYXIubW9kdWxlKCd0b2FzdFNlcnZpY2UnLFtdKVxyXG4gICAgLmNvbnRyb2xsZXIoJ3RvYXN0Q29udHJvbGxlcicsIGZ1bmN0aW9uKCRtZFRvYXN0LHRvYXN0QXBwKSB7XHJcblxyXG4gICAgICAgIHZhciB2bSA9IHRoaXM7XHJcbiAgICAgICAgdm0ubWVzc2FnZSA9ICB0b2FzdEFwcC5tZXNzYWdlO1xyXG4gICAgICAgIHZtLmNsb3NlVG9hc3QgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgJG1kVG9hc3QuaGlkZSgpO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgfSlcclxuICAgIC5mYWN0b3J5KCAndG9hc3RBcHAnLCB0b2FzdEFwcCApO1xyXG5cclxuICAgIHRvYXN0QXBwLiRpbmplY3QgPSBbICckbWRUb2FzdCcgXTtcclxuXHJcbiAgICBmdW5jdGlvbiB0b2FzdEFwcCAoJG1kVG9hc3QpIHtcclxuXHJcblxyXG4gICAgdmFyIHNlcnZpY2UgPSB7XHJcbiAgICAgICAgbWVzc2FnZTogJycsXHJcbiAgICAgICAgZXJyb3JNZXNzYWdlOiBlcnJvck1lc3NhZ2VcclxuICAgIH07XHJcblxyXG4gICAgcmV0dXJuIHNlcnZpY2U7XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGVycm9yTWVzc2FnZShlcnJvck1lc3NhZ2UpIHtcclxuICAgICAgICAgICAgdGhpcy5tZXNzYWdlID0gZXJyb3JNZXNzYWdlO1xyXG4gICAgICAgICAgICAkbWRUb2FzdC5zaG93KFxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnRyb2xsZXI6ICd0b2FzdENvbnRyb2xsZXInLFxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnRyb2xsZXJBczogJ3ZtJyxcclxuICAgICAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ3ZpZXdzL3BhZ2VzL2RzY3RvYXN0Lmh0bWwnLFxyXG4gICAgICAgICAgICAgICAgICAgIGFjdGlvbjogXCJPS1wiLFxyXG4gICAgICAgICAgICAgICAgICAgIGhpZ2hsaWdodEFjdGlvbjogdHJ1ZSxcclxuICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbjogXCJ0b3AgbGVmdFwiLFxyXG4gICAgICAgICAgICAgICAgICAgIGhpZGVEZWxheTogNTAwMFxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgIH1cclxuXHJcblxyXG5cclxuXHJcblxyXG4gICAgLypmdW5jdGlvbiBlcnJvck1lc3NhZ2UoZXJyb3JNZXNzYWdlKSB7XHJcbiAgICAgICAgdGhpcy5tZXNzYWdlID0gZXJyb3JNZXNzYWdlO1xyXG4gICAgICAgICRtZFRvYXN0LnNob3coXHJcbiAgICAgICAgICAgICRtZFRvYXN0LnNpbXBsZSgpXHJcbiAgICAgICAgICAgICAgICAuY29udGVudCh0aGlzLm1lc3NhZ2UpLFxyXG4gICAgICAgICAgICAgICAgLmFjdGlvbignT0snKVxyXG4gICAgICAgICAgICAgICAgLmhpZ2hsaWdodEFjdGlvbih0cnVlKVxyXG4gICAgICAgICAgICAgICAgLnBvc2l0aW9uKCd0b3AgcmlnaHQnKVxyXG4gICAgICAgICAgICAgICAgLmhpZGVEZWxheSg5MDAwKVxyXG4gICAgICAgICk7XHJcbiAgICB9Ki9cclxufVxyXG5cclxuXHJcblxyXG5cclxuXHJcbiIsIi8qKlxyXG4gKiBDcmVhdGVkIGJ5IEpPU0VWQUxERVJMRUkgb24gMTUvMDcvMjAxNS5cclxuICovXHJcbid1c2Ugc3RyaWN0JztcclxuXHJcbmFuZ3VsYXJcclxuICAgIC5tb2R1bGUoJ2FwcCcpXHJcbiAgICAuY29udHJvbGxlcignY2hhdERTQycsY2hhdERTQyk7XHJcblxyXG4gICAgZnVuY3Rpb24gY2hhdERTQygkdGltZW91dCwgU29ja2V0LCAkbWRTaWRlbmF2LCAkbG9nLHByb2JsZW1TZXJ2aWNlLCR3aW5kb3cpIHtcclxuICAgICAgICB2YXIgdm0gPSB0aGlzO1xyXG4gICAgICAgIHZtLm5ld21zZyA9IFwiXCI7XHJcbiAgICAgICAgdm0ubWVzc2FnZXMgPSBbXTtcclxuICAgICAgICB2bS5yZXBsYXkgPSBmYWxzZTtcclxuICAgICAgICB2bS5uaWNrbmFtZSA9IFwiXCIsXHJcbiAgICAgICAgdm0uY2xvc2UgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICRtZFNpZGVuYXYoJ2NoYXQnKS5jbG9zZSgpXHJcbiAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJGxvZy5kZWJ1ZyhcImNsb3NlIGNoYXRcIik7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICB2bS5pbml0SGlzdG9yeUNoYXQgPSBmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICB2bS5pZFByb2JsZW0gPSAkd2luZG93LmxvY2FsU3RvcmFnZS5nZXRJdGVtKCdwcm9ibGVtaWQnKTtcclxuICAgICAgICAgICAgdm0ubmlja25hbWUgPSAkd2luZG93LmxvY2FsU3RvcmFnZS5nZXRJdGVtKCduaWNrbmFtZScpO1xyXG4gICAgICAgICAgICBwcm9ibGVtU2VydmljZS5nZXRoaXN0b3J5Y2hhdCh2bS5pZFByb2JsZW0pXHJcbiAgICAgICAgICAgICAgICAuc3VjY2VzcyhmdW5jdGlvbihkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYoZGF0YS5zdWNjZXNzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZGF0YS5oaXN0b3J5Y2hhdC5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRtcCA9IG5ldyBEYXRlKGRhdGEuaGlzdG9yeWNoYXRbaV0udGltZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbXNuID0ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5pY2tuYW1lOiBkYXRhLmhpc3RvcnljaGF0W2ldLm5pY2tuYW1lLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1zZzogZGF0YS5oaXN0b3J5Y2hhdFtpXS5tc2csXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGltZTogdG1wLmdldERhdGUoKSArIFwiL1wiICsgKHRtcC5nZXRNb250aCgpICsgMSApKyBcIi9cIiArIHRtcC5nZXRGdWxsWWVhcigpICsgXCIgW1wiICsgdG1wLmdldEhvdXJzKCkgKyBcIjpcIiArIHRtcC5nZXRNaW51dGVzKCkgKyBcIl0gXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZtLm1lc3NhZ2VzLnB1c2gobXNuKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB2bS5zaG93UmVwbGF5ID0gZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgaWYodm0ucmVwbGF5KXtcclxuICAgICAgICAgICAgICAgIHZtLnJlcGxheSA9IGZhbHNlO1xyXG4gICAgICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgICAgIHZtLnJlcGxheSA9IHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgfVxyXG4gICAgICAgIFNvY2tldC5vbignb25Ccm9hZGNhc3RDaGF0JywgZnVuY3Rpb24gKG9iaikge1xyXG4gICAgICAgICAgICAgICAgdmFyIHRtcCA9IG5ldyBEYXRlKG9ialtvYmoubGVuZ3RoIC0xXS50aW1lKTtcclxuICAgICAgICAgICAgICAgIHZtLm1lc3NhZ2VzLnB1c2goe1xyXG4gICAgICAgICAgICAgICAgICAgIG5pY2tuYW1lOiBvYmpbb2JqLmxlbmd0aCAtMV0ubmlja25hbWUsXHJcbiAgICAgICAgICAgICAgICAgICAgbXNnOiBvYmpbb2JqLmxlbmd0aCAtMV0ubXNnLFxyXG4gICAgICAgICAgICAgICAgICAgIHRpbWU6IHRtcC5nZXREYXRlKCkgKyBcIi9cIiArICh0bXAuZ2V0TW9udGgoKSArIDEpICsgXCIvXCIgKyB0bXAuZ2V0RnVsbFllYXIoKSArIFwiIFtcIiArIHRtcC5nZXRIb3VycygpICsgXCI6XCIgKyB0bXAuZ2V0TWludXRlcygpICsgXCJdIFwiXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdm0uc2VuZE1lc3NhZ2UgPSBmdW5jdGlvbihjaGF0bXNnKXtcclxuICAgICAgICAgICAgIFNvY2tldC5lbWl0KCdicm9hZGNhc3RDaGF0JywgY2hhdG1zZyk7XHJcbiAgICAgICAgICAgIHZtLm5ld21zZyA9IFwiXCI7XHJcbiAgICAgICAgfVxyXG5cclxuICAgIH07XHJcblxyXG4iLCIvKipcclxuICogQ3JlYXRlZCBieSBKT1NFVkFMREVSTEVJIG9uIDIyLzA3LzIwMTUuXHJcbiAqL1xyXG5cclxuXHJcbmFuZ3VsYXIubW9kdWxlKCdhcHAnKVxyXG4gICAgLmNvbnRyb2xsZXIoJ2RzY1JlcG9ydENvbnRyb2xsZXInLGRzY1JlcG9ydENvbnRyb2xsZXIpO1xyXG5cclxuXHJcbmZ1bmN0aW9uIGRzY1JlcG9ydENvbnRyb2xsZXIoKSB7XHJcblxyXG4gICAgdmFyIHZtID0gdGhpcztcclxuXHJcbiAgICB2bS5pZHByb2JsZW0gPSAnYWpmbGFqZmxqYWxmamFsamYnO1xyXG5cclxuICAgIHZtLmJ1aWRSZXBvcnQgPSBidWlkUmVwb3J0O1xyXG5cclxuICAgIGZ1bmN0aW9uIGJ1aWRSZXBvcnQoZWxlbWVudCkge1xyXG5cclxuXHJcbiAgICAgICAgdmFyIGh0bWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncHJvamVjdFJlc3BvcnQnKTtcclxuXHJcbiAgICAgICAgdmFyIHBkZiA9IG5ldyBqc1BERignbCcsJ3B4Jyk7XHJcblxyXG4gICAgICAgIHBkZi5hZGRIVE1MKFxyXG4gICAgICAgICAgICBodG1sLCAwLCAwLCB7XHJcbiAgICAgICAgICAgICAgICBwYWdlc3BsaXQ6IHRydWVcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgZnVuY3Rpb24oZGlzcG9zZSl7XHJcbiAgICAgICAgICAgICAgICBwZGYuc2F2ZSgndGVzdC5wZGYnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICk7XHJcblxyXG4gICAgfVxyXG59XHJcblxyXG4iLCIvKipcclxuICogQ3JlYXRlZCBieSBKT1NFVkFMREVSTEVJIG9uIDI5LzA2LzIwMTUuXHJcbiAqL1xyXG5cclxuJ3VzZSBzdHJpY3QnO1xyXG5cclxuYW5ndWxhci5tb2R1bGUoJ2FwcCcpXHJcbiAgICAuY29udHJvbGxlcignZXZhbHVhdGlvbmZyYW1ld29ya0NvbnRyb2xsZXInLGV2YWx1YXRpb25mcmFtZXdvcmtDb250cm9sbGVyKTtcclxuXHJcblxyXG5cclxuXHJcbiAgZnVuY3Rpb24gZXZhbHVhdGlvbmZyYW1ld29ya0NvbnRyb2xsZXIgKCR3aW5kb3cscHJvYmxlbVNlcnZpY2UsU29ja2V0LCRzY29wZSl7XHJcblxyXG4gICAgICB2YXIgdm0gPSB0aGlzO1xyXG4gICAgICB2bS5ldmFsdWF0aW9uZnJhbWV3b3JrTGlzdCA9W107XHJcbiAgICAgIHZtLmluaXRFdmFsdWF0aW9uID0gaW5pdEV2YWx1YXRpb247XHJcblxyXG4gICAgICBmdW5jdGlvbiBpbml0RXZhbHVhdGlvbigpe1xyXG4gICAgICAgICAgdm0uaWRwcm9ibGVtID0gJHdpbmRvdy5sb2NhbFN0b3JhZ2UuZ2V0SXRlbSgncHJvYmxlbWlkJyk7XHJcbiAgICAgICAgIHByb2JsZW1TZXJ2aWNlLmdldGV2YWx1YXRpb24odm0uaWRwcm9ibGVtKVxyXG4gICAgICAgICAgICAgIC5zdWNjZXNzKGZ1bmN0aW9uKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgICAgaWYoZGF0YS5zdWNjZXNzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICB2bS5ldmFsdWF0aW9uZnJhbWV3b3JrTGlzdCA9IGRhdGEuZXZhbHVhdGlvbmZyYW1ld29yaztcclxuICAgICAgICAgICAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgICAgICAgICAgICB0b2FzdEFwcC5lcnJvck1lc3NhZ2UoZGF0YS5tZXNzYWdlKTtcclxuICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIH0pXHJcbiAgICAgIH07XHJcblxyXG5cclxuXHJcblxyXG5cclxuICAgICAgU29ja2V0Lm9uKCdvbkJyb2FkY2FzdEZyYW1lU2F2ZScsIGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgICBhbmd1bGFyLmZvckVhY2godm0uZXZhbHVhdGlvbmZyYW1ld29ya0xpc3QsZnVuY3Rpb24oZXZhbHVhdGlvbmZyYW1ld29yayl7XHJcbiAgICAgICAgICAgICBpZiggZXZhbHVhdGlvbmZyYW1ld29yay5vbmlvbmxheWVyID09IGRhdGEub25pb25sYXllcil7XHJcbiAgICAgICAgICAgICAgICAgYW5ndWxhci5mb3JFYWNoKGV2YWx1YXRpb25mcmFtZXdvcmsuc3Rha2Vob2xkZXJzLGZ1bmN0aW9uKHN0YWtlaG9sZGVyKXtcclxuICAgICAgICAgICAgICAgICAgICAgaWYgKHN0YWtlaG9sZGVyLl9pZCA9PSBkYXRhLl9pZCl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICBzdGFrZWhvbGRlci5uYW1lID0gZGF0YS5uYW1lO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgc3Rha2Vob2xkZXIub25pb25sYXllciA9IGRhdGEub25pb25sYXllcjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgIHN0YWtlaG9sZGVyLmRlc2NyaXB0aW9uID0gZGF0YS5kZXNjcmlwdGlvbjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgIHN0YWtlaG9sZGVyLm9wZW5FZGl0ID0gZGF0YS5vcGVuRWRpdDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgIHN0YWtlaG9sZGVyLnByb2JsZW1zID0gZGF0YS5wcm9ibGVtcztcclxuICAgICAgICAgICAgICAgICAgICAgICAgIHN0YWtlaG9sZGVyLnNvbHV0aW9ucyA9IGRhdGEuc29sdXRpb25zO1xyXG4gICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICB9XHJcbiAgICAgICAgICB9KTtcclxuICAgICAgfSk7XHJcblxyXG5cclxuICAgICAgJHNjb3BlLnNhdmVEaXNjdXRpb24gPSBmdW5jdGlvbihzdGFrZWhvbGRlcikge1xyXG4gICAgICAgICAgU29ja2V0LmVtaXQoJ2Jyb2FkY2FzdEZyYW1lU2F2ZScsIHN0YWtlaG9sZGVyKTtcclxuICAgICAgfTtcclxuXHJcblxyXG4gICAgICBTb2NrZXQub24oJ29uVXBkYXRlU3Rha2Vob2xkZXInLCBmdW5jdGlvbiAoc3Rha2Vob2xkZXJPbmlvbikge1xyXG4gICAgICAgICBjb25zb2xlLmxvZyhzdGFrZWhvbGRlck9uaW9uKTtcclxuXHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgJHNjb3BlLnNldE9wZW5FZGl0RGlzY3V0aW9uID0gZnVuY3Rpb24oY3VycmVudFN0YWtlaG9sZGVyKXtcclxuICAgICAgICAgIGN1cnJlbnRTdGFrZWhvbGRlci5vcGVuRWRpdCA9IHRydWU7XHJcbiAgICAgIH07XHJcbiAgfVxyXG5cclxuIiwiLyoqXHJcbiAqIENyZWF0ZWQgYnkgSk9TRVZBTERFUkxFSSBvbiAyOS8wNi8yMDE1LlxyXG4gKi9cclxuXHJcblxyXG4ndXNlIHN0cmljdCc7XHJcblxyXG5hbmd1bGFyLm1vZHVsZSgnYXBwJylcclxuICAgIC5jb250cm9sbGVyKCdzZW1pb3RpY2ZyYW1ld29ya0NvbnRyb2xsZXInLHNlbWlvdGljZnJhbWV3b3JrQ29udHJvbGxlcik7XHJcblxyXG5cclxuZnVuY3Rpb24gc2VtaW90aWNmcmFtZXdvcmtDb250cm9sbGVyKFNvY2tldCwkd2luZG93LCBwcm9ibGVtU2VydmljZSl7XHJcbiAgICB2YXIgdm0gPSB0aGlzO1xyXG4gICAgdm0uaWRwcm9ibGVtID0gXCJcIjtcclxuICAgIHZtLnNhdmVTb2NpYWxXb3JsZCA9IHNhdmVTb2NpYWxXb3JsZDtcclxuICAgIHZtLnNhdmVQcmFnbWF0aWMgPSBzYXZlUHJhZ21hdGljO1xyXG4gICAgdm0uc2F2ZVNlbWFudGljID0gc2F2ZVNlbWFudGljO1xyXG4gICAgdm0uc2F2ZVN5bnRhdGljID0gc2F2ZVN5bnRhdGljO1xyXG4gICAgdm0uc2F2ZUVtcGlyaWNhbCA9IHNhdmVFbXBpcmljYWw7XHJcbiAgICB2bS5zYXZlUGh5c2ljYWwgPSBzYXZlUGh5c2ljYWw7XHJcbiAgICB2bS5zZW1pb3RpY2ZyYW1ld29yayA9IFwiXCI7XHJcbiAgICB2bS5pbml0U2VtaW90aWNGcmFtZXdvcmsgPSBpbml0U2VtaW90aWNGcmFtZXdvcms7XHJcblxyXG4gICAgZnVuY3Rpb24gaW5pdFNlbWlvdGljRnJhbWV3b3JrKCl7XHJcbiAgICAgICAgdm0uaWRwcm9ibGVtID0gJHdpbmRvdy5sb2NhbFN0b3JhZ2UuZ2V0SXRlbSgncHJvYmxlbWlkJyk7XHJcblxyXG4gICAgICAgIHByb2JsZW1TZXJ2aWNlLmdldHNlbWlvdGljKHZtLmlkcHJvYmxlbSlcclxuICAgICAgICAgICAgLnN1Y2Nlc3MoZnVuY3Rpb24oZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgaWYoZGF0YS5zdWNjZXNzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdm0uc2VtaW90aWNmcmFtZXdvcmsgPSBkYXRhLnNlbWlvdGljZnJhbWV3b3JrO1xyXG4gICAgICAgICAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgICAgICAgICAgdG9hc3RBcHAuZXJyb3JNZXNzYWdlKGRhdGEubWVzc2FnZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIFNvY2tldC5vbignb25VcGRhdGVTb2NpYWxXb3JsZCcsIGZ1bmN0aW9uICh0ZXh0KSB7XHJcbiAgICAgICAgdm0uc2VtaW90aWNmcmFtZXdvcmsuc29jaWFsd29ybGQgPSB0ZXh0O1xyXG4gICAgfSk7XHJcblxyXG4gICAgZnVuY3Rpb24gc2F2ZVNvY2lhbFdvcmxkKHRleHQsZmxhZ1NhdmUpe1xyXG4gICAgICAgIHZhciBvYmogPSB7XHJcbiAgICAgICAgICAgIHRleHQ6IHRleHQsXHJcbiAgICAgICAgICAgIHVwZGF0ZTogZmxhZ1NhdmVcclxuICAgICAgICB9O1xyXG4gICAgICAgIFNvY2tldC5lbWl0KCd1cGRhdGVTb2NpYWxXb3JsZCcsIG9iaik7XHJcbiAgICB9XHJcblxyXG4gICAgU29ja2V0Lm9uKCdvblVwZGF0ZVByYWdtYXRpYycsIGZ1bmN0aW9uICh0ZXh0KSB7XHJcbiAgICAgICAgdm0uc2VtaW90aWNmcmFtZXdvcmsucHJhZ21hdGljID0gdGV4dDtcclxuICAgIH0pO1xyXG5cclxuICAgIGZ1bmN0aW9uIHNhdmVQcmFnbWF0aWModGV4dCxmbGFnU2F2ZSl7XHJcbiAgICAgICAgdmFyIG9iaiA9IHtcclxuICAgICAgICAgICAgdGV4dDogdGV4dCxcclxuICAgICAgICAgICAgdXBkYXRlOiBmbGFnU2F2ZVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgU29ja2V0LmVtaXQoJ3VwZGF0ZVByYWdtYXRpYycsIG9iaik7XHJcbiAgICB9XHJcblxyXG4gICAgU29ja2V0Lm9uKCdvblVwZGF0ZVNlbWFudGljJywgZnVuY3Rpb24gKHRleHQpIHtcclxuICAgICAgICB2bS5zZW1pb3RpY2ZyYW1ld29yay5zZW1pb3RpY3JhbWV3b3JrID0gdGV4dDtcclxuICAgIH0pO1xyXG4gICAgZnVuY3Rpb24gc2F2ZVNlbWFudGljKHRleHQsZmxhZ1NhdmUpe1xyXG4gICAgICAgIHZhciBvYmogPSB7XHJcbiAgICAgICAgICAgIHRleHQ6IHRleHQsXHJcbiAgICAgICAgICAgIHVwZGF0ZTogZmxhZ1NhdmVcclxuICAgICAgICB9O1xyXG4gICAgICAgIFNvY2tldC5lbWl0KCd1cGRhdGVTZW1hbnRpYycsIG9iaik7XHJcbiAgICB9XHJcblxyXG4gICAgU29ja2V0Lm9uKCdvblVwZGF0ZVN5bnRhdGljJywgZnVuY3Rpb24gKHRleHQsZmxhZ1NhdmUpIHtcclxuICAgICAgICB2bS5zZW1pb3RpY2ZyYW1ld29yay5zeW50YXRpYyA9IHRleHQ7XHJcbiAgICB9KTtcclxuICAgIGZ1bmN0aW9uIHNhdmVTeW50YXRpYyh0ZXh0LGZsYWdTYXZlKXtcclxuICAgICAgICB2YXIgb2JqID0ge1xyXG4gICAgICAgICAgICB0ZXh0OiB0ZXh0LFxyXG4gICAgICAgICAgICB1cGRhdGU6IGZsYWdTYXZlXHJcbiAgICAgICAgfTtcclxuICAgICAgICBTb2NrZXQuZW1pdCgndXBkYXRlU3ludGF0aWMnLCBvYmopO1xyXG4gICAgfVxyXG5cclxuICAgIFNvY2tldC5vbignb25VcGRhdGVFbXBpcmljYWwnLCBmdW5jdGlvbiAodGV4dCkge1xyXG4gICAgICAgIHZtLnNlbWlvdGljZnJhbWV3b3JrLmVtcGlyaWNhbCA9IHRleHQ7XHJcbiAgICB9KTtcclxuICAgIGZ1bmN0aW9uIHNhdmVFbXBpcmljYWwodGV4dCxmbGFnU2F2ZSl7XHJcbiAgICAgICAgdmFyIG9iaiA9IHtcclxuICAgICAgICAgICAgdGV4dDogdGV4dCxcclxuICAgICAgICAgICAgdXBkYXRlOiBmbGFnU2F2ZVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgU29ja2V0LmVtaXQoJ3VwZGF0ZUVtcGlyaWNhbCcsIG9iaik7XHJcbiAgICB9XHJcblxyXG4gICAgU29ja2V0Lm9uKCdvblVwZGF0ZVBoeXNpY2FsJywgZnVuY3Rpb24gKHRleHQpIHtcclxuICAgICAgICB2bS5zZW1pb3RpY2ZyYW1ld29yay5waHlzaWNhbCA9IHRleHQ7XHJcbiAgICB9KTtcclxuICAgIGZ1bmN0aW9uIHNhdmVQaHlzaWNhbCh0ZXh0LGZsYWdTYXZlKXtcclxuICAgICAgICB2YXIgb2JqID0ge1xyXG4gICAgICAgICAgICB0ZXh0OiB0ZXh0LFxyXG4gICAgICAgICAgICB1cGRhdGU6IGZsYWdTYXZlXHJcbiAgICAgICAgfTtcclxuICAgICAgICBTb2NrZXQuZW1pdCgndXBkYXRlUGh5c2ljYWwnLCBvYmopO1xyXG4gICAgfVxyXG59IiwiLyoqXHJcbiAqIENyZWF0ZWQgYnkgSk9TRVZBTERFUkxFSSBvbiAyOS8wNi8yMDE1LlxyXG4gKi9cclxuJ3VzZSBzdHJpY3QnO1xyXG5cclxuYW5ndWxhci5tb2R1bGUoJ2FwcCcpXHJcbiAgICAuY29udHJvbGxlcignc3Rha2Vob2xkZXJDb250cm9sbGVyJyxzdGFrZWhvbGRlckNvbnRyb2xsZXIpO1xyXG5cclxuXHJcbmZ1bmN0aW9uIHN0YWtlaG9sZGVyQ29udHJvbGxlcihTb2NrZXQsJHNjb3BlLCR3aW5kb3cscHJvYmxlbVNlcnZpY2Upe1xyXG4gICAgdmFyIHZtID0gdGhpcztcclxuICAgIHZtLmlkcHJvYmxlbSA9IFwiXCI7XHJcbiAgICB2bS5zdGFrZWhvbGRlckxpc3QgPSBbXTtcclxuICAgIHZtLnN0YWtlaG9sZGVyID0gXCJcIjtcclxuICAgIHZtLmludGl0T25pb24gPSBpbnRpdE9uaW9uO1xyXG4gICAgdm0ubW92ZSA9IGZhbHNlO1xyXG4gICAgdm0uaW5Qcm9jZXNzaW5nID0gdHJ1ZTtcclxuXHJcbiAgICBmdW5jdGlvbiBpbnRpdE9uaW9uKCl7XHJcbiAgICAgICAgdm0uaWRwcm9ibGVtID0gJHdpbmRvdy5sb2NhbFN0b3JhZ2UuZ2V0SXRlbSgncHJvYmxlbWlkJyk7XHJcbiAgICAgICAgcHJvYmxlbVNlcnZpY2UuZ2V0b25pb24odm0uaWRwcm9ibGVtKVxyXG4gICAgICAgICAgICAuc3VjY2VzcyhmdW5jdGlvbihkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICBpZihkYXRhLnN1Y2Nlc3MpIHtcclxuICAgICAgICAgICAgICAgICAgICB2bS5zdGFrZWhvbGRlckxpc3QgPSBkYXRhLnN0YWtlaG9sZGVycztcclxuICAgICAgICAgICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICAgICAgICAgIHRvYXN0QXBwLmVycm9yTWVzc2FnZShkYXRhLm1lc3NhZ2UpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIHZtLmluUHJvY2Vzc2luZyA9IGZhbHNlO1xyXG4gICAgfVxyXG5cclxuICAgIFNvY2tldC5vbignb25Ccm9hZGNhc3RPbmlvblNhdmUnLCBmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgICAgYW5ndWxhci5mb3JFYWNoKHZtLnN0YWtlaG9sZGVyTGlzdCwgZnVuY3Rpb24gKHN0YWtlaG9sZGVyKSB7XHJcbiAgICAgICAgICAgIGlmIChzdGFrZWhvbGRlci5faWQgPT0gZGF0YS5faWQpe1xyXG4gICAgICAgICAgICAgICAgc3Rha2Vob2xkZXIuc3Rha2Vob2xkZXIgPSBkYXRhLnN0YWtlaG9sZGVyO1xyXG4gICAgICAgICAgICAgICAgc3Rha2Vob2xkZXIubmFtZSA9IGRhdGEubmFtZTtcclxuICAgICAgICAgICAgICAgIHN0YWtlaG9sZGVyLmRlc2NyaXB0aW9uID0gZGF0YS5kZXNjcmlwdGlvbjtcclxuICAgICAgICAgICAgICAgIHN0YWtlaG9sZGVyLm9wZW5FZGl0ID0gZGF0YS5kYWRhb3BlbkVkaXRcclxuICAgICAgICAgICAgICAgIHN0YWtlaG9sZGVyLnggPSBkYXRhLng7XHJcbiAgICAgICAgICAgICAgICBzdGFrZWhvbGRlci55ID0gZGF0YS55O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgfSk7XHJcblxyXG5cclxuICAgICRzY29wZS5zYXZlU3Rha2Vob2xkZXIgPSBmdW5jdGlvbihzdGFrZWhvbGRlcikge1xyXG4gICAgICAgIFNvY2tldC5lbWl0KCdicm9hZGNhc3RPbmlvblNhdmUnLCBzdGFrZWhvbGRlcik7XHJcbiAgICB9O1xyXG5cclxuICAgIFNvY2tldC5vbignb25Ccm9hZGNhc3RPbmlvbkVkaXQnLCBmdW5jdGlvbiAoaWQpIHtcclxuICAgICAgICBhbmd1bGFyLmZvckVhY2godm0uc3Rha2Vob2xkZXJMaXN0LCBmdW5jdGlvbiAoc3Rha2Vob2xkZXIpIHtcclxuICAgICAgICAgICAgaWYgKHN0YWtlaG9sZGVyLl9pZCA9PSBpZCkgc3Rha2Vob2xkZXIub3BlbkVkaXQgPSB0cnVlO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgIH0pO1xyXG5cclxuICAgICRzY29wZS5zZXRPcGVuRWRpdCA9IGZ1bmN0aW9uKGlkKXtcclxuICAgICAgICBTb2NrZXQuZW1pdCgnYnJvYWRjYXN0T25pb25FZGl0JywgaWQpO1xyXG4gICAgfTtcclxuXHJcblxyXG4gICAgU29ja2V0Lm9uKCdvbkJyb2FkY2FzdE9uaW9uUmVtb3ZlJywgZnVuY3Rpb24gKGlkKSB7XHJcbiAgICAgICAgdmFyIHN0YWtlaG9sZGVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzdGFrZWhvbGRlclwiICt2bS5zdGFrZWhvbGRlckxpc3RbaWRdLl9pZCk7XHJcbiAgICAgICAgc3Rha2Vob2xkZXIuc3R5bGUuZGlzcGxheSA9ICdub25lJztcclxuICAgICAgICB2bS5zdGFrZWhvbGRlckxpc3Quc3BsaWNlKGlkLDEpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgJHNjb3BlLmRlbFBvc3RJdCA9IGZ1bmN0aW9uKGluZGV4LHN0YWtlaG9sZGVyKSB7XHJcbiAgICAgICAgdmFyIG9iaiA9IHtcclxuICAgICAgICAgICAgaW5kZXg6IGluZGV4LFxyXG4gICAgICAgICAgICBzdGFrZWhvbGRlcjogc3Rha2Vob2xkZXJcclxuICAgICAgICB9XHJcbiAgICAgICAgU29ja2V0LmVtaXQoJ2Jyb2FkY2FzdE9uaW9uUmVtb3ZlJywgb2JqKTtcclxuICAgIH07XHJcblxyXG4gICAgU29ja2V0Lm9uKCdvbkJyb2FkY2FzdE9uaW9uQWRkJywgZnVuY3Rpb24gKHJldG9ybm8pIHtcclxuICAgICAgICB2bS5zdGFrZWhvbGRlckxpc3QucHVzaChyZXRvcm5vKTtcclxuICAgIH0pO1xyXG5cclxuICAgICRzY29wZS5hZGRQb3N0SXQgPSBmdW5jdGlvbihlLGNhbWFkYSkge1xyXG5cclxuXHJcbiAgICAgICAgdmFyIG5ld1N0YWtlaG9sZGVyID1cclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIFwib25pb25sYXllclwiOiBjYW1hZGEsXHJcbiAgICAgICAgICAgIFwibmFtZVwiOiBcIlwiLFxyXG4gICAgICAgICAgICBcImRlc2NyaXB0aW9uXCI6IFwiXCIsXHJcbiAgICAgICAgICAgIFwib3BlbkVkaXRcIjogdHJ1ZSxcclxuICAgICAgICAgICAgXCJ4XCI6IGUucGFnZVggKyAncHgnLFxyXG4gICAgICAgICAgICBcInlcIjogZS5wYWdlWSArICdweCdcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgU29ja2V0LmVtaXQoJ2Jyb2FkY2FzdE9uaW9uQWRkJywgbmV3U3Rha2Vob2xkZXIpO1xyXG4gICAgfTtcclxuXHJcbiAgICB2bS5hY2VuZGUgPSBmdW5jdGlvbihldnQpIHtcclxuICAgICAgICBldnQudGFyZ2V0LnNldEF0dHJpYnV0ZShcIm9wYWNpdHlcIiwgXCIwLjhcIik7XHJcbiAgICB9XHJcbiAgICB2bS5hcGFnYSA9IGZ1bmN0aW9uKGV2dCkge1xyXG4gICAgICAgIGV2dC50YXJnZXQuc2V0QXR0cmlidXRlKFwib3BhY2l0eVwiLCBcIjEuMFwiKTtcclxuICAgIH1cclxuXHJcbn0iLCIvKipcclxuICogQ3JlYXRlZCBieSBKT1NFVkFMREVSTEVJIG9uIDIyLzA3LzIwMTUuXHJcbiAqL1xyXG5cclxuYW5ndWxhci5tb2R1bGUoJ2FwcCcpXHJcbiAgICAuY29udHJvbGxlcigndmFsdWVJZGVudGlmaWNhdGlvbkZyYW1lQ29udHJvbGxlcicsIHZhbHVlSWRlbnRpZmljYXRpb25GcmFtZUNvbnRyb2xsZXIpO1xyXG5cclxuXHJcbmZ1bmN0aW9uIHZhbHVlSWRlbnRpZmljYXRpb25GcmFtZUNvbnRyb2xsZXIoJHdpbmRvdyxwcm9ibGVtU2VydmljZSx0b2FzdEFwcCxTb2NrZXQpe1xyXG5cclxuXHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICBzZWxmLmluUHJvY2Vzc2luZyA9IHRydWU7XHJcblxyXG4gICAgc2VsZi5pZFByb2JsZW0gPSBcIlwiO1xyXG4gICAgc2VsZi51c2VyZW1haWwgPSBcIlwiO1xyXG4gICAgc2VsZi5uZXd2YWx1ZXMgPSBcIlwiO1xyXG4gICAgc2VsZi5zdGFrZWhvbGRlckxpc3QgPSBbXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBvbmlvbmxheWVyOiBcIkNvbW11bml0eVwiLFxyXG4gICAgICAgICAgICBzdGFrZWhvbGRlcnM6IFtdXHJcbiAgICAgICAgfSxcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIG9uaW9ubGF5ZXI6IFwiTWFya2V0XCIsXHJcbiAgICAgICAgICAgIHN0YWtlaG9sZGVyczogW11cclxuICAgICAgICB9LFxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgb25pb25sYXllcjogXCJTb3VyY2VcIixcclxuICAgICAgICAgICAgc3Rha2Vob2xkZXJzOiBbXVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBvbmlvbmxheWVyOiBcIkNvbnRydWlidWl0aW9uXCIsXHJcbiAgICAgICAgICAgIHN0YWtlaG9sZGVyczogW11cclxuICAgICAgICB9LFxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgb25pb25sYXllcjogXCJUZWNobmljb1wiLFxyXG4gICAgICAgICAgICBzdGFrZWhvbGRlcnM6IFtdXHJcbiAgICAgICAgfVxyXG5cclxuICAgIF07XHJcblxyXG4gICAgc2VsZi5zdWdlc3Rpb25WYWx1ZXMgPSBcIlwiO1xyXG5cclxuICAgIHNlbGYuc3VnZXN0aW9uVmFsdWVzQXJyYXkgPSBbXHJcbiAgICAgICAgJ0FjZXNzaWJpbGlkYWRlJywgJ0FkYXB0YWJpbGlkYWRlJywgJ0VzdO+/vXRpY2EnLCAnQXV0b25vbWlhJywgJ0Rpc3BvbmliaWxpZGFkZScsICdDb25zY2nvv71uY2lhJywgJ0NvbGFib3Jh77+977+9bycsXHJcbiAgICAgICAgJ0NvbnZlcnNh77+977+9bycsICdFbW/vv73vv71vIGUgQWZldG8nLCAnR3J1cG9zJywgJ0lkZW50aWRhZGUnLCAnQ29uc2VudGltZW50byBpbmZvcm1hZG8nLCAnTWV0YS1jb211bmljYe+/ve+/vW8nLCAnTm9ybWFzJyxcclxuICAgICAgICAnT2JqZXRvJywgJ1BvcnRhYmlsaWRhZGUnLCAnUHJlc2Vu77+9YScsICdQcml2YWNpZGFkZScsICdQcm9wcmllZGFkZScsICdSZWNpcHJvY2lkYWRlLCBSZWxhY2lvbmFtZW50bywgUmVwdXRh77+977+9bywnICtcclxuICAgICAgICAnRXNjYWxhYmlsaWRhZGUnLCAnU2VndXJhbu+/vWEnLCAnQ29tcGFydGlsaGFtZW50bycsICdDb25maWFu77+9YScsICdVc2FiaWxpZGFkZScsICdWaXNpYmlsaWRhZGUnXHJcbiAgICBdO1xyXG5cclxuXHJcbiAgICBzZWxmLmluaXRWYWx1ZUlkZW50aWZpY2F0aW9uRnJhbWUgPSBmdW5jdGlvbigpe1xyXG4gICAgICAgIHNlbGYuaWRwcm9ibGVtID0gJHdpbmRvdy5sb2NhbFN0b3JhZ2UuZ2V0SXRlbSgncHJvYmxlbWlkJyk7XHJcbiAgICAgICAgcHJvYmxlbVNlcnZpY2UuZ2V0b25pb24oc2VsZi5pZHByb2JsZW0pXHJcbiAgICAgICAgICAgIC5zdWNjZXNzKGZ1bmN0aW9uKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgIGlmKGRhdGEuc3VjY2Vzcykge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKGRhdGEuc3Rha2Vob2xkZXJzLmxlbmd0aCA+IDApe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yKHZhciBrID0gMTsgayA8IHNlbGYuc3VnZXN0aW9uVmFsdWVzQXJyYXkubGVuZ3RoOyBrKyspe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuc3VnZXN0aW9uVmFsdWVzICs9IHNlbGYuc3VnZXN0aW9uVmFsdWVzQXJyYXlba10gKyAgXCIsIFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuc3VnZXN0aW9uVmFsdWVzW3NlbGYuc3VnZXN0aW9uVmFsdWVzQXJyYXlbc2VsZi5zdWdlc3Rpb25WYWx1ZXNBcnJheS5sZW5ndGgtMV1dICsgXCIuXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IodmFyIGkgPSAwOyBpIDwgZGF0YS5zdGFrZWhvbGRlcnMubGVuZ3RoOyBpKyspe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvcih2YXIgaiA9IDA7IGogPCBzZWxmLnN0YWtlaG9sZGVyTGlzdC5sZW5ndGg7IGorKyl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzdGFrZWhvbGRlciA9IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9pZCA6IGRhdGEuc3Rha2Vob2xkZXJzW2ldLl9pZCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uaW9ubGF5ZXIgOiBkYXRhLnN0YWtlaG9sZGVyc1tpXS5vbmlvbmxheWVyLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWVzIDogZGF0YS5zdGFrZWhvbGRlcnNbaV0udmFsdWVzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZSA6IGRhdGEuc3Rha2Vob2xkZXJzW2ldLm5hbWUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbiA6IGRhdGEuc3Rha2Vob2xkZXJzW2ldLmRlc2NyaXB0aW9uLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3BlbkVkaXQgOiBkYXRhLnN0YWtlaG9sZGVyc1tpXS5vcGVuRWRpdCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHggOiBkYXRhLnN0YWtlaG9sZGVyc1tpXS54LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeSA6IGRhdGEuc3Rha2Vob2xkZXJzW2ldLnksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdWYWx1ZXMgOiBbXVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHN0YWtlaG9sZGVyKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoZGF0YS5zdGFrZWhvbGRlcnNbaV0ub25pb25sYXllciA9PSBzZWxmLnN0YWtlaG9sZGVyTGlzdFtqXS5vbmlvbmxheWVyKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuc3Rha2Vob2xkZXJMaXN0W2pdLnN0YWtlaG9sZGVycy5wdXNoKHN0YWtlaG9sZGVyKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIHNlbGYuaW5Qcm9jZXNzaW5nID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgICAgICAgICB0b2FzdEFwcC5lcnJvck1lc3NhZ2UoZGF0YS5tZXNzYWdlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSlcclxuICAgIH07XHJcblxyXG4gICAgU29ja2V0Lm9uKCdvbkJyb2FkY2FzdE9uaW9uU2F2ZScsIGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgY29uc29sZS5sb2coZGF0YSk7XHJcbiAgICAgICAgYW5ndWxhci5mb3JFYWNoKHNlbGYuc3Rha2Vob2xkZXJMaXN0LCBmdW5jdGlvbiAoc3Rha2Vob2xkZXIpIHtcclxuICAgICAgICAgICAgaWYgKHN0YWtlaG9sZGVyLl9pZCA9PSBkYXRhLl9pZCl7XHJcbiAgICAgICAgICAgICAgICBzdGFrZWhvbGRlci5zdGFrZWhvbGRlciA9IGRhdGEuc3Rha2Vob2xkZXI7XHJcbiAgICAgICAgICAgICAgICBzdGFrZWhvbGRlci5uYW1lID0gZGF0YS5uYW1lO1xyXG4gICAgICAgICAgICAgICAgc3Rha2Vob2xkZXIuZGVzY3JpcHRpb24gPSBkYXRhLmRlc2NyaXB0aW9uO1xyXG4gICAgICAgICAgICAgICAgc3Rha2Vob2xkZXIub3BlbkVkaXQgPSBkYXRhLm9wZW5FZGl0LFxyXG4gICAgICAgICAgICAgICAgc3Rha2Vob2xkZXIueCA9IGRhdGEueDtcclxuICAgICAgICAgICAgICAgIHN0YWtlaG9sZGVyLnkgPSBkYXRhLnk7XHJcbiAgICAgICAgICAgICAgICBzdGFrZWhvbGRlci5uZXdWYWx1ZXMgPSBbXTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcblxyXG4gICAgc2VsZi5zZXRTdWdnZXN0aW9uU2hvdyA9IGZ1bmN0aW9uKHN0YWtlaG9sZGVyKXtcclxuICAgICAgICBzdGFrZWhvbGRlci5vcGVuRWRpdCA9IHRydWU7XHJcbiAgICB9O1xyXG5cclxuICAgIHNlbGYubGVhdmVTdWdnZXN0aW9uU2hvdyA9IGZ1bmN0aW9uKHN0YWtlaG9sZGVyKXtcclxuICAgICAgICBzdGFrZWhvbGRlci5vcGVuRWRpdCA9IGZhbHNlO1xyXG4gICAgfTtcclxuXHJcblxyXG4gICAgc2VsZi5yZW1vdmVWYWx1ZUlkZW50aWNhdGlvbiA9IGZ1bmN0aW9uKHZhbHVlLHN0YWtlaG9sZGVyKXtcclxuICAgICAgICB2YXIgbmV3TGlzdCA9IFtdO1xyXG4gICAgICAgIGZvcih2YXIgaSA9IDA7IGkgPCBzdGFrZWhvbGRlci52YWx1ZXMubGVuZ3RoOyBpKyspe1xyXG4gICAgICAgICAgICBpZihzdGFrZWhvbGRlci52YWx1ZXNbaV0gIT0gdmFsdWUpe1xyXG4gICAgICAgICAgICAgICAgbmV3TGlzdC5wdXNoKHN0YWtlaG9sZGVyLnZhbHVlc1tpXSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgc3Rha2Vob2xkZXIudmFsdWVzID0gbmV3TGlzdDtcclxuICAgICAgICBTb2NrZXQuZW1pdCgnYnJvYWRjYXN0T25pb25TYXZlJywgc3Rha2Vob2xkZXIpO1xyXG4gICAgfVxyXG5cclxuICAgIHNlbGYuc2V0VmFsdWVJZGVudGljYXRpb24gPSBmdW5jdGlvbihzdGFrZWhvbGRlcikge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKHN0YWtlaG9sZGVyLm5ld1ZhbHVlcyk7XHJcbiAgICAgICAgaWYoKHN0YWtlaG9sZGVyLm5ld1ZhbHVlcyA9PT0gXCJcIikgfHwgKHN0YWtlaG9sZGVyLm5ld1ZhbHVlcyA9PT0gdW5kZWZpbmVkKSl7XHJcbiAgICAgICAgICAgIHRvYXN0QXBwLmVycm9yTWVzc2FnZShcIlZhbG9yIG7vv71vIGVzcGVjaWZpY2Fkby5cIik7XHJcbiAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgIHZhciB2YWx1ZXNMaXN0ID0gc3Rha2Vob2xkZXIubmV3VmFsdWVzLnNwbGl0KCcsJyk7XHJcbiAgICAgICAgICAgIGZvcih2YXIgaT0wOyBpIDwgdmFsdWVzTGlzdC5sZW5ndGg7IGkrKyl7XHJcbiAgICAgICAgICAgICAgICBpZihmaW5kVmFsdWUoc3Rha2Vob2xkZXIudmFsdWVzLCB2YWx1ZXNMaXN0W2ldKSl7XHJcbiAgICAgICAgICAgICAgICAgICAgdG9hc3RBcHAuZXJyb3JNZXNzYWdlKFwiRHVwbGljYXRlIHZhbHVlOiBcIiArIHZhbHVlc0xpc3RbaV0pO1xyXG4gICAgICAgICAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgICAgICAgICAgc3Rha2Vob2xkZXIudmFsdWVzLnB1c2godmFsdWVzTGlzdFtpXSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKHN0YWtlaG9sZGVyLnZhbHVlcyk7XHJcbiAgICAgICAgICAgIHN0YWtlaG9sZGVyLm5ld1ZhbHVlcyA9IFwiXCI7XHJcbiAgICAgICAgICAgIHN0YWtlaG9sZGVyLm9wZW5FZGl0ID0gZmFsc2U7XHJcbiAgICAgICAgICAgIFNvY2tldC5lbWl0KCdicm9hZGNhc3RPbmlvblNhdmUnLCBzdGFrZWhvbGRlcik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgIH07XHJcblxyXG4gICAgZnVuY3Rpb24gZmluZFZhbHVlKGxpc3QsIHZhbHVlKXtcclxuICAgICAgICBmb3IodmFyIGk9MDsgaSA8IGxpc3QubGVuZ3RoOyBpKyspe1xyXG4gICAgICAgICAgICBpZih2YWx1ZSA9PT0gbGlzdFtpXSl7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcblxyXG59XHJcbiIsIi8qKlxyXG4gKiBDcmVhdGVkIGJ5IEpPU0VWQUxERVJMRUkgb24gMjUvMDYvMjAxNS5cclxuICovXHJcbihmdW5jdGlvbiAoKSB7XHJcbiAgICBcInVzZSBzdHJpY3RcIjtcclxuXHJcbmFuZ3VsYXJcclxuICAgIC5tb2R1bGUoJ2FwcCcsWyd0b2FzdFNlcnZpY2UnLCd0ZXh0QW5ndWxhcicsJ2x1ZWdnLmRpcmVjdGl2ZXMnLCAnRHJvcERTQycsJ2F1dGhTZXJ2aWNlJywndWkucm91dGVyJywnbmdNYXRlcmlhbCcsJ25nTWRJY29ucycsJ25nQ29va2llcycsJ3Bhc2NhbHByZWNodC50cmFuc2xhdGUnXSlcclxuICAgICAgICAuY29uZmlnKGZ1bmN0aW9uKCRodHRwUHJvdmlkZXIpIHtcclxuICAgICAgICAgICAgJGh0dHBQcm92aWRlci5pbnRlcmNlcHRvcnMucHVzaCgnQXV0aEludGVyY2VwdG9yJyk7XHJcbiAgICAgICAgfSlcclxuXHJcbn0pKCk7XHJcblxyXG5cclxuIiwiLyoqXHJcbiAqIENyZWF0ZWQgYnkgSk9TRVZBTERFUkxFSSBvbiAyNS8wNi8yMDE1LlxyXG4gKi9cclxuXHJcbihmdW5jdGlvbigpe1xyXG5cclxuJ3VzZSBzdHJpY3QnO1xyXG5cclxuYW5ndWxhci5tb2R1bGUoJ2FwcCcpXHJcbiAgICAuY29uZmlnKHJvdXRlcyk7XHJcblxyXG5mdW5jdGlvbiByb3V0ZXMoJHN0YXRlUHJvdmlkZXIsICR1cmxSb3V0ZXJQcm92aWRlcikge1xyXG5cclxuICAgICRzdGF0ZVByb3ZpZGVyLnN0YXRlKCdpbml0Jywge1xyXG4gICAgICAgIHVybDogJy8nLFxyXG4gICAgICAgIHRlbXBsYXRlVXJsOiAndmlld3MvcGFnZXMvaW5pdHBhZ2UuaHRtbCcsXHJcbiAgICAgICAgY29udHJvbGxlcjogJ2xvZ2luQ29udHJvbGxlciBhcyB2bSdcclxuICAgICAgICB9KVxyXG4gICAgICAgIC5zdGF0ZSgnaW5pdC5sb2dpbicsIHtcclxuICAgICAgICAgICAgdXJsOiAnbG9naW4nLFxyXG4gICAgICAgICAgICB2aWV3czoge1xyXG4gICAgICAgICAgICAgICAgJ2NvbnRlbnQtdGFiJzoge1xyXG4gICAgICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAndmlld3MvcGFnZXMvdXNlcmxvZ2luLmh0bWwnLFxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdsb2dpbkNvbnRyb2xsZXIgYXMgdm0nXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KVxyXG4gICAgICAgIC5zdGF0ZSgnaW5pdC5zaWdudXAnLCB7XHJcbiAgICAgICAgICAgIHVybDogJ3NpZ251cCcsXHJcbiAgICAgICAgICAgICAgIHZpZXdzOiB7XHJcbiAgICAgICAgICAgICAgICAnY29udGVudC10YWInOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICd2aWV3cy9wYWdlcy9zaWdudXAuaHRtbCcsXHJcbiAgICAgICAgICAgICAgICAgICAgY29udHJvbGxlcjogJ3NpZ251cENvbnRyb2xsZXIgYXMgdm0nXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KVxyXG4gICAgICAgIC5zdGF0ZSgnaW5pdC5yZXNjdWVwYXNzd29yZCcsIHtcclxuICAgICAgICAgICAgdXJsOiAncmVzY3VlcGFzc3dvcmQnLFxyXG4gICAgICAgICAgICB2aWV3czoge1xyXG4gICAgICAgICAgICAgICAgJ2NvbnRlbnQtdGFiJzoge1xyXG4gICAgICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAndmlld3MvcGFnZXMvcmVzY3VlcGFzc3dvcmQuaHRtbCcsXHJcbiAgICAgICAgICAgICAgICAgICAgY29udHJvbGxlcjogJ3NpZ251cENvbnRyb2xsZXIgYXMgdm0nXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KVxyXG4gICAgICAgIC5zdGF0ZSgnc3RhcnRwcm9ibGVtJywge1xyXG4gICAgICAgICAgICB1cmw6ICcvc3RhcnRwcm9ibGVtJyxcclxuICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICd2aWV3cy9wYWdlcy9zdGFydHByb2JsZW0uaHRtbCcsXHJcbiAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdzdGFydFByb2JsZW1Db250cm9sbGVyIGFzIHZtJ1xyXG5cclxuICAgICAgICB9KVxyXG5cclxuICAgICAgICAuc3RhdGUoJ25ld3Bhc3N3b3JkJywge1xyXG4gICAgICAgICAgICB1cmw6ICcvbmV3cGFzc3dvcmQvOm15dG9rZW4nLFxyXG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ3ZpZXdzL3BhZ2VzL25ld3Bhc3N3b3JkLmh0bWwnLFxyXG4gICAgICAgICAgICBjb250cm9sbGVyOiAnc2lnbnVwQ29udHJvbGxlciBhcyB2bScsXHJcbiAgICAgICAgfSlcclxuXHJcblxyXG4gICAgICAgIC5zdGF0ZSgncHJvYmxlbScsIHtcclxuICAgICAgICAgICAgdXJsOiAnL3Byb2JsZW0nLFxyXG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ3ZpZXdzL3BhZ2VzL3Byb2JsZW0uaHRtbCcsXHJcbiAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdtZW51UHJvYmxlbUNvbnRyb2xsZXIgYXMgdm0nXHJcbiAgICAgICAgfSlcclxuICAgICAgICAuc3RhdGUoJ3Byb2JsZW0uZHNjcmVwb3J0Jywge1xyXG4gICAgICAgICAgICB1cmw6ICcvZHNjcmVwb3J0JyxcclxuICAgICAgICAgICAgdmlld3M6IHtcclxuICAgICAgICAgICAgICAgICdwcm9ibGVtLWRlc2NyaXB0aW9uJzoge1xyXG4gICAgICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAndmlld3MvcGFnZXMvZHNjcmVwb3J0Lmh0bWwnLFxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdkc2NSZXBvcnRDb250cm9sbGVyIGFzIHZtJ1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxuICAgICAgICAuc3RhdGUoJ3Byb2JsZW0uZGVzY3JpcHRpb24nLCB7XHJcbiAgICAgICAgICAgIHVybDogJy9kZXNjcmlwdGlvbicsXHJcbiAgICAgICAgICAgIHZpZXdzOiB7XHJcbiAgICAgICAgICAgICAgICAncHJvYmxlbS1kZXNjcmlwdGlvbic6IHtcclxuICAgICAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ3ZpZXdzL3BhZ2VzL3Byb2JsZW1kZXNjcmlwdGlvbi5odG1sJyxcclxuICAgICAgICAgICAgICAgICAgICBjb250cm9sbGVyOiAnZWRpdFByb2JsZW1Db250cm9sbGVyIGFzIHZtJ1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxuICAgICAgICAuc3RhdGUoJ3Byb2JsZW0uY29sbGFib3JhdG9ycycsIHtcclxuICAgICAgICAgICAgdXJsOiAnL2NvbGxhYm9yYXRvcnMnLFxyXG4gICAgICAgICAgICB2aWV3czoge1xyXG4gICAgICAgICAgICAgICAgJ3Byb2JsZW0tZGVzY3JpcHRpb24nOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICd2aWV3cy9wYWdlcy9jb2xsYWJvcmF0b3JzLmh0bWwnLFxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdjb250cm9sbGVyQ29sbGFib3JhdG9ycyBhcyB2bSdcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLnN0YXRlKCdwcm9ibGVtLnN0YWtlaG9sZGVycycsIHtcclxuICAgICAgICAgICAgdXJsOiAnc3Rha2Vob2xkZXJzJyxcclxuICAgICAgICAgICAgdmlld3M6IHtcclxuICAgICAgICAgICAgICAgICdkc2MtYXJ0aWZhY3QnOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICd2aWV3cy9wYWdlcy9zdGFrZWhvbGRlcnMuaHRtbCcsXHJcbiAgICAgICAgICAgICAgICAgICAgY29udHJvbGxlcjogJ3N0YWtlaG9sZGVyQ29udHJvbGxlciBhcyB2bSdcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLnN0YXRlKCdwcm9ibGVtLmV2YWx1YXRpb25mcmFtZXdvcmsnLCB7XHJcbiAgICAgICAgICAgICAgICB1cmw6ICdldmFsdWF0aW9uZnJhbWV3b3JrJyxcclxuICAgICAgICAgICAgICAgIHZpZXdzOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgJ2RzYy1hcnRpZmFjdCc6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICd2aWV3cy9wYWdlcy9ldmFsdWF0aW9uZnJhbWV3b3JrLmh0bWwnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb250cm9sbGVyOiAnZXZhbHVhdGlvbmZyYW1ld29ya0NvbnRyb2xsZXIgYXMgdm0nXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KVxyXG5cclxuICAgICAgICAuc3RhdGUoJ3Byb2JsZW0uc2VtaW90aWNmcmFtZXdvcmsnLCB7XHJcbiAgICAgICAgICAgICAgICB1cmw6ICdzZW1pb3RpY2ZyYW1ld29yaycsXHJcbiAgICAgICAgICAgICAgICB2aWV3czoge1xyXG4gICAgICAgICAgICAgICAgICAgICdkc2MtYXJ0aWZhY3QnOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAndmlld3MvcGFnZXMvc2VtaW90aWNmcmFtZXdvcmsuaHRtbCcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdzZW1pb3RpY2ZyYW1ld29ya0NvbnRyb2xsZXIgYXMgdm0nXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIC5zdGF0ZSgncHJvYmxlbS5jYXJmJywge1xyXG4gICAgICAgICAgICAgICAgdXJsOiAnY2FyZicsXHJcbiAgICAgICAgICAgICAgICB2aWV3czoge1xyXG4gICAgICAgICAgICAgICAgICAgICdkc2MtYXJ0aWZhY3QnOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAndmlld3MvcGFnZXMvY2FyZi5odG1sJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29udHJvbGxlcjogJ2NhcmZDb250cm9sbGVyIGFzIHZtJ1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAuc3RhdGUoJ3Byb2JsZW0udmlmJywge1xyXG4gICAgICAgICAgICB1cmw6ICd2aWYnLFxyXG4gICAgICAgICAgICB2aWV3czoge1xyXG4gICAgICAgICAgICAgICAgJ2RzYy1hcnRpZmFjdCc6IHtcclxuICAgICAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ3ZpZXdzL3BhZ2VzL3ZpZi5odG1sJyxcclxuICAgICAgICAgICAgICAgICAgICBjb250cm9sbGVyOiAndmFsdWVJZGVudGlmaWNhdGlvbkZyYW1lQ29udHJvbGxlciBhcyB2bSdcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuXHJcbiAgICAgICAgJHVybFJvdXRlclByb3ZpZGVyLm90aGVyd2lzZSgnL2xvZ2luJyk7XHJcbn1cclxuXHJcbn0pKCk7IixudWxsLCIvKipcclxuICogQ3JlYXRlZCBieSBKT1NFVkFMREVSTEVJIG9uIDE5LzA2LzIwMTUuXHJcbiAqL1xyXG4oZnVuY3Rpb24oKXtcclxuXHJcbid1c2Ugc3RyaWN0JztcclxuXHJcbiAgICBhbmd1bGFyXHJcbiAgICAubW9kdWxlKCdhcHAnKVxyXG4gICAgLmNvbmZpZyhpbml0TGFuZ3VhZ2UpXHJcbiAgICAuY29udHJvbGxlcignbGFuZ3VhZ2VDb250cm9sbGVyJyxsYW5ndWFnZUNvbnRyb2xsZXIpXHJcbiAgICAuZGlyZWN0aXZlKCdjaGFuZ2VMYW5ndWFnZScsY2hhbmdlTGFuZ3VhZ2UpO1xyXG5cclxuaW5pdExhbmd1YWdlLiRpbmplY3QgPSBbJyR0cmFuc2xhdGVQcm92aWRlciddO1xyXG5sYW5ndWFnZUNvbnRyb2xsZXIuJGluamVjdCA9IFsnJHRyYW5zbGF0ZSddO1xyXG5cclxuZnVuY3Rpb24gaW5pdExhbmd1YWdlICgkdHJhbnNsYXRlUHJvdmlkZXIpIHtcclxuICAgICAgICAkdHJhbnNsYXRlUHJvdmlkZXIudXNlU3RhdGljRmlsZXNMb2FkZXIoe1xyXG4gICAgICAgICAgICBwcmVmaXg6ICdhcHAvbGFuZ3VhZ2UvbGFuZy0nLFxyXG4gICAgICAgICAgICBzdWZmaXg6ICcuanNvbidcclxuICAgICAgICB9KTtcclxuICAgICAgICAkdHJhbnNsYXRlUHJvdmlkZXIucHJlZmVycmVkTGFuZ3VhZ2UoJ2VuJyk7XHJcbiAgICAgICAgJHRyYW5zbGF0ZVByb3ZpZGVyLnVzZVNhbml0aXplVmFsdWVTdHJhdGVneSgnZXNjYXBlZCcpO1xyXG4gICAgICAgICR0cmFuc2xhdGVQcm92aWRlci51c2VMb2NhbFN0b3JhZ2UoKTtcclxufVxyXG5cclxuZnVuY3Rpb24gbGFuZ3VhZ2VDb250cm9sbGVyICgkdHJhbnNsYXRlKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0TGFuZyA9IGZ1bmN0aW9uKGxhbmdLZXkpIHtcclxuICAgICAgICAgICAgJHRyYW5zbGF0ZS51c2UobGFuZ0tleSk7XHJcbiAgICAgICAgfTtcclxufVxyXG5cclxuXHJcblxyXG5cclxuZnVuY3Rpb24gY2hhbmdlTGFuZ3VhZ2UoKXtcclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgdGVtcGxhdGVVcmwgOiBcImFwcC9sYW5ndWFnZS9jaGFuZ2VMYW5ndWFnZS5odG1sXCIsXHJcbiAgICAgICAgcmVzdHJpY3Q6IFwiRVwiXHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuXHJcbn0pKCk7IiwiLyoqXHJcbiAqIENyZWF0ZWQgYnkgSk9TRVZBTERFUkxFSSBvbiAxNC8wNy8yMDE1LlxyXG4gKi9cclxuKGZ1bmN0aW9uKCl7XHJcbiAgICBcInVzZSBzdHJpY3RcIjtcclxuXHJcbiAgICBhbmd1bGFyLm1vZHVsZSgnYXBwJylcclxuICAgICAgICAuY29udHJvbGxlcihcImNhcmZDb250cm9sbGVyXCIsY2FyZkNvbnRyb2xsZXIpO1xyXG5cclxuICAgIGZ1bmN0aW9uIGNhcmZDb250cm9sbGVyKCR3aW5kb3csU29ja2V0LHByb2JsZW1TZXJ2aWNlLHRvYXN0QXBwKXtcclxuICAgICAgICB2YXIgdm0gPSB0aGlzO1xyXG4gICAgICAgIHZtLmlkUHJvYmxlbSA9IFwiXCI7XHJcbiAgICAgICAgdm0uaW5Qcm9jZXNzaW5nID0gdHJ1ZTtcclxuICAgICAgICB2bS52YWx1ZUxpc3QgPSBbXTtcclxuICAgICAgICB2bS5zdGFrZWhvbGRlckxpc3QgPSBbXTtcclxuICAgICAgICB2bS5sb2NhbFN0YWtlaG9sZGVycyA9IFtdO1xyXG4gICAgICAgIHZtLmNhcmYgPSB7XHJcbiAgICAgICAgICAgIHBtczogXCJcIixcclxuICAgICAgICAgICAgdmFsdWVzOiBbXSxcclxuICAgICAgICAgICAgcHJpb3JpdHk6IFwiXCIsXHJcbiAgICAgICAgICAgIHJlcXVpcmVtZW50OiBcIlwiLFxyXG4gICAgICAgICAgICBzdGFrZWhvbGRlcnM6IFtdXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgdm0uaW5pdENhcmYgPSBpbml0Q2FyZjtcclxuICAgICAgICB2bS5jYXJmTGlzdCA9IFtdO1xyXG4gICAgICAgIHZtLmNhcmZQcmlvcml0eUxpc3QgPSBbXTtcclxuXHJcbiAgICAgICAgZnVuY3Rpb24gaW5pdENhcmYoKXtcclxuICAgICAgICAgICAgdm0uaWRQcm9ibGVtID0gJHdpbmRvdy5sb2NhbFN0b3JhZ2UuZ2V0SXRlbSgncHJvYmxlbWlkJyk7XHJcbiAgICAgICAgICAgIHByb2JsZW1TZXJ2aWNlLmdldGNhcmYodm0uaWRQcm9ibGVtKVxyXG4gICAgICAgICAgICAgICAgLnN1Y2Nlc3MoZnVuY3Rpb24oZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKGRhdGEuc3VjY2Vzcykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2bS5sb2NhbFN0YWtlaG9sZGVycyA9IGRhdGEuc3Rha2Vob2xkZXJzO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2bS5zdGFrZWhvbGRlckxpc3QgPSB2bS5sb2NhbFN0YWtlaG9sZGVycztcclxuICAgICAgICAgICAgICAgICAgICAgICAgdm0uY2FyZkxpc3QgPSBkYXRhLmNhcmY7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZtLmNhcmZQcmlvcml0eUxpc3QgPSB2bS5sb2NhbFByaW9yaXR5TGlzdDtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICB2bS5pblByb2Nlc3NpbmcgPSBmYWxzZTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBmdW5jdGlvbiByZXNldENhcmYoKXtcclxuICAgICAgICAgICAgdm0uY2FyZiA9IHtcclxuICAgICAgICAgICAgICAgIF9pZDogXCJcIixcclxuICAgICAgICAgICAgICAgIHBtczogXCJcIixcclxuICAgICAgICAgICAgICAgIHZhbHVlczogW10sXHJcbiAgICAgICAgICAgICAgICBwcmlvcml0eTogXCJcIixcclxuICAgICAgICAgICAgICAgIHJlcXVpcmVtZW50OiBcIlwiLFxyXG4gICAgICAgICAgICAgICAgc3Rha2Vob2xkZXJzOiBbXVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB2bS52YWx1ZUxpc3QgPSBbXTtcclxuXHJcbiAgICAgICAgfVxyXG4gICAgICAgIFNvY2tldC5vbignb25Ccm9hZGNhc3RDQVJGYWRkJywgZnVuY3Rpb24gKGNhcmYpIHtcclxuICAgICAgICAgICAgdm0uY2FyZkxpc3QucHVzaChjYXJmKTtcclxuICAgICAgICAgICAgcmVzZXRDYXJmKCk7XHJcbiAgICAgICAgICAgIHZtLnN0YWtlaG9sZGVyTGlzdCA9IHZtLmxvY2FsU3Rha2Vob2xkZXJzO1xyXG4gICAgICAgICAgICB2bS5jYXJmUHJpb3JpdHlMaXN0ID0gdm0ubG9jYWxQcmlvcml0eUxpc3Q7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHZtLmFkZHBtc3ZhbHVlID0gZnVuY3Rpb24oY2FyZil7XHJcblxyXG4gICAgICAgICAgICBpZihjYXJmLnBtcyA9PSBcIlwiKXtcclxuICAgICAgICAgICAgICAgIHRvYXN0QXBwLmVycm9yTWVzc2FnZShcIlNlbGVjdCBQTVNcIik7XHJcbiAgICAgICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICAgICAgaWYoY2FyZi52YWx1ZXMubGVuZ3RoIDwgMSApe1xyXG4gICAgICAgICAgICAgICAgICAgIHRvYXN0QXBwLmVycm9yTWVzc2FnZShcIlNlbGVjdCBvbmUgb3IgbW9yZSBWYWx1ZVwiKTtcclxuICAgICAgICAgICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKGNhcmYuc3Rha2Vob2xkZXJzLmxlbmd0aCA8IDEpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0b2FzdEFwcC5lcnJvck1lc3NhZ2UoXCJTZWxlY3Qgb25lIG9yIG1vcmUgU3Rha2Vob2xkZXIocylcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKGNhcmYucHJpb3JpdHkgPT0gXCJcIil7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b2FzdEFwcC5lcnJvck1lc3NhZ2UoXCJTZWxlY3QgcHJpb3JpdHkgW0xvdywgTWVkaXVtIG9yIEhpZ2hdXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFNvY2tldC5lbWl0KCdicm9hZGNhc3RDQVJGYWRkJywgY2FyZik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2bS5zdGFrZWhvbGRlckxpc3QgPSBbXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZtLmNhcmZQcmlvcml0eUxpc3QgPSBbXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBTb2NrZXQub24oJ29uQnJvYWRjYXN0Q0FSRnJlbW92ZScsIGZ1bmN0aW9uIChpZCkge1xyXG4gICAgICAgICAgICB2bS5jYXJmTGlzdC5zcGxpY2UoaWQsMSk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHZtLnJlbW92ZUNBUkYgPSBmdW5jdGlvbihpbmRleCxjYXJmKXtcclxuICAgICAgICAgICAgdmFyIG9iaiA9IHtcclxuICAgICAgICAgICAgICAgIGluZGV4OiBpbmRleCxcclxuICAgICAgICAgICAgICAgIGNhcmY6IGNhcmZcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBTb2NrZXQuZW1pdCgnYnJvYWRjYXN0Q0FSRnJlbW92ZScsIG9iaik7XHJcbiAgICAgICAgfVxyXG5cclxuXHJcbiAgICAgICAgdm0uc2VsZWN0UE1TVmFsdWUgPSBmdW5jdGlvbihwbXMpe1xyXG4gICAgICAgICAgICBpZihwbXMgIT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICBhbmd1bGFyLmZvckVhY2godm0uY2FyZlBNU1ZhbHVlLCBmdW5jdGlvbiAocG1zX3ZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHBtc192YWx1ZS5wbXMgPT0gcG1zKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZtLmNhcmYudmFsdWVzID0gW107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZtLnZhbHVlTGlzdCA9IHBtc192YWx1ZS52YWx1ZXM7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdm0uc2V0UHJpb3RpdHkgPSBmdW5jdGlvbihwcmlvcml0eSl7XHJcbiAgICAgICAgICAgIHZtLmNhcmYucHJpb3JpdHkgPSBwcmlvcml0eTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHZtLmFkZExpc3RWYWx1ZSA9IGZ1bmN0aW9uKG5ld3ZhbHVlKXtcclxuICAgICAgICAgICBpZih2bS5jYXJmLnZhbHVlcy5sZW5ndGggPT0gMCl7XHJcbiAgICAgICAgICAgICAgICB2bS5jYXJmLnZhbHVlcy5wdXNoKG5ld3ZhbHVlKTtcclxuICAgICAgICAgICAgfWVsc2Uge1xyXG4gICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHZtLmNhcmYudmFsdWVzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICBpZiAobmV3dmFsdWUgPT0gdm0uY2FyZi52YWx1ZXNbaV0pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICB2bS5jYXJmLnZhbHVlcy5zcGxpY2UoaSwgMSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgIHZtLmNhcmYudmFsdWVzLnB1c2gobmV3dmFsdWUpO1xyXG4gICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICB2bS5hZGRTdGFrZWhvbGRlciA9IGZ1bmN0aW9uKG5ld1N0YWtlaG9sZGVyKXtcclxuICAgICAgICAgICAgaWYodm0uY2FyZi5zdGFrZWhvbGRlcnMubGVuZ3RoID09IDApe1xyXG4gICAgICAgICAgICAgICAgdm0uY2FyZi5zdGFrZWhvbGRlcnMucHVzaChuZXdTdGFrZWhvbGRlcik7XHJcbiAgICAgICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICAgICAgZm9yKHZhciBpPTA7IGkgPCB2bS5jYXJmLnN0YWtlaG9sZGVycy5sZW5ndGg7IGkrKyl7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYobmV3U3Rha2Vob2xkZXIgPT0gdm0uY2FyZi5zdGFrZWhvbGRlcnNbaV0pe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2bS5jYXJmLnN0YWtlaG9sZGVycy5zcGxpY2UoaSwxKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHZtLmNhcmYuc3Rha2Vob2xkZXJzLnB1c2gobmV3U3Rha2Vob2xkZXIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgdm0ubG9jYWxQcmlvcml0eUxpc3QgPSBbJ0xvdycsICdNZWRpdW0nLCdIaWdoJ107XHJcblxyXG4gICAgICAgIHZtLmNhcmZQTVNWYWx1ZSA9IFtcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBcInBtc1wiOiBcIkludGVyYWN0aW9uXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgXCJ2YWx1ZXNcIjogW1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBcIklkZW50aXR5XCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiTm9ybXNcIlxyXG4gICAgICAgICAgICAgICAgICAgIF1cclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgXCJwbXNcIjogXCJBc3NvY2lhdGlvblwiLFxyXG4gICAgICAgICAgICAgICAgICAgIFwidmFsdWVzXCI6IFtcclxuICAgICAgICAgICAgICAgICAgICAgICAgXCJDb252ZXJzYXRpb25cIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgXCJHcm91cHNcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgXCJSZWxhdGlvbnNoaXBcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgXCJUcnVzdFwiXHJcbiAgICAgICAgICAgICAgICAgICAgXVxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBcInBtc1wiOiBcIkxlYXJuaW5nXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgXCJ2YWx1ZXNcIjogW1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBcIk1ldGEtY29tbXVuaWNhdGlvblwiXHJcbiAgICAgICAgICAgICAgICAgICAgXVxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBcInBtc1wiOiBcIlBsYXlcIixcclxuICAgICAgICAgICAgICAgICAgICBcInZhbHVlc1wiOiBbXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiQWVzdGhldGljc1wiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBcIkVtb3Rpb24gYW5kIEFmZmVjdGlvblwiXHJcbiAgICAgICAgICAgICAgICAgICAgXVxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBcInBtc1wiOiBcIlByb3RlY3Rpb25cIixcclxuICAgICAgICAgICAgICAgICAgICBcInZhbHVlc1wiOiBbXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiSW5mb3JtZWQgY29uc2VydFwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBcIlJlcHV0YXRpb25cIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgXCJTZWN1cml0eVwiXHJcbiAgICAgICAgICAgICAgICAgICAgXVxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBcInBtc1wiOiBcIkV4cGxvaXRhdGlvblwiLFxyXG4gICAgICAgICAgICAgICAgICAgIFwidmFsdWVzXCI6IFtcclxuICAgICAgICAgICAgICAgICAgICAgICAgXCJBY2Nlc3NpYmlsaXR5XCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiT2JqZWN0XCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiUHJvcGVydHkgKG93bmVyc2hpcClcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgXCJVc2FiaWxpdHlcIlxyXG4gICAgICAgICAgICAgICAgICAgIF1cclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgXCJwbXNcIjogXCJUZXBvcmFsaXR5XCIsXHJcbiAgICAgICAgICAgICAgICAgICAgXCJ2YWx1ZXNcIjogW1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBcIkF2YWlsYWJpbGl0eVwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBcIkF3YXJlbmVzc1wiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBcIlByZXNlbmNlXCJcclxuICAgICAgICAgICAgICAgICAgICBdXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIFwicG1zXCI6IFwiVGVycml0b3JpYWxpdHlcIixcclxuICAgICAgICAgICAgICAgICAgICBcInZhbHVlc1wiOiBbXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiUG9ydGFiaWxpdHlcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgXCJQcml2YWN5XCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiU2NhbGFiaWxpdHlcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgXCJWaXNpYmlsaXR5XCJcclxuICAgICAgICAgICAgICAgICAgICBdXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIFwicG1zXCI6IFwiQ2xhc3NpZmljYXRpb25cIixcclxuICAgICAgICAgICAgICAgICAgICBcInZhbHVlc1wiOiBbXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiQXV0b25vbXlcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgXCJDb2xsYWJvcmF0aW9uXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiU2hhcmluZ1wiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBcIkFkYXB0YWJpbGl0eVwiXHJcbiAgICAgICAgICAgICAgICAgICAgXVxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBcInBtc1wiOiBcIlN1YnNpc3RlbmNlXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgXCJ2YWx1ZXNcIjogW1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBcIlJlY2lwcm9jaXR5XCJcclxuICAgICAgICAgICAgICAgICAgICBdXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIF1cclxuICAgIH1cclxuXHJcbn0pKCk7IiwiLyoqXHJcbiAqIENyZWF0ZWQgYnkgSk9TRVZBTERFUkxFSSBvbiAxMC8wNy8yMDE1LlxyXG4gKi9cclxuXHJcblxyXG4oZnVuY3Rpb24oKXtcclxuICAgIFwidXNlIHN0cmljdFwiO1xyXG4gICAgYW5ndWxhci5tb2R1bGUoJ2FwcCcpXHJcbiAgICAgICAgLmNvbnRyb2xsZXIoJ2NvbnRyb2xsZXJDb2xsYWJvcmF0b3JzJywgY29udHJvbGxlckNvbGxhYm9yYXRvcnMpO1xyXG5cclxuICAgIGZ1bmN0aW9uIGNvbnRyb2xsZXJDb2xsYWJvcmF0b3JzKCR3aW5kb3cscHJvYmxlbVNlcnZpY2UsdG9hc3RBcHApe1xyXG5cclxuICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICAgICAgc2VsZi5pZFByb2JsZW0gPSBcIlwiO1xyXG4gICAgICAgIHNlbGYuY29sbGFib3JhdG9ycyA9IFtdO1xyXG4gICAgICAgIHNlbGYudXNlcmVtYWlsID0gXCJcIjtcclxuXHJcblxyXG4gICAgICAgIHNlbGYuaW5pdENvbGxhYm9yYXRvcnMgPSBmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICBzZWxmLmlkUHJvYmxlbSA9ICR3aW5kb3cubG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3Byb2JsZW1pZCcpO1xyXG4gICAgICAgICAgICBzZWxmLnVzZXJlbWFpbCA9ICR3aW5kb3cubG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3VzZXJlbWFpbCcpO1xyXG4gICAgICAgICAgICBwcm9ibGVtU2VydmljZS5nZXRjb2xsYWJvcmF0b3JzKHNlbGYuaWRQcm9ibGVtKVxyXG4gICAgICAgICAgICAgICAgLnN1Y2Nlc3MoZnVuY3Rpb24oZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKGRhdGEuc3VjY2Vzcykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmNvbGxhYm9yYXRvcnMgPSBkYXRhLmNvbGxhYm9yYXRvcnM7XHJcbiAgICAgICAgICAgICAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRvYXN0QXBwLmVycm9yTWVzc2FnZShkYXRhLm1lc3NhZ2UpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgZnVuY3Rpb24gc2VhcmNoQ2FsbGFib3JhdGlvbihlbWFpbCl7XHJcbiAgICAgICAgICAgIGZvcih2YXIgaSA9IDA7IGkgPCBzZWxmLmNvbGxhYm9yYXRvcnMubGVuZ3RoOyBpKyspe1xyXG4gICAgICAgICAgICAgICAgaWYoZW1haWwgPT0gc2VsZi5jb2xsYWJvcmF0b3JzW2ldLmVtYWlsKXtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgc2VsZi5hZGRDb2xsYWJvcmF0b3IgPSBmdW5jdGlvbihlbWFpbCl7XHJcbiAgICAgICAgICAgIGlmKHNlbGYudXNlcmVtYWlsID09IGVtYWlsKXtcclxuICAgICAgICAgICAgICAgIHRvYXN0QXBwLmVycm9yTWVzc2FnZShzZWxmLnVzZXJlbWFpbCArIFwiIGlzIGVtYWlsIG9mIG93bmVyLlwiKTtcclxuICAgICAgICAgICAgfWVsc2Uge1xyXG4gICAgICAgICAgICAgICAgaWYgKHNlYXJjaENhbGxhYm9yYXRpb24oZW1haWwpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdG9hc3RBcHAuZXJyb3JNZXNzYWdlKFwiVXN1YXJpbyBDYWRhc3RyYWRvLlwiKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGludml0ZSA9IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWRwcm9ibGVtOiBzZWxmLmlkUHJvYmxlbSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZW1haWw6IGVtYWlsXHJcbiAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgICAgICBwcm9ibGVtU2VydmljZS5pbnZpdGUoaW52aXRlKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAuc3VjY2VzcyhmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGRhdGEuc3VjY2Vzcykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuY29sbGFib3JhdG9ycyA9IGRhdGEuY29sbGFib3JhdG9ycztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9hc3RBcHAuZXJyb3JNZXNzYWdlKGRhdGEubWVzc2FnZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHNlbGYucmVtb3ZlQ29sbGFib3JhdG9yID0gZnVuY3Rpb24ocGVvcGxlKXtcclxuICAgICAgICAgICAgdmFyIG9iaiA9IHtcclxuICAgICAgICAgICAgICAgIGlkcHJvYmxlbTogc2VsZi5pZFByb2JsZW0sXHJcbiAgICAgICAgICAgICAgICBlbWFpbDogcGVvcGxlLmVtYWlsXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgcHJvYmxlbVNlcnZpY2UucmVtb3ZlY29sbGFib3JhdG9ycyhvYmopXHJcbiAgICAgICAgICAgICAgICAuc3VjY2VzcyhmdW5jdGlvbihkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYoZGF0YS5zdWNjZXNzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRvYXN0QXBwLmVycm9yTWVzc2FnZShcIkNvbGFib3JhZG9yIGZvaSByZW1vdmlkbyBkbyBwcm9qZXRvLlwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5jb2xsYWJvcmF0b3JzID0gZGF0YS5jb2xsYWJvcmF0b3JzO1xyXG4gICAgICAgICAgICAgICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0b2FzdEFwcC5lcnJvck1lc3NhZ2UoZGF0YS5tZXNzYWdlKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbn0pKCk7IiwiLyoqXHJcbiAqIENyZWF0ZWQgYnkgSk9TRVZBTERFUkxFSSBvbiAyOC8wNi8yMDE1LlxyXG4gKi9cclxuXHJcblxyXG5cclxuXHJcbihmdW5jdGlvbigpIHtcclxuXHJcblxyXG4gICAgXCJ1c2Ugc3RyaWN0XCI7XHJcblxyXG4gICAgYW5ndWxhci5tb2R1bGUoJ2FwcCcpXHJcbiAgICAgICAgLmNvbnRyb2xsZXIoJ21lbnVQcm9ibGVtQ29udHJvbGxlcicsIG1lbnVQcm9ibGVtYUNvbnRyb2xsZXIpO1xyXG5cclxuICAgIGZ1bmN0aW9uIG1lbnVQcm9ibGVtYUNvbnRyb2xsZXIoQXV0aCwgJHRpbWVvdXQsICRzdGF0ZSwgJG1kU2lkZW5hdiAsJG1kVXRpbCwkbG9nKXtcclxuICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XHJcblxyXG4gICAgICAgIHNlbGYub3BlbkNoYXQgPSBidWlsZFRvZ2dsZXIoJ2NoYXQnKTtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBCdWlsZCBoYW5kbGVyIHRvIG9wZW4vY2xvc2UgYSBTaWRlTmF2OyB3aGVuIGFuaW1hdGlvbiBmaW5pc2hlc1xyXG4gICAgICAgICAqIHJlcG9ydCBjb21wbGV0aW9uIGluIGNvbnNvbGVcclxuICAgICAgICAgKi9cclxuICAgICAgICBmdW5jdGlvbiBidWlsZFRvZ2dsZXIobmF2SUQpIHtcclxuICAgICAgICAgICAgdmFyIGRlYm91bmNlRm4gPSAgJG1kVXRpbC5kZWJvdW5jZShmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICAgICAgJG1kU2lkZW5hdihuYXZJRClcclxuICAgICAgICAgICAgICAgICAgICAudG9nZ2xlKClcclxuICAgICAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICRsb2cuZGVidWcoXCJ0b2dnbGUgXCIgKyBuYXZJRCArIFwiIGlzIGRvbmVcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0sMzAwKTtcclxuICAgICAgICAgICAgcmV0dXJuIGRlYm91bmNlRm47XHJcbiAgICAgICAgfTtcclxuXHJcblxyXG4gICAgIHNlbGYuZm9ybUFkZENvbGxhYm9yYXRvcnMgPSBmdW5jdGlvbigpe1xyXG4gICAgICAgICRzdGF0ZS5nbygncHJvYmxlbS5jb2xsYWJvcmF0b3JzJyk7XHJcbiAgICAgIH1cclxuICAgICAgICBzZWxmLm9wZW5SZXBvcnQgPSBmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICAkc3RhdGUuZ28oJ3Byb2JsZW0uZHNjcmVwb3J0Jyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBzZWxmLmVkaXREZXNjcmlwdGlvblByb2JsZW0gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgJHN0YXRlLmdvKCdwcm9ibGVtLmRlc2NyaXB0aW9uJyk7XHJcbiAgICB9O1xyXG5cclxuICAgICAgICBzZWxmLmRvTG9nb3V0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIEF1dGgubG9nb3V0KCk7XHJcbiAgICAgICAgJHN0YXRlLmdvKCdpbml0LmxvZ2luJyk7XHJcbiAgICB9O1xyXG4gICAgfVxyXG5cclxufSkoKTsiLCIoZnVuY3Rpb24oKXtcclxuXHJcblwidXNlIHN0cmljdFwiO1xyXG5cclxuICAgIGFuZ3VsYXIubW9kdWxlKCdhcHAnKVxyXG4gICAgLmNvbnRyb2xsZXIoJ2VkaXRQcm9ibGVtQ29udHJvbGxlcicsZWRpdFByb2JsZW1hQ29udHJvbGxlcik7XHJcbmVkaXRQcm9ibGVtYUNvbnRyb2xsZXIuJGluamVjdHJlID0gWyckc2NvcGUnLCdTb2NrZXQnXTtcclxuXHJcbmZ1bmN0aW9uIGVkaXRQcm9ibGVtYUNvbnRyb2xsZXIoJHNjb3BlLCBTb2NrZXQsICR0aW1lb3V0LHRvYXN0QXBwLCR3aW5kb3cscHJvYmxlbVNlcnZpY2UpIHtcclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgIHZhciB1cGRhdGVUcnVlID0gdHJ1ZTtcclxuICAgIHNlbGYucHJvYmxlbSA9IFwiXCI7XHJcblxyXG4gICAgc2VsZi50YWJzZHNjID0gW1xyXG4gICAgICAgICc8bWQtdGFiIGRhdGEtdWktc3JlZj1cInByb2JsZW0uc3Rha2Vob2xkZXJzXCIgbWQtYWN0aXZlPVwiJHN0YXRlLmlzKFxcJ3Byb2JsZW0uc3Rha2Vob2xkZXJzXFwnKVwiIGxhYmVsPVwie3tcXCdMQUJFTF9BUlRJRkFDVF9TVEFLRUhPTERFUlxcJyB8IHRyYW5zbGF0ZSB9fVwiPjwvbWQtdGFiPicsXHJcbiAgICAgICAgJzxtZC10YWIgZGF0YS11aS1zcmVmPVwicHJvYmxlbS5ldmFsdWF0aW9uZnJhbWV3b3JrXCIgbWQtYWN0aXZlPVwiJHN0YXRlLmlzKFxcJ3Byb2JsZW0uZXZhbHVhdGlvbmZyYW1ld29ya1xcJylcIiBsYWJlbD1cInt7XFwnTEFCRUxfQVJUSUZBQ1RfRVZBTFVBVElPTl9GUkFNRVdPUktcXCcgfCB0cmFuc2xhdGUgfX1cIj48L21kLXRhYj4nLFxyXG4gICAgICAgICc8bWQtdGFiIGRhdGEtdWktc3JlZj1cInByb2JsZW0uc2VtaW90aWNmcmFtZXdvcmtcIiBtZC1hY3RpdmU9XCIkc3RhdGUuaXMoXFwncHJvYmxlbS5zZW1pb3RpY2ZyYW1ld29ya1xcJylcIiBsYWJlbD1cInt7XFwnTEFCRUxfQVJUSUZBQ1RfU0VNSU9USUNfRlJBTUVXT1JLXFwnIHwgdHJhbnNsYXRlIH19XCI+PC9tZC10YWI+JyxcclxuICAgICAgICAnPG1kLXRhYiBkYXRhLXVpLXNyZWY9XCJwcm9ibGVtLmNhcmZcIiBtZC1hY3RpdmU9XCIkc3RhdGUuaXMoXFwncHJvYmxlbS5jYXJmXFwnKVwiIGxhYmVsPVwiQ0FSRlwiPjwvbWQtdGFiPjwvbWQtdGFicz4nXHJcbiAgICBdO1xyXG5cclxuICAgIHNlbGYuZ2V0Q3VycmVudFByb2JsZW0gPSBmdW5jdGlvbigpe1xyXG4gICAgICAgIHNlbGYuaWRQcm9ibGVtID0gJHdpbmRvdy5sb2NhbFN0b3JhZ2UuZ2V0SXRlbSgncHJvYmxlbWlkJyk7XHJcbiAgICAgICAgcHJvYmxlbVNlcnZpY2UuZ2V0cHJvYmxlbShzZWxmLmlkUHJvYmxlbSlcclxuICAgICAgICAgICAgLnN1Y2Nlc3MoZnVuY3Rpb24oZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgaWYoZGF0YS5zdWNjZXNzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5wcm9ibGVtID0gZGF0YS5wcm9ibGVtO1xyXG4gICAgICAgICAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgICAgICAgICAgdG9hc3RBcHAuZXJyb3JNZXNzYWdlKGRhdGEubWVzc2FnZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICB9O1xyXG5cclxuICAgIHZhciBzZXRVcGRhdGUgPSBmdW5jdGlvbigpe1xyXG4gICAgICAgIHVwZGF0ZVRydWUgPSB0cnVlO1xyXG4gICAgfTtcclxuXHJcbiAgICBTb2NrZXQub24oJ29uQXR1YWxpemFyUHJvYmxlbWEnLCBmdW5jdGlvbiAocmV0b3Jubykge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKFwiPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PXJldG9ybm8uLi4uXCIgKyByZXRvcm5vKTtcclxuICAgICAgICBzZWxmLnByb2JsZW0uZGVzY3JpcHRpb24gPSByZXRvcm5vLmRlc2NyaXB0aW9uO1xyXG4gICAgICAgIHNlbGYucHJvYmxlbS51cGRhdGUgPSB1cGRhdGVUcnVlO1xyXG4gICAgfSk7XHJcblxyXG4gICAgJHNjb3BlLnByb2JsZW1VcGRhdGUgPSBmdW5jdGlvbiAocHJvYmxlbSkge1xyXG4gICAgICAgIHByb2JsZW0udXBkYXRlID0gdXBkYXRlVHJ1ZTtcclxuXHJcbiAgICAgICAgU29ja2V0LmVtaXQoJ2F0dWFsaXphclByb2JsZW1hJywgcHJvYmxlbSk7XHJcbiAgICAgICAgaWYgKHVwZGF0ZVRydWUpIHtcclxuICAgICAgICAgICAgdXBkYXRlVHJ1ZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICAkdGltZW91dChzZXRVcGRhdGUsIDIwMDApO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgJHNjb3BlLnNhdmVEZXNjcmlwdGlvbiA9IGZ1bmN0aW9uIChwcm9ibGVtKSB7XHJcbiAgICAgICAgY29uc29sZS5sb2coXCI9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVwiKTtcclxuICAgICAgICBwcm9ibGVtLnVwZGF0ZSA9IHVwZGF0ZVRydWU7XHJcbiAgICAgICAgU29ja2V0LmVtaXQoJ2F0dWFsaXphclByb2JsZW1hJywgcHJvYmxlbSk7XHJcbiAgICB9O1xyXG5cclxufVxyXG59KSgpOyIsIihmdW5jdGlvbigpIHtcclxuICAndXNlIHN0cmljdCc7XHJcblxyXG4gIGFuZ3VsYXJcclxuICAgIC5tb2R1bGUoJ2FwcCcpXHJcbiAgICAuZmFjdG9yeSgncHJvYmxlbVNlcnZpY2UnLCBwcm9ibGVtU2VydmljZSk7XHJcblxyXG4gIHByb2JsZW1TZXJ2aWNlLiRpbmplY3QgPSBbJyRodHRwJywnJGxvY2F0aW9uJ107XHJcblxyXG4gIGZ1bmN0aW9uIHByb2JsZW1TZXJ2aWNlKCRodHRwLCRsb2NhdGlvbikge1xyXG5cclxuICAgIHZhciBBUElfUk9VVEVfR0VUVVNFUlBST0JMRU1TID0gJy9hcGkvcHJvYmxlbS9nZXRwcm9ibGVtcyc7XHJcbiAgICB2YXIgQVBJX1JPVVRFX0dFVFVTRVJQUk9CTEVNU0NPTExBQk9SQVRPUiA9ICcvYXBpL3Byb2JsZW0vZ2V0cHJvYmxlbXNjb2xsYWJvcmF0b3InO1xyXG4gICAgdmFyIEFQSV9ST1VURV9ORVdQUk9CTEVNID0gJy9hcGkvcHJvYmxlbS9uZXdwcm9ibGVtJztcclxuICAgIHZhciBBUElfUk9VVEVfR0VUUFJPQkxFTSA9ICcvYXBpL3Byb2JsZW0vZ2V0cHJvYmxlbSc7XHJcbiAgICB2YXIgQVBJX1JPVVRFX0dFVENPTExBQk9SQVRPUlMgPSAnL2FwaS9wcm9ibGVtL2dldGNvbGxhYm9yYXRvcnMnO1xyXG4gICAgdmFyIEFQSV9ST1VURV9JTlZJVEUgPSAnL2FwaS9wcm9ibGVtL2ludml0ZSc7XHJcbiAgICB2YXIgQVBJX1JPVVRFX0dFVE9OSU9OID0gJy9hcGkvcHJvYmxlbS9nZXRvbmlvbic7XHJcbiAgICB2YXIgQVBJX1JPVVRFX0dFVEVWQUxVQVRJT04gPSAnL2FwaS9wcm9ibGVtL2dldGV2YWx1YXRpb24nO1xyXG4gICAgdmFyIEFQSV9ST1VURV9HRVRTRU1JT1RJQ0ZSQU1FV09SSyA9ICcvYXBpL3Byb2JsZW0vZ2V0c2VtaW90aWMnO1xyXG4gICAgdmFyIEFQSV9ST1VURV9HRVRDQVJGID0gJy9hcGkvcHJvYmxlbS9nZXRjYXJmJztcclxuICAgIHZhciBBUElfUk9VVEVfUkVNT1ZFUFJPQkxFTSA9ICcvYXBpL3Byb2JsZW0vcmVtb3ZlcHJvYmxlbSc7XHJcbiAgICB2YXIgQVBJX1JPVVRFX1JFTU9WRUNPTExBQk9SQVRPUiA9ICcvYXBpL3Byb2JsZW0vcmVtb3ZlY29sbGFib3JhdG9yJztcclxuICAgIHZhciBBUElfUk9VVEVfR0VUSElTVE9SWUNIQVQgPSAnL2FwaS9wcm9ibGVtL2hpc3RvcnljaGF0JztcclxuXHJcbiAgICB2YXIgc2VydmljZSA9IHtcclxuICAgICAgbmV3cHJvYmxlbSAgICAgICA6IG5ld3Byb2JsZW0sXHJcbiAgICAgIGdldHVzZXJwcm9ibGVtcyAgOiBnZXR1c2VycHJvYmxlbXMsXHJcbiAgICAgIGdldHByb2JsZW0gICAgICAgOiBnZXRwcm9ibGVtLFxyXG4gICAgICBnZXRjb2xsYWJvcmF0b3JzIDogZ2V0Y29sbGFib3JhdG9ycyxcclxuICAgICAgaW52aXRlICAgICAgICAgICA6IGludml0ZSxcclxuICAgICAgZ2V0b25pb24gICAgICAgICA6IGdldG9uaW9uLFxyXG4gICAgICBnZXRldmFsdWF0aW9uICAgIDogZ2V0ZXZhbHVhdGlvbixcclxuICAgICAgZ2V0c2VtaW90aWMgICAgICA6IGdldHNlbWlvdGljLFxyXG4gICAgICBnZXRjYXJmICAgICAgICAgIDogZ2V0Y2FyZixcclxuICAgICAgcmVtb3ZlcHJvYmxlbSAgICA6IHJlbW92ZXByb2JsZW0sXHJcbiAgICAgIGdldHByb2JsZW1zY29sbGFib3JhdG9yOiBnZXRwcm9ibGVtc2NvbGxhYm9yYXRvcixcclxuICAgICAgcmVtb3ZlY29sbGFib3JhdG9ycyA6IHJlbW92ZWNvbGxhYm9yYXRvcnMsXHJcbiAgICAgIGdldGhpc3RvcnljaGF0OiBnZXRoaXN0b3J5Y2hhdFxyXG4gICAgfTtcclxuXHJcbiAgICByZXR1cm4gc2VydmljZTtcclxuXHJcbiAgICBmdW5jdGlvbiBuZXdwcm9ibGVtKGRhdGEpIHtcclxuICAgICAgICByZXR1cm4gJGh0dHAucG9zdChBUElfUk9VVEVfTkVXUFJPQkxFTSwgZGF0YSk7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gZ2V0cHJvYmxlbShkYXRhKXtcclxuICAgICAgcmV0dXJuICRodHRwLmdldChBUElfUk9VVEVfR0VUUFJPQkxFTSArICc/aWRwcm9ibGVtPScgKyBkYXRhICk7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIGZ1bmN0aW9uIGdldHVzZXJwcm9ibGVtcyhkYXRhKXtcclxuICAgICAgcmV0dXJuICRodHRwLmdldChBUElfUk9VVEVfR0VUVVNFUlBST0JMRU1TICsgJz9lbWFpbD0nICsgZGF0YSApO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGdldGNvbGxhYm9yYXRvcnMoZGF0YSl7XHJcbiAgICAgIHJldHVybiAkaHR0cC5nZXQoQVBJX1JPVVRFX0dFVENPTExBQk9SQVRPUlMgKyAnP2lkcHJvYmxlbT0nICsgZGF0YSApO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGludml0ZShkYXRhKXtcclxuICAgICAgcmV0dXJuICRodHRwLnBvc3QoQVBJX1JPVVRFX0lOVklURSwgZGF0YSApO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGdldG9uaW9uKGRhdGEpe1xyXG4gICAgICByZXR1cm4gJGh0dHAuZ2V0KEFQSV9ST1VURV9HRVRPTklPTiArICc/aWRwcm9ibGVtPScgKyBkYXRhICk7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gZ2V0ZXZhbHVhdGlvbiAoZGF0YSl7XHJcbiAgICAgIHJldHVybiAkaHR0cC5nZXQoQVBJX1JPVVRFX0dFVEVWQUxVQVRJT04gKyAnP2lkcHJvYmxlbT0nICsgZGF0YSApO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGdldHNlbWlvdGljIChkYXRhKXtcclxuICAgICAgcmV0dXJuICRodHRwLmdldChBUElfUk9VVEVfR0VUU0VNSU9USUNGUkFNRVdPUksgKyAnP2lkcHJvYmxlbT0nICsgZGF0YSApXHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gZ2V0Y2FyZihkYXRhKXtcclxuICAgICAgcmV0dXJuICRodHRwLmdldChBUElfUk9VVEVfR0VUQ0FSRiArICc/aWRwcm9ibGVtPScgKyBkYXRhIClcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiByZW1vdmVwcm9ibGVtKGRhdGEpe1xyXG4gICAgICByZXR1cm4gJGh0dHAuZ2V0KEFQSV9ST1VURV9SRU1PVkVQUk9CTEVNICsgJz9pZHByb2JsZW09JyArIGRhdGEgKTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBnZXRwcm9ibGVtc2NvbGxhYm9yYXRvcihkYXRhKXtcclxuICAgICAgcmV0dXJuICRodHRwLmdldChBUElfUk9VVEVfR0VUVVNFUlBST0JMRU1TQ09MTEFCT1JBVE9SICsgJz9lbWFpbD0nICsgZGF0YSApO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIHJlbW92ZWNvbGxhYm9yYXRvcnMoZGF0YSl7XHJcbiAgICAgIHJldHVybiAkaHR0cC5nZXQoQVBJX1JPVVRFX1JFTU9WRUNPTExBQk9SQVRPUiArICc/aWRwcm9ibGVtPScgKyBkYXRhLmlkcHJvYmxlbSArICcmZW1haWw9JyArIGRhdGEuZW1haWwgKTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBnZXRoaXN0b3J5Y2hhdChkYXRhKXtcclxuICAgICAgcmV0dXJuICRodHRwLmdldChBUElfUk9VVEVfR0VUSElTVE9SWUNIQVQgKyAnP2lkcHJvYmxlbT0nICsgZGF0YSApO1xyXG4gICAgfVxyXG5cclxuICB9XHJcbn0pKCk7XHJcbiIsIlxyXG4oZnVuY3Rpb24oKXtcclxuXHJcbiAgICAndXNlIHN0cmljdCc7XHJcbiAgICBhbmd1bGFyLm1vZHVsZSgnYXBwJylcclxuICAgICAgICAuY29udHJvbGxlcignc3RhcnRQcm9ibGVtQ29udHJvbGxlcicsc3RhcnRQcm9ibGVtQ29udHJvbGxlcik7XHJcbiAgICAgICAgZnVuY3Rpb24gc3RhcnRQcm9ibGVtQ29udHJvbGxlcigkbWREaWFsb2csJHN0YXRlLEF1dGgsU29ja2V0LCAkd2luZG93LCBwcm9ibGVtU2VydmljZSx0b2FzdEFwcCApIHtcclxuICAgICAgICAgICAgdmFyIHZtID0gdGhpcztcclxuICAgICAgICAgICAgdm0ubmlja25hbWUgPSBcIlwiO1xyXG4gICAgICAgICAgICB2bS51c2VyaWQgPSBcIlwiO1xyXG4gICAgICAgICAgICB2bS51c2VyZW1haWwgPSBcIlwiO1xyXG4gICAgICAgICAgICB2bS5wcm9ibGVtTGlzdCA9IFtdO1xyXG4gICAgICAgICAgICB2bS5wcm9ibGVtQ29sbGFib3JhdG9yTGlzdCA9IFtdO1xyXG4gICAgICAgICAgICB2bS5sb2dpbkluUHJvZ3Jlc3MgPSB0cnVlO1xyXG5cclxuICAgICAgICAgICAgdm0uZ2V0UHJvYmxlbXMgPSBmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICAgICAgdm0udXNlcmlkID0gJHdpbmRvdy5sb2NhbFN0b3JhZ2UuZ2V0SXRlbSgndXNlcmlkJyk7XHJcbiAgICAgICAgICAgICAgICB2bS5uaWNrbmFtZSA9ICR3aW5kb3cubG9jYWxTdG9yYWdlLmdldEl0ZW0oJ25pY2tuYW1lJyk7XHJcbiAgICAgICAgICAgICAgICB2bS51c2VyZW1haWwgPSAkd2luZG93LmxvY2FsU3RvcmFnZS5nZXRJdGVtKCd1c2VyZW1haWwnKTtcclxuICAgICAgICAgICAgICAgIHByb2JsZW1TZXJ2aWNlLmdldHVzZXJwcm9ibGVtcyh2bS51c2VyZW1haWwpXHJcbiAgICAgICAgICAgICAgICAgICAgLnN1Y2Nlc3MoZnVuY3Rpb24oZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKGRhdGEuc3VjY2Vzcykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IodmFyIGk9MDsgaSA8IGRhdGEucHJvYmxlbXMubGVuZ3RoOyBpKysgKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEucHJvYmxlbXNbaV0uZGVzY3JpcHRpb24gPSBkYXRhLnByb2JsZW1zW2ldLmRlc2NyaXB0aW9uLnJlcGxhY2UoLyg8KFtePl0rKT4pL2lnLFwiXCIpLnN1YnN0cmluZygwLDQ2MCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZtLnByb2JsZW1MaXN0ID0gZGF0YS5wcm9ibGVtcztcclxuICAgICAgICAgICAgICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdG9hc3RBcHAuZXJyb3JNZXNzYWdlKGRhdGEubWVzc2FnZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIHByb2JsZW1TZXJ2aWNlLmdldHByb2JsZW1zY29sbGFib3JhdG9yKHZtLnVzZXJlbWFpbClcclxuICAgICAgICAgICAgICAgICAgICAuc3VjY2VzcyhmdW5jdGlvbihkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKGRhdGEuc3VjY2Vzcykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yKHZhciBpPTA7IGkgPCBkYXRhLnByb2JsZW1zLmxlbmd0aDsgaSsrICl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YS5wcm9ibGVtc1tpXS5kZXNjcmlwdGlvbiA9IGRhdGEucHJvYmxlbXNbaV0uZGVzY3JpcHRpb24ucmVwbGFjZSgvKDwoW14+XSspPikvaWcsXCJcIikuc3Vic3RyaW5nKDAsNDYwKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2bS5wcm9ibGVtQ29sbGFib3JhdG9yTGlzdCA9IGRhdGEucHJvYmxlbXM7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9hc3RBcHAuZXJyb3JNZXNzYWdlKGRhdGEubWVzc2FnZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgdm0ubG9naW5JblByb2dyZXNzID0gZmFsc2U7XHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICBmdW5jdGlvbiByZW1vdmVQcm9ibGVtKHByb2JsZW1pZCl7XHJcbiAgICAgICAgICAgICAgICAgICAgcHJvYmxlbVNlcnZpY2UucmVtb3ZlcHJvYmxlbShwcm9ibGVtaWQpXHJcbiAgICAgICAgICAgICAgICAgICAgLnN1Y2Nlc3MoZnVuY3Rpb24oZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZihkYXRhLnN1Y2Nlc3MpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvcih2YXIgaT0wOyBpIDwgdm0ucHJvYmxlbUxpc3QubGVuZ3RoOyBpKyspe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKHZtLnByb2JsZW1MaXN0W2ldLl9pZCA9PSBwcm9ibGVtaWQpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2bS5wcm9ibGVtTGlzdC5zcGxpY2UoaSwxKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvYXN0QXBwLmVycm9yTWVzc2FnZShkYXRhLm1lc3NhZ2UpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgfVxyXG5cclxuXHJcbiAgICAgICAgICAgIHZtLnJldm9tdmVQcm9ibGVtID0gZnVuY3Rpb24oZXYscHJvYmxlbSkge1xyXG4gICAgICAgICAgICAgICAgLy8gQXBwZW5kaW5nIGRpYWxvZyB0byBkb2N1bWVudC5ib2R5IHRvIGNvdmVyIHNpZGVuYXYgaW4gZG9jcyBhcHBcclxuICAgICAgICAgICAgICAgIHZhciBjb25maXJtID0gJG1kRGlhbG9nLmNvbmZpcm0oKVxyXG4gICAgICAgICAgICAgICAgICAgIC5wYXJlbnQoYW5ndWxhci5lbGVtZW50KGRvY3VtZW50LmJvZHkpKVxyXG4gICAgICAgICAgICAgICAgICAgIC50aXRsZSgnRGV0ZXRlIFByb2JsZW0/JylcclxuICAgICAgICAgICAgICAgICAgICAuY29udGVudCgnVGl0bGU6ICcgKyBwcm9ibGVtLnRpdGxlKVxyXG4gICAgICAgICAgICAgICAgICAgIC5hcmlhTGFiZWwoJ1JlbW92ZSBQcm9ibGVtJylcclxuICAgICAgICAgICAgICAgICAgICAub2soJ0Rlc2VqbyByZW1vdmVyIScpXHJcbiAgICAgICAgICAgICAgICAgICAgLmNhbmNlbCgnQ2FuY2VsJylcclxuICAgICAgICAgICAgICAgICAgICAudGFyZ2V0RXZlbnQoZXYpO1xyXG4gICAgICAgICAgICAgICAgJG1kRGlhbG9nLnNob3coY29uZmlybSkudGhlbihmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICAgICByZW1vdmVQcm9ibGVtKHByb2JsZW0uX2lkKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgdm0uc3RhcnROZXdQcm9ibGVtID0gZnVuY3Rpb24obmV3cHJvYmxlbSl7XHJcbiAgICAgICAgICAgICAgICBuZXdwcm9ibGVtLnVzZXJpZCA9IHZtLnVzZXJpZDtcclxuICAgICAgICAgICAgICAgIHByb2JsZW1TZXJ2aWNlLm5ld3Byb2JsZW0obmV3cHJvYmxlbSlcclxuICAgICAgICAgICAgICAgICAgICAuc3VjY2VzcyhmdW5jdGlvbihkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKGRhdGEuc3VjY2Vzcykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdm0uZWRpdFByb2JsZW0oZGF0YS5wcm9ibGVtKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvYXN0QXBwLmVycm9yTWVzc2FnZShkYXRhLm1lc3NhZ2UpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHZtLmVkaXRQcm9ibGVtID0gZnVuY3Rpb24gKHByb2JsZW0pIHtcclxuXHJcbiAgICAgICAgICAgICAgICAkd2luZG93LmxvY2FsU3RvcmFnZS5zZXRJdGVtKFwicHJvYmxlbWlkXCIscHJvYmxlbS5faWQpO1xyXG4gICAgICAgICAgICAgICAgdmFyIGluaXRzb2NrZXRwcm9ibGVtID0ge1xyXG4gICAgICAgICAgICAgICAgICAgIFwiaWRwcm9ibGVtXCI6cHJvYmxlbS5faWQsXHJcbiAgICAgICAgICAgICAgICAgICAgXCJuaWNrbmFtZVwiOiB2bS5uaWNrbmFtZVxyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgIFNvY2tldC5lbWl0KCdpbml0UHJvYmxlbScsIGluaXRzb2NrZXRwcm9ibGVtKTtcclxuICAgICAgICAgICAgICAgICRzdGF0ZS5nbygncHJvYmxlbS5zdGFrZWhvbGRlcnMnKTtcclxuICAgICAgICAgICAgfTtcclxuXHJcblxyXG4gICAgICAgICAgICB2bS5kb0xvZ291dCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIEF1dGgubG9nb3V0KCk7XHJcbiAgICAgICAgICAgICAgICAkc3RhdGUuZ28oJ2luaXQubG9naW4nKTtcclxuICAgICAgICAgICAgfTtcclxuXHJcblxyXG4gICAgICAgICAgICB2bS5uZXdQcm9ibGVtID0gZnVuY3Rpb24oZXYpIHtcclxuICAgICAgICAgICAgICAgICRtZERpYWxvZy5zaG93KHtcclxuICAgICAgICAgICAgICAgICAgICBjb250cm9sbGVyOiBEaWFsb2dDb250cm9sbGVyLFxyXG4gICAgICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAndmlld3MvcGFnZXMvbmV3cHJvYmxlbS5odG1sJyxcclxuICAgICAgICAgICAgICAgICAgICBwYXJlbnQ6IGFuZ3VsYXIuZWxlbWVudChkb2N1bWVudC5ib2R5KSxcclxuICAgICAgICAgICAgICAgICAgICB0YXJnZXRFdmVudDogZXYsXHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICBmdW5jdGlvbiBEaWFsb2dDb250cm9sbGVyKCRzY29wZSwgJG1kRGlhbG9nKSB7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuaGlkZSA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICRtZERpYWxvZy5oaWRlKCk7XHJcbiAgICAgICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgICAgICRzY29wZS5jYW5jZWwgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICAgICAkbWREaWFsb2cuY2FuY2VsKCk7XHJcbiAgICAgICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgICAgICRzY29wZS5hZGROZXdQcm9ibGVtID0gZnVuY3Rpb24ocHJvYmxlbSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZtLnN0YXJ0TmV3UHJvYmxlbShwcm9ibGVtKTtcclxuICAgICAgICAgICAgICAgICAgICAkbWREaWFsb2cuY2FuY2VsKCk7XHJcbiAgICAgICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgfVxyXG4gICAgfVxyXG59KSgpO1xyXG5cclxuIiwiKGZ1bmN0aW9uKCkge1xyXG4gICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgYW5ndWxhclxyXG4gICAgLm1vZHVsZSgnYXBwJylcclxuICAgIC5jb250cm9sbGVyKCdzaWdudXBDb250cm9sbGVyJywgc2lnbnVwQ29udHJvbGxlcik7XHJcbiAgICBzaWdudXBDb250cm9sbGVyLiRpbmplY3QgPSBbJyR0cmFuc2xhdGUnLCckd2luZG93Jywnc2lnbnVwU2VydmljZScsJyRzdGF0ZScsJ3RvYXN0QXBwJywnQXV0aFRva2VuJywnQXV0aCcsJyRmaWx0ZXInLCckc3RhdGVQYXJhbXMnXTtcclxuXHJcbiAgZnVuY3Rpb24gc2lnbnVwQ29udHJvbGxlcigkdHJhbnNsYXRlLCAkd2luZG93LCBzaWdudXBTZXJ2aWNlLCRzdGF0ZSx0b2FzdEFwcCxBdXRoVG9rZW4sQXV0aCwkZmlsdGVyLCRzdGF0ZVBhcmFtcyl7XHJcbiAgICAvKiBqc2hpbnQgdmFsaWR0aGlzOiB0cnVlICovXHJcbiAgICB2YXIgdm0gPSB0aGlzO1xyXG5cclxuICAgIHZtLm1lc3NhZ2UgID0gJyc7XHJcbiAgICB2bS5zYXZlICAgPSBzYXZlVXNlcjtcclxuICAgIHZtLnJlc2N1ZVBhc3N3b3JkID0gcmVzY3VlUGFzc3dvcmQ7XHJcbiAgICB2bS5jaGFuZ2VQYXNzd29yZCA9IGNoYW5nZVBhc3N3b3JkO1xyXG4gICAgdm0uc2V0TGFuZyA9IHNldExhbmc7XHJcbiAgICB2bS5sb2dpbkluUHJvZ3Jlc3MgPSBmYWxzZTtcclxuXHJcbiAgICBmdW5jdGlvbiBzYXZlVXNlcih1c2VyKSB7XHJcbiAgICAgIHNpZ251cFNlcnZpY2UuY3JlYXRlKHVzZXIpXHJcbiAgICAgICAgICAuc3VjY2VzcyhmdW5jdGlvbihkYXRhKSB7XHJcbiAgICAgICAgICAgIGlmKGRhdGEuc3VjY2Vzcykge1xyXG4gICAgICAgICAgICAgIEF1dGhUb2tlbi5zZXRUb2tlbihkYXRhLnRva2VuKTtcclxuICAgICAgICAgICAgICBBdXRoLmdldFVzZXIoKVxyXG4gICAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbihkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdm0udXNlciA9IGRhdGEuZGF0YTtcclxuICAgICAgICAgICAgICAgICAgICAgIHZtLmxvZ2luSW5Qcm9ncmVzcyA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgJHdpbmRvdy5sb2NhbFN0b3JhZ2Uuc2V0SXRlbShcInVzZXJlbWFpbFwiLHVzZXIuZW1haWwpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgJHdpbmRvdy5sb2NhbFN0b3JhZ2Uuc2V0SXRlbShcInVzZXJpZFwiLHVzZXIuaWQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgJHdpbmRvdy5sb2NhbFN0b3JhZ2Uuc2V0SXRlbShcIm5pY2tuYW1lXCIsdXNlci5uaWNrbmFtZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICB2bS5zZXRMYW5nKHVzZXIubGFuZ3VhZ2UpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRvYXN0QXBwLmVycm9yTWVzc2FnZSgkZmlsdGVyKCd0cmFuc2xhdGUnKSgnV0VMQ09NRV9TWVNURU0nKSArIFwiOiBcIiArIHZtLnVzZXIubmlja25hbWUpO1xyXG4gICAgICAgICAgICAgICAgICAgICRzdGF0ZS5nbygnc3RhcnRwcm9ibGVtJyk7XHJcbiAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgICAgdG9hc3RBcHAuZXJyb3JNZXNzYWdlKFwiRW1haWwgSsOhIGNhZGFzdHJhZG9cIik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH0pXHJcbiAgICAgICB9XHJcblxyXG4gICAgICBmdW5jdGlvbiBzZXRMYW5nKGxhbmdLZXkpIHtcclxuICAgICAgICAgICR0cmFuc2xhdGUudXNlKGxhbmdLZXkpO1xyXG4gICAgICB9O1xyXG5cclxuICAgICAgZnVuY3Rpb24gcmVzY3VlUGFzc3dvcmQodXNlckVtYWlsKXtcclxuICAgICAgICAgIHNpZ251cFNlcnZpY2UucmVzY3VlUGFzc3dvcmQodXNlckVtYWlsKVxyXG4gICAgICAgICAgICAgIC5zdWNjZXNzKGZ1bmN0aW9uKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coZGF0YSk7XHJcbiAgICAgICAgICAgICAgICAgIGlmKGRhdGEuc3VjY2Vzcykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgdG9hc3RBcHAuZXJyb3JNZXNzYWdlKFwiRW1haWwgY29tIGluc3RydcOnw7VlcyBlbnZpYWRvXCIpO1xyXG4gICAgICAgICAgICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgICAgICAgICAgIHRvYXN0QXBwLmVycm9yTWVzc2FnZShcIkVycm9yXCIpO1xyXG4gICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgfSlcclxuICAgICAgfVxyXG5cclxuICAgICAgZnVuY3Rpb24gY2hhbmdlUGFzc3dvcmQodXNlcil7XHJcbiAgICAgICAgICBzaWdudXBTZXJ2aWNlLmNoYW5nZVBhc3N3b3JkKHVzZXIpXHJcbiAgICAgICAgICAgICAgLnN1Y2Nlc3MoZnVuY3Rpb24oZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgICBpZihkYXRhLnN1Y2Nlc3MpIHtcclxuICAgICAgICAgICAgICAgICAgICAgIHRvYXN0QXBwLmVycm9yTWVzc2FnZShcIlNlbmhhIGFsdGVyYWRhIGNvbSBzdWNlc3NvLiBGYcOnYSBsb2dpbiBjb20gYSBub3ZhIHNlbmhhLlwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICRzdGF0ZS5nbygnaW5pdCcpO1xyXG4gICAgICAgICAgICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgICAgICAgICAgIHRvYXN0QXBwLmVycm9yTWVzc2FnZShcIkVycm9yXCIpO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgIH0pXHJcbiAgICAgIH1cclxuXHJcblxyXG4gIH1cclxufSkoKTsiLCIoZnVuY3Rpb24oKSB7XHJcbiAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICBhbmd1bGFyXHJcbiAgICAubW9kdWxlKCdhcHAnKVxyXG4gICAgLmZhY3RvcnkoJ3NpZ251cFNlcnZpY2UnLCBzaWdudXBTZXJ2aWNlKTtcclxuXHJcbiAgc2lnbnVwU2VydmljZS4kaW5qZWN0ID0gWyckaHR0cCcsJyRsb2NhdGlvbiddO1xyXG5cclxuICBmdW5jdGlvbiBzaWdudXBTZXJ2aWNlKCRodHRwLCRsb2NhdGlvbikge1xyXG5cclxuICAgIHZhciBBUElfUk9VVEVfVVNFUiA9ICcvYXBpL3NpZ251cC8nO1xyXG4gICAgdmFyIEFQSV9ST1VURV9SRVNDVUVQQVNTV09SRCA9ICcvYXBpL3Jlc2N1ZXBhc3N3ZC8nO1xyXG4gICAgdmFyIEFQSV9ST1VURV9TRVRORVdQQVNTV09SRCA9ICcvYXBpL3Jlc2N1ZXBhc3N3ZC9uZXdwYXNzd2QvJztcclxuXHJcblxyXG4gICAgdmFyIHNlcnZpY2UgPSB7XHJcbiAgICAgIGNyZWF0ZSAgICAgICAgIDogY3JlYXRlLFxyXG4gICAgICByZXNjdWVQYXNzd29yZCA6IHJlc2N1ZVBhc3N3b3JkLFxyXG4gICAgICBjaGFuZ2VQYXNzd29yZCA6IGNoYW5nZVBhc3N3b3JkXHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIHNlcnZpY2U7XHJcblxyXG4gICAgZnVuY3Rpb24gY3JlYXRlKGRhdGEpIHtcclxuICAgICAgICByZXR1cm4gJGh0dHAucG9zdChBUElfUk9VVEVfVVNFUiwgZGF0YSk7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gcmVzY3VlUGFzc3dvcmQoZGF0YSl7XHJcbiAgICAgIHJldHVybiAkaHR0cC5wb3N0KEFQSV9ST1VURV9SRVNDVUVQQVNTV09SRCwgZGF0YSk7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gY2hhbmdlUGFzc3dvcmQoZGF0YSl7XHJcbiAgICAgIHZhciBteXRva2VuVVJMID0gJGxvY2F0aW9uLnNlYXJjaCgpO1xyXG4gICAgICByZXR1cm4gJGh0dHAuZ2V0KEFQSV9ST1VURV9TRVRORVdQQVNTV09SRCArICc/bXl0b2tlbj0nICsgbXl0b2tlblVSTC5teXRva2VuKycmcGFzc3dvcmQ9JytkYXRhLnBhc3N3b3JkKTtcclxuICAgIH1cclxuICB9XHJcbn0pKCk7XHJcbiIsIi8qKlxyXG4gKiBDcmVhdGVkIGJ5IEpPU0VWQUxERVJMRUkgb24gMjUvMDYvMjAxNS5cclxuICovXHJcblxyXG4oZnVuY3Rpb24oKXtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuICAgIGFuZ3VsYXJcclxuICAgICAgICAubW9kdWxlKCdhcHAnKVxyXG4gICAgICAgIC5jb25maWcoYXBwQ29uZmlnKTtcclxuXHJcbiAgICBhcHBDb25maWcuJGluamVjdCA9IFsnJG1kVGhlbWluZ1Byb3ZpZGVyJywnJGxvY2F0aW9uUHJvdmlkZXInXTtcclxuXHJcbiAgICBmdW5jdGlvbiBhcHBDb25maWcgKCRtZFRoZW1pbmdQcm92aWRlciwkbG9jYXRpb25Qcm92aWRlcikge1xyXG5cclxuICAgICAgICAgLy8kbG9jYXRpb25Qcm92aWRlci5odG1sNU1vZGUodHJ1ZSk7XHJcbiAgICAgICAgdmFyIGN1c3RvbUdyZWVuTWFwID0gJG1kVGhlbWluZ1Byb3ZpZGVyLmV4dGVuZFBhbGV0dGUoJ3RlYWwnLCB7XHJcbiAgICAgICAgICAgICdjb250cmFzdERlZmF1bHRDb2xvcic6ICdsaWdodCcsXHJcbiAgICAgICAgICAgICdjb250cmFzdERhcmtDb2xvcnMnOiBbJzUwJ10sXHJcbiAgICAgICAgICAgICc1MCc6ICdFMEYyRjEnXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICRtZFRoZW1pbmdQcm92aWRlci5kZWZpbmVQYWxldHRlKCdjdXN0b21HcmVlbicsIGN1c3RvbUdyZWVuTWFwKTtcclxuICAgICAgICAkbWRUaGVtaW5nUHJvdmlkZXIudGhlbWUoJ2RlZmF1bHQnKVxyXG4gICAgICAgICAgICAucHJpbWFyeVBhbGV0dGUoJ2N1c3RvbUdyZWVuJywge1xyXG4gICAgICAgICAgICAgICAgJ2RlZmF1bHQnOiAnNTAwJyxcclxuICAgICAgICAgICAgICAgICdodWUtMSc6ICc1MCdcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLmFjY2VudFBhbGV0dGUoJ3RlYWwnKTtcclxuICAgICAgICAkbWRUaGVtaW5nUHJvdmlkZXIudGhlbWUoJ2lucHV0JywgJ2RlZmF1bHQnKVxyXG4gICAgICAgICAgICAucHJpbWFyeVBhbGV0dGUoJ2dyZWVuJyk7XHJcblxyXG4gICAgfVxyXG5cclxuXHJcbn0pKCk7IiwiXHJcbihmdW5jdGlvbigpe1xyXG5cdFwidXNlIHN0cmljdFwiO1xyXG5hbmd1bGFyLm1vZHVsZSgnYXV0aFNlcnZpY2UnLCBbXSlcclxuXHQuZmFjdG9yeSgnQXV0aCcsIGZ1bmN0aW9uKCRodHRwLCAkcSwgQXV0aFRva2VuKSB7XHJcblx0dmFyIGF1dGhGYWN0b3J5ID0ge307XHJcblx0YXV0aEZhY3RvcnkubG9naW4gPSBmdW5jdGlvbihlbWFpbCwgcGFzc3dvcmQpIHtcclxuXHRcdHJldHVybiAkaHR0cC5wb3N0KCcvYXBpL2xvZ2luJywge1xyXG5cdFx0XHRlbWFpbDogZW1haWwsXHJcblx0XHRcdHBhc3N3b3JkOiBwYXNzd29yZFxyXG5cdFx0fSlcclxuXHRcdC5zdWNjZXNzKGZ1bmN0aW9uKGRhdGEpIHtcclxuXHRcdFx0QXV0aFRva2VuLnNldFRva2VuKGRhdGEudG9rZW4pO1xyXG5cdFx0XHRyZXR1cm4gZGF0YTtcclxuXHRcdH0pO1xyXG5cdH07XHJcblxyXG5cdGF1dGhGYWN0b3J5LmxvZ291dCA9IGZ1bmN0aW9uKCkge1xyXG5cdFx0QXV0aFRva2VuLnNldFRva2VuKCk7XHJcblx0fTtcclxuXHJcblx0YXV0aEZhY3RvcnkuaXNMb2dnZWRJbiA9IGZ1bmN0aW9uKCkge1xyXG5cdFx0aWYoQXV0aFRva2VuLmdldFRva2VuKCkpIHtcclxuXHRcdFx0cmV0dXJuIHRydWU7XHJcblx0XHR9ZWxzZSB7XHJcblx0XHRcdHJldHVybiBmYWxzZTtcclxuXHRcdH1cclxuXHR9O1xyXG5cclxuXHRhdXRoRmFjdG9yeS5nZXRVc2VyID0gZnVuY3Rpb24oKSB7XHJcblx0XHRpZihBdXRoVG9rZW4uZ2V0VG9rZW4oKSkge1xyXG5cdFx0XHRyZXR1cm4gJGh0dHAuZ2V0KCcvYXBpL21lJyk7XHJcblx0XHR9XHJcblx0XHRlbHNlIHtcclxuXHRcdFx0cmV0dXJuICRxLnJlamVjdCh7bWVzc2FnZTogXCJVc2VyIGhhcyBubyB0b2tlblwifSk7XHJcblx0XHR9XHJcblxyXG5cdH07XHJcblx0cmV0dXJuIGF1dGhGYWN0b3J5O1xyXG59KVxyXG5cclxuXHJcbi5mYWN0b3J5KCdBdXRoVG9rZW4nLCBmdW5jdGlvbigkd2luZG93KSB7XHJcblxyXG5cdHZhciBhdXRoVG9rZW5GYWN0b3J5ID0ge307XHJcblxyXG5cdGF1dGhUb2tlbkZhY3RvcnkuZ2V0VG9rZW4gPSBmdW5jdGlvbigpIHtcclxuXHRcdHJldHVybiAkd2luZG93LmxvY2FsU3RvcmFnZS5nZXRJdGVtKCd0b2tlbicpO1xyXG5cdH07XHJcblxyXG5cdGF1dGhUb2tlbkZhY3Rvcnkuc2V0VG9rZW4gPSBmdW5jdGlvbih0b2tlbikge1xyXG5cclxuXHRcdGlmICh0b2tlbikge1xyXG5cdFx0XHQkd2luZG93LmxvY2FsU3RvcmFnZS5zZXRJdGVtKCd0b2tlbicsIHRva2VuKTtcclxuXHRcdH1cclxuXHRcdGVsc2V7XHJcblx0XHRcdCR3aW5kb3cubG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oJ3Rva2VuJyk7XHJcblx0fVxyXG5cclxuXHR9O1xyXG5cdHJldHVybiBhdXRoVG9rZW5GYWN0b3J5O1xyXG59KVxyXG5cclxuXHJcbi5mYWN0b3J5KCdBdXRoSW50ZXJjZXB0b3InLCBmdW5jdGlvbigkcSwgJGxvY2F0aW9uLCBBdXRoVG9rZW4pIHtcclxuXHR2YXIgaW50ZXJjZXB0b3JGYWN0b3J5ID0ge307XHJcblx0aW50ZXJjZXB0b3JGYWN0b3J5LnJlcXVlc3QgPSBmdW5jdGlvbihjb25maWcpIHtcclxuXHRcdHZhciB0b2tlbiA9IEF1dGhUb2tlbi5nZXRUb2tlbigpO1xyXG5cdFx0aWYodG9rZW4pIHtcclxuXHRcdFx0Y29uZmlnLmhlYWRlcnNbJ3gtYWNjZXNzLXRva2VuJ10gPSB0b2tlbjtcclxuXHRcdH1cclxuXHRcdHJldHVybiBjb25maWc7XHJcblx0fTtcclxuXHRyZXR1cm4gaW50ZXJjZXB0b3JGYWN0b3J5O1xyXG59KTtcclxufSkoKTsiLCJcclxuYW5ndWxhci5tb2R1bGUoJ0Ryb3BEU0MnLFtdKVxyXG4gICAgLmRpcmVjdGl2ZSgnZHJhZ2dhYmxlJywgZnVuY3Rpb24oJGRvY3VtZW50LFNvY2tldCkge1xyXG4gICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICByZXN0cmljdDogJ0EnLFxyXG4gICAgICAgICAgICByZXBsYWNlOiB0cnVlLFxyXG4gICAgICAgICAgICBsaW5rOiBmdW5jdGlvbihzY29wZSwgZWxlbWVudCwgYXR0cikge1xyXG4gICAgICAgICAgICAgICAgICBlbGVtZW50Lm9uKCdtb3VzZWRvd24nLCBmdW5jdGlvbihldmVudCkge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgIGlmKGV2ZW50LnRhcmdldC5pZC5zdWJzdHJpbmcoMCwxMSkgPT0gXCJzdGFrZWhvbGRlclwiKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBQcmV2ZW50IGRlZmF1bHQgZHJhZ2dpbmcgb2Ygc2VsZWN0ZWQgY29udGVudFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgJGRvY3VtZW50LmJpbmQoJ21vdXNlbW92ZScsIG1vdXNlbW92ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgJGRvY3VtZW50LmJpbmQoJ21vdXNldXAnLCBtb3VzZXVwKTtcclxuICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICBmdW5jdGlvbiBtb3VzZW1vdmUoZXZlbnQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgIHZhciBpZF9kaXYgPSBldmVudC50YXJnZXQuaWQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICBpZiAoaWRfZGl2ID09ICdzdmcnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgaWRfZGl2ID0gXCJcIjtcclxuICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICBzY29wZS5zdGFrZWhvbGRlci5vbmlvbmxheWVyID0gaWRfZGl2O1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgIHkgPSBldmVudC5wYWdlWTtcclxuICAgICAgICAgICAgICAgICAgICAgIHggPSBldmVudC5wYWdlWDtcclxuICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQuY3NzKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICB0b3A6IHkgKyAncHgnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGxlZnQ6ICB4ICsgJ3B4J1xyXG4gICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAvKlNvY2tldC5vbignb25Ccm9hZGNhc3RPbmlvblBvc2l0aW9uJywgZnVuY3Rpb24gKHN0YWtlaG9sZGVyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5jc3Moe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b3A6IHN0YWtlaG9sZGVyLnksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxlZnQ6ICBzdGFrZWhvbGRlci54XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICB9KTsqL1xyXG4gICAgICAgICAgICAgICAgICAgICAgc2NvcGUuc3Rha2Vob2xkZXIueCA9IHggKyAncHgnO1xyXG4gICAgICAgICAgICAgICAgICAgICAgc2NvcGUuc3Rha2Vob2xkZXIueSA9IHkgKyAncHgnO1xyXG4gICAgICAgICAgICAgICAgICAgICAgLy9Tb2NrZXQuZW1pdCgnYnJvYWRjYXN0T25pb25Qb3NpdGlvbicsIHNjb3BlLnN0YWtlaG9sZGVyKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAgICAgICBmdW5jdGlvbiBtb3VzZXVwKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgJGRvY3VtZW50LnVuYmluZCgnbW91c2Vtb3ZlJywgbW91c2Vtb3ZlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICRkb2N1bWVudC51bmJpbmQoJ21vdXNldXAnLCBtb3VzZXVwKTtcclxuICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICB9KTsiLCIvKipcclxuICogQ3JlYXRlZCBieSBKT1NFVkFMREVSTEVJIG9uIDI1LzA2LzIwMTUuXHJcbiAqL1xyXG5cclxuKGZ1bmN0aW9uKCkge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICAgIGFuZ3VsYXIubW9kdWxlKCdhcHAnKVxyXG4gICAgICAgLmNvbnRyb2xsZXIoJ2xvZ2luQ29udHJvbGxlcicsbG9naW5Db250cm9sbGVyKTtcclxuXHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGxvZ2luQ29udHJvbGxlcigkdHJhbnNsYXRlLCAkcm9vdFNjb3BlLCAkc3RhdGUsIEF1dGgsICR3aW5kb3csICRmaWx0ZXIsIHRvYXN0QXBwKSB7XHJcbiAgICAgICAgICAgIHZhciB2bSA9IHRoaXM7XHJcbiAgICAgICAgICAgIHZtLmluUHJvZ3Jlc3MgPSBmYWxzZTtcclxuXHJcbiAgICAgICAgICAgIHZtLnNldExhbmcgPSBmdW5jdGlvbihsYW5nS2V5KSB7XHJcbiAgICAgICAgICAgICAgICAgJHRyYW5zbGF0ZS51c2UobGFuZ0tleSk7XHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICB2bS5sb2dnZWRJbiA9IEF1dGguaXNMb2dnZWRJbigpO1xyXG4gICAgICAgICAgICAkcm9vdFNjb3BlLiRvbignJHJvdXRlQ2hhbmdlU3RhcnQnLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgIHZtLmxvZ2dlZEluID0gQXV0aC5pc0xvZ2dlZEluKCk7XHJcbiAgICAgICAgICAgICAgICBBdXRoLmdldFVzZXIoKVxyXG4gICAgICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdm0udXNlciA9IGRhdGEuZGF0YTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICB2bS5kb0xvZ2luID0gZnVuY3Rpb24odXNlcikge1xyXG4gICAgICAgICAgICAgICAgdm0uaW5Qcm9ncmVzcyA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICB2bS5lcnJvciA9ICcnO1xyXG4gICAgICAgICAgICAgICAgQXV0aC5sb2dpbih1c2VyLmVtYWlsLCB1c2VyLnBhc3N3b3JkKVxyXG4gICAgICAgICAgICAgICAgICAgIC5zdWNjZXNzKGZ1bmN0aW9uKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJHdpbmRvdy5sb2NhbFN0b3JhZ2Uuc2V0SXRlbShcInVzZXJlbWFpbFwiLGRhdGEuZW1haWwpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkd2luZG93LmxvY2FsU3RvcmFnZS5zZXRJdGVtKFwidXNlcmlkXCIsZGF0YS5pZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICR3aW5kb3cubG9jYWxTdG9yYWdlLnNldEl0ZW0oXCJuaWNrbmFtZVwiLGRhdGEubmlja25hbWUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2bS5zZXRMYW5nKGRhdGEubGFuZ3VhZ2UpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2bS5pblByb2dyZXNzID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIEF1dGguZ2V0VXNlcigpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbihkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdm0udXNlciA9IGRhdGEuZGF0YTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b2FzdEFwcC5lcnJvck1lc3NhZ2UoJGZpbHRlcigndHJhbnNsYXRlJykoJ1dFTENPTUVfU1lTVEVNJykgKyBcIjogXCIgKyB2bS51c2VyLm5pY2tuYW1lKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZihkYXRhLnN1Y2Nlc3MpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzdGF0ZS5nbygnc3RhcnRwcm9ibGVtJyk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdm0uZXJyb3IgPSBkYXRhLm1lc3NhZ2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIHZtLmRvTG9nb3V0ID0gZnVuY3Rpb24oKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgQXV0aC5sb2dvdXQoKTtcclxuICAgICAgICAgICAgICAgICRzdGF0ZSgnaW5pdCcpO1xyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICB9XHJcblxyXG59KSgpO1xyXG4iLCIvKipcclxuICogQ3JlYXRlZCBieSBKT1NFVkFMREVSTEVJIG9uIDIxLzA2LzIwMTUuXHJcbiAqL1xyXG5cclxuYW5ndWxhci5tb2R1bGUoJ2FwcCcpLlxyXG4gICAgc2VydmljZSgnU29ja2V0JyxcclxuICAgIFsnJGxvY2F0aW9uJywgJyR0aW1lb3V0JyxcclxuICAgIGZ1bmN0aW9uKCRsb2NhdGlvbiwgJHRpbWVvdXQpIHtcclxuICAgICAgICBpZiAodHJ1ZSkge1xyXG4gICAgICAgICAgICB0aGlzLnNvY2tldCA9IGlvKCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgJGxvY2F0aW9uLnBhdGgoJy8nKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5vbiA9IGZ1bmN0aW9uKGV2ZW50TmFtZSwgY2FsbGJhY2spIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuc29ja2V0KSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNvY2tldC5vbihldmVudE5hbWUsIGZ1bmN0aW9uKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgICAgICAkdGltZW91dChmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2soZGF0YSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgdGhpcy5lbWl0ID0gZnVuY3Rpb24oZXZlbnROYW1lLCBkYXRhKSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLnNvY2tldCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zb2NrZXQuZW1pdChldmVudE5hbWUsIGRhdGEpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgdGhpcy5yZW1vdmVMaXN0ZW5lciA9IGZ1bmN0aW9uKGV2ZW50TmFtZSkge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5zb2NrZXQpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuc29ja2V0LnJlbW92ZUxpc3RlbmVyKGV2ZW50TmFtZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgfVxyXG5dKTtcclxuIl0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9